{"version":3,"sources":["Activity.js","AssemblyField.js","BarChartItem.js","BusinessRule.js","ButtonPartial.js","CatchScope.js","ChildEntityListView.js","ComboBox.js","ConstantField.js","CorrelationType.js","CreateEntityActivity.js","DataGridItem.js","DecisionActivity.js","DelayActivity.js","EntityChart.js","EntityDefinition.js","EntityLookupElement.js","EntityOperation.js","EntityView.js","ExecutedActivity.js","Filter.js","FormElement.js","HtmlElement.js","IFormTemplate.js","IntervalSchedule.js","LineChartItem.js","ListenActivity.js","ListView.js","ListViewColumn.js","MappingActivity.js","Member.js","MethodArg.js","NotificationActivity.js","ParallelActivity.js","ReceiveActivity.js","report.js","ReportDelivery.js","Rule.js","ScheduledTriggerActivity.js","ScreenActivity.js","SearchDefinition.js","SetterAction.js","SetterActionChild.js","StartWorkflowAction.js","Trigger.js","TryScope.js","UpdateEntityActivity.js","Variable.js","ViewColumn.js","WorkflowDefinition.js","WorkflowDesigner.js","WorkflowTriggerMap.js"],"names":["bespoke","sph","domain","ActivityPartial","hasError","require","ko","observable","breakpoint","hit","errors","observableArray","AssemblyFieldPartial","system","objectbuilders","addParameter","this","MethodArgCollection","push","MethodArg","guid","removeParameter","p","self","remove","BarChartItemPartial","addSeries","ChartSeriesCollection","ChartSeries","removeSeries","series","BusinessRulePartial","addFilter","br","Rule","Left","Name","Right","FilterCollection","removeFilter","addRule","RuleCollection","removeRule","ButtonPartial","editCommand","w","window","open","screen","height","width","wdw","init","code","unwrap","Command","saved","close","attachEvent","CatchScopePartial","ChildEntityListViewPartial","model","addViewColumn","ViewColumnCollection","ViewColumn","WebId","Header","removeViewColumn","obj","addSort","SortCollection","Sort","removeSort","editViewColumn","vc","clone","mapping","fromJS","toJS","dialog","app2","column","entity","Entity","showDialog","done","result","g","name","ComboBoxPartial","addItem","item","ComboBoxItem","ComboBoxItemCollection","removeItem","ConstantFieldPartial","vm","Type","Value","subscribe","v","CorrelationTypePartial","removeCorrelationProperty","prop","CorrelationPropertyCollection","addCorrelationProperty","CorrelationProperty","CreateEntityActivityPartial","addPropertyMapping","type","PropertyMappingCollection","removePropertyMapping","DataGridItemPartial","addDataGridGroupDefinition","DataGridGroupDefinitionCollection","DataGridGroupDefinition","removeDataGridGroupDefinition","addColumn","DataGridColumnCollection","DataGridColumn","removeColumn","DecisionActivityPartial","addBranch","DecisionBranchCollection","DecisionBranch","removeBranch","branch","multipleEndPoints","DelayActivityPartial","isAsync","EntityChartPartial","context","datacontext","pin","IsDashboardItem","tcs","$","Deferred","post","toJSON","resolve","promise","unpin","EntityDefinitionPartial","app","addMember","MemberCollection","Member","Boost","removeMember","floor","addEntityOperation","EntityOperationCollection","EntityOperation","save","then","success","removeEntityOperation","operation","showMessage","dialogResult","call","editMember","member","BlockCollection","replace","addBusinessRule","BusinessRule","rule","BusinessRuleCollection","editBusinessRule","toObservable","removeBusinessRule","editMemberMap","building","console","log","BuildingId","MemberPlanStoreId","spatialStoreId","EntityLookupElementPartial","editDisplayTemplate","DisplayTemplate","editColumns","LookupColumnCollection","selectedMembers","EntityOperationPartial","removeChildAction","child","SetterActionChildCollection","addChildAction","SetterActionChild","Field","EntityViewPartial","addConditionalFormatting","ConditionalFormattingCollection","ConditionalFormatting","removeConditionalFormatting","cf","addRouteParameter","RouteParameterCollection","RouteParameter","removeRouteParameter","Filter","ExecutedActivityPartial","FilterPartial","showFieldDialog","accessor","field","path","addField","toLowerCase","editField","fieldType","$type","pattern","exec","FormElementPartial","HtmlElementPartial","editHtml","Text","FormTemplatePartial","IntervalSchedulePartial","icon","LineChartItemPartial","ListenActivityPartial","ListenBranch","ListenBranchCollection","ListViewPartial","addListViewColumn","ListViewColumn","input","Path","Label","Input","isSelected","ListViewColumnCollection","removeListViewColumn","_","each","ListViewColumnPartial","pattern1","input1","name1","icon1","err","c","MappingActivityPartial","addMappingSource","MappingSourceCollection","removeMappingSource","MemberPartial","editPermission","FieldPermissionCollection","MethodArgPartial","NotificationActivityPartial","From","ParallelActivityPartial","ParallelBranchCollection","ParallelBranch","ReceiveActivityPartial","DailySchedulePartial","WeeklySchedulePartial","MonthlySchedulePartial","dateOptions","range","ReportDeliveryPartial","IntervalScheduleContainer","RulePartial","ScheduledTriggerActivityPartial","b","ScreenActivityPartial","canStart","SearchDefinitionPartial","SetterActionPartial","SetterActionChildPartial","StartWorkflowActionPartial","removeMapping","map","WorkflowTriggerMapCollection","addMapping","WorkflowTriggerMap","editMapping","TriggerPartial","removeAction","action","ActionCollection","addAction","t","error","Title","n","value","trigger","IsActive","editAction","addReferencedAssembly","selectedAssemblies","ReferencedAssemblyCollection","editReferencedAssembly","dll","alert","removeReferencedAssembly","TryScopePartial","addCatchScope","wd","self2","catchScope","CatchScope","CatchScopeCollection","editCatchScope","wdOutside","removeCatchScope","ActivityCollection","forEach","act","Id","UpdateEntityActivityPartial","VariablePartial","ViewColumnPartial","removeIconCssClass","IconCssClass","removeIconStoreId","IconStoreId","WorkflowDefinitionPartial","isBusy","elementNameOptions","removeActivity","activity","setStartActivity","IsInitiator","addActivity","editActivity","TypeName","hasOwnProperty","addVariable","variable","VariableDefinitionCollection","editVariable","variableType","removeVariable","addCorrelationType","correlationType","CorrelationType","CorrelationTypeCollection","editCorrelationType","removeCorrelationType","addCorrelationSet","correlationSet","CorrelationSet","CorrelationSetCollection","editCorrelationSet","removeCorrelationSet","addTryScope","tryScope","TryScope","TryScopeCollection","editTryScope","removeTryScope","loadSchema","storeId","id","SchemaStoreId","get","xsdElements","WorkflowDesignerPartial","WorkflowTriggerMapPartial","prototype","FieldContainer"],"mappings":"AAOA,GAAIA,SAAUA,WACdA,SAAQC,IAAMD,QAAQC,QACtBD,QAAQC,IAAIC,OAASF,QAAQC,IAAIC,WAGjCF,QAAQC,IAAIC,OAAOC,gBAAkB,WAEjC,GACIC,IADSC,QAAQ,mBACNC,GAAGC,cACdC,EAAaF,GAAGC,YAAW,GAC3BE,EAAMH,GAAGC,YAAW,GACpBG,EAASJ,GAAGK,iBAChB,QACIH,WAAYA,EACZC,IAAKA,EACLL,SAAUA,EACVM,OAAQA;AChBhBV,QAAQC,IAAIC,OAAOU,qBAAuB,WACtC,GAAIC,GAASR,QAAQS,eAAeD,QAChCE,EAAe,WACXC,KAAKC,oBAAoBC,KAAK,GAAIlB,SAAQC,IAAIC,OAAOiB,UAAUN,EAAOO,UAE1EC,EAAkB,SAASC,GACvB,GAAIC,GAAOP,IACX,OAAO,YACHO,EAAKN,oBAAoBO,OAAOF,IAG5C,QACIP,aAAcA,EACdM,gBAAiBA;ACZzBrB,QAAQC,IAAIC,OAAOuB,oBAAsB,WACrC,GAAIZ,GAASR,QAAQ,mBACjBqB,EAAY,WACRV,KAAKW,sBAAsBT,KAAK,GAAIlB,SAAQC,IAAIC,OAAO0B,YAAYf,EAAOO,UAE9ES,EAAe,SAAUC,GACrB,GAAIP,GAAOP,IACX,OAAO,YACHO,EAAKI,sBAAsBH,OAAOM,IAI9C,QACIJ,UAAWA,EACXG,aAAcA;ACVtB7B,QAAQC,IAAIC,OAAO6B,oBAAsB,WAErC,GAAIlB,GAASR,QAAQ,mBACjB2B,EAAY,WACR,GAAIT,GAAOP,KACPiB,EAAK,GAAIjC,SAAQC,IAAIC,OAAOgC,KAAKrB,EAAOO,OAE5Ca,GAAGE,MAAOC,KAAM9B,GAAGC,WAAW,aAC9B0B,EAAGI,OAAQD,KAAM9B,GAAGC,WAAW,aAE/BgB,EAAKe,iBAAiBpB,KAAKe,IAG/BM,EAAe,SAAUN,GACrB,GAAIV,GAAOP,IACX,OAAO,YACHO,EAAKe,iBAAiBd,OAAOS,KAGrCO,EAAU,WACN,GAAIjB,GAAOP,KACPiB,EAAK,GAAIjC,SAAQC,IAAIC,OAAOgC,KAAKrB,EAAOO,OAE5Ca,GAAGE,MAAOC,KAAM9B,GAAGC,WAAW,aAC9B0B,EAAGI,OAAQD,KAAM9B,GAAGC,WAAW,aAE/BgB,EAAKkB,eAAevB,KAAKe,IAG7BS,EAAa,SAAUT,GACnB,GAAIV,GAAOP,IACX,OAAO,YACHO,EAAKkB,eAAejB,OAAOS,IAMvC,QACID,UAAWA,EACXO,aAAcA,EACdC,QAASA,EACTE,WAAYA;AC5CpB1C,QAAQC,IAAIC,OAAOyC,cAAgB,WAE/B,GAAIC,GAAc,WACd,GAAIrB,GAAOP,KACP6B,EAAIC,OAAOC,KAAK,kCAAmC,SAAU,UAAYC,OAAOC,OAAS,UAAYD,OAAOE,MAAQ,wCACpHC,EAAMN,EAAEC,QAAUD,EAClBO,EAAO,WACHD,EAAIE,KAAO/C,GAAGgD,OAAO/B,EAAKgC,SACrBV,EAAEQ,OACHR,EAAEQ,KAAO,2BAEbF,EAAIK,MAAQ,SAAUH,EAAMI,GACxBlC,EAAKgC,QAAQF,GACTI,GACAZ,EAAEY,SAIdN,GAAIO,YACJP,EAAIO,YAAY,SAAUN,GAE1BA,IAGR,QACIR,YAAaA;ACnCrB5C,QAAQC,IAAIC,OAAOyD,kBAAoB;ACWvC3D,QAAQC,IAAIC,OAAO0D,2BAA6B,SAAUC,GAEtD,GAAIhD,GAASR,QAAQ,mBACjByD,EAAgB,WACZ9C,KAAK+C,qBAAqB7C,KAAK,GAAIlB,SAAQC,IAAIC,OAAO8D,YAAaC,MAAOpD,EAAOO,OAAO8C,OAAQ,mBAEpGC,EAAmB,SAAUC,GACzB,GAAI7C,GAAOP,IACX,OAAO,YACHO,EAAKwC,qBAAqBvC,OAAO4C,KAIzCC,EAAU,WACNrD,KAAKsD,eAAepD,KAAK,GAAIlB,SAAQC,IAAIC,OAAOqE,KAAK1D,EAAOO,UAEhEoD,EAAa,SAAUJ,GACnB,GAAI7C,GAAOP,IACX,OAAO,YACHO,EAAK+C,eAAe9C,OAAO4C,KAIvCK,EAAiB,SAAUC,GACvB,MAAO,YACH,GAAIC,GAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKJ,GAE9CrE,UAAS,gCAAiC,gBAAiB,SAAU0E,EAAQC,GACzED,EAAOE,OAAON,GACdI,EAAOG,OAAOrB,EAAMsB,UAEpBH,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACZ,GAAKA,GACU,OAAXA,EACA,IAAK,GAAIC,KAAKb,GACW,kBAAVA,GAAGa,IAAoC,eAAfb,EAAGa,GAAGC,KACrCd,EAAGa,GAAGjF,GAAGgD,OAAOqB,EAAMY,KAEtBb,EAAGa,GAAKZ,EAAMY,QAU9C,QACIlB,QAASA,EACTG,WAAYA,EACZV,cAAeA,EACfW,eAAgBA,EAChBN,iBAAkBA;ACzD1BnE,QAAQC,IAAIC,OAAOuF,gBAAkB,WACjC,GAAI5E,GAASR,QAAQ,mBACjBqF,EAAU,WACN,GAAInE,GAAOP,KACP2E,EAAO,GAAI3F,SAAQC,IAAIC,OAAO0F,aAAa/E,EAAOO,OACtDG,GAAKsE,uBAAuB3E,KAAKyE,IAGrCG,EAAa,SAAUH,GACnB,GAAIpE,GAAOP,IACX,OAAO,YACHO,EAAKsE,uBAAuBrE,OAAOmE,IAG/C,QACID,QAASA,EACTI,WAAYA;ACpBpB9F,QAAQC,IAAIC,OAAO6F,qBAAuB,SAAUlC,GAEhD,GAAImC,IACAC,KAAM3F,GAAGC,aACT2F,MAAO5F,GAAGC,aAQd,OALAyF,GAAGE,MAAMC,UAAU,SAASC,GACnB9F,GAAGgD,OAAOO,EAAMzB,OACjByB,EAAMzB,KAAKgE,KAGZJ;ACRXhG,QAAQC,IAAIC,OAAOmG,uBAAyB,WAExC,GAAIxF,GAASR,QAAQ,mBACjBiG,EAA4B,SAAUC,GAClC,GAAIhF,GAAOP,IACX,OAAO,YACHO,EAAKiF,8BAA8BhF,OAAO+E,KAGlDE,EAAyB,WACrBzF,KAAKwF,8BAA8BtF,KAAK,GAAIlB,SAAQC,IAAIC,OAAOwG,oBAAoB7F,EAAOO,SAElG,QACIkF,0BAA2BA,EAC3BG,uBAAwBA;ACZhCzG,QAAQC,IAAIC,OAAOyG,4BAA8B,WAC7C,GAAI9F,GAASR,QAAQ,mBACjBuG,EAAqB,SAAUC,GAC3B,GAAItF,GAAOP,IACX,OAAO,YACH,GAAI4D,GAAU,GAAI5E,SAAQC,IAAIC,OAAO2G,EAAO,WAAWhG,EAAOO,OAC9DG,GAAKuF,0BAA0B5F,KAAK0D,KAG5CmC,EAAwB,SAAUnC,GAC9B,GAAIrD,GAAOP,IACX,OAAO,YACHO,EAAKuF,0BAA0BtF,OAAOoD,IAGlD,QACIgC,mBAAoBA,EACpBG,sBAAuBA;AClB/B/G,QAAQC,IAAIC,OAAO8G,oBAAsB,WAGrC,GAAInG,GAASR,QAAQ,mBACjB4G,EAA6B,WACzBjG,KAAKkG,kCAAkChG,KAAK,GAAIlB,SAAQC,IAAIC,OAAOiH,wBAAwBtG,EAAOO,UAEtGgG,EAAgC,SAAUhD,GACtC,GAAI7C,GAAOP,IACX,OAAO,YACHO,EAAK2F,kCAAkC1F,OAAO4C,KAItDiD,EAAY,WACR,GAAI9F,GAAOP,IACXO,GAAK+F,yBAAyBpG,KAAK,GAAIlB,SAAQC,IAAIC,OAAOqH,eAAe1G,EAAOO,UAEpFoG,EAAe,SAAUvC,GACrB,GAAI1D,GAAOP,IACX,OAAO,YACHO,EAAK+F,yBAAyB9F,OAAOyD,IAIjD,QACIoC,UAAWA,EACXG,aAAcA,EACdP,2BAA4BA,EAC5BG,8BAA+BA;AC3BvCpH,QAAQC,IAAIC,OAAOuH,wBAA0B,WACzC,GAAI5G,GAASR,QAAQ,mBACjBqH,EAAY,WACR1G,KAAK2G,yBAAyBzG,KAAK,GAAIlB,SAAQC,IAAIC,OAAO0H,eAAe/G,EAAOO,UAEpFyG,EAAe,SAASC,GACpB,GAAIvG,GAAOP,IACX,OAAO,YACHO,EAAKoG,yBAAyBnG,OAAOsG,KAG7CC,EAAoB,WAChB,MAAO/G,MAAK2G,2BAEpB,QACID,UAAWA,EACXG,aAAcA,EACdE,kBAAmBA;ACrB3B/H,QAAQC,IAAIC,OAAO8H,qBAAuB,WAEtC,OACIC,SAAQ;ACThBjI,QAAQC,IAAIC,OAAOgI,mBAAqB,SAAUrE,GAC9C,GAAIsE,GAAU9H,QAAQS,eAAesH,aACjCC,EAAM,WACmC,kBAA1BxE,GAAMyE,gBACbzE,EAAMyE,iBAAgB,GAEtBzE,EAAMyE,gBAAkBhI,GAAGC,YAAW,EAG1C,IAAIgI,GAAM,GAAIC,GAAEC,QAKhB,OAHAN,GAAQO,KAAKpI,GAAGsE,QAAQ+D,OAAO9E,GAAQ,yBAClCwB,KAAKkD,EAAIK,SAEPL,EAAIM,WAEfC,EAAQ,WACiC,kBAA1BjF,GAAMyE,gBACbzE,EAAMyE,iBAAgB,GAEtBzE,EAAMyE,gBAAkBhI,GAAGC,YAAW,EAG1C,IAAIgI,GAAM,GAAIC,GAAEC,QAKhB,OAHAN,GAAQO,KAAKpI,GAAGsE,QAAQ+D,OAAO9E,GAAQ,yBAClCwB,KAAKkD,EAAIK,SAEPL,EAAIM,UAEnB,QACIR,IAAKA,EACLS,MAAQA;ACzBhB9I,QAAQC,IAAIC,OAAO6I,wBAA0B,WACzC,GAAIlI,GAASR,QAAQ,mBACjB2I,EAAM3I,QAAQ,gBACd8H,EAAU9H,QAAQS,eAAesH,aACjCa,EAAY,WACRjI,KAAKkI,iBAAiBhI,KAAK,GAAIlB,SAAQC,IAAIC,OAAOiJ,QAC9ClF,MAAOpD,EAAOO,OACdgI,MAAO,MAGfC,EAAe,SAAUC,GACrB,GAAI/H,GAAOP,IACX,OAAO,YACHO,EAAK2H,iBAAiB1H,OAAO8H,KAGrCC,EAAqB,WACjBvI,KAAKwI,0BAA0BtI,KAAK,GAAIlB,SAAQC,IAAIC,OAAOuJ,iBACvDxF,MAAOpD,EAAOO,WAEnBsI,EAAO,WACN,GAAInI,GAAOP,IACXmH,GAAQO,KAAKpI,GAAGqI,OAAOpH,GAAO,sBAC7BoI,KAAK,SAAUrE,GACRA,EAAOsE,WAInBC,EAAwB,SAAUC,GAC9B,GAAIvI,GAAOP,IACX,OAAO,YACH,GAAIuH,GAAM,GAAIC,GAAEC,QAShB,OARAO,GAAIe,YAAY,8IAA+I,sBAAuB,MAAO,OACxL1E,KAAK,SAAU2E,GACS,QAAjBA,IACAzI,EAAKiI,0BAA0BhI,OAAOsI,GACtCJ,EAAKO,KAAK1I,MAIfgH,EAAIM,YAGnBqB,EAAa,SAAUC,GACnB,GAAI5I,GAAOP,IACX,OAAO,YACHX,SAAS,2BAA4B,gBAAiB,SAAU0E,EAAQiE,GACpE,GAAIrE,GAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKqF,GAC9CpF,GAAOoF,OAAOxF,GACdqE,EAAI5D,WAAWL,GACVM,KAAK,SAAUC,GACPA,GACS,MAAVA,GACA/D,EAAK6I,gBAAgBC,QAAQF,EAAQxF,SAM7D2F,EAAkB,WACd,GAAIrI,GAAK,GAAIjC,SAAQC,IAAIC,OAAOqK,cAAetG,MAAOpD,EAAOO,SACzDG,EAAOP,IAEXX,UAAS,kCAAmC,gBAAiB,SAAU0E,EAAQiE,GAC3EjE,EAAOyF,KAAKvI,GACZ+G,EAAI5D,WAAWL,GACVM,KAAK,SAAUC,GACPA,GACS,MAAVA,GACA/D,EAAKkJ,uBAAuBvJ,KAAKe,QAMrDyI,EAAmB,SAAUF,GACzB,GAAIjJ,GAAOP,IACX,OAAO,YACHX,SAAS,kCAAmC,gBAAiB,SAAU0E,EAAQiE,GAC3E,GAAIrE,GAAQwD,EAAQwC,aAAarK,GAAGsE,QAAQE,KAAK0F,GACjDzF,GAAOyF,KAAK7F,GACZqE,EAAI5D,WAAWL,GACVM,KAAK,SAAUC,GACPA,GACS,MAAVA,GACA/D,EAAKkJ,uBAAuBJ,QAAQG,EAAM7F,SAMlEiG,EAAqB,SAAUJ,GAC3B,GAAIjJ,GAAOP,IACX,OAAO,YACHO,EAAKkJ,uBAAuBjJ,OAAOgJ,KAG3CK,EAAgB,SAAUV,GACtB,GAAIW,GAAW9J,IACf,OAAO,YACH+J,QAAQC,IAAI,YAAaF,GACzBC,QAAQC,IAAI,cAAeb,GAC3B9J,SAAS,wBAAyB,gBAAiB,SAAU0E,EAAQiE,GACjEjE,EAAO3B,KAAK0H,EAASG,aAAcd,EAAOe,qBAC1ClC,EAAI5D,WAAWL,GACVM,KAAK,SAAUC,GACE,MAAVA,GACA6E,EAAOe,kBAAkBnG,EAAOoG,uBAQ5D,QACI5B,mBAAoBA,EACpBM,sBAAuBA,EACvBZ,UAAWA,EACXiB,WAAYA,EACZb,aAAcA,EACdiB,gBAAiBA,EACjBI,iBAAkBA,EAClBE,mBAAoBA,EACpBC,cAAeA;AC1HvB7K,QAAQC,IAAIC,OAAOkL,2BAA6B,WAE5C,GAAIC,GAAsB,WACtB,GAAI9J,GAAOP,KACP6B,EAAIC,OAAOC,KAAK,kCAAmC,SAAU,UAAYC,OAAOC,OAAS,UAAYD,OAAOE,MAAQ,wCACpHC,EAAMN,EAAEC,QAAUD,EAClBO,EAAO,WACHD,EAAIE,KAAO/C,GAAGgD,OAAO/B,EAAKgC,SACrBV,EAAEQ,OACHR,EAAEQ,KAAO,2BAEbF,EAAIK,MAAQ,SAAUH,EAAMI,GACxBlC,EAAK+J,gBAAgBjI,GACjBI,GACAZ,EAAEY,SAIdN,GAAIO,YACJP,EAAIO,YAAY,SAAUN,GAE1BA,KAGJmI,EAAc,WACV,GAAIhK,GAAOP,IACXX,UAAS,qCAAsC,gBAAiB,SAAU0E,EAAQC,GAC9ED,EAAOG,OAAO3D,EAAK4D,UACnBH,EAAKI,WAAWL,EAAOxD,EAAK4D,UACvBE,KAAK,SAAUC,GACPA,GACU,OAAXA,GACA/D,EAAKiK,uBAAuBzG,EAAO0G,uBAM3D,QACIJ,oBAAqBA,EACrBE,YAAaA;ACrCrBvL,QAAQC,IAAIC,OAAOwL,uBAAyB,WAExC,GAAI7K,GAASR,QAAQ,mBACjBsL,EAAoB,SAAUC,GAC1B,GAAIrK,GAAOP,IACX,OAAO,YACHO,EAAKsK,4BAA4BrK,OAAOoK,KAGhDE,EAAiB,WACb,GAAIF,GAAQ,GAAI5L,SAAQC,IAAIC,OAAO6L,kBAAkBlL,EAAOO,OAC5DwK,GAAMI,OAAQ5J,KAAM9B,GAAGC,WAAW,aAClCS,KAAK6K,4BAA4B3K,KAAK0K,IAG1C5F,GACA8F,eAAgBA,EAChBH,kBAAmBA,EAIvB,OAAO3F;AC1BXhG,QAAQC,IAAIC,OAAO+L,kBAAoB,WAGnC,GAAIpL,GAASR,QAAQ,mBACjB6L,EAA2B,WACvBlL,KAAKmL,gCAAgCjL,KAAK,GAAIlB,SAAQC,IAAIC,OAAOkM,sBAAsBvL,EAAOO,UAElGiL,EAA8B,SAAUC,GACpC,GAAI/K,GAAOP,IACX,OAAO,YACHO,EAAK4K,gCAAgC3K,OAAO8K,KAIpDC,EAAoB,WAChBvL,KAAKwL,yBAAyBtL,KAAK,GAAIlB,SAAQC,IAAIC,OAAOuM,eAAe5L,EAAOO,UAEpFsL,EAAuB,SAAUtI,GAC7B,GAAI7C,GAAOP,IACX,OAAO,YACHO,EAAKiL,yBAAyBhL,OAAO4C,KAI7CN,EAAgB,WACZ9C,KAAK+C,qBAAqB7C,KAAK,GAAIlB,SAAQC,IAAIC,OAAO8D,WAAWnD,EAAOO,UAE5E+C,EAAmB,SAAUC,GACzB,GAAI7C,GAAOP,IACX,OAAO,YACHO,EAAKwC,qBAAqBvC,OAAO4C,KAIzCpC,EAAY,WACRhB,KAAKsB,iBAAiBpB,KAAK,GAAIlB,SAAQC,IAAIC,OAAOyM,OAAO9L,EAAOO,UAEpEmB,EAAe,SAAU6B,GACrB,GAAI7C,GAAOP,IACX,OAAO,YACHO,EAAKe,iBAAiBd,OAAO4C,KAIrCC,EAAU,WACNrD,KAAKsD,eAAepD,KAAK,GAAIlB,SAAQC,IAAIC,OAAOqE,KAAK1D,EAAOO,UAEhEoD,EAAa,SAAUJ,GACnB,GAAI7C,GAAOP,IACX,OAAO,YACHO,EAAK+C,eAAe9C,OAAO4C,IAIvC,QACImI,kBAAmBA,EACnBG,qBAAsBA,EACtBR,yBAA0BA,EAC1BG,4BAA6BA,EAC7BvI,cAAeA,EACfK,iBAAkBA,EAClBE,QAASA,EACTG,WAAYA,EACZxC,UAAWA,EACXO,aAAcA;AC9DtBvC,QAAQC,IAAIC,OAAO0M,wBAA0B,WAEzC,GACIpM,IADSH,QAAQ,mBACJC,GAAGC,YAAW,IAC3BE,EAAMH,GAAGC,YAAW,GACpBG,EAASJ,GAAGK,iBAChB,QACIH,WAAYA,EACZC,IAAKA,EACLC,OAAQA;ACNhBV,QAAQC,IAAIC,OAAO2M,cAAgB,WAE/B,GAAIhM,GAASR,QAAQ,mBACfyM,EAAkB,SAAUC,EAAUC,EAAOC,GACzC5M,SAAS,cAAgB4M,EAAM,gBAAiB,SAAUlI,EAAQC,GAC9DD,EAAOiI,MAAMA,GACgB,kBAAlBjI,GAAOG,QAEd6F,QAAQC,IAAI,4BAA8BjG,EAAOG,OAAOM,MAE5DR,EAAKI,WAAWL,GACfM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACAyH,EAASC,QAMzBE,EAAW,SAAUH,EAAUlG,GAC3B,GAAImG,GAAQ,GAAIhN,SAAQC,IAAIC,OAAO2G,EAAO,SAAShG,EAAOO,OAC1D0L,GAAgBC,EAAUC,EAAO,SAAWnG,EAAKsG,gBAErDC,EAAY,SAAUJ,GAClB,GAAIzL,GAAOP,IACX,OAAO,YACH,GAAIqM,GAAY/M,GAAGgD,OAAO0J,EAAMM,OAC5B3I,EAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKkI,IAC1CO,EAAU,oCACV1G,EAAO0G,EAAQC,KAAKH,GAAW,EAGnCP,GAAgBvL,EAAKyK,MAAOrH,EAAO,SAAWkC,EAAKsG,iBAI7DnH,GACAkH,SAAUA,EACVE,UAAWA,EAIf,OAAOpH;AClDXhG,QAAQC,IAAIC,OAAOuN,mBAAqB,WAEpC;ACCJzN,QAAQC,IAAIC,OAAOwN,mBAAqB,WAEpC,GAAIC,GAAW,WACX,GAAIpM,GAAOP,KACP6B,EAAIC,OAAOC,KAAK,4BAA6B,SAAU,UAAYC,OAAOC,OAAS,UAAYD,OAAOE,MAAQ,wCAC9GE,EAAO,WACHP,EAAEQ,KAAO/C,GAAGgD,OAAO/B,EAAKqM,MACxB/K,EAAEW,MAAQ,SAAUH,EAAMI,GACtBlC,EAAKqM,KAAKvK,GACNI,GACAZ,EAAEY,SAIdZ,GAAEa,YACFb,EAAEa,YAAY,SAAUN,GAExBA,IAGR,QACIuK,SAAUA;AC7BlB3N,QAAQC,IAAIC,OAAO2N,oBAAsB,WAErC,GAAI7H,KAEJ,OAAOA;ACEXhG,QAAQC,IAAIC,OAAO4N,wBAA0B,WACzC,GAAIC,GAAOzN,GAAGC,aACViF,EAAOlF,GAAGC,YACd,QACIwN,KAAMA,EACNvI,KAAOA;ACLfxF,QAAQC,IAAIC,OAAO8N,qBAAuB,WACtC,GAAInN,GAASR,QAAQ,mBACjBqB,EAAY,WACRV,KAAKW,sBAAsBT,KAAK,GAAIlB,SAAQC,IAAIC,OAAO0B,YAAYf,EAAOO,UAE9ES,EAAe,SAAUC,GACrB,GAAIP,GAAOP,IACX,OAAO,YACHO,EAAKI,sBAAsBH,OAAOM,IAI9C,QACIJ,UAAWA,EACXG,aAAcA;ACbtB7B,QAAQC,IAAIC,OAAO+N,sBAAwB,WACvC,GAAIpN,GAASR,QAAQ,mBACjBqH,EAAY,WACR,GAAInG,GAAOP,KACP8G,EAAS,GAAI9H,SAAQC,IAAIC,OAAOgO,aAAarN,EAAOO,OACxDG,GAAK4M,uBAAuBjN,KAAK4G,IAGrCD,EAAe,SAAUC,GACrB,GAAIvG,GAAOP,IACX,OAAO,YACHO,EAAK4M,uBAAuB3M,OAAOsG,KAG3CC,EAAoB,WAChB,MAAO/G,MAAKmN,yBAEpB,QACIzG,UAAWA,EACXG,aAAcA,EACdE,kBAAmBA;ACnB3B/H,QAAQC,IAAIC,OAAOkO,gBAAkB,SAAUvK,GAG3C,GAAIhD,GAASR,QAAQ,mBACjBgO,EAAoB,SAAUxH,GAC1B,GAAItF,GAAOP,IACX,OAAO,YACH,GAAIiE,GAAS,GAAIjF,SAAQC,IAAIC,OAAOoO,eAAezN,EAAOO,QACtDmN,EAAQvO,QAAQC,IAAIC,OAAO2G,GAAMhG,EAAOO,OAG5C6D,GAAOuJ,KAAKrI,UAAU,SAASC,GAC3BmI,EAAMC,KAAKpI,KAEfnB,EAAOwJ,MAAMtI,UAAU,SAASC,GAC5BmI,EAAME,MAAMrI,KAGhBnB,EAAOyJ,MAAMH,GACbA,EAAMI,WAAarO,GAAGC,YAAW,GACjCgB,EAAKqN,yBAAyB1N,KAAK+D,KAG3C4J,EAAuB,SAAUzK,GAC7B,GAAI7C,GAAOP,IACX,OAAO,YACHO,EAAKqN,yBAAyBpN,OAAO4C,IASjD,OAJA0K,GAAEjL,EAAM+K,4BAA4BG,KAAK,SAAS3I,GAC9CA,EAAEsI,QAAQC,WAAarO,GAAGC,YAAW,MAIrC8N,kBAAmBA,EACnBQ,qBAAsBA;ACvC9B7O,QAAQC,IAAIC,OAAO8O,sBAAwB,SAAUnL,GAEjD,IAEI,GAAIoL,GAAW,+BACXC,EAAS5O,GAAGgD,OAAOO,EAAM6K,OACzBS,EAAQ,KACRC,EAAQ,IACRF,KACAC,EAAQF,EAASzB,KAAKlN,GAAGgD,OAAO4L,EAAO5B,QAAQ,GAC/C8B,EAAQ,wBAA0BD,EAAQ,QAIhD,MAAOE,IAGTD,EAAQA,GAAS,kCACjB,IAAIrB,GAAOzN,GAAGC,WAAW6O,EAYzB,OAXAvL,GAAM6K,MAAMvI,UAAU,SAAUmJ,GAC5B,GAAKA,EAAEhC,MAAP,CAIA,GAAIC,GAAU,+BACV/H,EAAO+H,EAAQC,KAAKlN,GAAGgD,OAAOgM,EAAEhC,QAAQ,EAC5CS,GAAK,wBAA0BvI,EAAO,YAKtCuI,KAAMA;AC5Bd/N,QAAQC,IAAIC,OAAOqP,uBAAyB,WACxC,GAAI1O,GAASR,QAAQ,mBACjBmP,EAAmB,WACf,GAAIjO,GAAOP,KACP4D,EAAU,GAAI5E,SAAQC,IAAIC,OAAsB,cAAEW,EAAOO,OAC7DG,GAAKkO,wBAAwBvO,KAAK0D,IAGtC8K,EAAsB,SAAU9K,GAC5B,GAAIrD,GAAOP,IACX,OAAO,YACHO,EAAKkO,wBAAwBjO,OAAOoD,IAGhD,QACI4K,iBAAkBA,EAClBE,oBAAqBA;AChB7B1P,QAAQC,IAAIC,OAAOyP,cAAgB,WAC/B,GAAI9O,GAASR,QAAQ,mBACjB4I,EAAY,WACRjI,KAAKkI,iBAAiBhI,KAAK,GAAIlB,SAAQC,IAAIC,OAAOiJ,OAAOtI,EAAOO,UAEpE8I,EAAa,SAAUC,GACnB,GAAI5I,GAAOP,IACX,OAAO,YACHX,SAAS,2BAA4B,gBAAiB,SAAU0E,EAAQiE,GACpE,GAAIrE,GAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKqF,GAC9CpF,GAAOoF,OAAOxF,GACdqE,EAAI5D,WAAWL,GACVM,KAAK,SAAUC,GACPA,GACS,MAAVA,GACA/D,EAAK6I,gBAAgBC,QAAQF,EAAQxF,SAM7DiL,EAAiB,SAAUzF,GACvB,GAAI5I,GAAOP,IACXX,UAAS,qCAAsC,gBAAiB,SAAU0E,EAAQiE,GAC9E,GAAIrE,GAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKqF,GAC9CpF,GAAOoF,OAAOxF,GACdqE,EAAI5D,WAAWL,GACVM,KAAK,SAAUC,GACPA,GACS,MAAVA,GACA/D,EAAKsO,0BAA0BlL,EAAMkL,kCAMzDxG,EAAe,SAAUC,GACrB,GAAI/H,GAAOP,IACX,OAAO,YACHO,EAAK2H,iBAAiB1H,OAAO8H,KAGrCuB,EAAgB,SAAUV,GACtB,GAAIW,GAAW9J,IACf,OAAO,YACH+J,QAAQC,IAAI,YAAaF,GACzBC,QAAQC,IAAI,cAAeb,GAC3B9J,SAAS,wBAAyB,gBAAiB,SAAU0E,EAAQiE,GACjEjE,EAAO3B,KAAK0H,EAASG,aAAcd,EAAOe,qBAC1ClC,EAAI5D,WAAWL,GACVM,KAAK,SAAUC,GACE,MAAVA,GACA6E,EAAOe,kBAAkBnG,EAAOoG,wBAQxD2B,EAAkB,SAAUC,EAAUC,EAAOC,GACzC5M,SAAS,cAAgB4M,EAAM,gBAAiB,SAAUlI,EAAQC,GAC9DD,EAAOiI,MAAMA,GAGbhI,EAAKI,WAAWL,GACfM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACAyH,EAASC,QAMzBE,EAAW,SAAUH,EAAUlG,GAC3B,GAAImG,GAAQ,GAAIhN,SAAQC,IAAIC,OAAO2G,EAAO,SAAShG,EAAOO,OAC1D0L,GAAgBC,EAAUC,EAAO,SAAWnG,EAAKsG,gBAErDC,EAAY,SAAUJ,GAClB,GAAIzL,GAAOP,IACX,OAAO,YACH,GAAIqM,GAAY/M,GAAGgD,OAAO0J,EAAMM,OAC5B3I,EAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKkI,IAC1CO,EAAU,oCACV1G,EAAO0G,EAAQC,KAAKH,GAAW,EAGnCP,GAAgBvL,EAAKyK,MAAOrH,EAAO,SAAWkC,EAAKsG,gBAG/D,QACIyC,eAAgBA,EAChB3G,UAAWA,EACXiB,WAAYA,EACZW,cAAeA,EACfxB,aAAcA,EACd6D,SAAUA,EACVE,UAAWA;AChGnBpN,QAAQC,IAAIC,OAAO4P,iBAAmB,WAElC,GAAIjP,GAASR,QAAQ,mBACjByM,EAAkB,SAAUC,EAAUC,EAAOC,GACzC5M,SAAS,cAAgB4M,EAAM,gBAAiB,SAAUlI,EAAQC,GAC9DD,EAAOiI,MAAMA,GAGbhI,EAAKI,WAAWL,GACfM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACAyH,EAASC,QAMzBE,EAAW,SAAUH,EAAUlG,GAC3B,GAAImG,GAAQ,GAAIhN,SAAQC,IAAIC,OAAO2G,EAAO,SAAShG,EAAOO,OAC1D0L,GAAgBC,EAAUC,EAAO,SAAWnG,EAAKsG,gBAErDC,EAAY,SAAUJ,GAClB,GAAIzL,GAAOP,IACX,OAAO,YACH,GAAIqM,GAAY/M,GAAGgD,OAAO0J,EAAMM,OAC5B3I,EAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKkI,IAC1CO,EAAU,oCACV1G,EAAO0G,EAAQC,KAAKH,GAAW,EAGnCP,GAAgBvL,EAAKyK,MAAOrH,EAAO,SAAWkC,EAAKsG,iBAI3DnH,GACAkH,SAAUA,EACVE,UAAWA,EAIf,OAAOpH;AC9CXhG,QAAQC,IAAIC,OAAO6P,4BAA8B,SAASlM,GAKtD,MAHKA,GAAMmM,QACPnM,EAAMmM,KAAK;ACAnBhQ,QAAQC,IAAIC,OAAO+P,wBAA0B,WACzC,GAAIpP,GAASR,QAAQ,mBACjBqH,EAAY,WACR1G,KAAKkP,yBAAyBhP,KAAK,GAAIlB,SAAQC,IAAIC,OAAOiQ,eAAetP,EAAOO,UAEpFyG,EAAe,SAASC,GACpB,GAAIvG,GAAOP,IACX,OAAO,YACHO,EAAK2O,yBAAyB1O,OAAOsG,KAG7CC,EAAoB,WAChB,MAAO/G,MAAKkP,2BAEpB,QACIxI,UAAWA,EACXG,aAAcA,EACdE,kBAAmBA;AC3B3B/H,QAAQC,IAAIC,OAAOkQ,uBAAyB,WAExC,GAAIvP,GAASR,QAAQ,mBACjBiG,EAA4B,SAAUC,GAClC,GAAIhF,GAAOP,IACX,OAAO,YACHO,EAAKiF,8BAA8BhF,OAAO+E,KAGlDE,EAAyB,WACrBzF,KAAKwF,8BAA8BtF,KAAK,GAAIlB,SAAQC,IAAIC,OAAOwG,oBAAoB7F,EAAOO,SAGlG,QACIkF,0BAA2BA,EAC3BG,uBAAwBA;ACPhCzG,QAAQC,IAAIC,OAAOmQ,qBAAuB,WAEtC,OACI7K,KAAMlF,GAAGC,WAAW,kBACpBwN,KAAMzN,GAAGC,WAAW,oBAG5BP,QAAQC,IAAIC,OAAOoQ,sBAAwB,WAEvC,OACI9K,KAAMlF,GAAGC,WAAW,mBACpBwN,KAAMzN,GAAGC,WAAW,mBAG5BP,QAAQC,IAAIC,OAAOqQ,uBAAyB,WAExC,OACI/K,KAAMlF,GAAGC,WAAW,oBACpBwN,KAAMzN,GAAGC,WAAW,oBACpBiQ,YAAc1B,EAAE2B,MAAM,EAAE;ACpBhCzQ,QAAQC,IAAIC,OAAOwQ,sBAAwB,WAEvC,MAAO,IAAI1Q,SAAQC,IAAIC,OAAOyQ;ACGlC3Q,QAAQC,IAAIC,OAAO0Q,YAAc,WAE7B,GAAI/P,GAASR,QAAQ,mBACjByM,EAAkB,SAAUC,EAAUC,EAAOC,GACzC5M,SAAS,cAAgB4M,EAAM,gBAAiB,SAAUlI,EAAQC,GAC9DD,EAAOiI,MAAMA,GAGbhI,EAAKI,WAAWL,GACfM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACAyH,EAASC,QAMzBE,EAAW,SAAUH,EAAUlG,GAC3B,GAAImG,GAAQ,GAAIhN,SAAQC,IAAIC,OAAO2G,EAAO,SAAShG,EAAOO,OAC1D0L,GAAgBC,EAAUC,EAAO,SAAWnG,EAAKsG,gBAErDC,EAAY,SAAUJ,EAAOD,GACzB,MAAO,YACH,GAAIM,GAAY/M,GAAGgD,OAAO0J,EAAMM,OAC5B3I,EAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKkI,IAC1CO,EAAU,oCACV1G,EAAO0G,EAAQC,KAAKH,GAAW,EAGnCP,GAAgBC,EAAUpI,EAAO,SAAWkC,EAAKsG,iBAKzDnH,GACAkH,SAAUA,EACVE,UAAWA,EAIf,OAAOpH;AC1CXhG,QAAQC,IAAIC,OAAO2Q,gCAAkC,WAEjD,GAAIC,GAAI,GAAI9Q,SAAQC,IAAIC,OAAOyQ,yBAE/B,OAAOG;ACRX9Q,QAAQC,IAAIC,OAAO6Q,sBAAwB,WAEvC,OACI9I,SAAS,EACT+I,UAAU;ACClBhR,QAAQC,IAAIC,OAAO+Q,wBAA0B,WAEzC,GAAIpQ,GAASR,QAAQ,mBACjBkC,EAAe,SAAUqJ,GACrB,GAAIrK,GAAOP,IACX,OAAO,YACHO,EAAKe,iBAAiBd,OAAOoK,KAGrC5J,EAAY,WACR,GAAI4J,GAAQ,GAAI5L,SAAQC,IAAIC,OAAOyM,OAAO9L,EAAOO,OACjDJ,MAAKsB,iBAAiBpB,KAAK0K,IAG/B5F,GACAhE,UAAWA,EACXO,aAAcA,EAIlB,OAAOyD;ACpBXhG,QAAQC,IAAIC,OAAOgR,oBAAsB,WAErC,GAAIrQ,GAASR,QAAQ,mBACjBsL,EAAoB,SAAUC,GAC1B,GAAIrK,GAAOP,IACX,OAAO,YACHO,EAAKsK,4BAA4BrK,OAAOoK,KAGhDE,EAAiB,WACb,GAAIF,GAAQ,GAAI5L,SAAQC,IAAIC,OAAO6L,kBAAkBlL,EAAOO,OAC5DwK,GAAMI,OAAQ5J,KAAM9B,GAAGC,WAAW,aAClCS,KAAK6K,4BAA4B3K,KAAK0K,IAG1C5F,GACA8F,eAAgBA,EAChBH,kBAAmBA,EAIvB,OAAO3F;ACpBXhG,QAAQC,IAAIC,OAAOiR,yBAA2B,WAE1C,GAAItQ,GAASR,QAAQ,mBACjByM,EAAkB,SAAUC,EAAUC,EAAOC,EAAM/H,GAC/C7E,SAAS,cAAgB4M,EAAM,gBAAiB,SAAUlI,EAAQC,GAC9DD,EAAOiI,MAAMA,GACgB,kBAAlBjI,GAAOG,SACdH,EAAOG,OAAOA,GACd6F,QAAQC,IAAI,4BAA8BjG,EAAOG,OAAOM,OAG5DR,EAAKI,WAAWL,GACfM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACAyH,EAASC,QAMzBE,EAAW,SAAUH,EAAUlG,EAAM3B,GACjC,GAAI8H,GAAQ,GAAIhN,SAAQC,IAAIC,OAAO2G,EAAO,SAAShG,EAAOO,OAC1D0L,GAAgBC,EAAUC,EAAO,SAAWnG,EAAKsG,cAAejI,IAEpEkI,EAAY,SAAUJ,GAClB,GAAIzL,GAAOP,IACX,OAAO,YACH,GAAIqM,GAAY/M,GAAGgD,OAAO0J,EAAMM,OAC5B3I,EAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKkI,IAC1CO,EAAU,oCACV1G,EAAO0G,EAAQC,KAAKH,GAAW,EAGnCP,GAAgBvL,EAAKyK,MAAOrH,EAAO,SAAWkC,EAAKsG,iBAI3DnH,GACAkH,SAAUA,EACVE,UAAWA,EAIf,OAAOpH;AC5CXhG,QAAQC,IAAIC,OAAOkR,2BAA6B,WAE5C,GAAIvQ,GAASR,QAAQ,mBACjBgR,EAAgB,SAAUC,GACtB,GAAI/P,GAAOP,IACX,OAAO,YACHO,EAAKgQ,6BAA6B/P,OAAO8P,KAGjDE,EAAa,WACT,GAAI5F,GAAQ,GAAI5L,SAAQC,IAAIC,OAAOuR,mBAAmB5Q,EAAOO,OAC7DwK,GAAMI,OAAQ5J,KAAM9B,GAAGC,WAAW,aAClCS,KAAKuQ,6BAA6BrQ,KAAK0K,IAE3C8F,EAAc,SAAU9F,GACpB5K,KAAKuQ,6BAA6BrQ,KAAK0K,IAG3C5F,GACA0L,YAAaA,EACbF,WAAYA,EACZH,cAAeA,EAInB,OAAOrL;ACzBXhG,QAAQC,IAAIC,OAAOyR,eAAiB,WAEhC,GAAI9Q,GAASR,QAAQ,mBACjBuR,EAAe,SAAUC,GACrB,GAAItQ,GAAOP,IACX,OAAO,YACHO,EAAKuQ,iBAAiBtQ,OAAOqQ,KAGrCE,EAAY,SAAUlL,GAClB,GAAItF,GAAOP,IACX,OAAO,YACH,GAAIgR,GAAInL,EAAKsG,cAAc9C,QAAQ,KAAM,IACzChK,UAAS,qBAAuB2R,EAAG,gBAAiB,SAAUjN,EAAQC,GAClE,GAA6B,kBAAlBD,GAAO8M,OAEd,WADA9G,SAAQkH,MAAM,kBAAoBD,EAAI,yCAK1C,IAAIrN,GAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGwE,KAAKC,EAAO8M,QACnB,mBAAhBlN,GAAMuN,OACZvN,EAAMuN,MAAM,GAEhB,KAAK,GAAIC,KAAKxN,GACV,GAAwB,kBAAbA,GAAMwN,IAA2B,UAANA,EAAe,CACjD,GAAIC,GAAQzN,EAAMwN,IACG,iBAAVC,IACPzN,EAAMwN,GAAG,IAIrBpN,EAAO8M,OAAOlN,GAEgB,kBAAnBI,GAAOsN,SACdtN,EAAOsN,QAAQ9Q,GAGnByD,EAAKI,WAAWL,GACfM,KAAK,SAAUC,GACZ,GAAKA,GACU,OAAXA,EAAiB,CAEjB,GAAIuM,GAAS9M,EAAO8M,QAEpBA,GAAO5N,MAAMpD,EAAOO,QACpByQ,EAAOS,UAAS,GAChB/Q,EAAKuQ,iBAAiB5Q,KAAK2Q,UAQ/CU,EAAa,SAAUV,GACnB,GAAItQ,GAAOP,IACX,OAAO,YACH,GAAI6F,GAAOvG,GAAGgD,OAAOuO,EAAOvE,OACxB3I,EAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAK+M,GAE9CxR,UAAS,qBAAuBwG,EAAKsG,cAAc9C,QAAQ,KAAM,KAAM,gBAAiB,SAAUtF,EAAQC,GACtGD,EAAO8M,OAAOlN,GACgB,kBAAnBI,GAAOsN,SACdtN,EAAOsN,QAAQ9Q,GAGnByD,EAAKI,WAAWL,GACfM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACA/D,EAAKuQ,iBAAiBzH,QAAQwH,EAAQlN,SAQzDnC,EAAU,WACN,GAAIgI,GAAO,GAAIxK,SAAQC,IAAIC,OAAOgC,KAAKrB,EAAOO,OAC9CoJ,GAAKrI,MAAOC,KAAM9B,GAAGC,WAAW,aAChCiK,EAAKnI,OAAQD,KAAM9B,GAAGC,WAAW,aACjCS,KAAKyB,eAAevB,KAAKsJ,IAE9B9H,EAAa,SAAU8H,GACnB,GAAIjJ,GAAOP,IACX,OAAO,YACHO,EAAKkB,eAAejB,OAAOgJ,KAInCgI,EAAwB,WACpB,GAAIjR,GAAOP,IACXX,UAAS,6BAA8B,gBAAiB,SAAU0E,EAAQC,GACtEA,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACAwJ,EAAE/J,EAAO0N,sBAAsB1D,KAAK,SAAU3I,GAC1C7E,EAAKmR,6BAA6BxR,KAAKkF,UAS/DuM,EAAyB,SAAUC,GAC/BC,MAAM,kBAAoBD,IAE9BE,EAA2B,SAAUF,GACjC,GAAIrR,GAAOP,IACX,OAAO,YACHO,EAAKmR,6BAA6BlR,OAAOoR,KAIjD5M,GACA2M,uBAAwBA,EACxBG,yBAA0BA,EAC1BN,sBAAuBA,EACvBhQ,QAASA,EACTE,WAAYA,EACZkP,aAAcA,EACdG,UAAWA,EACXQ,WAAYA,EAIhB,OAAOvM;AChJXhG,QAAQC,IAAIC,OAAO6S,gBAAkB,WAGjC,GACIC,GAAgB,SAASC,GACrB,MAAO,YACH,GAAIpS,GAASR,QAAQ,mBAGjB6S,EAAQlS,KACRmS,EAAa,GAAInT,SAAQC,IAAIC,OAAOkT,WAAWvS,EAAOO,OAE1Df,UAAS,gCAAiC,gBAAiB,SAAS0E,EAAQC,GACxED,EAAOoO,WAAWA,GAEO,kBAAdpO,GAAOkO,IACdlO,EAAOkO,GAAGA,KAGdjO,EAAKI,WAAWL,GACXM,KAAK,SAASC,GACNA,GACU,OAAXA,GACA4N,EAAMG,qBAAqBnS,KAAKiS,SAQxDG,EAAiB,SAAUH,EAAYI,GACnC,GAAiBN,GAAKM,EAClB5O,EAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKqO,GAE9C,OAAO,YACH9S,SAAS,gCAAiC,gBAAiB,SAAU0E,EAAQC,GACzED,EAAOoO,WAAWxO,GAEO,kBAAdI,GAAOkO,IACdlO,EAAOkO,GAAGA,KAGdjO,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACZ,GAAKA,GACU,OAAXA,EACA,IAAK,GAAIC,KAAK4N,GACmB,kBAAlBA,GAAW5N,IAA4C,eAAvB4N,EAAW5N,GAAGC,KACrD2N,EAAW5N,GAAGjF,GAAGgD,OAAOqB,EAAMY,KAE9B4N,EAAW5N,GAAKZ,EAAMY,SAUtDiO,EAAmB,SAAUL,EAAYI,GACrC,GAAIhS,GAAOP,KAAMiS,EAAKM,CAEtB,OAAO,YACHN,IAAKQ,qBAAqBC,QAAQ,SAAUC,GACpCA,EAAIP,eAAiBD,EAAWS,MAChCD,EAAIP,WAAW,MAIvB7R,EAAK8R,qBAAqB7R,OAAO2R,IAK7C,QACIH,cAAeA,EACfM,eAAgBA,EAChBE,iBAAkBA;ACrE1BxT,QAAQC,IAAIC,OAAO2T,4BAA8B,WAC7C,GAAIhT,GAASR,QAAQ,mBACjBuG,EAAqB,SAAUC,GAC3B,GAAItF,GAAOP,IACX,OAAO,YACH,GAAI4D,GAAU,GAAI5E,SAAQC,IAAIC,OAAO2G,EAAO,WAAWhG,EAAOO,OAC9DG,GAAKuF,0BAA0B5F,KAAK0D,KAG5CmC,EAAwB,SAAUnC,GAC9B,GAAIrD,GAAOP,IACX,OAAO,YACHO,EAAKuF,0BAA0BtF,OAAOoD,IAGlD,QACIgC,mBAAoBA,EACpBG,sBAAuBA;ACjB/B/G,QAAQC,IAAIC,OAAO4T,gBAAkB,WAEjC,GACI1T,IADSC,QAAQ,mBACNC,GAAGC,cACdG,EAASJ,GAAGK,iBAChB,QACIP,SAAUA,EACVM,OAAQA;ACThBV,QAAQC,IAAIC,OAAO6T,kBAAoB,WAGnC,GAAIlT,GAASR,QAAQ,mBACjB6L,EAA2B,WACvBlL,KAAKmL,gCAAgCjL,KAAK,GAAIlB,SAAQC,IAAIC,OAAOkM,sBAAsBvL,EAAOO,UAElGiL,EAA8B,SAAUC,GACpC,GAAI/K,GAAOP,IACX,OAAO,YACHO,EAAK4K,gCAAgC3K,OAAO8K,KAIpD0H,EAAqB,WACjBhT,KAAKiT,aAAa,KAEtBC,EAAoB,WAChBlT,KAAKmT,YAAY,IAEzB,QACIjI,yBAA0BA,EAC1BG,4BAA6BA,EAC7B6H,kBAAmBA,EACnBF,mBAAoBA;ACpB5BhU,QAAQC,IAAIC,OAAOkU,0BAA4B,SAAUvQ,GAErD,GAAIhD,GAASR,QAAQ,mBACjBgU,EAAS/T,GAAGC,YAAW,GACvB4H,EAAU9H,QAAQS,eAAesH,aACjCkM,EAAqBhU,GAAGK,kBACxB4T,EAAiB,SAAUC,GACvB,GAAIjT,GAAOP,IACX,OAAO,YACHO,EAAKkS,mBAAmBjS,OAAOgT,KAGvCC,EAAmB,SAAUd,GACzB,GAAIpS,GAAOP,IACX,OAAO,YACH8N,EAAEvN,EAAKkS,sBAAsB1E,KAAK,SAAU3I,GACxCA,EAAEsO,aAAY,KAElBf,EAAIe,aAAY,KAIxBC,EAAc,SAAU9N,GACpB,GAAItF,GAAOP,IACX,OAAO,YACH,GAAIwT,GAAW,GAAIxU,SAAQC,IAAIC,OAAO2G,EAAO,YAAYhG,EAAOO,OAEhEf,UAAS,uBAAyBwG,EAAKsG,cAAe,gBAAiB,SAAUpI,EAAQC,GACrFD,EAAOyP,SAASA,GACS,kBAAdzP,GAAOkO,IACdlO,EAAOkO,GAAG1R,GAEdyD,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACA/D,EAAKkS,mBAAmBvS,KAAKsT,SAQrDI,EAAe,SAAUJ,GACrB,GAAIjT,GAAOP,IACX,OAAO,YACH,GAAI2D,GAAQwD,EAAQwC,aAAarK,GAAGsE,QAAQE,KAAK0P,IAC7C3N,EAAOvG,GAAGgD,OAAOkR,EAASK,SAE9BR,IAAO,GACPhU,SAAS,uBAAyBwG,EAAKsG,cAAe,gBAAiB,SAAUpI,EAAQC,GACrFD,EAAOyP,SAAS7P,GAES,kBAAdI,GAAOkO,IACdlO,EAAOkO,GAAG1R,GAGdyD,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GAEZ,GADAkD,EAAE,mCAAmChH,SAChC8D,GACU,OAAXA,EACA,IAAK,GAAIC,KAAKiP,GACV,GAAIA,EAASM,eAAevP,GAAI,CAC5B,GAAIhF,GAAkC,eAArBiU,EAASjP,GAAGC,MAA8C,MAArBgP,EAASjP,GAAGC,IACvC,mBAAhBgP,GAASjP,IAAqBhF,EACrCiU,EAASjP,GAAGjF,GAAGgD,OAAOqB,EAAMY,KAE5BiP,EAASjP,GAAKZ,EAAMY,UAWxDwP,EAAc,SAAUlO,GACpB,GAAItF,GAAOP,IACX,OAAO,YACH,GAAIgU,GAAW,GAAIhV,SAAQC,IAAIC,OAAO2G,EAAO,YAAYhG,EAAOO,OAEhEf,UAAS,uBAAyBwG,EAAKsG,cAAe,gBAAiB,SAAUpI,EAAQC,GACrFD,EAAOiQ,SAASA,GACS,kBAAdjQ,GAAOkO,IACdlO,EAAOkO,GAAG1R,GAEdyD,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACA/D,EAAK0T,6BAA6B/T,KAAK8T,SAQ/DE,EAAe,SAAUF,GACrB,GAAIzT,GAAOP,IACX,OAAO,YACH,GAAImU,GAAe7U,GAAGgD,OAAO0R,EAAS1H,OAClC3I,EAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKkQ,IAC1CzH,EAAU,uCACV1G,EAAO0G,EAAQC,KAAK2H,GAAc,EAEtC9U,UAAS,uBAAyBwG,EAAKsG,cAAe,gBAAiB,SAAUpI,EAAQC,GACrFD,EAAOiQ,SAASrQ,GACS,kBAAdI,GAAOkO,IACdlO,EAAOkO,GAAG1R,GAGdyD,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACZ,GAAKA,GACU,OAAXA,EACA,IAAK,GAAIC,KAAKyP,GACiB,kBAAhBA,GAASzP,IAA0C,eAArByP,EAASzP,GAAGC,KACjDwP,EAASzP,GAAGjF,GAAGgD,OAAOqB,EAAMY,KAE5ByP,EAASzP,GAAKZ,EAAMY,SAUpD6P,EAAiB,SAAUJ,GACvB,GAAIzT,GAAOP,IACX,OAAO,YACHO,EAAK0T,6BAA6BzT,OAAOwT,KAGjDK,EAAqB,WACjB,GAAI9T,GAAOP,KACPsU,EAAkB,GAAItV,SAAQC,IAAIC,OAAOqV,gBAAgB1U,EAAOO,OAEpEf,UAAS,qCAAsC,gBAAiB,SAAU0E,EAAQC,GAC9ED,EAAOuQ,gBAAgBA,GACE,kBAAdvQ,GAAOkO,IACdlO,EAAOkO,GAAG1R,GAEdyD,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACA/D,EAAKiU,0BAA0BtU,KAAKoU,QAQxDG,EAAsB,SAAUH,GAC5B,GAAI/T,GAAOP,IACX,OAAO,YACH,GAAI2D,GAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKwQ,GAE9CjV,UAAS,qCAAsC,gBAAiB,SAAU0E,EAAQC,GAC9ED,EAAOuQ,gBAAgB3Q,GACE,kBAAdI,GAAOkO,IACdlO,EAAOkO,GAAG1R,GAGdyD,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACZ,GAAKA,GACU,OAAXA,EACA,IAAK,GAAIC,KAAK+P,GACwB,kBAAvBA,GAAgB/P,IAAiD,eAA5B+P,EAAgB/P,GAAGC,KAC/D8P,EAAgB/P,GAAGjF,GAAGgD,OAAOqB,EAAMY,KAEnC+P,EAAgB/P,GAAKZ,EAAMY,SAU3DmQ,EAAwB,SAAUJ,GAC9B,GAAI/T,GAAOP,IACX,OAAO,YACHO,EAAKiU,0BAA0BhU,OAAO8T,KAG9CK,EAAoB,WAChB,GAAIpU,GAAOP,KACP4U,EAAiB,GAAI5V,SAAQC,IAAIC,OAAO2V,eAAehV,EAAOO,OAElEf,UAAS,oCAAqC,gBAAiB,SAAU0E,EAAQC,GAC7ED,EAAO6Q,eAAeA,GACG,kBAAd7Q,GAAOkO,IACdlO,EAAOkO,GAAG1R,GAEdyD,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACA/D,EAAKuU,yBAAyB5U,KAAK0U,QAQvDG,EAAqB,SAAUH,GAC3B,GAAIrU,GAAOP,IACX,OAAO,YACH,GAAI2D,GAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAK8Q,GAE9CvV,UAAS,oCAAqC,gBAAiB,SAAU0E,EAAQC,GAC7ED,EAAO6Q,eAAejR,GACG,kBAAdI,GAAOkO,IACdlO,EAAOkO,GAAG1R,GAGdyD,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACZ,GAAKA,GACU,OAAXA,EACA,IAAK,GAAIC,KAAKqQ,GACuB,kBAAtBA,GAAerQ,IAAgD,eAA3BqQ,EAAerQ,GAAGC,KAC7DoQ,EAAerQ,GAAGjF,GAAGgD,OAAOqB,EAAMY,KAElCqQ,EAAerQ,GAAKZ,EAAMY,SAU1DyQ,EAAuB,SAAUJ,GAC7B,GAAIrU,GAAOP,IACX,OAAO,YACHO,EAAKuU,yBAAyBtU,OAAOoU,KAG7CpD,EAAwB,WACpB,GAAIjR,GAAOP,IACXX,UAAS,6BAA8B,gBAAiB,SAAU0E,EAAQC,GACtEA,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACAwJ,EAAE/J,EAAO0N,sBAAsB1D,KAAK,SAAU3I,GAC1C7E,EAAKmR,6BAA6BxR,KAAKkF,UAS/DuM,EAAyB,SAAUC,GAC/BC,MAAM,kBAAoBD,IAE9BE,EAA2B,SAAUF,GACjC,GAAIrR,GAAOP,IACX,OAAO,YACHO,EAAKmR,6BAA6BlR,OAAOoR,KAGjDqD,EAAc,WACV,GAAI1U,GAAOP,KACPkV,EAAW,GAAIlW,SAAQC,IAAIC,OAAOiW,SAAStV,EAAOO,OACtDf,UAAS,8BAA+B,gBAAiB,SAAU0E,EAAQC,GACvED,EAAOmR,SAASA,GACS,kBAAdnR,GAAOkO,IACdlO,EAAOkO,GAAG1R,GAEdyD,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACA/D,EAAK6U,mBAAmBlV,KAAKgV,QAQjDG,EAAe,SAAUH,GACrB,GAAI3U,GAAOP,IACX,OAAO,YACH,GAAI2D,GAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKoR,GAE9C7V,UAAS,8BAA+B,gBAAiB,SAAU0E,EAAQC,GACvED,EAAOmR,SAASvR,GACS,kBAAdI,GAAOkO,IACdlO,EAAOkO,GAAG1R,GAGdyD,EAAKI,WAAWL,GACXM,KAAK,SAAUC,GACZ,GAAKA,GACU,OAAXA,EACA,IAAK,GAAIC,KAAK2Q,GACiB,kBAAhBA,GAAS3Q,IAA0C,eAArB2Q,EAAS3Q,GAAGC,KACjD0Q,EAAS3Q,GAAGjF,GAAGgD,OAAOqB,EAAMY,KAE5B2Q,EAAS3Q,GAAKZ,EAAMY,SAUpD+Q,EAAiB,SAAUJ,GACvB,GAAI3U,GAAOP,IACX,OAAO,YACHO,EAAK6U,mBAAmB5U,OAAO0U,KAGvCK,EAAa,SAAUC,GACnB,GAAIC,GAAKD,GAAWxV,KAAK0V,eACzBlO,GAAEmO,IAAI,yCAA2CF,GAC5C9M,KAAK,SAAUrE,GACZgP,EAAmBhP,KAInCzB,GAAM6S,cAAcvQ,UAAUoQ,EAE9B,IAAIvQ,IACAqO,OAAQA,EACRqB,sBAAuBA,EACvBL,mBAAoBA,EACpBI,oBAAqBA,EACrBO,qBAAsBA,EACtBL,kBAAmBA,EACnBI,mBAAoBA,EACpBX,eAAgBA,EAChBL,YAAaA,EACbG,aAAcA,EACdpC,yBAA0BA,EAC1BN,sBAAuBA,EACvBG,uBAAwBA,EACxBgC,YAAaA,EACbC,aAAcA,EACdL,eAAgBA,EAChBgC,WAAYA,EACZK,YAAatC,EACbG,iBAAkBA,EAClBwB,YAAaA,EACbI,aAAcA,EACdC,eAAgBA,EAGpB,OAAOtQ;ACnXXhG,QAAQC,IAAIC,OAAO2W,wBAA0B,WAEzC;ACDJ7W,QAAQC,IAAIC,OAAO4W,0BAA4B,WAC3C,GAAIvV,GAAOP,KACPH,EAASR,QAAQ,mBACjByM,EAAkB,SAAUC,EAAUC,EAAOC,GACzC5M,SAAS,cAAgB4M,EAAM,gBAAiB,SAAUlI,EAAQC,GAC9DD,EAAOiI,MAAMA,GAGbhI,EAAKI,WAAWL,GACfM,KAAK,SAAUC,GACPA,GACU,OAAXA,GACAyH,EAASC,OAyB7B,OAlBAzL,GAAK2L,SAAW,SAASH,EAAUlG,GAC/B,GAAImG,GAAQ,GAAIhN,SAAQC,IAAIC,OAAO2G,EAAO,SAAShG,EAAOO,OACtD0L,GAAgBC,EAAUC,EAAO,SAAWnG,EAAKsG,gBAGzD5L,EAAK6L,UAAY,SAASJ,EAAOD,GAC7B,MAAO,YACH,GAAIM,GAAY/M,GAAGgD,OAAO0J,EAAMM,OAC5B3I,EAAQrE,GAAGsE,QAAQC,OAAOvE,GAAGsE,QAAQE,KAAKkI,IAC1CO,EAAU,oCACV1G,EAAO0G,EAAQC,KAAKH,GAAW,EAGnCP,GAAgBC,EAAUpI,EAAO,SAAWkC,EAAKsG,iBAKlD5L,GAGXvB,QAAQC,IAAIC,OAAO4W,0BAA0BC,UAAY,GAAI/W,SAAQC,IAAIC,OAAO8W","file":"__partial.min.js","sourcesContent":["/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nvar bespoke = bespoke || {};\r\nbespoke.sph = bespoke.sph || {};\r\nbespoke.sph.domain = bespoke.sph.domain || {};\r\n\r\n\r\nbespoke.sph.domain.ActivityPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        hasError = ko.observable(),\r\n        breakpoint = ko.observable(false),\r\n        hit = ko.observable(false),\r\n        errors = ko.observableArray();\r\n    return {\r\n        breakpoint: breakpoint,\r\n        hit: hit,\r\n        hasError: hasError,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.AssemblyFieldPartial = function () {\r\n    var system = require(objectbuilders.system),\r\n        addParameter = function () {\r\n            this.MethodArgCollection.push(new bespoke.sph.domain.MethodArg(system.guid()));\r\n        },\r\n        removeParameter = function(p) {\r\n            var self = this;\r\n            return function() {\r\n                self.MethodArgCollection.remove(p);\r\n            };\r\n        };\r\n    return {\r\n        addParameter: addParameter,\r\n        removeParameter: removeParameter\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.BarChartItemPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addSeries = function() {\r\n            this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(system.guid()));\r\n        },\r\n        removeSeries = function (series) {\r\n            var self = this;\r\n            return function() {\r\n                self.ChartSeriesCollection.remove(series);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addSeries: addSeries,\r\n        removeSeries: removeSeries\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.BusinessRulePartial = function (model) {\r\n\r\n    var system = require('durandal/system'),\r\n        addFilter = function () {\r\n            var self = this,\r\n                br = new bespoke.sph.domain.Rule(system.guid());\r\n\r\n            br.Left({ Name: ko.observable(\"+ Field\") });\r\n            br.Right({ Name: ko.observable(\"+ Field\") });\r\n\r\n            self.FilterCollection.push(br);\r\n\r\n        },\r\n        removeFilter = function (br) {\r\n            var self = this;\r\n            return function () {\r\n                self.FilterCollection.remove(br);\r\n            };\r\n        },\r\n        addRule = function () {\r\n            var self = this,\r\n                br = new bespoke.sph.domain.Rule(system.guid());\r\n\r\n            br.Left({ Name: ko.observable(\"+ Field\") });\r\n            br.Right({ Name: ko.observable(\"+ Field\") });\r\n\r\n            self.RuleCollection.push(br);\r\n\r\n        },\r\n        removeRule = function (br) {\r\n            var self = this;\r\n            return function () {\r\n                self.RuleCollection.remove(br);\r\n            };\r\n        };\r\n\r\n\r\n\r\n    return {\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter,\r\n        addRule: addRule,\r\n        removeRule: removeRule\r\n    };\r\n};\r\n","/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n\r\nbespoke.sph.domain.ButtonPartial = function () {\r\n\r\n    var editCommand = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", '_blank', 'height=' + screen.height + ',width=' + screen.width + ',toolbar=0,location=0,fullscreen=yes'),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.Command);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.Command(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent('onload', init);\r\n        } else {\r\n            init();\r\n        }\r\n    };\r\n    return {\r\n        editCommand: editCommand\r\n    };\r\n};","bespoke.sph.domain.CatchScopePartial = function () {\r\n\r\n\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n\r\n\r\nbespoke.sph.domain.ChildEntityListViewPartial = function (model) {\r\n    // ViewColumn\r\n    var system = require('durandal/system'),\r\n        addViewColumn = function () {\r\n            this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn({ WebId: system.guid(),Header :'<New Column>'}));\r\n        },\r\n        removeViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addSort = function () {\r\n            this.SortCollection.push(new bespoke.sph.domain.Sort(system.guid()));\r\n        },\r\n        removeSort = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.SortCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n    editViewColumn = function (vc) {\r\n        return function () {\r\n            var clone = ko.mapping.fromJS(ko.mapping.toJS(vc));\r\n\r\n            require(['viewmodels/view.column.dialog', 'durandal/app'], function (dialog, app2) {\r\n                dialog.column(clone);\r\n                dialog.entity(model.Entity());\r\n\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            for (var g in vc) {\r\n                                if (typeof vc[g] === \"function\" && vc[g].name === \"observable\") {\r\n                                    vc[g](ko.unwrap(clone[g]));\r\n                                } else {\r\n                                    vc[g] = clone[g];\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n        };\r\n    };\r\n    return {\r\n        addSort: addSort,\r\n        removeSort: removeSort,\r\n        addViewColumn: addViewColumn,\r\n        editViewColumn: editViewColumn,\r\n        removeViewColumn: removeViewColumn\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ComboBoxPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addItem = function () {\r\n            var self = this;\r\n            var item = new bespoke.sph.domain.ComboBoxItem(system.guid());\r\n            self.ComboBoxItemCollection.push(item);\r\n\r\n        },\r\n        removeItem = function (item) {\r\n            var self = this;\r\n            return function () {\r\n                self.ComboBoxItemCollection.remove(item);\r\n            };\r\n        };\r\n    return {\r\n        addItem: addItem,\r\n        removeItem: removeItem\r\n    };\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\nbespoke.sph.domain.ConstantFieldPartial = function (model) {\r\n\r\n    var vm = {\r\n        Type: ko.observable(),\r\n        Value: ko.observable()\r\n    };\r\n\r\n    vm.Value.subscribe(function(v) {\r\n        if (!ko.unwrap(model.Name)) {\r\n            model.Name(v);\r\n        }\r\n    });\r\n    return vm;\r\n};","/// <reference path=\"../../Scripts/jquery-2.1.1.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.2.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n\r\n\r\nbespoke.sph.domain.CorrelationTypePartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeCorrelationProperty = function (prop) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationPropertyCollection.remove(prop);\r\n            };\r\n        },\r\n        addCorrelationProperty = function () {\r\n            this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(system.guid()));\r\n        };\r\n    return {\r\n        removeCorrelationProperty: removeCorrelationProperty,\r\n        addCorrelationProperty: addCorrelationProperty\r\n\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.CreateEntityActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addPropertyMapping = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var mapping = new bespoke.sph.domain[type + 'Mapping'](system.guid());\r\n                self.PropertyMappingCollection.push(mapping);\r\n            };\r\n        },\r\n        removePropertyMapping = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.PropertyMappingCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addPropertyMapping: addPropertyMapping,\r\n        removePropertyMapping: removePropertyMapping\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.DataGridItemPartial = function () {\r\n\r\n    // DataGridGroup\r\n    var system = require('durandal/system'),\r\n        addDataGridGroupDefinition = function () {\r\n            this.DataGridGroupDefinitionCollection.push(new bespoke.sph.domain.DataGridGroupDefinition(system.guid()));\r\n        },\r\n        removeDataGridGroupDefinition = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.DataGridGroupDefinitionCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addColumn = function () {\r\n            var self = this;\r\n            self.DataGridColumnCollection.push(new bespoke.sph.domain.DataGridColumn(system.guid()));\r\n        },\r\n        removeColumn = function (column) {\r\n            var self = this;\r\n            return function () {\r\n                self.DataGridColumnCollection.remove(column);\r\n            };\r\n        };\r\n\r\n    return {\r\n        addColumn: addColumn,\r\n        removeColumn: removeColumn,\r\n        addDataGridGroupDefinition: addDataGridGroupDefinition,\r\n        removeDataGridGroupDefinition: removeDataGridGroupDefinition\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.DecisionActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function() {\r\n            this.DecisionBranchCollection.push(new bespoke.sph.domain.DecisionBranch(system.guid()));\r\n        },\r\n        removeBranch = function(branch) {\r\n            var self = this;\r\n            return function() {\r\n                self.DecisionBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function() {\r\n            return this.DecisionBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.DelayActivityPartial = function () {\r\n\r\n    return {\r\n        isAsync:true\r\n    };\r\n};","\r\nbespoke.sph.domain.EntityChartPartial = function (model) {\r\n    var context = require(objectbuilders.datacontext),\r\n        pin = function () {\r\n            if (typeof model.IsDashboardItem === \"function\") {\r\n                model.IsDashboardItem(true);\r\n            } else {\r\n                model.IsDashboardItem = ko.observable(true);\r\n            }\r\n\r\n            var tcs = new $.Deferred();\r\n\r\n            context.post(ko.mapping.toJSON(model), '/sph/entitychart/save')\r\n                .done(tcs.resolve);\r\n\r\n            return tcs.promise();\r\n        },\r\n        unpin = function() {\r\n            if (typeof model.IsDashboardItem === \"function\") {\r\n                model.IsDashboardItem(false);\r\n            } else {\r\n                model.IsDashboardItem = ko.observable(false);\r\n            }\r\n\r\n            var tcs = new $.Deferred();\r\n\r\n            context.post(ko.mapping.toJSON(model), '/sph/entitychart/save')\r\n                .done(tcs.resolve);\r\n\r\n            return tcs.promise();\r\n        };\r\n    return {\r\n        pin: pin,\r\n        unpin : unpin\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.1.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.2.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.EntityDefinitionPartial = function () {\r\n    var system = require('durandal/system'),\r\n        app = require('durandal/app'),\r\n        context = require(objectbuilders.datacontext),\r\n        addMember = function () {\r\n            this.MemberCollection.push(new bespoke.sph.domain.Member({\r\n                WebId: system.guid(),\r\n                Boost: 1\r\n            }));\r\n        },\r\n        removeMember = function (floor) {\r\n            var self = this;\r\n            return function () {\r\n                self.MemberCollection.remove(floor);\r\n            };\r\n        },\r\n        addEntityOperation = function () {\r\n            this.EntityOperationCollection.push(new bespoke.sph.domain.EntityOperation({\r\n                WebId: system.guid()\r\n            }));\r\n        }, save = function () {\r\n            var self = this;\r\n            context.post(ko.toJSON(self), \"/entity-definition\")\r\n            .then(function (result) {\r\n                if (result.success) {\r\n                }\r\n            });\r\n        },\r\n        removeEntityOperation = function (operation) {\r\n            var self = this;\r\n            return function () {\r\n                var tcs = new $.Deferred();\r\n                app.showMessage(\"Are you sure you want to remove this operation, this operation cannot be undone and will commit the entire changes to your EntityDefinition\", \"Reactive Developer\", [\"Yes\", \"No\"])\r\n                    .done(function (dialogResult) {\r\n                        if (dialogResult === \"Yes\") {\r\n                            self.EntityOperationCollection.remove(operation);\r\n                            save.call(self);\r\n                        }\r\n                    });\r\n\r\n                return tcs.promise();\r\n            };\r\n        },\r\n        editMember = function (member) {\r\n            var self = this;\r\n            return function () {\r\n                require(['viewmodels/member.dialog', 'durandal/app'], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                    dialog.member(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result == \"OK\") {\r\n                                self.BlockCollection.replace(member, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        addBusinessRule = function () {\r\n            var br = new bespoke.sph.domain.BusinessRule({ WebId: system.guid() });\r\n            var self = this;\r\n\r\n            require(['viewmodels/business.rule.dialog', 'durandal/app'], function (dialog, app) {\r\n                dialog.rule(br);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result == \"OK\") {\r\n                            self.BusinessRuleCollection.push(br);\r\n                        }\r\n                    });\r\n            });\r\n\r\n        },\r\n        editBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                require(['viewmodels/business.rule.dialog', 'durandal/app'], function (dialog, app) {\r\n                    var clone = context.toObservable(ko.mapping.toJS(rule));\r\n                    dialog.rule(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result == \"OK\") {\r\n                                self.BusinessRuleCollection.replace(rule, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        removeBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                self.BusinessRuleCollection.remove(rule);\r\n            };\r\n        },\r\n        editMemberMap = function (member) {\r\n            var building = this;\r\n            return function () {\r\n                console.log(\"show map \", building);\r\n                console.log(\" on member \", member);\r\n                require(['viewmodels/member.map', 'durandal/app'], function (dialog, app) {\r\n                    dialog.init(building.BuildingId(), member.MemberPlanStoreId());\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (result == \"OK\") {\r\n                                member.MemberPlanStoreId(dialog.spatialStoreId());\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        };\r\n    return {\r\n        addEntityOperation: addEntityOperation,\r\n        removeEntityOperation: removeEntityOperation,\r\n        addMember: addMember,\r\n        editMember: editMember,\r\n        removeMember: removeMember,\r\n        addBusinessRule: addBusinessRule,\r\n        editBusinessRule: editBusinessRule,\r\n        removeBusinessRule: removeBusinessRule,\r\n        editMemberMap: editMemberMap\r\n    };\r\n};","/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n\r\nbespoke.sph.domain.EntityLookupElementPartial = function () {\r\n\r\n    var editDisplayTemplate = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", '_blank', 'height=' + screen.height + ',width=' + screen.width + ',toolbar=0,location=0,fullscreen=yes'),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.Command);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.DisplayTemplate(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent('onload', init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        editColumns = function () {\r\n            var self = this;\r\n            require(['viewmodels/members.selector.dialog', 'durandal/app'], function (dialog, app2) {\r\n                dialog.entity(self.Entity());\r\n                app2.showDialog(dialog,self.Entity())\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.LookupColumnCollection(dialog.selectedMembers());\r\n                        }\r\n                    });\r\n\r\n            });\r\n        };\r\n    return {\r\n        editDisplayTemplate: editDisplayTemplate,\r\n        editColumns: editColumns\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.EntityOperationPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeChildAction = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.SetterActionChildCollection.remove(child);\r\n            };\r\n        },\r\n        addChildAction = function() {\r\n            var child = new bespoke.sph.domain.SetterActionChild(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.SetterActionChildCollection.push(child);\r\n        };\r\n\r\n    var vm = {\r\n        addChildAction: addChildAction,\r\n        removeChildAction: removeChildAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/SphApp/services/system.js\" />\r\n/// <reference path=\"/SphApp/schemas/form.designer.g.js\" />\r\n\r\n\r\nbespoke.sph.domain.EntityViewPartial = function () {\r\n\r\n    // Filter\r\n    var system = require('durandal/system'),\r\n        addConditionalFormatting = function () {\r\n            this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(system.guid()));\r\n        },\r\n        removeConditionalFormatting = function (cf) {\r\n            var self = this;\r\n            return function () {\r\n                self.ConditionalFormattingCollection.remove(cf);\r\n            };\r\n\r\n        },\r\n        addRouteParameter = function () {\r\n            this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(system.guid()));\r\n        },\r\n        removeRouteParameter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.RouteParameterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addViewColumn = function () {\r\n            this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn(system.guid()));\r\n        },\r\n        removeViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addFilter = function () {\r\n            this.FilterCollection.push(new bespoke.sph.domain.Filter(system.guid()));\r\n        },\r\n        removeFilter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.FilterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addSort = function () {\r\n            this.SortCollection.push(new bespoke.sph.domain.Sort(system.guid()));\r\n        },\r\n        removeSort = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.SortCollection.remove(obj);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addRouteParameter: addRouteParameter,\r\n        removeRouteParameter: removeRouteParameter,\r\n        addConditionalFormatting: addConditionalFormatting,\r\n        removeConditionalFormatting: removeConditionalFormatting,\r\n        addViewColumn: addViewColumn,\r\n        removeViewColumn: removeViewColumn,\r\n        addSort: addSort,\r\n        removeSort: removeSort,\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ExecutedActivityPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        breakpoint = ko.observable(false),\r\n        hit = ko.observable(false),\r\n        errors = ko.observableArray();\r\n    return {\r\n        breakpoint: breakpoint,\r\n        hit: hit,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.FilterPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n          showFieldDialog = function (accessor, field, path) {\r\n              require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                  dialog.field(field);\r\n                  if (typeof dialog.entity === \"function\") {\r\n                      //dialog.entity();\r\n                      console.log(\"found the entity dialog :\" + dialog.entity.name);\r\n                  }\r\n                  app2.showDialog(dialog)\r\n                  .done(function (result) {\r\n                      if (!result) return;\r\n                      if (result === \"OK\") {\r\n                          accessor(field);\r\n                      }\r\n                  });\r\n\r\n              });\r\n          },\r\n          addField = function (accessor, type) {\r\n              var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n              showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n          },\r\n          editField = function (field) {\r\n              var self = this;\r\n              return function () {\r\n                  var fieldType = ko.unwrap(field.$type),\r\n                      clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                      pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                      type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                  showFieldDialog(self.Field, clone, 'field.' + type.toLowerCase());\r\n              };\r\n          };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.FormElementPartial = function () {\r\n    \r\n    return {\r\n    };\r\n};\r\n\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.HtmlElementPartial = function () {\r\n\r\n    var editHtml = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=html\", '_blank', 'height=' + screen.height + ',width=' + screen.width + ',toolbar=0,location=0,fullscreen=yes'),\r\n            init = function () {\r\n                w.code = ko.unwrap(self.Text);\r\n                w.saved = function (code, close) {\r\n                    self.Text(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (w.attachEvent) { // for ie\r\n            w.attachEvent('onload', init);\r\n        } else {\r\n            init();\r\n        }\r\n    };\r\n    return {\r\n        editHtml: editHtml\r\n    };\r\n};","\r\nbespoke.sph.domain.FormTemplatePartial = function () {\r\n\r\n    var vm = {\r\n    };\r\n    return vm;\r\n}","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.IntervalSchedulePartial = function () {\r\n    var icon = ko.observable(),\r\n        name = ko.observable();\r\n    return {\r\n        icon: icon,\r\n        name : name\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.LineChartItemPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addSeries = function() {\r\n            this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(system.guid()));\r\n        },\r\n        removeSeries = function (series) {\r\n            var self = this;\r\n            return function() {\r\n                self.ChartSeriesCollection.remove(series);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addSeries: addSeries,\r\n        removeSeries: removeSeries\r\n    };\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.ListenActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function () {\r\n            var self = this;\r\n            var branch = new bespoke.sph.domain.ListenBranch(system.guid());\r\n            self.ListenBranchCollection.push(branch);\r\n\r\n        },\r\n        removeBranch = function (branch) {\r\n            var self = this;\r\n            return function () {\r\n                self.ListenBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function () {\r\n            return this.ListenBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ListViewPartial = function (model) {\r\n\r\n    // ListViewColumn\r\n    var system = require('durandal/system'),\r\n        addListViewColumn = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var column = new bespoke.sph.domain.ListViewColumn(system.guid()),\r\n                    input = bespoke.sph.domain[type](system.guid());\r\n\r\n\r\n                column.Path.subscribe(function(v) {\r\n                    input.Path(v);\r\n                });\r\n                column.Label.subscribe(function(v) {\r\n                    input.Label(v);\r\n                });\r\n\r\n                column.Input(input);\r\n                input.isSelected = ko.observable(false);\r\n                self.ListViewColumnCollection.push(column);\r\n            };\r\n        },\r\n        removeListViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ListViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        };\r\n\r\n    _(model.ListViewColumnCollection()).each(function(v) {\r\n        v.Input().isSelected = ko.observable(false);\r\n    });\r\n\r\n    return {\r\n        addListViewColumn: addListViewColumn,\r\n        removeListViewColumn: removeListViewColumn\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.ListViewColumnPartial = function (model) {\r\n\r\n    try {\r\n\r\n        var pattern1 = /Bespoke\\.Sph\\.Domain\\.(.*?),/,\r\n            input1 = ko.unwrap(model.Input),\r\n            name1 = null,\r\n            icon1 = null;\r\n        if (input1) {\r\n            name1 = pattern1.exec(ko.unwrap(input1.$type))[1],\r\n            icon1 = '/images/form.element.' + name1 + '.png';\r\n        }\r\n\r\n\r\n    } catch (err) {\r\n\r\n    }\r\n    icon1 = icon1 || '/images/form.element.textbox.png';\r\n    var icon = ko.observable(icon1);\r\n    model.Input.subscribe(function (c) {\r\n        if (!c.$type) {\r\n            return;\r\n        }\r\n\r\n        var pattern = /Bespoke\\.Sph\\.Domain\\.(.*?),/,\r\n            name = pattern.exec(ko.unwrap(c.$type))[1];\r\n        icon('/images/form.element.' + name + '.png');\r\n\r\n\r\n    });\r\n    return {\r\n        icon: icon\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.1.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.MappingActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addMappingSource = function () {\r\n            var self = this;\r\n            var mapping = new bespoke.sph.domain['MappingSource'](system.guid());\r\n            self.MappingSourceCollection.push(mapping);\r\n\r\n        },\r\n        removeMappingSource = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.MappingSourceCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addMappingSource: addMappingSource,\r\n        removeMappingSource: removeMappingSource\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../schemassystem.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\n\r\nbespoke.sph.domain.MemberPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addMember = function () {\r\n            this.MemberCollection.push(new bespoke.sph.domain.Member(system.guid()));\r\n        },\r\n        editMember = function (member) {\r\n            var self = this;\r\n            return function () {\r\n                require(['viewmodels/member.dialog', 'durandal/app'], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                    dialog.member(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result == \"OK\") {\r\n                                self.BlockCollection.replace(member, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        editPermission = function (member) {\r\n            var self = this;\r\n            require(['viewmodels/field.permission.dialog', 'durandal/app'], function (dialog, app) {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                dialog.member(clone);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result == \"OK\") {\r\n                            self.FieldPermissionCollection(clone.FieldPermissionCollection());\r\n                        }\r\n                    });\r\n            });\r\n\r\n        },\r\n        removeMember = function (floor) {\r\n            var self = this;\r\n            return function () {\r\n                self.MemberCollection.remove(floor);\r\n            };\r\n        },\r\n        editMemberMap = function (member) {\r\n            var building = this;\r\n            return function () {\r\n                console.log(\"show map \", building);\r\n                console.log(\" on member \", member);\r\n                require(['viewmodels/member.map', 'durandal/app'], function (dialog, app) {\r\n                    dialog.init(building.BuildingId(), member.MemberPlanStoreId());\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (result == \"OK\") {\r\n                                member.MemberPlanStoreId(dialog.spatialStoreId());\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field, clone, 'field.' + type.toLowerCase());\r\n            };\r\n        };\r\n    return {\r\n        editPermission: editPermission,\r\n        addMember: addMember,\r\n        editMember: editMember,\r\n        editMemberMap: editMemberMap,\r\n        removeMember: removeMember,\r\n        addField: addField,\r\n        editField: editField\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.MethodArgPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field, clone, 'field.' + type.toLowerCase());\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.NotificationActivityPartial = function(model) {\r\n    \r\n    if (!model.From()) {\r\n        model.From(\"admin@@sph.my\");\r\n    }\r\n    return {\r\n    };\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ParallelActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function() {\r\n            this.ParallelBranchCollection.push(new bespoke.sph.domain.ParallelBranch(system.guid()));\r\n        },\r\n        removeBranch = function(branch) {\r\n            var self = this;\r\n            return function() {\r\n                self.ParallelBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function() {\r\n            return this.ParallelBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","bespoke.sph.domain.ReceiveActivityPartial = function () {\r\n    //\r\n    var system = require('durandal/system'),\r\n        removeCorrelationProperty = function (prop) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationPropertyCollection.remove(prop);\r\n            };\r\n        },\r\n        addCorrelationProperty = function () {\r\n            this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(system.guid()));\r\n        };\r\n\r\n    return {\r\n        removeCorrelationProperty: removeCorrelationProperty,\r\n        addCorrelationProperty: addCorrelationProperty\r\n\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.DailySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Daily Schedule\"),\r\n        icon: ko.observable(\"fa fa-calendar\")\r\n    };\r\n};\r\nbespoke.sph.domain.WeeklySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Weekly Schedule\"),\r\n        icon: ko.observable(\"fa fa-th-list\")\r\n    };\r\n};\r\nbespoke.sph.domain.MonthlySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Monthly Schedule\"),\r\n        icon: ko.observable(\"fa fa-calendar-o\"),\r\n        dateOptions : _.range(1,31)\r\n    };\r\n};\r\n\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../prototypes/IntervalScheduleContainer.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.ReportDeliveryPartial = function () {\r\n\r\n    return new bespoke.sph.domain.IntervalScheduleContainer();\r\n\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.RulePartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n        },\r\n        editField = function (field, accessor) {\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(accessor, clone, 'field.' + type.toLowerCase());\r\n\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n/// <reference path=\"../prototypes/IntervalScheduleContainer.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ScheduledTriggerActivityPartial = function (model) {\r\n\r\n    var b = new bespoke.sph.domain.IntervalScheduleContainer();\r\n    \r\n    return b;\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.ScreenActivityPartial = function () {\r\n\r\n    return {\r\n        isAsync: true,\r\n        canStart: true\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.SearchDefinitionPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeFilter = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.FilterCollection.remove(child);\r\n            };\r\n        },\r\n        addFilter = function() {\r\n            var child = new bespoke.sph.domain.Filter(system.guid());\r\n            this.FilterCollection.push(child);\r\n        };\r\n\r\n    var vm = {\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.SetterActionPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeChildAction = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.SetterActionChildCollection.remove(child);\r\n            };\r\n        },\r\n        addChildAction = function() {\r\n            var child = new bespoke.sph.domain.SetterActionChild(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.SetterActionChildCollection.push(child);\r\n        };\r\n\r\n    var vm = {\r\n        addChildAction: addChildAction,\r\n        removeChildAction: removeChildAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"~/Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.SetterActionChildPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path, entity) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n                if (typeof dialog.entity === \"function\") {\r\n                    dialog.entity(entity);\r\n                    console.log(\"found the entity dialog :\" + dialog.entity.name);\r\n                }\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type, entity) {\r\n            var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase(), entity);\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field, clone, 'field.' + type.toLowerCase());\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.2.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.StartWorkflowActionPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeMapping = function (map) {\r\n            var self = this;\r\n            return function() {\r\n                self.WorkflowTriggerMapCollection.remove(map);\r\n            };\r\n        },\r\n        addMapping = function() {\r\n            var child = new bespoke.sph.domain.WorkflowTriggerMap(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.WorkflowTriggerMapCollection.push(child);\r\n        },\r\n        editMapping = function (child) {\r\n            this.WorkflowTriggerMapCollection.push(child);\r\n        };\r\n\r\n    var vm = {\r\n        editMapping: editMapping,\r\n        addMapping: addMapping,\r\n        removeMapping: removeMapping\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.TriggerPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeAction = function (action) {\r\n            var self = this;\r\n            return function () {\r\n                self.ActionCollection.remove(action);\r\n            };\r\n        },\r\n        addAction = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var t = type.toLowerCase().replace(\", \", \",\");\r\n                require(['viewmodels/action.' + t, 'durandal/app'], function (dialog, app2) {\r\n                    if (typeof dialog.action !== \"function\") {\r\n                        console.error(\"The dialog for \" + t + \" do not implement action as observable\");\r\n                        return;\r\n                    }\r\n\r\n                    // initialize the action properties\r\n                    var clone = ko.mapping.fromJS(ko.toJS(dialog.action));\r\n                    if(typeof clone.Title === \"function\"){\r\n                        clone.Title(\"\");\r\n                    }\r\n                    for (var n in clone) {\r\n                        if (typeof clone[n] === \"function\" && n !== \"$type\") {\r\n                            var value = clone[n]();\r\n                            if(typeof  value === \"string\"){\r\n                                clone[n](\"\");\r\n                            }\r\n                        }\r\n                    }\r\n                    dialog.action(clone);\r\n\r\n                    if (typeof dialog.trigger === \"function\") {\r\n                        dialog.trigger(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n\r\n                            var action = dialog.action();\r\n\r\n                            action.WebId(system.guid());\r\n                            action.IsActive(true);\r\n                            self.ActionCollection.push(action);\r\n                        }\r\n                    });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editAction = function (action) {\r\n            var self = this;\r\n            return function () {\r\n                var type = ko.unwrap(action.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(action));\r\n\r\n                require(['viewmodels/action.' + type.toLowerCase().replace(\", \", \",\"), 'durandal/app'], function (dialog, app2) {\r\n                    dialog.action(clone);\r\n                    if (typeof dialog.trigger === \"function\") {\r\n                        dialog.trigger(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.ActionCollection.replace(action, clone);\r\n                        }\r\n                    });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n         addRule = function () {\r\n             var rule = new bespoke.sph.domain.Rule(system.guid());\r\n             rule.Left({ Name: ko.observable(\"+ Field\") });\r\n             rule.Right({ Name: ko.observable(\"+ Field\") });\r\n             this.RuleCollection.push(rule);\r\n         },\r\n        removeRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                self.RuleCollection.remove(rule);\r\n            };\r\n        },\r\n        \r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require(['viewmodels/assembly.dialog', 'durandal/app'], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert('not implemented' + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        addRule: addRule,\r\n        removeRule: removeRule,\r\n        removeAction: removeAction,\r\n        addAction: addAction,\r\n        editAction: editAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","bespoke.sph.domain.TryScopePartial = function () {\r\n\r\n\r\n    var\r\n        addCatchScope = function(wd) {\r\n            return function() {\r\n                var system = require('durandal/system');\r\n\r\n\r\n                var self2 = this;\r\n                var catchScope = new bespoke.sph.domain.CatchScope(system.guid());\r\n\r\n                require(['viewmodels/catch.scope.dialog', 'durandal/app'], function(dialog, app2) {\r\n                    dialog.catchScope(catchScope);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(wd());\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function(result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self2.CatchScopeCollection.push(catchScope);\r\n                            }\r\n\r\n                        });\r\n\r\n                });\r\n            };\r\n        },\r\n        editCatchScope = function (catchScope, wdOutside) {\r\n            var self = this, wd = wdOutside;\r\n            var clone = ko.mapping.fromJS(ko.mapping.toJS(catchScope));\r\n\r\n            return function () {\r\n                require(['viewmodels/catch.scope.dialog', 'durandal/app'], function (dialog, app2) {\r\n                    dialog.catchScope(clone);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(wd());\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in catchScope) {\r\n                                    if (typeof catchScope[g] === \"function\" && catchScope[g].name === \"observable\") {\r\n                                        catchScope[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        catchScope[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n            };\r\n\r\n        },\r\n        removeCatchScope = function (catchScope, wdOutside) {\r\n            var self = this, wd = wdOutside;\r\n            \r\n            return function () {\r\n                wd().ActivityCollection().forEach(function (act) {\r\n                    if (act.CatchScope() === catchScope.Id()) {\r\n                        act.CatchScope(\"\");\r\n                    }\r\n                });\r\n\r\n                self.CatchScopeCollection.remove(catchScope);\r\n            };\r\n            \r\n        };\r\n\r\n    return {\r\n        addCatchScope: addCatchScope,\r\n        editCatchScope: editCatchScope,\r\n        removeCatchScope: removeCatchScope\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.1.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.UpdateEntityActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addPropertyMapping = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var mapping = new bespoke.sph.domain[type + 'Mapping'](system.guid());\r\n                self.PropertyMappingCollection.push(mapping);\r\n            };\r\n        },\r\n        removePropertyMapping = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.PropertyMappingCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addPropertyMapping: addPropertyMapping,\r\n        removePropertyMapping: removePropertyMapping\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.VariablePartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        hasError = ko.observable(),\r\n        errors = ko.observableArray();\r\n    return {\r\n        hasError: hasError,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.ViewColumnPartial = function () {\r\n\r\n    // Filter\r\n    var system = require('durandal/system'),\r\n        addConditionalFormatting = function () {\r\n            this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(system.guid()));\r\n        },\r\n        removeConditionalFormatting = function (cf) {\r\n            var self = this;\r\n            return function () {\r\n                self.ConditionalFormattingCollection.remove(cf);\r\n            };\r\n\r\n        },\r\n        removeIconCssClass = function () {\r\n            this.IconCssClass('');\r\n        },\r\n        removeIconStoreId = function () {\r\n            this.IconStoreId('');\r\n        };\r\n    return {\r\n        addConditionalFormatting: addConditionalFormatting,\r\n        removeConditionalFormatting: removeConditionalFormatting,\r\n        removeIconStoreId: removeIconStoreId,\r\n        removeIconCssClass: removeIconCssClass\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.WorkflowDefinitionPartial = function (model) {\r\n\r\n    var system = require('durandal/system'),\r\n        isBusy = ko.observable(false),\r\n        context = require(objectbuilders.datacontext),\r\n        elementNameOptions = ko.observableArray(),\r\n        removeActivity = function (activity) {\r\n            var self = this;\r\n            return function () {\r\n                self.ActivityCollection.remove(activity);\r\n            };\r\n        },\r\n        setStartActivity = function (act) {\r\n            var self = this;\r\n            return function () {\r\n                _(self.ActivityCollection()).each(function (v) {\r\n                    v.IsInitiator(false);\r\n                });\r\n                act.IsInitiator(true);\r\n\r\n            };\r\n        },\r\n        addActivity = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var activity = new bespoke.sph.domain[type + 'Activity'](system.guid());\r\n\r\n                require(['viewmodels/activity.' + type.toLowerCase(), 'durandal/app'], function (dialog, app2) {\r\n                    dialog.activity(activity);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.ActivityCollection.push(activity);\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editActivity = function (activity) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = context.toObservable(ko.mapping.toJS(activity)),\r\n                    type = ko.unwrap(activity.TypeName);\r\n\r\n                isBusy(true);\r\n                require(['viewmodels/activity.' + type.toLowerCase(), 'durandal/app'], function (dialog, app2) {\r\n                    dialog.activity(clone);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            $('div.modalBlockout,div.modalHost').remove();\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in activity) {\r\n                                    if (activity.hasOwnProperty(g)) {\r\n                                        var observable = activity[g].name === \"observable\" || activity[g].name === \"d\";\r\n                                        if (typeof activity[g] === \"function\" && observable) {\r\n                                            activity[g](ko.unwrap(clone[g]));\r\n                                        } else {\r\n                                            activity[g] = clone[g];\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        addVariable = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var variable = new bespoke.sph.domain[type + 'Variable'](system.guid());\r\n\r\n                require(['viewmodels/variable.' + type.toLowerCase(), 'durandal/app'], function (dialog, app2) {\r\n                    dialog.variable(variable);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.VariableDefinitionCollection.push(variable);\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editVariable = function (variable) {\r\n            var self = this;\r\n            return function () {\r\n                var variableType = ko.unwrap(variable.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(variable)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Variable,/,\r\n                    type = pattern.exec(variableType)[1];\r\n\r\n                require(['viewmodels/variable.' + type.toLowerCase(), 'durandal/app'], function (dialog, app2) {\r\n                    dialog.variable(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in variable) {\r\n                                    if (typeof variable[g] === \"function\" && variable[g].name === \"observable\") {\r\n                                        variable[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        variable[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeVariable = function (variable) {\r\n            var self = this;\r\n            return function () {\r\n                self.VariableDefinitionCollection.remove(variable);\r\n            };\r\n        },\r\n        addCorrelationType = function () {\r\n            var self = this;\r\n            var correlationType = new bespoke.sph.domain.CorrelationType(system.guid());\r\n\r\n            require(['viewmodels/correlation.type.dialog', 'durandal/app'], function (dialog, app2) {\r\n                dialog.correlationType(correlationType);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.CorrelationTypeCollection.push(correlationType);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editCorrelationType = function (correlationType) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(correlationType));\r\n\r\n                require(['viewmodels/correlation.type.dialog', 'durandal/app'], function (dialog, app2) {\r\n                    dialog.correlationType(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in correlationType) {\r\n                                    if (typeof correlationType[g] === \"function\" && correlationType[g].name === \"observable\") {\r\n                                        correlationType[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        correlationType[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeCorrelationType = function (correlationType) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationTypeCollection.remove(correlationType);\r\n            };\r\n        },\r\n        addCorrelationSet = function () {\r\n            var self = this;\r\n            var correlationSet = new bespoke.sph.domain.CorrelationSet(system.guid());\r\n\r\n            require(['viewmodels/correlation.set.dialog', 'durandal/app'], function (dialog, app2) {\r\n                dialog.correlationSet(correlationSet);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.CorrelationSetCollection.push(correlationSet);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editCorrelationSet = function (correlationSet) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(correlationSet));\r\n\r\n                require(['viewmodels/correlation.set.dialog', 'durandal/app'], function (dialog, app2) {\r\n                    dialog.correlationSet(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in correlationSet) {\r\n                                    if (typeof correlationSet[g] === \"function\" && correlationSet[g].name === \"observable\") {\r\n                                        correlationSet[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        correlationSet[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeCorrelationSet = function (correlationSet) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationSetCollection.remove(correlationSet);\r\n            };\r\n        },\r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require(['viewmodels/assembly.dialog', 'durandal/app'], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert('not implemented' + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        },\r\n        addTryScope = function () {\r\n            var self = this;\r\n            var tryScope = new bespoke.sph.domain.TryScope(system.guid());\r\n            require(['viewmodels/try.scope.dialog', 'durandal/app'], function (dialog, app2) {\r\n                dialog.tryScope(tryScope);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.TryScopeCollection.push(tryScope);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editTryScope = function (tryScope) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(tryScope));\r\n\r\n                require(['viewmodels/try.scope.dialog', 'durandal/app'], function (dialog, app2) {\r\n                    dialog.tryScope(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in tryScope) {\r\n                                    if (typeof tryScope[g] === \"function\" && tryScope[g].name === \"observable\") {\r\n                                        tryScope[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        tryScope[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeTryScope = function (tryScope) {\r\n            var self = this;\r\n            return function () {\r\n                self.TryScopeCollection.remove(tryScope);\r\n            };\r\n        },\r\n        loadSchema = function (storeId) {\r\n            var id = storeId || this.SchemaStoreId();\r\n            $.get(\"/WorkflowDefinition/GetXsdElementName/\" + id)\r\n                .then(function (result) {\r\n                    elementNameOptions(result);\r\n                });\r\n        };\r\n\r\n    model.SchemaStoreId.subscribe(loadSchema);\r\n\r\n    var vm = {\r\n        isBusy: isBusy,\r\n        removeCorrelationType: removeCorrelationType,\r\n        addCorrelationType: addCorrelationType,\r\n        editCorrelationType: editCorrelationType,\r\n        removeCorrelationSet: removeCorrelationSet,\r\n        addCorrelationSet: addCorrelationSet,\r\n        editCorrelationSet: editCorrelationSet,\r\n        removeVariable: removeVariable,\r\n        addVariable: addVariable,\r\n        editVariable: editVariable,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        addActivity: addActivity,\r\n        editActivity: editActivity,\r\n        removeActivity: removeActivity,\r\n        loadSchema: loadSchema,\r\n        xsdElements: elementNameOptions,\r\n        setStartActivity: setStartActivity,\r\n        addTryScope: addTryScope,\r\n        editTryScope: editTryScope,\r\n        removeTryScope: removeTryScope\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.WorkflowDesignerPartial = function () {\r\n  \r\n    return {\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.2.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.WorkflowTriggerMapPartial = function () {\r\n    var self = this,\r\n        system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        };\r\n\r\n    self.addField = function(accessor, type) {\r\n        var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n    };\r\n\r\n    self.editField = function(field, accessor) {\r\n        return function() {\r\n            var fieldType = ko.unwrap(field.$type),\r\n                clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                type = pattern.exec(fieldType)[1];\r\n\r\n\r\n            showFieldDialog(accessor, clone, 'field.' + type.toLowerCase());\r\n\r\n        };\r\n    };\r\n\r\n    return self;\r\n};\r\n\r\nbespoke.sph.domain.WorkflowTriggerMapPartial.prototype = new bespoke.sph.domain.FieldContainer();\r\n"],"sourceRoot":"/source/"}