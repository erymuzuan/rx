{"version":3,"sources":["Activity.js","AssemblyField.js","BarChartItem.js","BusinessRule.js","ButtonPartial.js","CatchScope.js","ChildEntityListView.js","ChildWorkflowActivity.js","ComboBox.js","ComplexMemberPartial.js","ConstantField.js","CorrelationType.js","CreateEntityActivity.js","DataGridItem.js","DecisionActivity.js","DelayActivity.js","DelimitedTextFormatter.js","EntityChart.js","EntityDefinition.js","EntityFormPartial.js","EntityLookupElement.js","EntityView.js","ExecutedActivity.js","Filter.js","FixedLengthTextFormatter.js","FormDialogPartial.js","FormElement.js","HtmlElement.js","IFormTemplate.js","IntervalSchedule.js","LineChartItem.js","ListenActivity.js","ListView.js","ListViewColumn.js","MappingActivity.js","Member.js","MethodArg.js","NotificationActivity.js","OperationEndpointPartial.js","ParallelActivity.js","QueryEndpointPartial.js","ReceiveActivity.js","ReceivePortPartial.js","report.js","ReportDelivery.js","RouteParameter.js","RouteParameterFieldPartial.js","Rule.js","ScheduledTriggerActivity.js","SetterAction.js","SetterActionChild.js","SqlServerReceiveLocation.js","StartWorkflowAction.js","TabControlPartial.js","TimePeriodPartial.js","TransformDefinition.js","Trigger.js","TryScope.js","UpdateEntityActivity.js","ValueObjectDefinitionPartial.js","Variable.js","ViewColumn.js","WorkflowDefinition.js","WorkflowDesigner.js","WorkflowFormPartial.js","WorkflowTriggerMap.js","XmlTextFormatter.js"],"names":["bespoke","sph","domain","ActivityPartial","system","require","hasError","ko","observable","breakpoint","selected","hit","errors","observableArray","AssemblyFieldPartial","objectbuilders","addParameter","MethodArgCollection","push","MethodArg","guid","removeParameter","p","self","remove","BarChartItemPartial","addSeries","ChartSeriesCollection","ChartSeries","removeSeries","series","BusinessRulePartial","model","addFilter","br","Rule","Left","Name","Right","FilterCollection","removeFilter","addRule","RuleCollection","removeRule","ButtonPartial","canSetSuccessCallback","computed","editCommand","w","window","open","screen","height","width","wdw","init","code","unwrap","Command","saved","close","attachEvent","editOperationSuccessCallback","OperationSuccessCallback","editOperationFailureCallback","OperationFailureCallback","CatchScopePartial","ChildEntityListViewPartial","addSort","SortCollection","Sort","removeSort","obj","addViewColumn","ViewColumnCollection","ViewColumn","WebId","Header","editViewColumn","vc","clone","mapping","fromJS","toJS","dialog","app2","column","entity","Entity","showDialog","done","result","g","name","removeViewColumn","ChildWorkflowActivityPartial","addExecutedMapping","map","PropertyMapping","ExecutedPropertyMappingCollection","removeExecutedMapping","addMapping","PropertyMappingCollection","removeMapping","ComboBoxPartial","addItem","item","ComboBoxItem","ComboBoxItemCollection","removeItem","ComplexMemberPartial","subscribe","TypeName","$","get","ConstantFieldPartial","option","vm","Type","Value","v","CorrelationTypePartial","removeCorrelationProperty","prop","CorrelationPropertyCollection","addCorrelationProperty","CorrelationProperty","CreateEntityActivityPartial","addPropertyMapping","type","removePropertyMapping","DataGridItemPartial","addColumn","DataGridColumnCollection","DataGridColumn","removeColumn","addDataGridGroupDefinition","DataGridGroupDefinitionCollection","DataGridGroupDefinition","removeDataGridGroupDefinition","DecisionActivityPartial","addBranch","DecisionBranchCollection","DecisionBranch","removeBranch","branch","multipleEndPoints","DelayActivityPartial","isAsync","DelimitedTextFormatterPartial","selectedRow","FlatFileDetailTag","parentOptions","childNameChanged","indexOf","isWizardOk","SampleStoreId","Delimiter","selectRow","row","addDetailsRow","child","nameChangedSubscription","DetailRowCollection","removeDetailsRow","dispose","EntityChartPartial","context","datacontext","pin","IsDashboardItem","tcs","Deferred","post","toJSON","resolve","promise","unpin","ServiceContractPartial","publish","ed","EntityDefinitionPartial","app","save","then","success","addEntityOperation","EntityOperationCollection","EntityOperation","removeEntityOperation","operation","showMessage","dialogResult","call","addMember","MemberCollection","Member","Boost","editMember","member","BlockCollection","replace","removeMember","floor","addBusinessRule","BusinessRule","rule","BusinessRuleCollection","editBusinessRule","toObservable","removeBusinessRule","editMemberMap","building","console","log","BuildingId","MemberPlanStoreId","spatialStoreId","EntityFormPartial","EntityLookupElementPartial","editDisplayTemplate","DisplayTemplate","editColumns","selectedMembers","LookupColumnCollection","editFilter","selectedFilters","EntityViewPartial","addRouteParameter","RouteParameterCollection","RouteParameter","removeRouteParameter","addConditionalFormatting","ConditionalFormattingCollection","ConditionalFormatting","removeConditionalFormatting","cf","Filter","ExecutedActivityPartial","FilterPartial","showFieldDialog","accessor","field","path","addField","toLowerCase","editField","fieldType","$type","pattern","exec","Field","FixedLengthTextFormatterPartial","move","array","from","to","target","increment","k","arrange","f","step","list","FieldMappingCollection","temps","index","forEach","x","i","Order","moveUp","moveDown","FixedLengthTextFieldMapping","removeField","FormDialogPartial","buttons","DialogButtonCollection","_","each","canMoveDown","canMoveUp","first","last","btn","removeDialogButton","addDialogButton","DialogButton","DialogButtonPartial","FormElementPartial","HtmlElementPartial","editHtml","Text","FormTemplatePartial","IntervalSchedulePartial","icon","LineChartItemPartial","ListenActivityPartial","ListenBranch","ListenBranchCollection","ListViewPartial","ListViewColumnCollection","Input","isSelected","addListViewColumn","ListViewColumn","input","Path","Label","removeListViewColumn","ListViewColumnPartial","pattern1","input1","name1","icon1","err","c","MappingActivityPartial","addMappingSource","MappingSourceCollection","removeMappingSource","MemberPartial","AllowMultiple","DefaultValue","editPermission","FieldPermissionCollection","MethodArgPartial","NotificationActivityPartial","From","OperationEndpointPartial","editReferencedAssembly","dll","alert","removeReferencedAssembly","ReferencedAssemblyCollection","addReferencedAssembly","selectedAssemblies","removePatchPath","PatchPathCollection","addPatchPath","PatchSetter","IsRequired","addChildAction","SetterActionChild","SetterActionChildCollection","removeChildAction","ParallelActivityPartial","ParallelBranchCollection","ParallelBranch","QueryEndpointPartial","allowQueryCache","CacheFilter","ReceiveActivityPartial","ReceivePortPartial","port","ok","Formatter","TextFormatter","isComputed","warn","editHeaderFieldMapping","location","removeHeaderFieldMapping","addHeaderFieldMapping","HeaderFieldMapping","addUriFieldMapping","UriFieldMapping","DailySchedulePartial","WeeklySchedulePartial","MonthlySchedulePartial","dateOptions","range","ReportDeliveryPartial","IntervalScheduleContainer","RouteParameterPartial","RouteParameterFieldPartial","IsOptional","opt","RulePartial","binaryOperator","Operator","ScheduledTriggerActivityPartial","b","SetterActionPartial","SetterActionChildPartial","Adapters","Polling","Interval","IntervalPeriod","Query","StartDate","SqlServerReceiveLocation","ReceiveLocation","Id","Server","Database","Trusted","UseQueryNotification","UserId","Password","n","hasOwnProperty","isObservable","values","$values","isArray","ai","SqlServerReceiveLocationPartial","extend","FolderReceiveLocationPartial","StartWorkflowActionPartial","editMapping","WorkflowTriggerMapCollection","WorkflowTriggerMap","TabControlPartial","tab","TabPanelCollection","length","TabPanel","TimePeriodPartial","period","toString","Count","Unit","TransformDefinitionPartial","TriggerPartial","removeAction","action","ActionCollection","addAction","t","error","Title","destroyAll","trigger","IsActive","editAction","TryScopePartial","addCatchScope","wd","self2","catchScope","CatchScope","CatchScopeCollection","editCatchScope","wdOutside","removeCatchScope","ActivityCollection","act","UpdateEntityActivityPartial","ValueObjectDefinitionPartial","VariablePartial","ViewColumnPartial","trim","removeIconStoreId","IconStoreId","removeIconCssClass","IconCssClass","WorkflowDefinitionPartial","isBusy","elementNameOptions","loadSchema","storeId","id","SchemaStoreId","removeCorrelationType","correlationType","CorrelationTypeCollection","addCorrelationType","CorrelationType","editCorrelationType","removeCorrelationSet","correlationSet","CorrelationSetCollection","addCorrelationSet","CorrelationSet","editCorrelationSet","removeVariable","variable","VariableDefinitionCollection","addVariable","editVariable","variableType","addActivity","activity","editActivity","removeActivity","xsdElements","setStartActivity","IsInitiator","addTryScope","tryScope","TryScope","TryScopeCollection","editTryScope","removeTryScope","WorkflowDesignerPartial","WorkflowFormPartial","WorkflowTriggerMapPartial","prototype","FieldContainer","XmlTextFormatterPartial","addParentElement","ParentElementValueCollection","XmlElementTextFieldMapping","removeParentElement","element","addParentAttribute","ParentAttributeValueCollection","XmlAttributeTextFieldMapping","removeParentAttribute","attr"],"mappings":"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","file":"__partial.min.js","sourcesContent":["/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nvar bespoke = bespoke || {};\r\nbespoke.sph = bespoke.sph || {};\r\nbespoke.sph.domain = bespoke.sph.domain || {};\r\n\r\n\r\nbespoke.sph.domain.ActivityPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        hasError = ko.observable(),\r\n        breakpoint = ko.observable(false),\r\n        selected = ko.observable(false),\r\n        hit = ko.observable(false),\r\n        errors = ko.observableArray();\r\n    return {\r\n        breakpoint: breakpoint,\r\n        hit: hit,\r\n        selected: selected,\r\n        hasError: hasError,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.AssemblyFieldPartial = function () {\r\n    var system = require(objectbuilders.system),\r\n        addParameter = function () {\r\n            this.MethodArgCollection.push(new bespoke.sph.domain.MethodArg(system.guid()));\r\n        },\r\n        removeParameter = function(p) {\r\n            var self = this;\r\n            return function() {\r\n                self.MethodArgCollection.remove(p);\r\n            };\r\n        };\r\n    return {\r\n        addParameter: addParameter,\r\n        removeParameter: removeParameter\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.BarChartItemPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addSeries = function() {\r\n            this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(system.guid()));\r\n        },\r\n        removeSeries = function (series) {\r\n            var self = this;\r\n            return function() {\r\n                self.ChartSeriesCollection.remove(series);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addSeries: addSeries,\r\n        removeSeries: removeSeries\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.BusinessRulePartial = function (model) {\r\n\r\n    var system = require('durandal/system'),\r\n        addFilter = function () {\r\n            var self = this,\r\n                br = new bespoke.sph.domain.Rule(system.guid());\r\n\r\n            br.Left({ Name: ko.observable(\"+ Field\") });\r\n            br.Right({ Name: ko.observable(\"+ Field\") });\r\n\r\n            self.FilterCollection.push(br);\r\n\r\n        },\r\n        removeFilter = function (br) {\r\n            var self = this;\r\n            return function () {\r\n                self.FilterCollection.remove(br);\r\n            };\r\n        },\r\n        addRule = function () {\r\n            var self = this,\r\n                br = new bespoke.sph.domain.Rule(system.guid());\r\n\r\n            br.Left({ Name: ko.observable(\"+ Field\") });\r\n            br.Right({ Name: ko.observable(\"+ Field\") });\r\n\r\n            self.RuleCollection.push(br);\r\n\r\n        },\r\n        removeRule = function (br) {\r\n            var self = this;\r\n            return function () {\r\n                self.RuleCollection.remove(br);\r\n            };\r\n        };\r\n\r\n\r\n\r\n    return {\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter,\r\n        addRule: addRule,\r\n        removeRule: removeRule\r\n    };\r\n};\r\n","/// <reference path=\"../../Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../SphApp/schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.ButtonPartial = function () {\r\n\r\n    var editCommand = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.Command);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.Command(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        editOperationSuccessCallback = function () {\r\n            var self = this,\r\n                w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n                wdw = w.window || w,\r\n                init = function () {\r\n                    wdw.code = ko.unwrap(self.OperationSuccessCallback);\r\n                    if (!w.code) {\r\n                        w.code = \"//insert your code here\";\r\n                    }\r\n                    wdw.saved = function (code, close) {\r\n                        self.OperationSuccessCallback(code);\r\n                        if (close) {\r\n                            w.close();\r\n                        }\r\n                    };\r\n                };\r\n            if (wdw.attachEvent) { // for ie\r\n                wdw.attachEvent(\"onload\", init);\r\n            } else {\r\n                init();\r\n            }\r\n        },\r\n    editOperationFailureCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationFailureCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationFailureCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        canSetSuccessCallback = ko.computed(function () {\r\n\r\n        });\r\n    return {\r\n        editCommand: editCommand,\r\n        editOperationSuccessCallback: editOperationSuccessCallback,\r\n        editOperationFailureCallback: editOperationFailureCallback,\r\n        canSetSuccessCallback: canSetSuccessCallback\r\n    };\r\n};","bespoke.sph.domain.CatchScopePartial = function () {\r\n\r\n\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n\r\n\r\nbespoke.sph.domain.ChildEntityListViewPartial = function (model) {\r\n    // ViewColumn\r\n    var system = require('durandal/system'),\r\n        addViewColumn = function () {\r\n            this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn({ WebId: system.guid(),Header :'<New Column>'}));\r\n        },\r\n        removeViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addSort = function () {\r\n            this.SortCollection.push(new bespoke.sph.domain.Sort(system.guid()));\r\n        },\r\n        removeSort = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.SortCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n    editViewColumn = function (vc) {\r\n        return function () {\r\n            var clone = ko.mapping.fromJS(ko.mapping.toJS(vc));\r\n\r\n            require(['viewmodels/view.column.dialog', 'durandal/app'], function (dialog, app2) {\r\n                dialog.column(clone);\r\n                dialog.entity(model.Entity());\r\n\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            for (var g in vc) {\r\n                                if (typeof vc[g] === \"function\" && vc[g].name === \"observable\") {\r\n                                    vc[g](ko.unwrap(clone[g]));\r\n                                } else {\r\n                                    vc[g] = clone[g];\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n        };\r\n    };\r\n    return {\r\n        addSort: addSort,\r\n        removeSort: removeSort,\r\n        addViewColumn: addViewColumn,\r\n        editViewColumn: editViewColumn,\r\n        removeViewColumn: removeViewColumn\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.ChildWorkflowActivityPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        removeMapping = function (map) {\r\n            var self = this;\r\n            return function () {\r\n                self.PropertyMappingCollection.remove(map);\r\n            };\r\n        },\r\n        addMapping = function () {\r\n            var map = new bespoke.sph.domain.PropertyMapping(system.guid());\r\n            this.PropertyMappingCollection.push(map);\r\n        },\r\n        removeExecutedMapping = function (map) {\r\n            var self = this;\r\n            return function () {\r\n                self.ExecutedPropertyMappingCollection.remove(map);\r\n            };\r\n        },\r\n        addExecutedMapping = function () {\r\n            var map = new bespoke.sph.domain.PropertyMapping(system.guid());\r\n            this.ExecutedPropertyMappingCollection.push(map);\r\n        };\r\n\r\n    var vm = {\r\n        addExecutedMapping: addExecutedMapping,\r\n        removeExecutedMapping: removeExecutedMapping,\r\n        addMapping: addMapping,\r\n        removeMapping: removeMapping\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ComboBoxPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addItem = function () {\r\n            var self = this;\r\n            var item = new bespoke.sph.domain.ComboBoxItem(system.guid());\r\n            self.ComboBoxItemCollection.push(item);\r\n\r\n        },\r\n        removeItem = function (item) {\r\n            var self = this;\r\n            return function () {\r\n                self.ComboBoxItemCollection.remove(item);\r\n            };\r\n        };\r\n    return {\r\n        addItem: addItem,\r\n        removeItem: removeItem\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ComplexMemberPartial = function(model) {\r\n    model.Name.subscribe(function(name) {\r\n        if (!ko.unwrap(model.TypeName)) {\r\n            $.get(\"/entity-definition/singular/\" + name).done(model.TypeName);\r\n        }\r\n    });\r\n\r\n}","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\nbespoke.sph.domain.ConstantFieldPartial = function (model, option) {\r\n\r\n    var vm = {\r\n        Type: ko.observable(),\r\n        Value: ko.observable(option.Value)\r\n    };\r\n\r\n    vm.Value.subscribe(function(v) {\r\n        if (!ko.unwrap(model.Name)) {\r\n            model.Name(v);\r\n        }\r\n    });\r\n    return vm;\r\n};","/// <reference path=\"../../Scripts/jquery-2.1.1.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n\r\n\r\nbespoke.sph.domain.CorrelationTypePartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeCorrelationProperty = function (prop) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationPropertyCollection.remove(prop);\r\n            };\r\n        },\r\n        addCorrelationProperty = function () {\r\n            this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(system.guid()));\r\n        };\r\n    return {\r\n        removeCorrelationProperty: removeCorrelationProperty,\r\n        addCorrelationProperty: addCorrelationProperty\r\n\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.CreateEntityActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addPropertyMapping = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var mapping = new bespoke.sph.domain[type + 'Mapping'](system.guid());\r\n                self.PropertyMappingCollection.push(mapping);\r\n            };\r\n        },\r\n        removePropertyMapping = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.PropertyMappingCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addPropertyMapping: addPropertyMapping,\r\n        removePropertyMapping: removePropertyMapping\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.DataGridItemPartial = function () {\r\n\r\n    // DataGridGroup\r\n    var system = require('durandal/system'),\r\n        addDataGridGroupDefinition = function () {\r\n            this.DataGridGroupDefinitionCollection.push(new bespoke.sph.domain.DataGridGroupDefinition(system.guid()));\r\n        },\r\n        removeDataGridGroupDefinition = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.DataGridGroupDefinitionCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addColumn = function () {\r\n            var self = this;\r\n            self.DataGridColumnCollection.push(new bespoke.sph.domain.DataGridColumn(system.guid()));\r\n        },\r\n        removeColumn = function (column) {\r\n            var self = this;\r\n            return function () {\r\n                self.DataGridColumnCollection.remove(column);\r\n            };\r\n        };\r\n\r\n    return {\r\n        addColumn: addColumn,\r\n        removeColumn: removeColumn,\r\n        addDataGridGroupDefinition: addDataGridGroupDefinition,\r\n        removeDataGridGroupDefinition: removeDataGridGroupDefinition\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.DecisionActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function() {\r\n            this.DecisionBranchCollection.push(new bespoke.sph.domain.DecisionBranch(system.guid()));\r\n        },\r\n        removeBranch = function(branch) {\r\n            var self = this;\r\n            return function() {\r\n                self.DecisionBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function() {\r\n            return this.DecisionBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.DelayActivityPartial = function () {\r\n\r\n    return {\r\n        isAsync:true\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.DelimitedTextFormatterPartial = function (model) {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        selectedRow = ko.observable(new bespoke.sph.domain.FlatFileDetailTag()),\r\n        parentOptions = ko.observableArray([\"$record\"]),\r\n        childNameChanged = function (name) {\r\n            if (name) {\r\n                if (parentOptions().indexOf(name) < 0) {\r\n                    parentOptions.push(name);\r\n                }\r\n            }\r\n        },\r\n        removeDetailsRow = function (child) {\r\n            var self = this;\r\n            return function () {\r\n                self.DetailRowCollection.remove(child);\r\n                if (child.nameChangedSubscription) {\r\n                    child.nameChangedSubscription.dispose();\r\n                }\r\n            };\r\n        },\r\n        addDetailsRow = function () {\r\n            const child = new bespoke.sph.domain.FlatFileDetailTag(system.guid());\r\n            child.nameChangedSubscription = child.Name.subscribe(childNameChanged);\r\n            this.DetailRowCollection.push(child);\r\n            selectedRow(child);\r\n        },\r\n        selectRow = function(row) {\r\n            selectedRow(row);\r\n        },\r\n        isWizardOk = ko.computed(function() {\r\n            return ko.unwrap(model.SampleStoreId) && ko.unwrap(model.Delimiter);\r\n        });\r\n\r\n    const vm = {\r\n        isWizardOk : isWizardOk,\r\n        selectedRow: selectedRow,\r\n        selectRow : selectRow,\r\n        addDetailsRow: addDetailsRow,\r\n        removeDetailsRow: removeDetailsRow,\r\n        parentOptions: parentOptions\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","\r\nbespoke.sph.domain.EntityChartPartial = function (model) {\r\n    var context = require(objectbuilders.datacontext),\r\n        pin = function () {\r\n            if (typeof model.IsDashboardItem === \"function\") {\r\n                model.IsDashboardItem(true);\r\n            } else {\r\n                model.IsDashboardItem = ko.observable(true);\r\n            }\r\n\r\n            var tcs = new $.Deferred();\r\n\r\n            context.post(ko.mapping.toJSON(model), '/sph/entitychart/save')\r\n                .done(tcs.resolve);\r\n\r\n            return tcs.promise();\r\n        },\r\n        unpin = function() {\r\n            if (typeof model.IsDashboardItem === \"function\") {\r\n                model.IsDashboardItem(false);\r\n            } else {\r\n                model.IsDashboardItem = ko.observable(false);\r\n            }\r\n\r\n            var tcs = new $.Deferred();\r\n\r\n            context.post(ko.mapping.toJSON(model), '/sph/entitychart/save')\r\n                .done(tcs.resolve);\r\n\r\n            return tcs.promise();\r\n        };\r\n    return {\r\n        pin: pin,\r\n        unpin : unpin\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ServiceContractPartial = function () {\r\n    var context = require(objectbuilders.datacontext),\r\n        publish = function (ed) {\r\n            return context.post(ko.toJSON(ed), \"/entity-definition/publish/service-contract\");\r\n        };\r\n\r\n    return {\r\n        publish: publish\r\n    };\r\n}\r\nbespoke.sph.domain.EntityDefinitionPartial = function () {\r\n    var system = require(\"durandal/system\"),\r\n        app = require(\"durandal/app\"),\r\n        context = require(objectbuilders.datacontext),\r\n        addMember = function () {\r\n            this.MemberCollection.push(new bespoke.sph.domain.Member({\r\n                WebId: system.guid(),\r\n                Boost: 1\r\n            }));\r\n        },\r\n        removeMember = function (floor) {\r\n            var self = this;\r\n            return function () {\r\n                self.MemberCollection.remove(floor);\r\n            };\r\n        },\r\n        addEntityOperation = function () {\r\n            this.EntityOperationCollection.push(new bespoke.sph.domain.EntityOperation({\r\n                WebId: system.guid()\r\n            }));\r\n        }, save = function () {\r\n            var self = this;\r\n            context.post(ko.toJSON(self), \"/entity-definition\")\r\n            .then(function (result) {\r\n                if (result.success) {\r\n                }\r\n            });\r\n        },\r\n        removeEntityOperation = function (operation) {\r\n            var self = this;\r\n            return function () {\r\n                var tcs = new $.Deferred();\r\n                app.showMessage(\"Are you sure you want to remove this operation, this operation cannot be undone and will commit the entire changes to your EntityDefinition\", \"Reactive Developer\", [\"Yes\", \"No\"])\r\n                    .done(function (dialogResult) {\r\n                        if (dialogResult === \"Yes\") {\r\n                            self.EntityOperationCollection.remove(operation);\r\n                            save.call(self);\r\n                        }\r\n                    });\r\n\r\n                return tcs.promise();\r\n            };\r\n        },\r\n        editMember = function (member) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/member.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                    dialog.member(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BlockCollection.replace(member, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        addBusinessRule = function () {\r\n            var br = new bespoke.sph.domain.BusinessRule({ WebId: system.guid() });\r\n            var self = this;\r\n\r\n            require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                dialog.rule(br);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.BusinessRuleCollection.push(br);\r\n                        }\r\n                    });\r\n            });\r\n\r\n        },\r\n        editBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = context.toObservable(ko.mapping.toJS(rule));\r\n                    dialog.rule(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result == \"OK\") {\r\n                                self.BusinessRuleCollection.replace(rule, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        removeBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                self.BusinessRuleCollection.remove(rule);\r\n            };\r\n        },\r\n        editMemberMap = function (member) {\r\n            var building = this;\r\n            return function () {\r\n                console.log(\"show map \", building);\r\n                console.log(\" on member \", member);\r\n                require([\"viewmodels/member.map\", \"durandal/app\"], function (dialog, app) {\r\n                    dialog.init(building.BuildingId(), member.MemberPlanStoreId());\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (result == \"OK\") {\r\n                                member.MemberPlanStoreId(dialog.spatialStoreId());\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        };\r\n    return {\r\n        addEntityOperation: addEntityOperation,\r\n        removeEntityOperation: removeEntityOperation,\r\n        addMember: addMember,\r\n        editMember: editMember,\r\n        removeMember: removeMember,\r\n        addBusinessRule: addBusinessRule,\r\n        editBusinessRule: editBusinessRule,\r\n        removeBusinessRule: removeBusinessRule,\r\n        editMemberMap: editMemberMap\r\n    };\r\n};","/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.EntityFormPartial = function () {\r\n\r\n    var editOperationSuccessCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationSuccessCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationSuccessCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n    editOperationFailureCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationFailureCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationFailureCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        canSetSuccessCallback = ko.computed(function () {\r\n\r\n        });\r\n    return {\r\n        editOperationSuccessCallback: editOperationSuccessCallback,\r\n        editOperationFailureCallback: editOperationFailureCallback,\r\n        canSetSuccessCallback: canSetSuccessCallback\r\n    };\r\n};","/// <reference path=\"../../Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n\r\nbespoke.sph.domain.EntityLookupElementPartial = function () {\r\n\r\n    var editDisplayTemplate = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", `height=${screen.height},width=${screen.width},toolbar=0,location=0,fullscreen=yes`),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.Command);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.DisplayTemplate(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n    editColumns = function () {\r\n            var self = this;\r\n            require([\"viewmodels/members.selector.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.entity(self.Entity());\r\n                dialog.selectedMembers(self.LookupColumnCollection());\r\n                app2.showDialog(dialog,self.Entity())\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.LookupColumnCollection(dialog.selectedMembers());\r\n                        }\r\n                    });\r\n\r\n            });\r\n        },\r\n        editFilter = function() {\r\n\r\n            var self = this;\r\n            require([\"viewmodels/entity.lookup.filter.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.entity(self.Entity());\r\n                dialog.selectedFilters(self.FilterCollection());\r\n                app2.showDialog(dialog, self.Entity())\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.FilterCollection(dialog.selectedFilters());\r\n                        }\r\n                    });\r\n\r\n            });\r\n        };\r\n\r\n    return {\r\n        editDisplayTemplate: editDisplayTemplate,\r\n        editColumns: editColumns,\r\n        editFilter: editFilter\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/SphApp/services/system.js\" />\r\n/// <reference path=\"/SphApp/schemas/form.designer.g.js\" />\r\n\r\n\r\nbespoke.sph.domain.EntityViewPartial = function () {\r\n\r\n    // Filter\r\n    var system = require(\"durandal/system\"),\r\n        addConditionalFormatting = function () {\r\n            this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(system.guid()));\r\n        },\r\n        removeConditionalFormatting = function (cf) {\r\n            var self = this;\r\n            return function () {\r\n                self.ConditionalFormattingCollection.remove(cf);\r\n            };\r\n\r\n        },\r\n        addRouteParameter = function () {\r\n            this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(system.guid()));\r\n        },\r\n        removeRouteParameter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.RouteParameterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addViewColumn = function () {\r\n            this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn(system.guid()));\r\n        },\r\n        removeViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addFilter = function () {\r\n            this.FilterCollection.push(new bespoke.sph.domain.Filter(system.guid()));\r\n        },\r\n        removeFilter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.FilterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addSort = function () {\r\n            this.SortCollection.push(new bespoke.sph.domain.Sort(system.guid()));\r\n        },\r\n        removeSort = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.SortCollection.remove(obj);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addRouteParameter: addRouteParameter,\r\n        removeRouteParameter: removeRouteParameter,\r\n        addConditionalFormatting: addConditionalFormatting,\r\n        removeConditionalFormatting: removeConditionalFormatting,\r\n        addViewColumn: addViewColumn,\r\n        removeViewColumn: removeViewColumn,\r\n        addSort: addSort,\r\n        removeSort: removeSort,\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ExecutedActivityPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        breakpoint = ko.observable(false),\r\n        hit = ko.observable(false),\r\n        errors = ko.observableArray();\r\n    return {\r\n        breakpoint: breakpoint,\r\n        hit: hit,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.FilterPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n          showFieldDialog = function (accessor, field, path) {\r\n              require([\"viewmodels/\" + path, \"durandal/app\"], function (dialog, app2) {\r\n                  dialog.field(field);\r\n                  if (typeof dialog.entity === \"function\") {\r\n                      //dialog.entity();\r\n                      console.log(\"found the entity dialog :\" + dialog.entity.name);\r\n                  }\r\n                  app2.showDialog(dialog)\r\n                  .done(function (result) {\r\n                      if (!result) return;\r\n                      if (result === \"OK\") {\r\n                          accessor(field);\r\n                      }\r\n                  });\r\n\r\n              });\r\n          },\r\n          addField = function (accessor, type) {\r\n              var field = new bespoke.sph.domain[type + \"Field\"](system.guid());\r\n              showFieldDialog(accessor, field, \"field.\" + type.toLowerCase());\r\n          },\r\n          editField = function (field) {\r\n              var self = this;\r\n              return function () {\r\n                  var fieldType = ko.unwrap(field.$type),\r\n                      clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                      pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                      type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                  showFieldDialog(self.Field, clone, \"field.\" + type.toLowerCase());\r\n              };\r\n          };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.FixedLengthTextFormatterPartial = function (model) {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        parentOptions = ko.observableArray([\"$record\"]),\r\n        childNameChanged = function (name) {\r\n            if (name) {\r\n                if (parentOptions().indexOf(name) < 0) {\r\n                    parentOptions.push(name);\r\n                }\r\n            }\r\n        },\r\n        removeDetailsRow = function (child) {\r\n            var self = this;\r\n            return function () {\r\n                self.DetailRowCollection.remove(child);\r\n                if (child.nameChangedSubscription) {\r\n                    child.nameChangedSubscription.dispose();\r\n                }\r\n            };\r\n        },\r\n        addDetailsRow = function () {\r\n            const child = new bespoke.sph.domain.FlatFileDetailTag(system.guid());\r\n            child.nameChangedSubscription = child.Name.subscribe(childNameChanged);\r\n            this.DetailRowCollection.push(child);\r\n        },\r\n        isWizardOk = ko.computed(function () {\r\n            return ko.unwrap(model.SampleStoreId) && ko.unwrap(model.Delimiter);\r\n        }),\r\n        addField = function () {\r\n            const child = new bespoke.sph.domain.FixedLengthTextFieldMapping(system.guid());\r\n            this.FieldMappingCollection.push(child);\r\n        },\r\n        removeField = function (f) {\r\n            var self = this;\r\n            return function () {\r\n                self.FieldMappingCollection.remove(f);\r\n\r\n            };\r\n\r\n        },\r\n        move = function (array, from, to) {\r\n            if (to === from) return;\r\n\r\n            const target = array[from],\r\n                increment = to < from ? -1 : 1;\r\n\r\n            for (let k = from; k !== to; k += increment) {\r\n                array[k] = array[k + increment];\r\n            }\r\n            array[to] = target;\r\n        },\r\n        arrange = function (f, step) {\r\n            const list = model.FieldMappingCollection,\r\n                temps = ko.unwrap(list),\r\n                index = temps.indexOf(f);\r\n\r\n            move(temps, index, index + step);\r\n            list(temps);\r\n            list().forEach((x, i) => x.Order(i + 1));\r\n        },\r\n        moveDown = function (f) {\r\n            arrange(f, 1);\r\n        },\r\n        moveUp = function (f) {\r\n            arrange(f, -1);\r\n        };\r\n\r\n    const vm = {\r\n        isWizardOk: isWizardOk,\r\n        addDetailsRow: addDetailsRow,\r\n        removeDetailsRow: removeDetailsRow,\r\n        parentOptions: parentOptions,\r\n        moveUp: moveUp,\r\n        moveDown: moveDown,\r\n        addField: addField,\r\n        removeField: removeField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../../Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.FormDialogPartial = function (model) {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        init = function() {\r\n\r\n            var buttons = ko.unwrap(model.DialogButtonCollection);\r\n            _(buttons).each(function (v) {\r\n                v.canMoveDown(true);\r\n                v.canMoveUp(true);\r\n            });\r\n            var first = _(buttons).first(),\r\n                last = _(buttons).last();\r\n            if (first) {\r\n                first.canMoveUp(false);\r\n            }\r\n            if (last) {\r\n                last.canMoveDown(false);\r\n            }\r\n        },\r\n        addDialogButton = function () {\r\n            model.DialogButtonCollection.push(new bespoke.sph.domain.DialogButton({ WebId: system.guid(), canMoveDown: false }));\r\n            init();\r\n        },\r\n        removeDialogButton = function (btn) {\r\n            model.DialogButtonCollection.remove(btn);\r\n            init();\r\n        },\r\n        move = function (array, from, to) {\r\n            if (to === from) return;\r\n\r\n            var target = array[from];\r\n            var increment = to < from ? -1 : 1;\r\n\r\n            for (var k = from; k !== to; k += increment) {\r\n                array[k] = array[k + increment];\r\n            }\r\n            array[to] = target;\r\n        },\r\n        arrange = function (btn, step) {\r\n\r\n            var index = model.DialogButtonCollection().indexOf(btn);\r\n            var temps = ko.unwrap(model.DialogButtonCollection);\r\n            move(temps, index, index + step);\r\n\r\n            _(temps).each(function (v) {\r\n                v.canMoveDown(true);\r\n                v.canMoveUp(true);\r\n            });\r\n            _(temps).first().canMoveUp(false);\r\n            _(temps).last().canMoveDown(false);\r\n            model.DialogButtonCollection(temps);\r\n        },\r\n        moveDown = function (btn) {\r\n            arrange(btn, 1);\r\n        },\r\n        moveUp = function (btn) {\r\n            arrange(btn, -1);\r\n        };\r\n\r\n    init();\r\n\r\n    return {\r\n        removeDialogButton: removeDialogButton,\r\n        addDialogButton: addDialogButton,\r\n        moveDown: moveDown,\r\n        moveUp: moveUp\r\n    };\r\n};\r\nbespoke.sph.domain.DialogButtonPartial = function (model) {\r\n\r\n    var canMoveUp = ko.observable(true),\r\n        canMoveDown = ko.observable(true);\r\n\r\n    return {\r\n        canMoveDown: canMoveDown,\r\n        canMoveUp: canMoveUp\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.FormElementPartial = function () {\r\n    \r\n    return {\r\n    };\r\n};\r\n\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.HtmlElementPartial = function () {\r\n\r\n    var editHtml = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=html\", '_blank', 'height=' + screen.height + ',width=' + screen.width + ',toolbar=0,location=0,fullscreen=yes'),\r\n            init = function () {\r\n                w.code = ko.unwrap(self.Text);\r\n                w.saved = function (code, close) {\r\n                    self.Text(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (w.attachEvent) { // for ie\r\n            w.attachEvent('onload', init);\r\n        } else {\r\n            init();\r\n        }\r\n    };\r\n    return {\r\n        editHtml: editHtml\r\n    };\r\n};","\r\nbespoke.sph.domain.FormTemplatePartial = function () {\r\n\r\n    var vm = {\r\n    };\r\n    return vm;\r\n}","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.IntervalSchedulePartial = function () {\r\n    var icon = ko.observable(),\r\n        name = ko.observable();\r\n    return {\r\n        icon: icon,\r\n        name : name\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.LineChartItemPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addSeries = function() {\r\n            this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(system.guid()));\r\n        },\r\n        removeSeries = function (series) {\r\n            var self = this;\r\n            return function() {\r\n                self.ChartSeriesCollection.remove(series);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addSeries: addSeries,\r\n        removeSeries: removeSeries\r\n    };\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.ListenActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function () {\r\n            var self = this;\r\n            var branch = new bespoke.sph.domain.ListenBranch(system.guid());\r\n            self.ListenBranchCollection.push(branch);\r\n\r\n        },\r\n        removeBranch = function (branch) {\r\n            var self = this;\r\n            return function () {\r\n                self.ListenBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function () {\r\n            return this.ListenBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ListViewPartial = function (model) {\r\n\r\n    // ListViewColumn\r\n    var system = require('durandal/system'),\r\n        addListViewColumn = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var column = new bespoke.sph.domain.ListViewColumn(system.guid()),\r\n                    input = bespoke.sph.domain[type](system.guid());\r\n\r\n\r\n                column.Path.subscribe(function(v) {\r\n                    input.Path(v);\r\n                });\r\n                column.Label.subscribe(function(v) {\r\n                    input.Label(v);\r\n                });\r\n\r\n                column.Input(input);\r\n                input.isSelected = ko.observable(false);\r\n                self.ListViewColumnCollection.push(column);\r\n            };\r\n        },\r\n        removeListViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ListViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        };\r\n\r\n    _(model.ListViewColumnCollection()).each(function(v) {\r\n        v.Input().isSelected = ko.observable(false);\r\n    });\r\n\r\n    return {\r\n        addListViewColumn: addListViewColumn,\r\n        removeListViewColumn: removeListViewColumn\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.ListViewColumnPartial = function (model) {\r\n\r\n    try {\r\n\r\n        var pattern1 = /Bespoke\\.Sph\\.Domain\\.(.*?),/,\r\n            input1 = ko.unwrap(model.Input),\r\n            name1 = null,\r\n            icon1 = null;\r\n        if (input1) {\r\n            name1 = pattern1.exec(ko.unwrap(input1.$type))[1],\r\n            icon1 = '/images/form.element.' + name1 + '.png';\r\n        }\r\n\r\n\r\n    } catch (err) {\r\n\r\n    }\r\n    icon1 = icon1 || '/images/form.element.textbox.png';\r\n    var icon = ko.observable(icon1);\r\n    model.Input.subscribe(function (c) {\r\n        if (!c.$type) {\r\n            return;\r\n        }\r\n\r\n        var pattern = /Bespoke\\.Sph\\.Domain\\.(.*?),/,\r\n            name = pattern.exec(ko.unwrap(c.$type))[1];\r\n        icon('/images/form.element.' + name + '.png');\r\n\r\n\r\n    });\r\n    return {\r\n        icon: icon\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.MappingActivityPartial = function () {\r\n    var system = require(\"durandal/system\"),\r\n        addMappingSource = function () {\r\n            var self = this;\r\n            var mapping = new bespoke.sph.domain[\"MappingSource\"](system.guid());\r\n            self.MappingSourceCollection.push(mapping);\r\n\r\n        },\r\n        removeMappingSource = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.MappingSourceCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addMappingSource: addMappingSource,\r\n        removeMappingSource: removeMappingSource\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../schemassystem.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\n\r\nbespoke.sph.domain.MemberPartial = function (model) {\r\n    var system = require(\"durandal/system\"),\r\n        addMember = function () {\r\n            this.MemberCollection.push(new bespoke.sph.domain.Member(system.guid()));\r\n        },\r\n        editMember = function (member) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/member.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                    dialog.member(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BlockCollection.replace(member, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        editPermission = function (member) {\r\n            var self = this;\r\n            require([\"viewmodels/field.permission.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                dialog.member(clone);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.FieldPermissionCollection(clone.FieldPermissionCollection());\r\n                        }\r\n                    });\r\n            });\r\n\r\n        },\r\n        removeMember = function (floor) {\r\n            var self = this;\r\n            return function () {\r\n                self.MemberCollection.remove(floor);\r\n            };\r\n        },\r\n        editMemberMap = function (member) {\r\n            var building = this;\r\n            return function () {\r\n                console.log(\"show map \", building);\r\n                console.log(\" on member \", member);\r\n                require([\"viewmodels/member.map\", \"durandal/app\"], function (dialog, app) {\r\n                    dialog.init(building.BuildingId(), member.MemberPlanStoreId());\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (result === \"OK\") {\r\n                                member.MemberPlanStoreId(dialog.spatialStoreId());\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require([\"viewmodels/\" + path, \"durandal/app\"], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            var field = new bespoke.sph.domain[type + \"Field\"](system.guid());\r\n            showFieldDialog(accessor, field, \"field.\" + type.toLowerCase());\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field || self.DefaultValue, clone, \"field.\" + type.toLowerCase());\r\n            };\r\n        },\r\n        removeField = function () {\r\n            var self = this,\r\n                accessor = self.Field || self.DefaultValue;\r\n            return function () {\r\n                accessor({ Name: ko.observable(\"[Select a value]\") });\r\n            };\r\n        };\r\n\r\n\r\n    model.AllowMultiple.subscribe(function(array) {\r\n        if (array) {\r\n            model.DefaultValue(null);\r\n        } else {\r\n            model.DefaultValue({ Name: ko.observable(\"[Select a value]\") });\r\n        }\r\n    });\r\n\r\n    return {\r\n        editPermission: editPermission,\r\n        addMember: addMember,\r\n        editMember: editMember,\r\n        editMemberMap: editMemberMap,\r\n        removeMember: removeMember,\r\n        addField: addField,\r\n        removeField: removeField,\r\n        editField: editField\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.MethodArgPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field, clone, 'field.' + type.toLowerCase());\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.NotificationActivityPartial = function(model) {\r\n    \r\n    if (!model.From()) {\r\n        model.From(\"admin@@sph.my\");\r\n    }\r\n    return {\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.OperationEndpointPartial = function () {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        removeChildAction = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.SetterActionChildCollection.remove(child);\r\n            };\r\n        },\r\n        addChildAction = function() {\r\n            var child = new bespoke.sph.domain.SetterActionChild(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.SetterActionChildCollection.push(child);\r\n        },\r\n        removePatchPath = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.PatchPathCollection.remove(child);\r\n            };\r\n        },\r\n        addPatchPath = function () {\r\n            var child = new bespoke.sph.domain.PatchSetter({ WebId: system.guid() , IsRequired: true});\r\n            this.PatchPathCollection.push(child);\r\n        },\r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert(\"not implemented\" + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        removePatchPath: removePatchPath,\r\n        addPatchPath: addPatchPath,\r\n        addChildAction: addChildAction,\r\n        removeChildAction: removeChildAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ParallelActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function() {\r\n            this.ParallelBranchCollection.push(new bespoke.sph.domain.ParallelBranch(system.guid()));\r\n        },\r\n        removeBranch = function(branch) {\r\n            var self = this;\r\n            return function() {\r\n                self.ParallelBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function() {\r\n            return this.ParallelBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/SphApp/services/system.js\" />\r\n/// <reference path=\"/SphApp/schemas/form.designer.g.js\" />\r\n\r\n\r\nbespoke.sph.domain.QueryEndpointPartial = function (model) {\r\n\r\n    // Filter\r\n    var system = require(\"durandal/system\"),\r\n        addRouteParameter = function () {\r\n            this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(system.guid()));\r\n        },\r\n        removeRouteParameter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.RouteParameterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addFilter = function () {\r\n            this.FilterCollection.push(new bespoke.sph.domain.Filter(system.guid()));\r\n        },\r\n        removeFilter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.FilterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addSort = function () {\r\n            this.SortCollection.push(new bespoke.sph.domain.Sort(system.guid()));\r\n        },\r\n        removeSort = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.SortCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        allowQueryCache = ko.observable(ko.unwrap(model.CacheFilter));\r\n    return {\r\n        addRouteParameter: addRouteParameter,\r\n        removeRouteParameter: removeRouteParameter,\r\n        addSort: addSort,\r\n        removeSort: removeSort,\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter,\r\n        allowQueryCache: allowQueryCache\r\n    };\r\n};","bespoke.sph.domain.ReceiveActivityPartial = function () {\r\n    //\r\n    var system = require('durandal/system'),\r\n        removeCorrelationProperty = function (prop) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationPropertyCollection.remove(prop);\r\n            };\r\n        },\r\n        addCorrelationProperty = function () {\r\n            this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(system.guid()));\r\n        };\r\n\r\n    return {\r\n        removeCorrelationProperty: removeCorrelationProperty,\r\n        addCorrelationProperty: addCorrelationProperty\r\n\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\nbespoke.sph.domain.ReceivePortPartial = function (port) {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        isWizardOk = ko.computed(function () {\r\n            const ok = ko.unwrap(port.Name) && ko.unwrap(port.Formatter) && ko.unwrap(port.Entity);\r\n            if ( port.TextFormatter() && ko.isComputed(port.TextFormatter().isWizardOk))\r\n                return ok && port.TextFormatter().isWizardOk();\r\n            return ok;\r\n        }),\r\n        removeHeaderFieldMapping = function (child) {\r\n            var self = this;\r\n            return function () {\r\n                self.FieldMappingCollection.remove(child);\r\n            };\r\n        },\r\n        addHeaderFieldMapping = function () {\r\n            const tcs = new $.Deferred(),\r\n                br = new bespoke.sph.domain.HeaderFieldMapping({ WebId: system.guid() }),\r\n                self = this;\r\n\r\n            require([\"viewmodels/receive.port.header.field.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                dialog.field(br);\r\n                dialog.port(self);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (result === \"OK\") {\r\n                            self.FieldMappingCollection.push(br);\r\n                            tcs.resolve(br);\r\n                        } else {\r\n                            tcs.resolve(false);\r\n                        }\r\n                    });\r\n            });\r\n\r\n            return tcs.promise();\r\n        },\r\n        addUriFieldMapping = function () {\r\n            const tcs = new $.Deferred(),\r\n                br = new bespoke.sph.domain.UriFieldMapping({ WebId: system.guid() }),\r\n                self = this;\r\n\r\n            require([\"viewmodels/receive.port.uri.field.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                dialog.field(br);\r\n                dialog.port(self);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (result === \"OK\") {\r\n                            self.FieldMappingCollection.push(br);\r\n                            tcs.resolve(br);\r\n                        } else {\r\n                            tcs.resolve(false);\r\n                        }\r\n                    });\r\n            });\r\n\r\n            return tcs.promise();\r\n        },\r\n        editHeaderFieldMapping = function (br) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/receive.port.header.field.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(br));\r\n                    dialog.location(clone);\r\n                    dialog.port(self);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.FieldMappingCollection.replace(br, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            console.warn(`Not implemented ${dll}`);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    return {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        editHeaderFieldMapping: editHeaderFieldMapping,\r\n        removeHeaderFieldMapping: removeHeaderFieldMapping,\r\n        addHeaderFieldMapping: addHeaderFieldMapping,\r\n        addUriFieldMapping: addUriFieldMapping,\r\n        isWizardOk: isWizardOk\r\n    };\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.DailySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Daily Schedule\"),\r\n        icon: ko.observable(\"fa fa-calendar\")\r\n    };\r\n};\r\nbespoke.sph.domain.WeeklySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Weekly Schedule\"),\r\n        icon: ko.observable(\"fa fa-th-list\")\r\n    };\r\n};\r\nbespoke.sph.domain.MonthlySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Monthly Schedule\"),\r\n        icon: ko.observable(\"fa fa-calendar-o\"),\r\n        dateOptions : _.range(1,31)\r\n    };\r\n};\r\n\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../prototypes/IntervalScheduleContainer.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.ReportDeliveryPartial = function () {\r\n\r\n    return new bespoke.sph.domain.IntervalScheduleContainer();\r\n\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.RouteParameterPartial = function (model) {\r\n\r\n    model.Type.subscribe(function(v) {\r\n        if (v === \"System.DateTime, mscorlib\") {\r\n            model.DefaultValue(null);\r\n        }\r\n    });\r\n    return {};\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n\r\nbespoke.sph.domain.RouteParameterFieldPartial = function (model) {\r\n    // TODO : In QueryEndpoint filter, if term were defined, then maybe we could suggest the name and type\r\n    model.IsOptional.subscribe(function(opt) {\r\n        if (!opt) {\r\n            model.DefaultValue(\"\");\r\n        }\r\n    });\r\n    return {};\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.RulePartial = function (model) {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require([`viewmodels/${path}`, \"durandal/app\"], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            const field = new bespoke.sph.domain[type + \"Field\"](system.guid());\r\n            showFieldDialog(accessor, field, \"field.\" + type.toLowerCase());\r\n        },\r\n        editField = function (field, accessor) {\r\n            return function () {\r\n                const fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(accessor, clone, \"field.\" + type.toLowerCase());\r\n\r\n            };\r\n        },\r\n        binaryOperator = ko.computed(function() {\r\n            if (ko.unwrap(model.Operator) === \"IsNull\") {\r\n                return false;\r\n            }\r\n            if (ko.unwrap(model.Operator) === \"IsNotNull\") {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        });\r\n\r\n    const vm = {\r\n        binaryOperator: binaryOperator,\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n/// <reference path=\"../prototypes/IntervalScheduleContainer.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ScheduledTriggerActivityPartial = function (model) {\r\n\r\n    var b = new bespoke.sph.domain.IntervalScheduleContainer();\r\n    \r\n    return b;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.SetterActionPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        removeChildAction = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.SetterActionChildCollection.remove(child);\r\n            };\r\n        },\r\n        addChildAction = function() {\r\n            var child = new bespoke.sph.domain.SetterActionChild(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.SetterActionChildCollection.push(child);\r\n        };\r\n\r\n    var vm = {\r\n        addChildAction: addChildAction,\r\n        removeChildAction: removeChildAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"~/Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.SetterActionChildPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path, entity) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n                if (typeof dialog.entity === \"function\") {\r\n                    dialog.entity(entity);\r\n                    console.log(\"found the entity dialog :\" + dialog.entity.name);\r\n                }\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type, entity) {\r\n            var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase(), entity);\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field, clone, 'field.' + type.toLowerCase());\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","///<reference path=\"../schemas/form.designer.g.js\"/>\r\n///<reference path=\"~/Scripts/require.js\"/>\r\n///<reference path=\"~/Scripts/knockout-3.4.0.debug.js\"/>\r\n///<reference path=\"~/Scripts/jquery-2.2.0.intellisense.js\"/>\r\n\r\n\r\nbespoke.sph.domain.Adapters = bespoke.sph.domain.Adapters || {};\r\nbespoke.sph.domain.Adapters.Polling = function(model) {\r\n    model = model || {};\r\n    return {\r\n        Interval: ko.observable( model.Interval || 5 * 60 * 1000), // 5 minutes\r\n        IntervalPeriod: ko.observable(\"minute\"), // 5 minutes\r\n        Query: ko.observable(model.Query || \"\"),\r\n        StartDate : ko.observable(model.Query)\r\n    }\r\n}\r\nbespoke.sph.domain.Adapters.SqlServerReceiveLocation = function (model) {\r\n    const v = new bespoke.sph.domain.ReceiveLocation(model);\r\n    v.Id = ko.observable(null);\r\n    v.Server = ko.observable(\"(localdb)\\\\Projects\");\r\n    v.Database = ko.observable(null);\r\n    v.Trusted = ko.observable(true);\r\n    v.UseQueryNotification = ko.observable(true);\r\n    v.UserId = ko.observable(null);\r\n    v.Password = ko.observable(null);\r\n    v.Query = ko.observable(\"\");\r\n    v.Polling = ko.observable(new bespoke.sph.domain.Adapters.Polling()),\r\n    v[\"$type\"] = \"Bespoke.Sph.Integrations.Adapters.SqlServerReceiveLocation, sqlserver.adapter\";\r\n\r\n    var context = require(\"services/datacontext\");\r\n    if (model && typeof model === \"object\") {\r\n        for (let n in model) {\r\n            if (model.hasOwnProperty(n)) {\r\n                // array\r\n                if (ko.isObservable(v[n]) && \"push\" in v[n]) {\r\n                    const values = model[n].$values || model[n];\r\n                    if (_(values).isArray()) {\r\n                        v[n](_(values).map(function (ai) { return context.toObservable(ai); }));\r\n                        continue;\r\n                    }\r\n                }\r\n                if (ko.isObservable(v[n])) {\r\n                    v[n](model[n]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (model && typeof model === \"string\") {\r\n        v.WebId(model);\r\n    }\r\n\r\n    if (bespoke.sph.domain.SqlServerReceiveLocationPartial) {\r\n        return _(v).extend(new bespoke.sph.domain.FolderReceiveLocationPartial(v, model));\r\n    }\r\n    return v;\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.StartWorkflowActionPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        removeMapping = function (map) {\r\n            var self = this;\r\n            return function () {\r\n                self.WorkflowTriggerMapCollection.remove(map);\r\n            };\r\n        },\r\n        addMapping = function () {\r\n            var child = new bespoke.sph.domain.WorkflowTriggerMap(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.WorkflowTriggerMapCollection.push(child);\r\n        },\r\n        editMapping = function (child) {\r\n            this.WorkflowTriggerMapCollection.push(child);\r\n        };\r\n\r\n    var vm = {\r\n        editMapping: editMapping,\r\n        addMapping: addMapping,\r\n        removeMapping: removeMapping\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.TabControlPartial = function (tab) {\r\n    var system = require(\"durandal/system\"),\r\n        addItem = function () {\r\n            var item = new bespoke.sph.domain.TabPanel(system.guid());\r\n            tab.TabPanelCollection.push(item);\r\n\r\n        },\r\n        removeItem = function (item) {\r\n            return function () {\r\n                tab.TabPanelCollection.remove(item);\r\n            };\r\n        };\r\n    if (tab.TabPanelCollection().length === 0) {\r\n        tab.TabPanelCollection.push(new bespoke.sph.domain.TabPanel({ WebId: system.guid() , Header : \"Tab 1\"}));\r\n        tab.TabPanelCollection.push(new bespoke.sph.domain.TabPanel({ WebId: system.guid() , Header : \"Tab 2\"}));\r\n    }\r\n    return {\r\n        addItem: addItem,\r\n        removeItem: removeItem\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.TimePeriodPartial = function (period) {\r\n    var toString = function() {\r\n        return ko.unwrap(period.Count) + \" \" + ko.unwrap(period.Unit);\r\n    };\r\n    return {\r\n        toString: toString\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.TransformDefinitionPartial = function () {\r\n\r\n    var addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert(\"not implemented\" + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.TriggerPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeAction = function (action) {\r\n            var self = this;\r\n            return function () {\r\n                self.ActionCollection.remove(action);\r\n            };\r\n        },\r\n        addAction = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var t = type.toLowerCase().replace(\", \", \",\");\r\n                require([\"viewmodels/action.\" + t, \"durandal/app\"], function (dialog, app2) {\r\n                    if (typeof dialog.action !== \"function\") {\r\n                        console.error(\"The dialog for \" + t + \" do not implement action as observable\");\r\n                        return;\r\n                    }\r\n\r\n                    // initialize the action properties\r\n                    var clone = ko.mapping.fromJS(ko.toJS(dialog.action));\r\n                    if(typeof clone.Title === \"function\"){\r\n                        clone.Title(\"\");\r\n                    }\r\n                    for (var n in clone) {\r\n                        if (clone.hasOwnProperty(n)) {\r\n                            var obj = clone[n];\r\n                            if (n === \"$type\") {\r\n                                continue;\r\n                            }\r\n                            if (ko.isObservable(obj) && typeof obj.destroyAll !== \"function\") {\r\n                                obj(null);\r\n                            }\r\n                            if (ko.isObservable(obj) && typeof obj.destroyAll === \"function\") {\r\n                                obj([]);\r\n                            }\r\n                        }\r\n                    }\r\n                    dialog.action(clone);\r\n\r\n                    if (typeof dialog.trigger === \"function\") {\r\n                        dialog.trigger(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n\r\n                            var action = dialog.action();\r\n\r\n                            action.WebId(system.guid());\r\n                            action.IsActive(true);\r\n                            self.ActionCollection.push(action);\r\n                        }\r\n                    });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editAction = function (action) {\r\n            var self = this;\r\n            return function () {\r\n                var type = ko.unwrap(action.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(action));\r\n\r\n                require([\"viewmodels/action.\" + type.toLowerCase().replace(\", \", \",\"), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.action(clone);\r\n                    if (typeof dialog.trigger === \"function\") {\r\n                        dialog.trigger(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.ActionCollection.replace(action, clone);\r\n                        }\r\n                    });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n         addRule = function () {\r\n             var rule = new bespoke.sph.domain.Rule(system.guid());\r\n             rule.Left({ Name: ko.observable(\"+ Field\") });\r\n             rule.Right({ Name: ko.observable(\"+ Field\") });\r\n             this.RuleCollection.push(rule);\r\n         },\r\n        removeRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                self.RuleCollection.remove(rule);\r\n            };\r\n        },\r\n        \r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require(['viewmodels/assembly.dialog', 'durandal/app'], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert('not implemented' + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        addRule: addRule,\r\n        removeRule: removeRule,\r\n        removeAction: removeAction,\r\n        addAction: addAction,\r\n        editAction: editAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","bespoke.sph.domain.TryScopePartial = function () {\r\n\r\n\r\n    var\r\n        addCatchScope = function(wd) {\r\n            return function() {\r\n                var system = require('durandal/system');\r\n\r\n\r\n                var self2 = this;\r\n                var catchScope = new bespoke.sph.domain.CatchScope(system.guid());\r\n\r\n                require(['viewmodels/catch.scope.dialog', 'durandal/app'], function(dialog, app2) {\r\n                    dialog.catchScope(catchScope);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(wd());\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function(result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self2.CatchScopeCollection.push(catchScope);\r\n                            }\r\n\r\n                        });\r\n\r\n                });\r\n            };\r\n        },\r\n        editCatchScope = function (catchScope, wdOutside) {\r\n            var self = this, wd = wdOutside;\r\n            var clone = ko.mapping.fromJS(ko.mapping.toJS(catchScope));\r\n\r\n            return function () {\r\n                require(['viewmodels/catch.scope.dialog', 'durandal/app'], function (dialog, app2) {\r\n                    dialog.catchScope(clone);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(wd());\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in catchScope) {\r\n                                    if (typeof catchScope[g] === \"function\" && catchScope[g].name === \"observable\") {\r\n                                        catchScope[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        catchScope[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n            };\r\n\r\n        },\r\n        removeCatchScope = function (catchScope, wdOutside) {\r\n            var self = this, wd = wdOutside;\r\n            \r\n            return function () {\r\n                wd().ActivityCollection().forEach(function (act) {\r\n                    if (act.CatchScope() === catchScope.Id()) {\r\n                        act.CatchScope(\"\");\r\n                    }\r\n                });\r\n\r\n                self.CatchScopeCollection.remove(catchScope);\r\n            };\r\n            \r\n        };\r\n\r\n    return {\r\n        addCatchScope: addCatchScope,\r\n        editCatchScope: editCatchScope,\r\n        removeCatchScope: removeCatchScope\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.1.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.UpdateEntityActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addPropertyMapping = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var mapping = new bespoke.sph.domain[type + 'Mapping'](system.guid());\r\n                self.PropertyMappingCollection.push(mapping);\r\n            };\r\n        },\r\n        removePropertyMapping = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.PropertyMappingCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addPropertyMapping: addPropertyMapping,\r\n        removePropertyMapping: removePropertyMapping\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ValueObjectDefinitionPartial = function () {\r\n    var system = require(\"durandal/system\"),\r\n        app = require(\"durandal/app\"),\r\n        context = require(objectbuilders.datacontext),\r\n        addMember = function () {\r\n            this.MemberCollection.push(new bespoke.sph.domain.Member({\r\n                WebId: system.guid(),\r\n                Boost: 1\r\n            }));\r\n        },\r\n        removeMember = function (floor) {\r\n            var self = this;\r\n            return function () {\r\n                self.MemberCollection.remove(floor);\r\n            };\r\n        },\r\n        editMember = function (member) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/member.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                    dialog.member(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BlockCollection.replace(member, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        addBusinessRule = function () {\r\n            var br = new bespoke.sph.domain.BusinessRule({ WebId: system.guid() });\r\n            var self = this;\r\n\r\n            require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                dialog.rule(br);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.BusinessRuleCollection.push(br);\r\n                        }\r\n                    });\r\n            });\r\n\r\n        },\r\n        editBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = context.toObservable(ko.mapping.toJS(rule));\r\n                    dialog.rule(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BusinessRuleCollection.replace(rule, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        removeBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                self.BusinessRuleCollection.remove(rule);\r\n            };\r\n        },\r\n        editMemberMap = function (member) {\r\n            var building = this;\r\n            return function () {\r\n                console.log(\"show map \", building);\r\n                console.log(\" on member \", member);\r\n                require([\"viewmodels/member.map\", \"durandal/app\"], function (dialog, app) {\r\n                    dialog.init(building.BuildingId(), member.MemberPlanStoreId());\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (result === \"OK\") {\r\n                                member.MemberPlanStoreId(dialog.spatialStoreId());\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        };\r\n    return {\r\n        addMember: addMember,\r\n        editMember: editMember,\r\n        removeMember: removeMember,\r\n        addBusinessRule: addBusinessRule,\r\n        editBusinessRule: editBusinessRule,\r\n        removeBusinessRule: removeBusinessRule,\r\n        editMemberMap: editMemberMap\r\n    };\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.VariablePartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        hasError = ko.observable(),\r\n        errors = ko.observableArray();\r\n    return {\r\n        hasError: hasError,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.ViewColumnPartial = function (model) {\r\n\r\n\r\n    model.Path.subscribe(function (p) {\r\n        if (!ko.unwrap(model.Header)) {\r\n            model.Header(p.replace(\".\", \" \")\r\n                .replace(/([A-Z])/g, \" $1\").trim());\r\n        }\r\n    });\r\n    // Filter\r\n    var system = require(\"durandal/system\"),\r\n        addConditionalFormatting = function () {\r\n            this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(system.guid()));\r\n        },\r\n        removeConditionalFormatting = function (cf) {\r\n            var self = this;\r\n            return function () {\r\n                self.ConditionalFormattingCollection.remove(cf);\r\n            };\r\n\r\n        },\r\n        removeIconCssClass = function () {\r\n            this.IconCssClass(\"\");\r\n        },\r\n        removeIconStoreId = function () {\r\n            this.IconStoreId(\"\");\r\n        };\r\n    return {\r\n        addConditionalFormatting: addConditionalFormatting,\r\n        removeConditionalFormatting: removeConditionalFormatting,\r\n        removeIconStoreId: removeIconStoreId,\r\n        removeIconCssClass: removeIconCssClass\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.WorkflowDefinitionPartial = function (model) {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        isBusy = ko.observable(false),\r\n        context = require(objectbuilders.datacontext),\r\n        elementNameOptions = ko.observableArray(),\r\n        removeActivity = function (activity) {\r\n            var self = this;\r\n            return function () {\r\n                self.ActivityCollection.remove(activity);\r\n            };\r\n        },\r\n        setStartActivity = function (act) {\r\n            var self = this;\r\n            return function () {\r\n                _(self.ActivityCollection()).each(function (v) {\r\n                    v.IsInitiator(false);\r\n                });\r\n                act.IsInitiator(true);\r\n\r\n            };\r\n        },\r\n        addActivity = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var activity = new bespoke.sph.domain[type + \"Activity\"](system.guid());\r\n\r\n                require([\"viewmodels/activity.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.activity(activity);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.ActivityCollection.push(activity);\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editActivity = function (activity) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = context.toObservable(ko.mapping.toJS(activity)),\r\n                    type = ko.unwrap(activity.TypeName);\r\n\r\n                isBusy(true);\r\n                require([\"viewmodels/activity.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.activity(clone);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            $(\"div.modalBlockout,div.modalHost\").remove();\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in activity) {\r\n                                    if (activity.hasOwnProperty(g)) {\r\n                                        var observable = activity[g].name === \"observable\" || activity[g].name === \"d\";\r\n                                        if (typeof activity[g] === \"function\" && observable) {\r\n                                            activity[g](ko.unwrap(clone[g]));\r\n                                        } else {\r\n                                            activity[g] = clone[g];\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        addVariable = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var variable = new bespoke.sph.domain[type + \"Variable\"](system.guid());\r\n\r\n                require([\"viewmodels/variable.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.variable(variable);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.VariableDefinitionCollection.push(variable);\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editVariable = function (variable) {\r\n            var self = this;\r\n            return function () {\r\n                var variableType = ko.unwrap(variable.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(variable)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Variable,/,\r\n                    type = pattern.exec(variableType)[1];\r\n\r\n                require([\"viewmodels/variable.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.variable(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in variable) {\r\n                                    if (typeof variable[g] === \"function\" && variable[g].name === \"observable\") {\r\n                                        variable[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        variable[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeVariable = function (variable) {\r\n            var self = this;\r\n            return function () {\r\n                self.VariableDefinitionCollection.remove(variable);\r\n            };\r\n        },\r\n        addCorrelationType = function () {\r\n            var self = this;\r\n            var correlationType = new bespoke.sph.domain.CorrelationType(system.guid());\r\n\r\n            require([\"viewmodels/correlation.type.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.correlationType(correlationType);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.CorrelationTypeCollection.push(correlationType);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editCorrelationType = function (correlationType) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(correlationType));\r\n\r\n                require([\"viewmodels/correlation.type.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.correlationType(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in correlationType) {\r\n                                    if (typeof correlationType[g] === \"function\" && correlationType[g].name === \"observable\") {\r\n                                        correlationType[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        correlationType[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeCorrelationType = function (correlationType) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationTypeCollection.remove(correlationType);\r\n            };\r\n        },\r\n        addCorrelationSet = function () {\r\n            var self = this;\r\n            var correlationSet = new bespoke.sph.domain.CorrelationSet(system.guid());\r\n\r\n            require([\"viewmodels/correlation.set.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.correlationSet(correlationSet);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.CorrelationSetCollection.push(correlationSet);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editCorrelationSet = function (correlationSet) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(correlationSet));\r\n\r\n                require([\"viewmodels/correlation.set.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.correlationSet(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in correlationSet) {\r\n                                    if (typeof correlationSet[g] === \"function\" && correlationSet[g].name === \"observable\") {\r\n                                        correlationSet[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        correlationSet[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeCorrelationSet = function (correlationSet) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationSetCollection.remove(correlationSet);\r\n            };\r\n        },\r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert(\"not implemented\" + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        },\r\n        addTryScope = function () {\r\n            var self = this;\r\n            var tryScope = new bespoke.sph.domain.TryScope(system.guid());\r\n            require([\"viewmodels/try.scope.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.tryScope(tryScope);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.TryScopeCollection.push(tryScope);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editTryScope = function (tryScope) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(tryScope));\r\n\r\n                require([\"viewmodels/try.scope.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.tryScope(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in tryScope) {\r\n                                    if (typeof tryScope[g] === \"function\" && tryScope[g].name === \"observable\") {\r\n                                        tryScope[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        tryScope[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeTryScope = function (tryScope) {\r\n            var self = this;\r\n            return function () {\r\n                self.TryScopeCollection.remove(tryScope);\r\n            };\r\n        },\r\n        loadSchema = function (storeId) {\r\n            var id = storeId || this.SchemaStoreId();\r\n            $.get(\"/api/workflow-definitions/xsd-elements/\" + id)\r\n                .then(function (result) {\r\n                    elementNameOptions(result);\r\n                });\r\n        };\r\n\r\n    model.SchemaStoreId.subscribe(loadSchema);\r\n\r\n    var vm = {\r\n        isBusy: isBusy,\r\n        removeCorrelationType: removeCorrelationType,\r\n        addCorrelationType: addCorrelationType,\r\n        editCorrelationType: editCorrelationType,\r\n        removeCorrelationSet: removeCorrelationSet,\r\n        addCorrelationSet: addCorrelationSet,\r\n        editCorrelationSet: editCorrelationSet,\r\n        removeVariable: removeVariable,\r\n        addVariable: addVariable,\r\n        editVariable: editVariable,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        addActivity: addActivity,\r\n        editActivity: editActivity,\r\n        removeActivity: removeActivity,\r\n        loadSchema: loadSchema,\r\n        xsdElements: elementNameOptions,\r\n        setStartActivity: setStartActivity,\r\n        addTryScope: addTryScope,\r\n        editTryScope: editTryScope,\r\n        removeTryScope: removeTryScope\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.WorkflowDesignerPartial = function () {\r\n  \r\n    return {\r\n    };\r\n};","/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.WorkflowFormPartial = function () {\r\n\r\n    var editOperationSuccessCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationSuccessCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationSuccessCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n    editOperationFailureCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationFailureCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationFailureCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        canSetSuccessCallback = ko.computed(function () {\r\n\r\n        });\r\n    return {\r\n        editOperationSuccessCallback: editOperationSuccessCallback,\r\n        editOperationFailureCallback: editOperationFailureCallback,\r\n        canSetSuccessCallback: canSetSuccessCallback\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.WorkflowTriggerMapPartial = function () {\r\n    var self = this,\r\n        system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        };\r\n\r\n    self.addField = function(accessor, type) {\r\n        var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n    };\r\n\r\n    self.editField = function(field, accessor) {\r\n        return function() {\r\n            var fieldType = ko.unwrap(field.$type),\r\n                clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                type = pattern.exec(fieldType)[1];\r\n\r\n\r\n            showFieldDialog(accessor, clone, 'field.' + type.toLowerCase());\r\n\r\n        };\r\n    };\r\n\r\n    return self;\r\n};\r\n\r\nbespoke.sph.domain.WorkflowTriggerMapPartial.prototype = new bespoke.sph.domain.FieldContainer();\r\n","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../schemassystem.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\n\r\nbespoke.sph.domain.XmlTextFormatterPartial = function (model) {\r\n    const system = require(\"durandal/system\"),\r\n        addParentElement = function () {\r\n            this.ParentElementValueCollection.push(new bespoke.sph.domain.XmlElementTextFieldMapping(system.guid()));\r\n        },\r\n        removeParentElement = function (element) {\r\n            var self = this;\r\n            return function () {\r\n                self.ParentElementValueCollection.remove(element);\r\n            };\r\n        },\r\n        addParentAttribute = function () {\r\n            this.ParentAttributeValueCollection.push(new bespoke.sph.domain.XmlAttributeTextFieldMapping({ WebId: system.guid(), TypeName: \"System.String, mscorlib\"}));\r\n        },\r\n        removeParentAttribute = function (attr) {\r\n            var self = this;\r\n            return function () {\r\n                self.ParentAttributeValueCollection.remove(attr);\r\n            };\r\n        };\r\n\r\n    \r\n\r\n    return {\r\n        addParentElement: addParentElement,\r\n        removeParentElement: removeParentElement,\r\n        addParentAttribute: addParentAttribute,\r\n        removeParentAttribute: removeParentAttribute\r\n    };\r\n};"]}