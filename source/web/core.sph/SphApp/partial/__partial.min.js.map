{"version":3,"sources":["Activity.js","AssemblyField.js","BarChartItem.js","BusinessRule.js","ButtonPartial.js","CatchScope.js","ChildEntityListView.js","ChildWorkflowActivity.js","ComboBox.js","ComplexMemberPartial.js","ConstantField.js","CorrelationType.js","CreateEntityActivity.js","DataGridItem.js","DecisionActivity.js","DelayActivity.js","DelimitedTextFormatter.js","EntityChart.js","EntityDefinition.js","EntityFormPartial.js","EntityLookupElement.js","EntityView.js","ExecutedActivity.js","Filter.js","FormDialogPartial.js","FormElement.js","HtmlElement.js","IFormTemplate.js","IntervalSchedule.js","LineChartItem.js","ListenActivity.js","ListView.js","ListViewColumn.js","MappingActivity.js","Member.js","MethodArg.js","NotificationActivity.js","OperationEndpointPartial.js","ParallelActivity.js","QueryEndpointPartial.js","ReceiveActivity.js","ReceivePortPartial.js","report.js","ReportDelivery.js","RouteParameter.js","RouteParameterFieldPartial.js","Rule.js","ScheduledTriggerActivity.js","SetterAction.js","SetterActionChild.js","StartWorkflowAction.js","TabControlPartial.js","TimePeriodPartial.js","TransformDefinition.js","Trigger.js","TryScope.js","UpdateEntityActivity.js","ValueObjectDefinitionPartial.js","Variable.js","ViewColumn.js","WorkflowDefinition.js","WorkflowDesigner.js","WorkflowFormPartial.js","WorkflowTriggerMap.js"],"names":["bespoke","sph","domain","ActivityPartial","hasError","require","ko","observable","breakpoint","selected","hit","errors","observableArray","AssemblyFieldPartial","system","objectbuilders","addParameter","this","MethodArgCollection","push","MethodArg","guid","removeParameter","p","self","remove","BarChartItemPartial","addSeries","ChartSeriesCollection","ChartSeries","removeSeries","series","BusinessRulePartial","model","addFilter","br","Rule","Left","Name","Right","FilterCollection","removeFilter","addRule","RuleCollection","removeRule","ButtonPartial","editCommand","w","window","open","screen","height","width","wdw","init","code","unwrap","Command","saved","close","attachEvent","editOperationSuccessCallback","OperationSuccessCallback","editOperationFailureCallback","OperationFailureCallback","canSetSuccessCallback","computed","CatchScopePartial","ChildEntityListViewPartial","addViewColumn","ViewColumnCollection","ViewColumn","WebId","Header","removeViewColumn","obj","addSort","SortCollection","Sort","removeSort","editViewColumn","vc","clone","mapping","fromJS","toJS","dialog","app2","column","entity","Entity","showDialog","done","result","g","name","ChildWorkflowActivityPartial","removeMapping","map","PropertyMappingCollection","addMapping","PropertyMapping","removeExecutedMapping","ExecutedPropertyMappingCollection","addExecutedMapping","vm","ComboBoxPartial","addItem","item","ComboBoxItem","ComboBoxItemCollection","removeItem","ComplexMemberPartial","subscribe","TypeName","$","get","ConstantFieldPartial","option","Type","Value","v","CorrelationTypePartial","removeCorrelationProperty","prop","CorrelationPropertyCollection","addCorrelationProperty","CorrelationProperty","CreateEntityActivityPartial","addPropertyMapping","type","removePropertyMapping","DataGridItemPartial","addDataGridGroupDefinition","DataGridGroupDefinitionCollection","DataGridGroupDefinition","removeDataGridGroupDefinition","addColumn","DataGridColumnCollection","DataGridColumn","removeColumn","DecisionActivityPartial","addBranch","DecisionBranchCollection","DecisionBranch","removeBranch","branch","multipleEndPoints","DelayActivityPartial","isAsync","DelimitedTextFormatterPartial","parentOptions","childNameChanged","indexOf","removeDetailsRow","child","DetailRowCollection","nameChangedSubscription","dispose","addDetailsRow","FlatFileDetailTag","EntityChartPartial","context","datacontext","pin","IsDashboardItem","tcs","Deferred","post","toJSON","resolve","promise","unpin","ServiceContractPartial","publish","ed","EntityDefinitionPartial","app","addMember","MemberCollection","Member","Boost","removeMember","floor","addEntityOperation","EntityOperationCollection","EntityOperation","save","then","success","removeEntityOperation","operation","showMessage","dialogResult","call","editMember","member","BlockCollection","replace","addBusinessRule","BusinessRule","rule","BusinessRuleCollection","editBusinessRule","toObservable","removeBusinessRule","editMemberMap","building","console","log","BuildingId","MemberPlanStoreId","spatialStoreId","EntityFormPartial","EntityLookupElementPartial","editDisplayTemplate","DisplayTemplate","editColumns","selectedMembers","LookupColumnCollection","editFilter","selectedFilters","EntityViewPartial","addConditionalFormatting","ConditionalFormattingCollection","ConditionalFormatting","removeConditionalFormatting","cf","addRouteParameter","RouteParameterCollection","RouteParameter","removeRouteParameter","Filter","ExecutedActivityPartial","FilterPartial","showFieldDialog","accessor","field","path","addField","toLowerCase","editField","fieldType","$type","pattern","exec","Field","FormDialogPartial","buttons","DialogButtonCollection","_","each","canMoveDown","canMoveUp","first","last","addDialogButton","DialogButton","removeDialogButton","btn","move","array","from","to","target","increment","k","arrange","step","index","temps","moveDown","moveUp","DialogButtonPartial","FormElementPartial","HtmlElementPartial","editHtml","Text","FormTemplatePartial","IntervalSchedulePartial","icon","LineChartItemPartial","ListenActivityPartial","ListenBranch","ListenBranchCollection","ListViewPartial","addListViewColumn","ListViewColumn","input","Path","Label","Input","isSelected","ListViewColumnCollection","removeListViewColumn","ListViewColumnPartial","pattern1","input1","name1","icon1","err","c","MappingActivityPartial","addMappingSource","MappingSourceCollection","removeMappingSource","MemberPartial","editPermission","FieldPermissionCollection","DefaultValue","removeField","AllowMultiple","MethodArgPartial","NotificationActivityPartial","From","OperationEndpointPartial","removeChildAction","SetterActionChildCollection","addChildAction","SetterActionChild","removePatchPath","PatchPathCollection","addPatchPath","PatchSetter","IsRequired","addReferencedAssembly","selectedAssemblies","ReferencedAssemblyCollection","editReferencedAssembly","dll","alert","removeReferencedAssembly","ParallelActivityPartial","ParallelBranchCollection","ParallelBranch","QueryEndpointPartial","allowQueryCache","CacheFilter","ReceiveActivityPartial","ReceivePortPartial","port","isWizardOk","Formatter","removeReceiveLocation","ReceiveLocationCollection","addReceiveLocation","FolderReceiveLocation","location","editReceiveLocation","warn","DailySchedulePartial","WeeklySchedulePartial","MonthlySchedulePartial","dateOptions","range","ReportDeliveryPartial","IntervalScheduleContainer","RouteParameterPartial","RouteParameterFieldPartial","IsOptional","opt","RulePartial","ScheduledTriggerActivityPartial","b","SetterActionPartial","SetterActionChildPartial","StartWorkflowActionPartial","WorkflowTriggerMapCollection","WorkflowTriggerMap","editMapping","TabControlPartial","tab","TabPanel","TabPanelCollection","length","TimePeriodPartial","period","toString","Count","Unit","TransformDefinitionPartial","TriggerPartial","removeAction","action","ActionCollection","addAction","t","error","Title","n","hasOwnProperty","isObservable","destroyAll","trigger","IsActive","editAction","TryScopePartial","addCatchScope","wd","self2","catchScope","CatchScope","CatchScopeCollection","editCatchScope","wdOutside","removeCatchScope","ActivityCollection","forEach","act","Id","UpdateEntityActivityPartial","ValueObjectDefinitionPartial","VariablePartial","ViewColumnPartial","trim","removeIconCssClass","IconCssClass","removeIconStoreId","IconStoreId","WorkflowDefinitionPartial","isBusy","elementNameOptions","removeActivity","activity","setStartActivity","IsInitiator","addActivity","editActivity","addVariable","variable","VariableDefinitionCollection","editVariable","variableType","removeVariable","addCorrelationType","correlationType","CorrelationType","CorrelationTypeCollection","editCorrelationType","removeCorrelationType","addCorrelationSet","correlationSet","CorrelationSet","CorrelationSetCollection","editCorrelationSet","removeCorrelationSet","addTryScope","tryScope","TryScope","TryScopeCollection","editTryScope","removeTryScope","loadSchema","storeId","id","SchemaStoreId","xsdElements","WorkflowDesignerPartial","WorkflowFormPartial","WorkflowTriggerMapPartial","prototype","FieldContainer"],"mappings":"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","file":"__partial.min.js","sourcesContent":["/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nvar bespoke = bespoke || {};\r\nbespoke.sph = bespoke.sph || {};\r\nbespoke.sph.domain = bespoke.sph.domain || {};\r\n\r\n\r\nbespoke.sph.domain.ActivityPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        hasError = ko.observable(),\r\n        breakpoint = ko.observable(false),\r\n        selected = ko.observable(false),\r\n        hit = ko.observable(false),\r\n        errors = ko.observableArray();\r\n    return {\r\n        breakpoint: breakpoint,\r\n        hit: hit,\r\n        selected: selected,\r\n        hasError: hasError,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.AssemblyFieldPartial = function () {\r\n    var system = require(objectbuilders.system),\r\n        addParameter = function () {\r\n            this.MethodArgCollection.push(new bespoke.sph.domain.MethodArg(system.guid()));\r\n        },\r\n        removeParameter = function(p) {\r\n            var self = this;\r\n            return function() {\r\n                self.MethodArgCollection.remove(p);\r\n            };\r\n        };\r\n    return {\r\n        addParameter: addParameter,\r\n        removeParameter: removeParameter\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.BarChartItemPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addSeries = function() {\r\n            this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(system.guid()));\r\n        },\r\n        removeSeries = function (series) {\r\n            var self = this;\r\n            return function() {\r\n                self.ChartSeriesCollection.remove(series);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addSeries: addSeries,\r\n        removeSeries: removeSeries\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.BusinessRulePartial = function (model) {\r\n\r\n    var system = require('durandal/system'),\r\n        addFilter = function () {\r\n            var self = this,\r\n                br = new bespoke.sph.domain.Rule(system.guid());\r\n\r\n            br.Left({ Name: ko.observable(\"+ Field\") });\r\n            br.Right({ Name: ko.observable(\"+ Field\") });\r\n\r\n            self.FilterCollection.push(br);\r\n\r\n        },\r\n        removeFilter = function (br) {\r\n            var self = this;\r\n            return function () {\r\n                self.FilterCollection.remove(br);\r\n            };\r\n        },\r\n        addRule = function () {\r\n            var self = this,\r\n                br = new bespoke.sph.domain.Rule(system.guid());\r\n\r\n            br.Left({ Name: ko.observable(\"+ Field\") });\r\n            br.Right({ Name: ko.observable(\"+ Field\") });\r\n\r\n            self.RuleCollection.push(br);\r\n\r\n        },\r\n        removeRule = function (br) {\r\n            var self = this;\r\n            return function () {\r\n                self.RuleCollection.remove(br);\r\n            };\r\n        };\r\n\r\n\r\n\r\n    return {\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter,\r\n        addRule: addRule,\r\n        removeRule: removeRule\r\n    };\r\n};\r\n","/// <reference path=\"../../Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../SphApp/schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.ButtonPartial = function () {\r\n\r\n    var editCommand = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.Command);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.Command(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        editOperationSuccessCallback = function () {\r\n            var self = this,\r\n                w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n                wdw = w.window || w,\r\n                init = function () {\r\n                    wdw.code = ko.unwrap(self.OperationSuccessCallback);\r\n                    if (!w.code) {\r\n                        w.code = \"//insert your code here\";\r\n                    }\r\n                    wdw.saved = function (code, close) {\r\n                        self.OperationSuccessCallback(code);\r\n                        if (close) {\r\n                            w.close();\r\n                        }\r\n                    };\r\n                };\r\n            if (wdw.attachEvent) { // for ie\r\n                wdw.attachEvent(\"onload\", init);\r\n            } else {\r\n                init();\r\n            }\r\n        },\r\n    editOperationFailureCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationFailureCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationFailureCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        canSetSuccessCallback = ko.computed(function () {\r\n\r\n        });\r\n    return {\r\n        editCommand: editCommand,\r\n        editOperationSuccessCallback: editOperationSuccessCallback,\r\n        editOperationFailureCallback: editOperationFailureCallback,\r\n        canSetSuccessCallback: canSetSuccessCallback\r\n    };\r\n};","bespoke.sph.domain.CatchScopePartial = function () {\r\n\r\n\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n\r\n\r\nbespoke.sph.domain.ChildEntityListViewPartial = function (model) {\r\n    // ViewColumn\r\n    var system = require('durandal/system'),\r\n        addViewColumn = function () {\r\n            this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn({ WebId: system.guid(),Header :'<New Column>'}));\r\n        },\r\n        removeViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addSort = function () {\r\n            this.SortCollection.push(new bespoke.sph.domain.Sort(system.guid()));\r\n        },\r\n        removeSort = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.SortCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n    editViewColumn = function (vc) {\r\n        return function () {\r\n            var clone = ko.mapping.fromJS(ko.mapping.toJS(vc));\r\n\r\n            require(['viewmodels/view.column.dialog', 'durandal/app'], function (dialog, app2) {\r\n                dialog.column(clone);\r\n                dialog.entity(model.Entity());\r\n\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            for (var g in vc) {\r\n                                if (typeof vc[g] === \"function\" && vc[g].name === \"observable\") {\r\n                                    vc[g](ko.unwrap(clone[g]));\r\n                                } else {\r\n                                    vc[g] = clone[g];\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n        };\r\n    };\r\n    return {\r\n        addSort: addSort,\r\n        removeSort: removeSort,\r\n        addViewColumn: addViewColumn,\r\n        editViewColumn: editViewColumn,\r\n        removeViewColumn: removeViewColumn\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.ChildWorkflowActivityPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        removeMapping = function (map) {\r\n            var self = this;\r\n            return function () {\r\n                self.PropertyMappingCollection.remove(map);\r\n            };\r\n        },\r\n        addMapping = function () {\r\n            var map = new bespoke.sph.domain.PropertyMapping(system.guid());\r\n            this.PropertyMappingCollection.push(map);\r\n        },\r\n        removeExecutedMapping = function (map) {\r\n            var self = this;\r\n            return function () {\r\n                self.ExecutedPropertyMappingCollection.remove(map);\r\n            };\r\n        },\r\n        addExecutedMapping = function () {\r\n            var map = new bespoke.sph.domain.PropertyMapping(system.guid());\r\n            this.ExecutedPropertyMappingCollection.push(map);\r\n        };\r\n\r\n    var vm = {\r\n        addExecutedMapping: addExecutedMapping,\r\n        removeExecutedMapping: removeExecutedMapping,\r\n        addMapping: addMapping,\r\n        removeMapping: removeMapping\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ComboBoxPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addItem = function () {\r\n            var self = this;\r\n            var item = new bespoke.sph.domain.ComboBoxItem(system.guid());\r\n            self.ComboBoxItemCollection.push(item);\r\n\r\n        },\r\n        removeItem = function (item) {\r\n            var self = this;\r\n            return function () {\r\n                self.ComboBoxItemCollection.remove(item);\r\n            };\r\n        };\r\n    return {\r\n        addItem: addItem,\r\n        removeItem: removeItem\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ComplexMemberPartial = function(model) {\r\n    model.Name.subscribe(function(name) {\r\n        if (!ko.unwrap(model.TypeName)) {\r\n            $.get(\"/entity-definition/singular/\" + name).done(model.TypeName);\r\n        }\r\n    });\r\n\r\n}","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\nbespoke.sph.domain.ConstantFieldPartial = function (model, option) {\r\n\r\n    var vm = {\r\n        Type: ko.observable(),\r\n        Value: ko.observable(option.Value)\r\n    };\r\n\r\n    vm.Value.subscribe(function(v) {\r\n        if (!ko.unwrap(model.Name)) {\r\n            model.Name(v);\r\n        }\r\n    });\r\n    return vm;\r\n};","/// <reference path=\"../../Scripts/jquery-2.1.1.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n\r\n\r\nbespoke.sph.domain.CorrelationTypePartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeCorrelationProperty = function (prop) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationPropertyCollection.remove(prop);\r\n            };\r\n        },\r\n        addCorrelationProperty = function () {\r\n            this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(system.guid()));\r\n        };\r\n    return {\r\n        removeCorrelationProperty: removeCorrelationProperty,\r\n        addCorrelationProperty: addCorrelationProperty\r\n\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.CreateEntityActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addPropertyMapping = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var mapping = new bespoke.sph.domain[type + 'Mapping'](system.guid());\r\n                self.PropertyMappingCollection.push(mapping);\r\n            };\r\n        },\r\n        removePropertyMapping = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.PropertyMappingCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addPropertyMapping: addPropertyMapping,\r\n        removePropertyMapping: removePropertyMapping\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.DataGridItemPartial = function () {\r\n\r\n    // DataGridGroup\r\n    var system = require('durandal/system'),\r\n        addDataGridGroupDefinition = function () {\r\n            this.DataGridGroupDefinitionCollection.push(new bespoke.sph.domain.DataGridGroupDefinition(system.guid()));\r\n        },\r\n        removeDataGridGroupDefinition = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.DataGridGroupDefinitionCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addColumn = function () {\r\n            var self = this;\r\n            self.DataGridColumnCollection.push(new bespoke.sph.domain.DataGridColumn(system.guid()));\r\n        },\r\n        removeColumn = function (column) {\r\n            var self = this;\r\n            return function () {\r\n                self.DataGridColumnCollection.remove(column);\r\n            };\r\n        };\r\n\r\n    return {\r\n        addColumn: addColumn,\r\n        removeColumn: removeColumn,\r\n        addDataGridGroupDefinition: addDataGridGroupDefinition,\r\n        removeDataGridGroupDefinition: removeDataGridGroupDefinition\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.DecisionActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function() {\r\n            this.DecisionBranchCollection.push(new bespoke.sph.domain.DecisionBranch(system.guid()));\r\n        },\r\n        removeBranch = function(branch) {\r\n            var self = this;\r\n            return function() {\r\n                self.DecisionBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function() {\r\n            return this.DecisionBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.DelayActivityPartial = function () {\r\n\r\n    return {\r\n        isAsync:true\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.DelimitedTextFormatterPartial = function () {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        parentOptions = ko.observableArray([\"$root\"]),\r\n        childNameChanged = function (name) {\r\n            if (name) {\r\n                if (parentOptions().indexOf(name) < 0) {\r\n                    parentOptions.push(name);\r\n                }\r\n            }\r\n        },\r\n        removeDetailsRow = function (child) {\r\n            var self = this;\r\n            return function () {\r\n                self.DetailRowCollection.remove(child);\r\n                if (child.nameChangedSubscription) {\r\n                    child.nameChangedSubscription.dispose();\r\n                }\r\n            };\r\n        },\r\n        addDetailsRow = function () {\r\n            const child = new bespoke.sph.domain.FlatFileDetailTag(system.guid());\r\n            child.nameChangedSubscription = child.Name.subscribe(childNameChanged);\r\n            this.DetailRowCollection.push(child);\r\n        };\r\n\r\n    const vm = {\r\n        addDetailsRow: addDetailsRow,\r\n        removeDetailsRow: removeDetailsRow,\r\n        parentOptions: parentOptions\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","\r\nbespoke.sph.domain.EntityChartPartial = function (model) {\r\n    var context = require(objectbuilders.datacontext),\r\n        pin = function () {\r\n            if (typeof model.IsDashboardItem === \"function\") {\r\n                model.IsDashboardItem(true);\r\n            } else {\r\n                model.IsDashboardItem = ko.observable(true);\r\n            }\r\n\r\n            var tcs = new $.Deferred();\r\n\r\n            context.post(ko.mapping.toJSON(model), '/sph/entitychart/save')\r\n                .done(tcs.resolve);\r\n\r\n            return tcs.promise();\r\n        },\r\n        unpin = function() {\r\n            if (typeof model.IsDashboardItem === \"function\") {\r\n                model.IsDashboardItem(false);\r\n            } else {\r\n                model.IsDashboardItem = ko.observable(false);\r\n            }\r\n\r\n            var tcs = new $.Deferred();\r\n\r\n            context.post(ko.mapping.toJSON(model), '/sph/entitychart/save')\r\n                .done(tcs.resolve);\r\n\r\n            return tcs.promise();\r\n        };\r\n    return {\r\n        pin: pin,\r\n        unpin : unpin\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ServiceContractPartial = function () {\r\n    var context = require(objectbuilders.datacontext),\r\n        publish = function (ed) {\r\n            return context.post(ko.toJSON(ed), \"/entity-definition/publish/service-contract\");\r\n        };\r\n\r\n    return {\r\n        publish: publish\r\n    };\r\n}\r\nbespoke.sph.domain.EntityDefinitionPartial = function () {\r\n    var system = require(\"durandal/system\"),\r\n        app = require(\"durandal/app\"),\r\n        context = require(objectbuilders.datacontext),\r\n        addMember = function () {\r\n            this.MemberCollection.push(new bespoke.sph.domain.Member({\r\n                WebId: system.guid(),\r\n                Boost: 1\r\n            }));\r\n        },\r\n        removeMember = function (floor) {\r\n            var self = this;\r\n            return function () {\r\n                self.MemberCollection.remove(floor);\r\n            };\r\n        },\r\n        addEntityOperation = function () {\r\n            this.EntityOperationCollection.push(new bespoke.sph.domain.EntityOperation({\r\n                WebId: system.guid()\r\n            }));\r\n        }, save = function () {\r\n            var self = this;\r\n            context.post(ko.toJSON(self), \"/entity-definition\")\r\n            .then(function (result) {\r\n                if (result.success) {\r\n                }\r\n            });\r\n        },\r\n        removeEntityOperation = function (operation) {\r\n            var self = this;\r\n            return function () {\r\n                var tcs = new $.Deferred();\r\n                app.showMessage(\"Are you sure you want to remove this operation, this operation cannot be undone and will commit the entire changes to your EntityDefinition\", \"Reactive Developer\", [\"Yes\", \"No\"])\r\n                    .done(function (dialogResult) {\r\n                        if (dialogResult === \"Yes\") {\r\n                            self.EntityOperationCollection.remove(operation);\r\n                            save.call(self);\r\n                        }\r\n                    });\r\n\r\n                return tcs.promise();\r\n            };\r\n        },\r\n        editMember = function (member) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/member.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                    dialog.member(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BlockCollection.replace(member, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        addBusinessRule = function () {\r\n            var br = new bespoke.sph.domain.BusinessRule({ WebId: system.guid() });\r\n            var self = this;\r\n\r\n            require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                dialog.rule(br);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.BusinessRuleCollection.push(br);\r\n                        }\r\n                    });\r\n            });\r\n\r\n        },\r\n        editBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = context.toObservable(ko.mapping.toJS(rule));\r\n                    dialog.rule(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result == \"OK\") {\r\n                                self.BusinessRuleCollection.replace(rule, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        removeBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                self.BusinessRuleCollection.remove(rule);\r\n            };\r\n        },\r\n        editMemberMap = function (member) {\r\n            var building = this;\r\n            return function () {\r\n                console.log(\"show map \", building);\r\n                console.log(\" on member \", member);\r\n                require([\"viewmodels/member.map\", \"durandal/app\"], function (dialog, app) {\r\n                    dialog.init(building.BuildingId(), member.MemberPlanStoreId());\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (result == \"OK\") {\r\n                                member.MemberPlanStoreId(dialog.spatialStoreId());\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        };\r\n    return {\r\n        addEntityOperation: addEntityOperation,\r\n        removeEntityOperation: removeEntityOperation,\r\n        addMember: addMember,\r\n        editMember: editMember,\r\n        removeMember: removeMember,\r\n        addBusinessRule: addBusinessRule,\r\n        editBusinessRule: editBusinessRule,\r\n        removeBusinessRule: removeBusinessRule,\r\n        editMemberMap: editMemberMap\r\n    };\r\n};","/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.EntityFormPartial = function () {\r\n\r\n    var editOperationSuccessCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationSuccessCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationSuccessCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n    editOperationFailureCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationFailureCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationFailureCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        canSetSuccessCallback = ko.computed(function () {\r\n\r\n        });\r\n    return {\r\n        editOperationSuccessCallback: editOperationSuccessCallback,\r\n        editOperationFailureCallback: editOperationFailureCallback,\r\n        canSetSuccessCallback: canSetSuccessCallback\r\n    };\r\n};","/// <reference path=\"../../Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n\r\nbespoke.sph.domain.EntityLookupElementPartial = function () {\r\n\r\n    var editDisplayTemplate = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.Command);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.DisplayTemplate(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n    editColumns = function () {\r\n            var self = this;\r\n            require([\"viewmodels/members.selector.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.entity(self.Entity());\r\n                dialog.selectedMembers(self.LookupColumnCollection());\r\n                app2.showDialog(dialog,self.Entity())\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.LookupColumnCollection(dialog.selectedMembers());\r\n                        }\r\n                    });\r\n\r\n            });\r\n        },\r\n        editFilter = function() {\r\n\r\n            var self = this;\r\n            require([\"viewmodels/entity.lookup.filter.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.entity(self.Entity());\r\n                dialog.selectedFilters(self.FilterCollection());\r\n                app2.showDialog(dialog, self.Entity())\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.FilterCollection(dialog.selectedFilters());\r\n                        }\r\n                    });\r\n\r\n            });\r\n        };\r\n\r\n    return {\r\n        editDisplayTemplate: editDisplayTemplate,\r\n        editColumns: editColumns,\r\n        editFilter: editFilter\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/SphApp/services/system.js\" />\r\n/// <reference path=\"/SphApp/schemas/form.designer.g.js\" />\r\n\r\n\r\nbespoke.sph.domain.EntityViewPartial = function () {\r\n\r\n    // Filter\r\n    var system = require(\"durandal/system\"),\r\n        addConditionalFormatting = function () {\r\n            this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(system.guid()));\r\n        },\r\n        removeConditionalFormatting = function (cf) {\r\n            var self = this;\r\n            return function () {\r\n                self.ConditionalFormattingCollection.remove(cf);\r\n            };\r\n\r\n        },\r\n        addRouteParameter = function () {\r\n            this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(system.guid()));\r\n        },\r\n        removeRouteParameter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.RouteParameterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addViewColumn = function () {\r\n            this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn(system.guid()));\r\n        },\r\n        removeViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addFilter = function () {\r\n            this.FilterCollection.push(new bespoke.sph.domain.Filter(system.guid()));\r\n        },\r\n        removeFilter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.FilterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addSort = function () {\r\n            this.SortCollection.push(new bespoke.sph.domain.Sort(system.guid()));\r\n        },\r\n        removeSort = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.SortCollection.remove(obj);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addRouteParameter: addRouteParameter,\r\n        removeRouteParameter: removeRouteParameter,\r\n        addConditionalFormatting: addConditionalFormatting,\r\n        removeConditionalFormatting: removeConditionalFormatting,\r\n        addViewColumn: addViewColumn,\r\n        removeViewColumn: removeViewColumn,\r\n        addSort: addSort,\r\n        removeSort: removeSort,\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ExecutedActivityPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        breakpoint = ko.observable(false),\r\n        hit = ko.observable(false),\r\n        errors = ko.observableArray();\r\n    return {\r\n        breakpoint: breakpoint,\r\n        hit: hit,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.FilterPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n          showFieldDialog = function (accessor, field, path) {\r\n              require([\"viewmodels/\" + path, \"durandal/app\"], function (dialog, app2) {\r\n                  dialog.field(field);\r\n                  if (typeof dialog.entity === \"function\") {\r\n                      //dialog.entity();\r\n                      console.log(\"found the entity dialog :\" + dialog.entity.name);\r\n                  }\r\n                  app2.showDialog(dialog)\r\n                  .done(function (result) {\r\n                      if (!result) return;\r\n                      if (result === \"OK\") {\r\n                          accessor(field);\r\n                      }\r\n                  });\r\n\r\n              });\r\n          },\r\n          addField = function (accessor, type) {\r\n              var field = new bespoke.sph.domain[type + \"Field\"](system.guid());\r\n              showFieldDialog(accessor, field, \"field.\" + type.toLowerCase());\r\n          },\r\n          editField = function (field) {\r\n              var self = this;\r\n              return function () {\r\n                  var fieldType = ko.unwrap(field.$type),\r\n                      clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                      pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                      type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                  showFieldDialog(self.Field, clone, \"field.\" + type.toLowerCase());\r\n              };\r\n          };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../../Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.FormDialogPartial = function (model) {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        init = function() {\r\n\r\n            var buttons = ko.unwrap(model.DialogButtonCollection);\r\n            _(buttons).each(function (v) {\r\n                v.canMoveDown(true);\r\n                v.canMoveUp(true);\r\n            });\r\n            var first = _(buttons).first(),\r\n                last = _(buttons).last();\r\n            if (first) {\r\n                first.canMoveUp(false);\r\n            }\r\n            if (last) {\r\n                last.canMoveDown(false);\r\n            }\r\n        },\r\n        addDialogButton = function () {\r\n            model.DialogButtonCollection.push(new bespoke.sph.domain.DialogButton({ WebId: system.guid(), canMoveDown: false }));\r\n            init();\r\n        },\r\n        removeDialogButton = function (btn) {\r\n            model.DialogButtonCollection.remove(btn);\r\n            init();\r\n        },\r\n        move = function (array, from, to) {\r\n            if (to === from) return;\r\n\r\n            var target = array[from];\r\n            var increment = to < from ? -1 : 1;\r\n\r\n            for (var k = from; k !== to; k += increment) {\r\n                array[k] = array[k + increment];\r\n            }\r\n            array[to] = target;\r\n        },\r\n        arrange = function (btn, step) {\r\n\r\n            var index = model.DialogButtonCollection().indexOf(btn);\r\n            var temps = ko.unwrap(model.DialogButtonCollection);\r\n            move(temps, index, index + step);\r\n\r\n            _(temps).each(function (v) {\r\n                v.canMoveDown(true);\r\n                v.canMoveUp(true);\r\n            });\r\n            _(temps).first().canMoveUp(false);\r\n            _(temps).last().canMoveDown(false);\r\n            model.DialogButtonCollection(temps);\r\n        },\r\n        moveDown = function (btn) {\r\n            arrange(btn, 1);\r\n        },\r\n        moveUp = function (btn) {\r\n            arrange(btn, -1);\r\n        };\r\n\r\n    init();\r\n\r\n    return {\r\n        removeDialogButton: removeDialogButton,\r\n        addDialogButton: addDialogButton,\r\n        moveDown: moveDown,\r\n        moveUp: moveUp\r\n    };\r\n};\r\nbespoke.sph.domain.DialogButtonPartial = function (model) {\r\n\r\n    var canMoveUp = ko.observable(true),\r\n        canMoveDown = ko.observable(true);\r\n\r\n    return {\r\n        canMoveDown: canMoveDown,\r\n        canMoveUp: canMoveUp\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.FormElementPartial = function () {\r\n    \r\n    return {\r\n    };\r\n};\r\n\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.HtmlElementPartial = function () {\r\n\r\n    var editHtml = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=html\", '_blank', 'height=' + screen.height + ',width=' + screen.width + ',toolbar=0,location=0,fullscreen=yes'),\r\n            init = function () {\r\n                w.code = ko.unwrap(self.Text);\r\n                w.saved = function (code, close) {\r\n                    self.Text(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (w.attachEvent) { // for ie\r\n            w.attachEvent('onload', init);\r\n        } else {\r\n            init();\r\n        }\r\n    };\r\n    return {\r\n        editHtml: editHtml\r\n    };\r\n};","\r\nbespoke.sph.domain.FormTemplatePartial = function () {\r\n\r\n    var vm = {\r\n    };\r\n    return vm;\r\n}","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.IntervalSchedulePartial = function () {\r\n    var icon = ko.observable(),\r\n        name = ko.observable();\r\n    return {\r\n        icon: icon,\r\n        name : name\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.LineChartItemPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addSeries = function() {\r\n            this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(system.guid()));\r\n        },\r\n        removeSeries = function (series) {\r\n            var self = this;\r\n            return function() {\r\n                self.ChartSeriesCollection.remove(series);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addSeries: addSeries,\r\n        removeSeries: removeSeries\r\n    };\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.ListenActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function () {\r\n            var self = this;\r\n            var branch = new bespoke.sph.domain.ListenBranch(system.guid());\r\n            self.ListenBranchCollection.push(branch);\r\n\r\n        },\r\n        removeBranch = function (branch) {\r\n            var self = this;\r\n            return function () {\r\n                self.ListenBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function () {\r\n            return this.ListenBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ListViewPartial = function (model) {\r\n\r\n    // ListViewColumn\r\n    var system = require('durandal/system'),\r\n        addListViewColumn = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var column = new bespoke.sph.domain.ListViewColumn(system.guid()),\r\n                    input = bespoke.sph.domain[type](system.guid());\r\n\r\n\r\n                column.Path.subscribe(function(v) {\r\n                    input.Path(v);\r\n                });\r\n                column.Label.subscribe(function(v) {\r\n                    input.Label(v);\r\n                });\r\n\r\n                column.Input(input);\r\n                input.isSelected = ko.observable(false);\r\n                self.ListViewColumnCollection.push(column);\r\n            };\r\n        },\r\n        removeListViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ListViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        };\r\n\r\n    _(model.ListViewColumnCollection()).each(function(v) {\r\n        v.Input().isSelected = ko.observable(false);\r\n    });\r\n\r\n    return {\r\n        addListViewColumn: addListViewColumn,\r\n        removeListViewColumn: removeListViewColumn\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.ListViewColumnPartial = function (model) {\r\n\r\n    try {\r\n\r\n        var pattern1 = /Bespoke\\.Sph\\.Domain\\.(.*?),/,\r\n            input1 = ko.unwrap(model.Input),\r\n            name1 = null,\r\n            icon1 = null;\r\n        if (input1) {\r\n            name1 = pattern1.exec(ko.unwrap(input1.$type))[1],\r\n            icon1 = '/images/form.element.' + name1 + '.png';\r\n        }\r\n\r\n\r\n    } catch (err) {\r\n\r\n    }\r\n    icon1 = icon1 || '/images/form.element.textbox.png';\r\n    var icon = ko.observable(icon1);\r\n    model.Input.subscribe(function (c) {\r\n        if (!c.$type) {\r\n            return;\r\n        }\r\n\r\n        var pattern = /Bespoke\\.Sph\\.Domain\\.(.*?),/,\r\n            name = pattern.exec(ko.unwrap(c.$type))[1];\r\n        icon('/images/form.element.' + name + '.png');\r\n\r\n\r\n    });\r\n    return {\r\n        icon: icon\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.MappingActivityPartial = function () {\r\n    var system = require(\"durandal/system\"),\r\n        addMappingSource = function () {\r\n            var self = this;\r\n            var mapping = new bespoke.sph.domain[\"MappingSource\"](system.guid());\r\n            self.MappingSourceCollection.push(mapping);\r\n\r\n        },\r\n        removeMappingSource = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.MappingSourceCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addMappingSource: addMappingSource,\r\n        removeMappingSource: removeMappingSource\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../schemassystem.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\n\r\nbespoke.sph.domain.MemberPartial = function (model) {\r\n    var system = require(\"durandal/system\"),\r\n        addMember = function () {\r\n            this.MemberCollection.push(new bespoke.sph.domain.Member(system.guid()));\r\n        },\r\n        editMember = function (member) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/member.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                    dialog.member(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BlockCollection.replace(member, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        editPermission = function (member) {\r\n            var self = this;\r\n            require([\"viewmodels/field.permission.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                dialog.member(clone);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.FieldPermissionCollection(clone.FieldPermissionCollection());\r\n                        }\r\n                    });\r\n            });\r\n\r\n        },\r\n        removeMember = function (floor) {\r\n            var self = this;\r\n            return function () {\r\n                self.MemberCollection.remove(floor);\r\n            };\r\n        },\r\n        editMemberMap = function (member) {\r\n            var building = this;\r\n            return function () {\r\n                console.log(\"show map \", building);\r\n                console.log(\" on member \", member);\r\n                require([\"viewmodels/member.map\", \"durandal/app\"], function (dialog, app) {\r\n                    dialog.init(building.BuildingId(), member.MemberPlanStoreId());\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (result === \"OK\") {\r\n                                member.MemberPlanStoreId(dialog.spatialStoreId());\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require([\"viewmodels/\" + path, \"durandal/app\"], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            var field = new bespoke.sph.domain[type + \"Field\"](system.guid());\r\n            showFieldDialog(accessor, field, \"field.\" + type.toLowerCase());\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field || self.DefaultValue, clone, \"field.\" + type.toLowerCase());\r\n            };\r\n        },\r\n        removeField = function () {\r\n            var self = this,\r\n                accessor = self.Field || self.DefaultValue;\r\n            return function () {\r\n                accessor({ Name: ko.observable(\"[Select a value]\") });\r\n            };\r\n        };\r\n\r\n\r\n    model.AllowMultiple.subscribe(function(array) {\r\n        if (array) {\r\n            model.DefaultValue(null);\r\n        } else {\r\n            model.DefaultValue({ Name: ko.observable(\"[Select a value]\") });\r\n        }\r\n    });\r\n\r\n    return {\r\n        editPermission: editPermission,\r\n        addMember: addMember,\r\n        editMember: editMember,\r\n        editMemberMap: editMemberMap,\r\n        removeMember: removeMember,\r\n        addField: addField,\r\n        removeField: removeField,\r\n        editField: editField\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.MethodArgPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field, clone, 'field.' + type.toLowerCase());\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.NotificationActivityPartial = function(model) {\r\n    \r\n    if (!model.From()) {\r\n        model.From(\"admin@@sph.my\");\r\n    }\r\n    return {\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.OperationEndpointPartial = function () {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        removeChildAction = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.SetterActionChildCollection.remove(child);\r\n            };\r\n        },\r\n        addChildAction = function() {\r\n            var child = new bespoke.sph.domain.SetterActionChild(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.SetterActionChildCollection.push(child);\r\n        },\r\n        removePatchPath = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.PatchPathCollection.remove(child);\r\n            };\r\n        },\r\n        addPatchPath = function () {\r\n            var child = new bespoke.sph.domain.PatchSetter({ WebId: system.guid() , IsRequired: true});\r\n            this.PatchPathCollection.push(child);\r\n        },\r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert(\"not implemented\" + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        removePatchPath: removePatchPath,\r\n        addPatchPath: addPatchPath,\r\n        addChildAction: addChildAction,\r\n        removeChildAction: removeChildAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ParallelActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function() {\r\n            this.ParallelBranchCollection.push(new bespoke.sph.domain.ParallelBranch(system.guid()));\r\n        },\r\n        removeBranch = function(branch) {\r\n            var self = this;\r\n            return function() {\r\n                self.ParallelBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function() {\r\n            return this.ParallelBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/SphApp/services/system.js\" />\r\n/// <reference path=\"/SphApp/schemas/form.designer.g.js\" />\r\n\r\n\r\nbespoke.sph.domain.QueryEndpointPartial = function (model) {\r\n\r\n    // Filter\r\n    var system = require(\"durandal/system\"),\r\n        addRouteParameter = function () {\r\n            this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(system.guid()));\r\n        },\r\n        removeRouteParameter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.RouteParameterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addFilter = function () {\r\n            this.FilterCollection.push(new bespoke.sph.domain.Filter(system.guid()));\r\n        },\r\n        removeFilter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.FilterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addSort = function () {\r\n            this.SortCollection.push(new bespoke.sph.domain.Sort(system.guid()));\r\n        },\r\n        removeSort = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.SortCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        allowQueryCache = ko.observable(ko.unwrap(model.CacheFilter));\r\n    return {\r\n        addRouteParameter: addRouteParameter,\r\n        removeRouteParameter: removeRouteParameter,\r\n        addSort: addSort,\r\n        removeSort: removeSort,\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter,\r\n        allowQueryCache: allowQueryCache\r\n    };\r\n};","bespoke.sph.domain.ReceiveActivityPartial = function () {\r\n    //\r\n    var system = require('durandal/system'),\r\n        removeCorrelationProperty = function (prop) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationPropertyCollection.remove(prop);\r\n            };\r\n        },\r\n        addCorrelationProperty = function () {\r\n            this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(system.guid()));\r\n        };\r\n\r\n    return {\r\n        removeCorrelationProperty: removeCorrelationProperty,\r\n        addCorrelationProperty: addCorrelationProperty\r\n\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\nbespoke.sph.domain.ReceivePortPartial = function (port) {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        isWizardOk = ko.computed(function () {\r\n            return ko.unwrap(port.Name) && ko.unwrap(port.Formatter) && ko.unwrap(port.Entity);\r\n        }),\r\n        removeReceiveLocation = function (child) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReceiveLocationCollection.remove(child);\r\n            };\r\n        },\r\n        addReceiveLocation = function () {\r\n            var br = new bespoke.sph.domain.FolderReceiveLocation({ WebId: system.guid() });\r\n            var self = this;\r\n\r\n            require([\"viewmodels/folder.receive.location.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                dialog.location(br);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.ReceiveLocationCollection.push(br);\r\n                        }\r\n                    });\r\n            });\r\n        },\r\n        editReceiveLocation = function (br) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/folder.receive.location.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(br));\r\n                    dialog.location(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.ReceiveLocationCollection.replace(br, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            console.warn(\"Not implemented\" + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    return {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        editReceiveLocation: editReceiveLocation,\r\n        removeReceiveLocation: removeReceiveLocation,\r\n        addReceiveLocation: addReceiveLocation,\r\n        isWizardOk: isWizardOk\r\n    };\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.DailySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Daily Schedule\"),\r\n        icon: ko.observable(\"fa fa-calendar\")\r\n    };\r\n};\r\nbespoke.sph.domain.WeeklySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Weekly Schedule\"),\r\n        icon: ko.observable(\"fa fa-th-list\")\r\n    };\r\n};\r\nbespoke.sph.domain.MonthlySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Monthly Schedule\"),\r\n        icon: ko.observable(\"fa fa-calendar-o\"),\r\n        dateOptions : _.range(1,31)\r\n    };\r\n};\r\n\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../prototypes/IntervalScheduleContainer.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.ReportDeliveryPartial = function () {\r\n\r\n    return new bespoke.sph.domain.IntervalScheduleContainer();\r\n\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.RouteParameterPartial = function (model) {\r\n\r\n    model.Type.subscribe(function(v) {\r\n        if (v === \"System.DateTime, mscorlib\") {\r\n            model.DefaultValue(null);\r\n        }\r\n    });\r\n    return {};\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n\r\nbespoke.sph.domain.RouteParameterFieldPartial = function (model) {\r\n    // TODO : In QueryEndpoint filter, if term were defined, then maybe we could suggest the name and type\r\n    model.IsOptional.subscribe(function(opt) {\r\n        if (!opt) {\r\n            model.DefaultValue(\"\");\r\n        }\r\n    });\r\n    return {};\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.RulePartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n        },\r\n        editField = function (field, accessor) {\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(accessor, clone, 'field.' + type.toLowerCase());\r\n\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n/// <reference path=\"../prototypes/IntervalScheduleContainer.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ScheduledTriggerActivityPartial = function (model) {\r\n\r\n    var b = new bespoke.sph.domain.IntervalScheduleContainer();\r\n    \r\n    return b;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.SetterActionPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        removeChildAction = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.SetterActionChildCollection.remove(child);\r\n            };\r\n        },\r\n        addChildAction = function() {\r\n            var child = new bespoke.sph.domain.SetterActionChild(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.SetterActionChildCollection.push(child);\r\n        };\r\n\r\n    var vm = {\r\n        addChildAction: addChildAction,\r\n        removeChildAction: removeChildAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"~/Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.SetterActionChildPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path, entity) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n                if (typeof dialog.entity === \"function\") {\r\n                    dialog.entity(entity);\r\n                    console.log(\"found the entity dialog :\" + dialog.entity.name);\r\n                }\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type, entity) {\r\n            var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase(), entity);\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field, clone, 'field.' + type.toLowerCase());\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.StartWorkflowActionPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        removeMapping = function (map) {\r\n            var self = this;\r\n            return function () {\r\n                self.WorkflowTriggerMapCollection.remove(map);\r\n            };\r\n        },\r\n        addMapping = function () {\r\n            var child = new bespoke.sph.domain.WorkflowTriggerMap(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.WorkflowTriggerMapCollection.push(child);\r\n        },\r\n        editMapping = function (child) {\r\n            this.WorkflowTriggerMapCollection.push(child);\r\n        };\r\n\r\n    var vm = {\r\n        editMapping: editMapping,\r\n        addMapping: addMapping,\r\n        removeMapping: removeMapping\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.TabControlPartial = function (tab) {\r\n    var system = require(\"durandal/system\"),\r\n        addItem = function () {\r\n            var item = new bespoke.sph.domain.TabPanel(system.guid());\r\n            tab.TabPanelCollection.push(item);\r\n\r\n        },\r\n        removeItem = function (item) {\r\n            return function () {\r\n                tab.TabPanelCollection.remove(item);\r\n            };\r\n        };\r\n    if (tab.TabPanelCollection().length === 0) {\r\n        tab.TabPanelCollection.push(new bespoke.sph.domain.TabPanel({ WebId: system.guid() , Header : \"Tab 1\"}));\r\n        tab.TabPanelCollection.push(new bespoke.sph.domain.TabPanel({ WebId: system.guid() , Header : \"Tab 2\"}));\r\n    }\r\n    return {\r\n        addItem: addItem,\r\n        removeItem: removeItem\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.TimePeriodPartial = function (period) {\r\n    var toString = function() {\r\n        return ko.unwrap(period.Count) + \" \" + ko.unwrap(period.Unit);\r\n    };\r\n    return {\r\n        toString: toString\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.TransformDefinitionPartial = function () {\r\n\r\n    var addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert(\"not implemented\" + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.TriggerPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeAction = function (action) {\r\n            var self = this;\r\n            return function () {\r\n                self.ActionCollection.remove(action);\r\n            };\r\n        },\r\n        addAction = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var t = type.toLowerCase().replace(\", \", \",\");\r\n                require([\"viewmodels/action.\" + t, \"durandal/app\"], function (dialog, app2) {\r\n                    if (typeof dialog.action !== \"function\") {\r\n                        console.error(\"The dialog for \" + t + \" do not implement action as observable\");\r\n                        return;\r\n                    }\r\n\r\n                    // initialize the action properties\r\n                    var clone = ko.mapping.fromJS(ko.toJS(dialog.action));\r\n                    if(typeof clone.Title === \"function\"){\r\n                        clone.Title(\"\");\r\n                    }\r\n                    for (var n in clone) {\r\n                        if (clone.hasOwnProperty(n)) {\r\n                            var obj = clone[n];\r\n                            if (n === \"$type\") {\r\n                                continue;\r\n                            }\r\n                            if (ko.isObservable(obj) && typeof obj.destroyAll !== \"function\") {\r\n                                obj(null);\r\n                            }\r\n                            if (ko.isObservable(obj) && typeof obj.destroyAll === \"function\") {\r\n                                obj([]);\r\n                            }\r\n                        }\r\n                    }\r\n                    dialog.action(clone);\r\n\r\n                    if (typeof dialog.trigger === \"function\") {\r\n                        dialog.trigger(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n\r\n                            var action = dialog.action();\r\n\r\n                            action.WebId(system.guid());\r\n                            action.IsActive(true);\r\n                            self.ActionCollection.push(action);\r\n                        }\r\n                    });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editAction = function (action) {\r\n            var self = this;\r\n            return function () {\r\n                var type = ko.unwrap(action.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(action));\r\n\r\n                require([\"viewmodels/action.\" + type.toLowerCase().replace(\", \", \",\"), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.action(clone);\r\n                    if (typeof dialog.trigger === \"function\") {\r\n                        dialog.trigger(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.ActionCollection.replace(action, clone);\r\n                        }\r\n                    });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n         addRule = function () {\r\n             var rule = new bespoke.sph.domain.Rule(system.guid());\r\n             rule.Left({ Name: ko.observable(\"+ Field\") });\r\n             rule.Right({ Name: ko.observable(\"+ Field\") });\r\n             this.RuleCollection.push(rule);\r\n         },\r\n        removeRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                self.RuleCollection.remove(rule);\r\n            };\r\n        },\r\n        \r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require(['viewmodels/assembly.dialog', 'durandal/app'], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert('not implemented' + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        addRule: addRule,\r\n        removeRule: removeRule,\r\n        removeAction: removeAction,\r\n        addAction: addAction,\r\n        editAction: editAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","bespoke.sph.domain.TryScopePartial = function () {\r\n\r\n\r\n    var\r\n        addCatchScope = function(wd) {\r\n            return function() {\r\n                var system = require('durandal/system');\r\n\r\n\r\n                var self2 = this;\r\n                var catchScope = new bespoke.sph.domain.CatchScope(system.guid());\r\n\r\n                require(['viewmodels/catch.scope.dialog', 'durandal/app'], function(dialog, app2) {\r\n                    dialog.catchScope(catchScope);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(wd());\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function(result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self2.CatchScopeCollection.push(catchScope);\r\n                            }\r\n\r\n                        });\r\n\r\n                });\r\n            };\r\n        },\r\n        editCatchScope = function (catchScope, wdOutside) {\r\n            var self = this, wd = wdOutside;\r\n            var clone = ko.mapping.fromJS(ko.mapping.toJS(catchScope));\r\n\r\n            return function () {\r\n                require(['viewmodels/catch.scope.dialog', 'durandal/app'], function (dialog, app2) {\r\n                    dialog.catchScope(clone);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(wd());\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in catchScope) {\r\n                                    if (typeof catchScope[g] === \"function\" && catchScope[g].name === \"observable\") {\r\n                                        catchScope[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        catchScope[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n            };\r\n\r\n        },\r\n        removeCatchScope = function (catchScope, wdOutside) {\r\n            var self = this, wd = wdOutside;\r\n            \r\n            return function () {\r\n                wd().ActivityCollection().forEach(function (act) {\r\n                    if (act.CatchScope() === catchScope.Id()) {\r\n                        act.CatchScope(\"\");\r\n                    }\r\n                });\r\n\r\n                self.CatchScopeCollection.remove(catchScope);\r\n            };\r\n            \r\n        };\r\n\r\n    return {\r\n        addCatchScope: addCatchScope,\r\n        editCatchScope: editCatchScope,\r\n        removeCatchScope: removeCatchScope\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.1.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.UpdateEntityActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addPropertyMapping = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var mapping = new bespoke.sph.domain[type + 'Mapping'](system.guid());\r\n                self.PropertyMappingCollection.push(mapping);\r\n            };\r\n        },\r\n        removePropertyMapping = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.PropertyMappingCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addPropertyMapping: addPropertyMapping,\r\n        removePropertyMapping: removePropertyMapping\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ValueObjectDefinitionPartial = function () {\r\n    var system = require(\"durandal/system\"),\r\n        app = require(\"durandal/app\"),\r\n        context = require(objectbuilders.datacontext),\r\n        addMember = function () {\r\n            this.MemberCollection.push(new bespoke.sph.domain.Member({\r\n                WebId: system.guid(),\r\n                Boost: 1\r\n            }));\r\n        },\r\n        removeMember = function (floor) {\r\n            var self = this;\r\n            return function () {\r\n                self.MemberCollection.remove(floor);\r\n            };\r\n        },\r\n        editMember = function (member) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/member.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                    dialog.member(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BlockCollection.replace(member, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        addBusinessRule = function () {\r\n            var br = new bespoke.sph.domain.BusinessRule({ WebId: system.guid() });\r\n            var self = this;\r\n\r\n            require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                dialog.rule(br);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.BusinessRuleCollection.push(br);\r\n                        }\r\n                    });\r\n            });\r\n\r\n        },\r\n        editBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = context.toObservable(ko.mapping.toJS(rule));\r\n                    dialog.rule(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BusinessRuleCollection.replace(rule, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        removeBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                self.BusinessRuleCollection.remove(rule);\r\n            };\r\n        },\r\n        editMemberMap = function (member) {\r\n            var building = this;\r\n            return function () {\r\n                console.log(\"show map \", building);\r\n                console.log(\" on member \", member);\r\n                require([\"viewmodels/member.map\", \"durandal/app\"], function (dialog, app) {\r\n                    dialog.init(building.BuildingId(), member.MemberPlanStoreId());\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (result === \"OK\") {\r\n                                member.MemberPlanStoreId(dialog.spatialStoreId());\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        };\r\n    return {\r\n        addMember: addMember,\r\n        editMember: editMember,\r\n        removeMember: removeMember,\r\n        addBusinessRule: addBusinessRule,\r\n        editBusinessRule: editBusinessRule,\r\n        removeBusinessRule: removeBusinessRule,\r\n        editMemberMap: editMemberMap\r\n    };\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.VariablePartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        hasError = ko.observable(),\r\n        errors = ko.observableArray();\r\n    return {\r\n        hasError: hasError,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.ViewColumnPartial = function (model) {\r\n\r\n\r\n    model.Path.subscribe(function (p) {\r\n        if (!ko.unwrap(model.Header)) {\r\n            model.Header(p.replace(\".\", \" \")\r\n                .replace(/([A-Z])/g, \" $1\").trim());\r\n        }\r\n    });\r\n    // Filter\r\n    var system = require(\"durandal/system\"),\r\n        addConditionalFormatting = function () {\r\n            this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(system.guid()));\r\n        },\r\n        removeConditionalFormatting = function (cf) {\r\n            var self = this;\r\n            return function () {\r\n                self.ConditionalFormattingCollection.remove(cf);\r\n            };\r\n\r\n        },\r\n        removeIconCssClass = function () {\r\n            this.IconCssClass(\"\");\r\n        },\r\n        removeIconStoreId = function () {\r\n            this.IconStoreId(\"\");\r\n        };\r\n    return {\r\n        addConditionalFormatting: addConditionalFormatting,\r\n        removeConditionalFormatting: removeConditionalFormatting,\r\n        removeIconStoreId: removeIconStoreId,\r\n        removeIconCssClass: removeIconCssClass\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.WorkflowDefinitionPartial = function (model) {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        isBusy = ko.observable(false),\r\n        context = require(objectbuilders.datacontext),\r\n        elementNameOptions = ko.observableArray(),\r\n        removeActivity = function (activity) {\r\n            var self = this;\r\n            return function () {\r\n                self.ActivityCollection.remove(activity);\r\n            };\r\n        },\r\n        setStartActivity = function (act) {\r\n            var self = this;\r\n            return function () {\r\n                _(self.ActivityCollection()).each(function (v) {\r\n                    v.IsInitiator(false);\r\n                });\r\n                act.IsInitiator(true);\r\n\r\n            };\r\n        },\r\n        addActivity = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var activity = new bespoke.sph.domain[type + \"Activity\"](system.guid());\r\n\r\n                require([\"viewmodels/activity.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.activity(activity);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.ActivityCollection.push(activity);\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editActivity = function (activity) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = context.toObservable(ko.mapping.toJS(activity)),\r\n                    type = ko.unwrap(activity.TypeName);\r\n\r\n                isBusy(true);\r\n                require([\"viewmodels/activity.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.activity(clone);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            $(\"div.modalBlockout,div.modalHost\").remove();\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in activity) {\r\n                                    if (activity.hasOwnProperty(g)) {\r\n                                        var observable = activity[g].name === \"observable\" || activity[g].name === \"d\";\r\n                                        if (typeof activity[g] === \"function\" && observable) {\r\n                                            activity[g](ko.unwrap(clone[g]));\r\n                                        } else {\r\n                                            activity[g] = clone[g];\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        addVariable = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var variable = new bespoke.sph.domain[type + \"Variable\"](system.guid());\r\n\r\n                require([\"viewmodels/variable.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.variable(variable);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.VariableDefinitionCollection.push(variable);\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editVariable = function (variable) {\r\n            var self = this;\r\n            return function () {\r\n                var variableType = ko.unwrap(variable.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(variable)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Variable,/,\r\n                    type = pattern.exec(variableType)[1];\r\n\r\n                require([\"viewmodels/variable.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.variable(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in variable) {\r\n                                    if (typeof variable[g] === \"function\" && variable[g].name === \"observable\") {\r\n                                        variable[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        variable[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeVariable = function (variable) {\r\n            var self = this;\r\n            return function () {\r\n                self.VariableDefinitionCollection.remove(variable);\r\n            };\r\n        },\r\n        addCorrelationType = function () {\r\n            var self = this;\r\n            var correlationType = new bespoke.sph.domain.CorrelationType(system.guid());\r\n\r\n            require([\"viewmodels/correlation.type.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.correlationType(correlationType);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.CorrelationTypeCollection.push(correlationType);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editCorrelationType = function (correlationType) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(correlationType));\r\n\r\n                require([\"viewmodels/correlation.type.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.correlationType(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in correlationType) {\r\n                                    if (typeof correlationType[g] === \"function\" && correlationType[g].name === \"observable\") {\r\n                                        correlationType[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        correlationType[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeCorrelationType = function (correlationType) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationTypeCollection.remove(correlationType);\r\n            };\r\n        },\r\n        addCorrelationSet = function () {\r\n            var self = this;\r\n            var correlationSet = new bespoke.sph.domain.CorrelationSet(system.guid());\r\n\r\n            require([\"viewmodels/correlation.set.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.correlationSet(correlationSet);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.CorrelationSetCollection.push(correlationSet);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editCorrelationSet = function (correlationSet) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(correlationSet));\r\n\r\n                require([\"viewmodels/correlation.set.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.correlationSet(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in correlationSet) {\r\n                                    if (typeof correlationSet[g] === \"function\" && correlationSet[g].name === \"observable\") {\r\n                                        correlationSet[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        correlationSet[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeCorrelationSet = function (correlationSet) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationSetCollection.remove(correlationSet);\r\n            };\r\n        },\r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert(\"not implemented\" + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        },\r\n        addTryScope = function () {\r\n            var self = this;\r\n            var tryScope = new bespoke.sph.domain.TryScope(system.guid());\r\n            require([\"viewmodels/try.scope.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.tryScope(tryScope);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.TryScopeCollection.push(tryScope);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editTryScope = function (tryScope) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(tryScope));\r\n\r\n                require([\"viewmodels/try.scope.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.tryScope(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in tryScope) {\r\n                                    if (typeof tryScope[g] === \"function\" && tryScope[g].name === \"observable\") {\r\n                                        tryScope[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        tryScope[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeTryScope = function (tryScope) {\r\n            var self = this;\r\n            return function () {\r\n                self.TryScopeCollection.remove(tryScope);\r\n            };\r\n        },\r\n        loadSchema = function (storeId) {\r\n            var id = storeId || this.SchemaStoreId();\r\n            $.get(\"/api/workflow-definitions/xsd-elements/\" + id)\r\n                .then(function (result) {\r\n                    elementNameOptions(result);\r\n                });\r\n        };\r\n\r\n    model.SchemaStoreId.subscribe(loadSchema);\r\n\r\n    var vm = {\r\n        isBusy: isBusy,\r\n        removeCorrelationType: removeCorrelationType,\r\n        addCorrelationType: addCorrelationType,\r\n        editCorrelationType: editCorrelationType,\r\n        removeCorrelationSet: removeCorrelationSet,\r\n        addCorrelationSet: addCorrelationSet,\r\n        editCorrelationSet: editCorrelationSet,\r\n        removeVariable: removeVariable,\r\n        addVariable: addVariable,\r\n        editVariable: editVariable,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        addActivity: addActivity,\r\n        editActivity: editActivity,\r\n        removeActivity: removeActivity,\r\n        loadSchema: loadSchema,\r\n        xsdElements: elementNameOptions,\r\n        setStartActivity: setStartActivity,\r\n        addTryScope: addTryScope,\r\n        editTryScope: editTryScope,\r\n        removeTryScope: removeTryScope\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.WorkflowDesignerPartial = function () {\r\n  \r\n    return {\r\n    };\r\n};","/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.WorkflowFormPartial = function () {\r\n\r\n    var editOperationSuccessCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationSuccessCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationSuccessCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n    editOperationFailureCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationFailureCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationFailureCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        canSetSuccessCallback = ko.computed(function () {\r\n\r\n        });\r\n    return {\r\n        editOperationSuccessCallback: editOperationSuccessCallback,\r\n        editOperationFailureCallback: editOperationFailureCallback,\r\n        canSetSuccessCallback: canSetSuccessCallback\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.WorkflowTriggerMapPartial = function () {\r\n    var self = this,\r\n        system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        };\r\n\r\n    self.addField = function(accessor, type) {\r\n        var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n    };\r\n\r\n    self.editField = function(field, accessor) {\r\n        return function() {\r\n            var fieldType = ko.unwrap(field.$type),\r\n                clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                type = pattern.exec(fieldType)[1];\r\n\r\n\r\n            showFieldDialog(accessor, clone, 'field.' + type.toLowerCase());\r\n\r\n        };\r\n    };\r\n\r\n    return self;\r\n};\r\n\r\nbespoke.sph.domain.WorkflowTriggerMapPartial.prototype = new bespoke.sph.domain.FieldContainer();\r\n"],"sourceRoot":"/source/"}