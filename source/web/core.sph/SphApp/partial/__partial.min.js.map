{"version":3,"sources":["Activity.js","AssemblyField.js","BarChartItem.js","BusinessRule.js","ButtonPartial.js","CatchScope.js","ChildEntityListView.js","ChildWorkflowActivity.js","ComboBox.js","ComplexMemberPartial.js","ConstantField.js","CorrelationType.js","CreateEntityActivity.js","DataGridItem.js","DecisionActivity.js","DelayActivity.js","DelimitedTextFormatter.js","EntityChart.js","EntityDefinition.js","EntityFormPartial.js","EntityLookupElement.js","EntityView.js","ExecutedActivity.js","Filter.js","FormDialogPartial.js","FormElement.js","HtmlElement.js","IFormTemplate.js","IntervalSchedule.js","LineChartItem.js","ListenActivity.js","ListView.js","ListViewColumn.js","MappingActivity.js","Member.js","MethodArg.js","NotificationActivity.js","OperationEndpointPartial.js","ParallelActivity.js","QueryEndpointPartial.js","ReceiveActivity.js","ReceivePortPartial.js","report.js","ReportDelivery.js","RouteParameter.js","RouteParameterFieldPartial.js","Rule.js","ScheduledTriggerActivity.js","SetterAction.js","SetterActionChild.js","SqlServerReceiveLocation.js","StartWorkflowAction.js","TabControlPartial.js","TimePeriodPartial.js","TransformDefinition.js","Trigger.js","TryScope.js","UpdateEntityActivity.js","ValueObjectDefinitionPartial.js","Variable.js","ViewColumn.js","WorkflowDefinition.js","WorkflowDesigner.js","WorkflowFormPartial.js","WorkflowTriggerMap.js"],"names":["bespoke","sph","domain","ActivityPartial","system","require","hasError","ko","observable","breakpoint","selected","hit","errors","observableArray","AssemblyFieldPartial","objectbuilders","addParameter","MethodArgCollection","push","MethodArg","guid","removeParameter","p","self","remove","BarChartItemPartial","addSeries","ChartSeriesCollection","ChartSeries","removeSeries","series","BusinessRulePartial","model","addFilter","br","Rule","Left","Name","Right","FilterCollection","removeFilter","addRule","RuleCollection","removeRule","ButtonPartial","canSetSuccessCallback","computed","editCommand","w","window","open","screen","height","width","wdw","init","code","unwrap","Command","saved","close","attachEvent","editOperationSuccessCallback","OperationSuccessCallback","editOperationFailureCallback","OperationFailureCallback","CatchScopePartial","ChildEntityListViewPartial","addSort","SortCollection","Sort","removeSort","obj","addViewColumn","ViewColumnCollection","ViewColumn","WebId","Header","editViewColumn","vc","clone","mapping","fromJS","toJS","dialog","app2","column","entity","Entity","showDialog","done","result","g","name","removeViewColumn","ChildWorkflowActivityPartial","addExecutedMapping","map","PropertyMapping","ExecutedPropertyMappingCollection","removeExecutedMapping","addMapping","PropertyMappingCollection","removeMapping","ComboBoxPartial","addItem","item","ComboBoxItem","ComboBoxItemCollection","removeItem","ComplexMemberPartial","subscribe","TypeName","$","get","ConstantFieldPartial","option","vm","Type","Value","v","CorrelationTypePartial","removeCorrelationProperty","prop","CorrelationPropertyCollection","addCorrelationProperty","CorrelationProperty","CreateEntityActivityPartial","addPropertyMapping","type","removePropertyMapping","DataGridItemPartial","addColumn","DataGridColumnCollection","DataGridColumn","removeColumn","addDataGridGroupDefinition","DataGridGroupDefinitionCollection","DataGridGroupDefinition","removeDataGridGroupDefinition","DecisionActivityPartial","addBranch","DecisionBranchCollection","DecisionBranch","removeBranch","branch","multipleEndPoints","DelayActivityPartial","isAsync","DelimitedTextFormatterPartial","selectedRow","FlatFileDetailTag","parentOptions","childNameChanged","indexOf","isWizardOk","SampleStoreId","Delimiter","selectRow","row","addDetailsRow","child","nameChangedSubscription","DetailRowCollection","removeDetailsRow","dispose","EntityChartPartial","context","datacontext","pin","IsDashboardItem","tcs","Deferred","post","toJSON","resolve","promise","unpin","ServiceContractPartial","publish","ed","EntityDefinitionPartial","app","save","then","success","addEntityOperation","EntityOperationCollection","EntityOperation","removeEntityOperation","operation","showMessage","dialogResult","call","addMember","MemberCollection","Member","Boost","editMember","member","BlockCollection","replace","removeMember","floor","addBusinessRule","BusinessRule","rule","BusinessRuleCollection","editBusinessRule","toObservable","removeBusinessRule","editMemberMap","building","console","log","BuildingId","MemberPlanStoreId","spatialStoreId","EntityFormPartial","EntityLookupElementPartial","editDisplayTemplate","DisplayTemplate","editColumns","selectedMembers","LookupColumnCollection","editFilter","selectedFilters","EntityViewPartial","addRouteParameter","RouteParameterCollection","RouteParameter","removeRouteParameter","addConditionalFormatting","ConditionalFormattingCollection","ConditionalFormatting","removeConditionalFormatting","cf","Filter","ExecutedActivityPartial","FilterPartial","showFieldDialog","accessor","field","path","addField","toLowerCase","editField","fieldType","$type","pattern","exec","Field","FormDialogPartial","buttons","DialogButtonCollection","_","each","canMoveDown","canMoveUp","first","last","move","array","from","to","target","increment","k","arrange","btn","step","index","temps","removeDialogButton","addDialogButton","DialogButton","moveDown","moveUp","DialogButtonPartial","FormElementPartial","HtmlElementPartial","editHtml","Text","FormTemplatePartial","IntervalSchedulePartial","icon","LineChartItemPartial","ListenActivityPartial","ListenBranch","ListenBranchCollection","ListViewPartial","ListViewColumnCollection","Input","isSelected","addListViewColumn","ListViewColumn","input","Path","Label","removeListViewColumn","ListViewColumnPartial","pattern1","input1","name1","icon1","err","c","MappingActivityPartial","addMappingSource","MappingSourceCollection","removeMappingSource","MemberPartial","AllowMultiple","DefaultValue","editPermission","FieldPermissionCollection","removeField","MethodArgPartial","NotificationActivityPartial","From","OperationEndpointPartial","editReferencedAssembly","dll","alert","removeReferencedAssembly","ReferencedAssemblyCollection","addReferencedAssembly","selectedAssemblies","removePatchPath","PatchPathCollection","addPatchPath","PatchSetter","IsRequired","addChildAction","SetterActionChild","SetterActionChildCollection","removeChildAction","ParallelActivityPartial","ParallelBranchCollection","ParallelBranch","QueryEndpointPartial","allowQueryCache","CacheFilter","ReceiveActivityPartial","ReceivePortPartial","port","ok","Formatter","TextFormatter","isComputed","warn","editHeaderFieldMapping","location","FieldMappingCollection","removeHeaderFieldMapping","addHeaderFieldMapping","HeaderFieldMapping","addUriFieldMapping","UriFieldMapping","DailySchedulePartial","WeeklySchedulePartial","MonthlySchedulePartial","dateOptions","range","ReportDeliveryPartial","IntervalScheduleContainer","RouteParameterPartial","RouteParameterFieldPartial","IsOptional","opt","RulePartial","binaryOperator","Operator","ScheduledTriggerActivityPartial","b","SetterActionPartial","SetterActionChildPartial","Adapters","Polling","Interval","IntervalPeriod","Query","StartDate","SqlServerReceiveLocation","ReceiveLocation","Id","Server","Database","Trusted","UseQueryNotification","UserId","Password","n","hasOwnProperty","isObservable","values","$values","isArray","ai","SqlServerReceiveLocationPartial","extend","FolderReceiveLocationPartial","StartWorkflowActionPartial","editMapping","WorkflowTriggerMapCollection","WorkflowTriggerMap","TabControlPartial","tab","TabPanelCollection","length","TabPanel","TimePeriodPartial","period","toString","Count","Unit","TransformDefinitionPartial","TriggerPartial","removeAction","action","ActionCollection","addAction","t","error","Title","destroyAll","trigger","IsActive","editAction","TryScopePartial","addCatchScope","wd","self2","catchScope","CatchScope","CatchScopeCollection","editCatchScope","wdOutside","removeCatchScope","ActivityCollection","forEach","act","UpdateEntityActivityPartial","ValueObjectDefinitionPartial","VariablePartial","ViewColumnPartial","trim","removeIconStoreId","IconStoreId","removeIconCssClass","IconCssClass","WorkflowDefinitionPartial","isBusy","elementNameOptions","loadSchema","storeId","id","SchemaStoreId","removeCorrelationType","correlationType","CorrelationTypeCollection","addCorrelationType","CorrelationType","editCorrelationType","removeCorrelationSet","correlationSet","CorrelationSetCollection","addCorrelationSet","CorrelationSet","editCorrelationSet","removeVariable","variable","VariableDefinitionCollection","addVariable","editVariable","variableType","addActivity","activity","editActivity","removeActivity","xsdElements","setStartActivity","IsInitiator","addTryScope","tryScope","TryScope","TryScopeCollection","editTryScope","removeTryScope","WorkflowDesignerPartial","WorkflowFormPartial","WorkflowTriggerMapPartial","prototype","FieldContainer"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,GAAIA,SAAUA,SAAW,EAAzB,CACAA,QAAQC,GAAR,CAAcD,QAAQC,GAAR,EAAe,GAC7BD,QAAQC,GAAR,CAAYC,MAAZ,CAAqBF,QAAQC,GAAR,CAAYC,MAAZ,EAAsB,GAG3CF,QAAQC,GAAR,CAAYC,MAAZ,CAAmBC,eAAnB,CAAqC,UAAY,CAE7C,GAAIC,GAASC,QAAQ,iBAAR,CAAb,CACIC,EAAWC,GAAGC,UAAH,EADf,CAEIC,EAAaF,GAAGC,UAAH,IAFjB,CAGIE,EAAWH,GAAGC,UAAH,IAHf,CAIIG,EAAMJ,GAAGC,UAAH,IAJV,CAKII,EAASL,GAAGM,eAAH,EALb,CAMA,MAAO,CACHJ,WAAYA,CADT,CAEHE,IAAKA,CAFF,CAGHD,SAAUA,CAHP,CAIHJ,SAAUA,CAJP,CAKHM,OAAQA,CALL,CAOV;ACrBDZ,QAAQC,GAAR,CAAYC,MAAZ,CAAmBY,oBAAnB,CAA0C,UAAY,CAClD,GAAIV,GAASC,QAAQU,eAAeX,MAAvB,CAAb,CAUA,MAAO,CACHY,aAVe,UAAY,CACvB,KAAKC,mBAAL,CAAyBC,IAAzB,CAA8B,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBiB,SAAvB,CAAiCf,EAAOgB,IAAP,EAAjC,CAA9B,CACH,CAOE,CAEHC,gBARkB,SAASC,CAAT,CAAY,CAC1B,GAAIC,GAAO,IAAX,CACA,MAAO,WAAW,CACdA,EAAKN,mBAAL,CAAyBO,MAAzB,CAAgCF,CAAhC,CACH,CACJ,CACE,CAIV;ACdDtB,QAAQC,GAAR,CAAYC,MAAZ,CAAmBuB,mBAAnB,CAAyC,UAAY,CACjD,GAAIrB,GAASC,QAAQ,iBAAR,CAAb,CAWA,MAAO,CACHqB,UAXY,UAAW,CACnB,KAAKC,qBAAL,CAA2BT,IAA3B,CAAgC,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmB0B,WAAvB,CAAmCxB,EAAOgB,IAAP,EAAnC,CAAhC,CACH,CAQE,CAEHS,aATe,SAAUC,CAAV,CAAkB,CAC7B,GAAIP,GAAO,IAAX,CACA,MAAO,WAAW,CACdA,EAAKI,qBAAL,CAA2BH,MAA3B,CAAkCM,CAAlC,CACH,CAEJ,CACE,CAIV;ACZD9B,QAAQC,GAAR,CAAYC,MAAZ,CAAmB6B,mBAAnB,CAAyC,SAAUC,CAAV,CAAiB,CAEtD,GAAI5B,GAASC,QAAQ,iBAAR,CAAb,CAoCA,MAAO,CACH4B,UApCY,UAAY,CACpB,GAAIV,GAAO,IAAX,CACIW,EAAK,GAAIlC,SAAQC,GAAR,CAAYC,MAAZ,CAAmBiC,IAAvB,CAA4B/B,EAAOgB,IAAP,EAA5B,CADT,CAGAc,EAAGE,IAAH,CAAQ,CAAEC,KAAM9B,GAAGC,UAAH,CAAc,SAAd,CAAR,CAAR,CAJoB,CAKpB0B,EAAGI,KAAH,CAAS,CAAED,KAAM9B,GAAGC,UAAH,CAAc,SAAd,CAAR,CAAT,CALoB,CAOpBe,EAAKgB,gBAAL,CAAsBrB,IAAtB,CAA2BgB,CAA3B,CAEH,CA0BE,CAEHM,aA3Be,SAAUN,CAAV,CAAc,CACzB,GAAIX,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKgB,gBAAL,CAAsBf,MAAtB,CAA6BU,CAA7B,CACH,CACJ,CAoBE,CAGHO,QAtBU,UAAY,CAClB,GAAIlB,GAAO,IAAX,CACIW,EAAK,GAAIlC,SAAQC,GAAR,CAAYC,MAAZ,CAAmBiC,IAAvB,CAA4B/B,EAAOgB,IAAP,EAA5B,CADT,CAGAc,EAAGE,IAAH,CAAQ,CAAEC,KAAM9B,GAAGC,UAAH,CAAc,SAAd,CAAR,CAAR,CAJkB,CAKlB0B,EAAGI,KAAH,CAAS,CAAED,KAAM9B,GAAGC,UAAH,CAAc,SAAd,CAAR,CAAT,CALkB,CAOlBe,EAAKmB,cAAL,CAAoBxB,IAApB,CAAyBgB,CAAzB,CAEH,CAUE,CAIHS,WAba,SAAUT,CAAV,CAAc,CACvB,GAAIX,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKmB,cAAL,CAAoBlB,MAApB,CAA2BU,CAA3B,CACH,CACJ,CAIE,CAMV;AC9CDlC,QAAQC,GAAR,CAAYC,MAAZ,CAAmB0C,aAAnB,CAAmC,UAAY,CAE3C,GAkEIC,GAAwBtC,GAAGuC,QAAH,CAAY,UAAY,CAE/C,CAFuB,CAlE5B,CAqEA,MAAO,CACHC,YAtEc,UAAY,CAC1B,GAAIxB,GAAO,IAAX,CACIyB,EAAIC,OAAOC,IAAP,CAAY,iCAAZ,CAA+C,QAA/C,CAAyD,UAAYC,OAAOC,MAAnB,CAA4B,SAA5B,CAAwCD,OAAOE,KAA/C,CAAuD,sCAAhH,CADR,CAEIC,EAAMN,EAAEC,MAAF,EAAYD,CAFtB,CAGIO,EAAO,UAAY,CACfD,EAAIE,IAAJ,CAAWjD,GAAGkD,MAAH,CAAUlC,EAAKmC,OAAf,CADI,CAEVV,EAAEQ,IAFQ,GAGXR,EAAEQ,IAAF,CAAS,yBAHE,EAKfF,EAAIK,KAAJ,CAAY,SAAUH,CAAV,CAAgBI,CAAhB,CAAuB,CAC/BrC,EAAKmC,OAAL,CAAaF,CAAb,CAD+B,CAE3BI,CAF2B,EAG3BZ,EAAEY,KAAF,EAEP,CACJ,CAdL,CAeIN,EAAIO,WAhBkB,CAiBtBP,EAAIO,WAAJ,CAAgB,QAAhB,CAA0BN,CAA1B,CAjBsB,CAmBtBA,GAEP,CAgDM,CAEHO,6BAjD+B,UAAY,CACvC,GAAIvC,GAAO,IAAX,CACIyB,EAAIC,OAAOC,IAAP,CAAY,iCAAZ,CAA+C,QAA/C,CAAyD,UAAYC,OAAOC,MAAnB,CAA4B,SAA5B,CAAwCD,OAAOE,KAA/C,CAAuD,sCAAhH,CADR,CAEIC,EAAMN,EAAEC,MAAF,EAAYD,CAFtB,CAGIO,EAAO,UAAY,CACfD,EAAIE,IAAJ,CAAWjD,GAAGkD,MAAH,CAAUlC,EAAKwC,wBAAf,CADI,CAEVf,EAAEQ,IAFQ,GAGXR,EAAEQ,IAAF,CAAS,yBAHE,EAKfF,EAAIK,KAAJ,CAAY,SAAUH,CAAV,CAAgBI,CAAhB,CAAuB,CAC/BrC,EAAKwC,wBAAL,CAA8BP,CAA9B,CAD+B,CAE3BI,CAF2B,EAG3BZ,EAAEY,KAAF,EAEP,CACJ,CAdL,CAeIN,EAAIO,WAhB+B,CAiBnCP,EAAIO,WAAJ,CAAgB,QAAhB,CAA0BN,CAA1B,CAjBmC,CAmBnCA,GAEP,CA0BE,CAGHS,6BA5B2B,UAAY,CACvC,GAAIzC,GAAO,IAAX,CACIyB,EAAIC,OAAOC,IAAP,CAAY,iCAAZ,CAA+C,QAA/C,CAAyD,UAAYC,OAAOC,MAAnB,CAA4B,SAA5B,CAAwCD,OAAOE,KAA/C,CAAuD,sCAAhH,CADR,CAEIC,EAAMN,EAAEC,MAAF,EAAYD,CAFtB,CAGIO,EAAO,UAAY,CACfD,EAAIE,IAAJ,CAAWjD,GAAGkD,MAAH,CAAUlC,EAAK0C,wBAAf,CADI,CAEVjB,EAAEQ,IAFQ,GAGXR,EAAEQ,IAAF,CAAS,yBAHE,EAKfF,EAAIK,KAAJ,CAAY,SAAUH,CAAV,CAAgBI,CAAhB,CAAuB,CAC/BrC,EAAK0C,wBAAL,CAA8BT,CAA9B,CAD+B,CAE3BI,CAF2B,EAG3BZ,EAAEY,KAAF,EAEP,CACJ,CAdL,CAeIN,EAAIO,WAhB+B,CAiBnCP,EAAIO,WAAJ,CAAgB,QAAhB,CAA0BN,CAA1B,CAjBmC,CAmBnCA,GAEP,CAIM,CAIHV,sBAAuBA,CAJpB,CAMV;ACvFD7C,QAAQC,GAAR,CAAYC,MAAZ,CAAmBgE,iBAAnB,CAAuC,UAAY,CAGlD;ACQDlE,QAAQC,GAAR,CAAYC,MAAZ,CAAmBiE,0BAAnB,CAAgD,SAAUnC,CAAV,CAAiB,CAC7D;AACA,GAAI5B,GAASC,QAAQ,iBAAR,CAAb,CA+CA,MAAO,CACH+D,QArCU,UAAY,CAClB,KAAKC,cAAL,CAAoBnD,IAApB,CAAyB,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBoE,IAAvB,CAA4BlE,EAAOgB,IAAP,EAA5B,CAAzB,CACH,CAkCE,CAEHmD,WAnCa,SAAUC,CAAV,CAAe,CACxB,GAAIjD,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8C,cAAL,CAAoB7C,MAApB,CAA2BgD,CAA3B,CACH,CAEJ,CA2BE,CAGHC,cAjDgB,UAAY,CACxB,KAAKC,oBAAL,CAA0BxD,IAA1B,CAA+B,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmByE,UAAvB,CAAkC,CAAEC,MAAOxE,EAAOgB,IAAP,EAAT,CAAuByD,OAAQ,cAA/B,CAAlC,CAA/B,CACH,CA4CE,CAIHC,eA9Ba,SAAUC,CAAV,CAAc,CAC3B,MAAO,WAAY,CACf,GAAIC,GAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgBJ,CAAhB,CAAlB,CAAZ,CAEA1E,yDAA2D,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CAC/ED,EAAOE,MAAP,CAAcN,CAAd,CAD+E,CAE/EI,EAAOG,MAAP,CAAcvD,EAAMwD,MAAN,EAAd,CAF+E,CAI/EH,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACpB,GAAKA,CAAL,EACe,IAAX,IADJ,CAEI,IAAK,GAAIC,EAAT,GAAcb,EAAd,CACyB,UAAjB,QAAOA,GAAGa,CAAH,CAAP,EAA8C,YAAf,KAAGA,CAAH,EAAMC,IAD7C,CAEQd,EAAGa,CAAH,EAAMrF,GAAGkD,MAAH,CAAUuB,EAAMY,CAAN,CAAV,CAAN,CAFR,CAIQb,EAAGa,CAAH,EAAQZ,EAAMY,CAAN,CAIvB,CAZL,CAcH,CAlBD,CAoBH,CACJ,CACM,CAKHE,iBAhDmB,SAAUtB,CAAV,CAAe,CAC9B,GAAIjD,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKmD,oBAAL,CAA0BlD,MAA1B,CAAiCgD,CAAjC,CACH,CAEJ,CAqCE,CAOV;ACtDDxE,QAAQC,GAAR,CAAYC,MAAZ,CAAmB6F,4BAAnB,CAAkD,UAAY,CAE1D,GAAI3F,GAASC,QAAQ,iBAAR,CAAb,CA8BA,MARS,CACL2F,mBANqB,UAAY,CAC7B,GAAIC,GAAM,GAAIjG,SAAQC,GAAR,CAAYC,MAAZ,CAAmBgG,eAAvB,CAAuC9F,EAAOgB,IAAP,EAAvC,CAAV,CACA,KAAK+E,iCAAL,CAAuCjF,IAAvC,CAA4C+E,CAA5C,CACH,CAEI,CAELG,sBAbwB,SAAUH,CAAV,CAAe,CACnC,GAAI1E,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK4E,iCAAL,CAAuC3E,MAAvC,CAA8CyE,CAA9C,CACH,CACJ,CAMI,CAGLI,WAlBa,UAAY,CACrB,GAAIJ,GAAM,GAAIjG,SAAQC,GAAR,CAAYC,MAAZ,CAAmBgG,eAAvB,CAAuC9F,EAAOgB,IAAP,EAAvC,CAAV,CACA,KAAKkF,yBAAL,CAA+BpF,IAA/B,CAAoC+E,CAApC,CACH,CAYI,CAILM,cAzBgB,SAAUN,CAAV,CAAe,CAC3B,GAAI1E,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK+E,yBAAL,CAA+B9E,MAA/B,CAAsCyE,CAAtC,CACH,CACJ,CAgBI,CASZ;ACtCDjG,QAAQC,GAAR,CAAYC,MAAZ,CAAmBsG,eAAnB,CAAqC,UAAY,CAC7C,GAAIpG,GAASC,QAAQ,iBAAR,CAAb,CAaA,MAAO,CACHoG,QAbU,UAAY,CAClB,GAAIlF,GAAO,IAAX,CACImF,EAAO,GAAI1G,SAAQC,GAAR,CAAYC,MAAZ,CAAmByG,YAAvB,CAAoCvG,EAAOgB,IAAP,EAApC,CADX,CAEAG,EAAKqF,sBAAL,CAA4B1F,IAA5B,CAAiCwF,CAAjC,CAEH,CAOE,CAEHG,WARa,SAAUH,CAAV,CAAgB,CACzB,GAAInF,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKqF,sBAAL,CAA4BpF,MAA5B,CAAmCkF,CAAnC,CACH,CACJ,CACE,CAIV;AClBD1G,QAAQC,GAAR,CAAYC,MAAZ,CAAmB4G,oBAAnB,CAA0C,SAAS9E,CAAT,CAAgB,CACtDA,EAAMK,IAAN,CAAW0E,SAAX,CAAqB,SAASlB,CAAT,CAAe,CAC3BtF,GAAGkD,MAAH,CAAUzB,EAAMgF,QAAhB,CAD2B,EAE5BC,EAAEC,GAAF,CAAM,+BAAiCrB,CAAvC,EAA6CH,IAA7C,CAAkD1D,EAAMgF,QAAxD,CAEP,CAJD,CAMH;ACXDhH,QAAQC,GAAR,CAAYC,MAAZ,CAAmBiH,oBAAnB,CAA0C,SAAUnF,CAAV,CAAiBoF,CAAjB,CAAyB,CAE/D,GAAIC,GAAK,CACLC,KAAM/G,GAAGC,UAAH,EADD,CAEL+G,MAAOhH,GAAGC,UAAH,CAAc4G,EAAOG,KAArB,CAFF,CAAT,CAUA,MALAF,GAAGE,KAAH,CAASR,SAAT,CAAmB,SAASS,CAAT,CAAY,CACtBjH,GAAGkD,MAAH,CAAUzB,EAAMK,IAAhB,CADsB,EAEvBL,EAAMK,IAAN,CAAWmF,CAAX,CAEP,CAJD,CAKA,CAAOH,CACV;ACTDrH,QAAQC,GAAR,CAAYC,MAAZ,CAAmBuH,sBAAnB,CAA4C,UAAY,CAEpD,GAAIrH,GAASC,QAAQ,iBAAR,CAAb,CAUA,MAAO,CACHqH,0BAV4B,SAAUC,CAAV,CAAgB,CACxC,GAAIpG,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKqG,6BAAL,CAAmCpG,MAAnC,CAA0CmG,CAA1C,CACH,CACJ,CAIE,CAEHE,uBALyB,UAAY,CACjC,KAAKD,6BAAL,CAAmC1G,IAAnC,CAAwC,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmB4H,mBAAvB,CAA2C1H,EAAOgB,IAAP,EAA3C,CAAxC,CACH,CACE,CAKV;ACfDpB,QAAQC,GAAR,CAAYC,MAAZ,CAAmB6H,2BAAnB,CAAiD,UAAY,CACzD,GAAI3H,GAASC,QAAQ,iBAAR,CAAb,CAcA,MAAO,CACH2H,mBAdqB,SAAUC,CAAV,CAAgB,CACjC,GAAI1G,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAI0D,GAAU,GAAIjF,SAAQC,GAAR,CAAYC,MAAZ,CAAmB+H,EAAO,SAA1B,CAAJ,CAAyC7H,EAAOgB,IAAP,EAAzC,CAAd,CACAG,EAAK+E,yBAAL,CAA+BpF,IAA/B,CAAoC+D,CAApC,CACH,CACJ,CAOE,CAEHiD,sBARwB,SAAUjD,CAAV,CAAmB,CACvC,GAAI1D,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK+E,yBAAL,CAA+B9E,MAA/B,CAAsCyD,CAAtC,CACH,CACJ,CACE,CAIV;ACpBDjF,QAAQC,GAAR,CAAYC,MAAZ,CAAmBiI,mBAAnB,CAAyC,UAAY,CAEjD;AACA,GAAI/H,GAASC,QAAQ,iBAAR,CAAb,CAsBA,MAAO,CACH+H,UAZY,UAAY,CACpB,GAAI7G,GAAO,IAAX,CACAA,EAAK8G,wBAAL,CAA8BnH,IAA9B,CAAmC,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBoI,cAAvB,CAAsClI,EAAOgB,IAAP,EAAtC,CAAnC,CACH,CAQE,CAEHmH,aATe,SAAUjD,CAAV,CAAkB,CAC7B,GAAI/D,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8G,wBAAL,CAA8B7G,MAA9B,CAAqC8D,CAArC,CACH,CACJ,CAEE,CAGHkD,2BAxB6B,UAAY,CACrC,KAAKC,iCAAL,CAAuCvH,IAAvC,CAA4C,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBwI,uBAAvB,CAA+CtI,EAAOgB,IAAP,EAA/C,CAA5C,CACH,CAmBE,CAIHuH,8BAtBgC,SAAUnE,CAAV,CAAe,CAC3C,GAAIjD,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKkH,iCAAL,CAAuCjH,MAAvC,CAA8CgD,CAA9C,CACH,CAEJ,CAYE,CAMV;AC7BDxE,QAAQC,GAAR,CAAYC,MAAZ,CAAmB0I,uBAAnB,CAA6C,UAAY,CACrD,GAAIxI,GAASC,QAAQ,iBAAR,CAAb,CAaA,MAAO,CACHwI,UAbY,UAAW,CACnB,KAAKC,wBAAL,CAA8B5H,IAA9B,CAAmC,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmB6I,cAAvB,CAAsC3I,EAAOgB,IAAP,EAAtC,CAAnC,CACH,CAUE,CAEH4H,aAXe,SAASC,CAAT,CAAiB,CAC5B,GAAI1H,GAAO,IAAX,CACA,MAAO,WAAW,CACdA,EAAKuH,wBAAL,CAA8BtH,MAA9B,CAAqCyH,CAArC,CACH,CACJ,CAIE,CAGHC,kBANoB,UAAW,CAC3B,MAAO,MAAKJ,wBAAL,EACV,CACE,CAKV;ACvBD9I,QAAQC,GAAR,CAAYC,MAAZ,CAAmBiJ,oBAAnB,CAA0C,UAAY,CAElD,MAAO,CACHC,UADG,CAGV;ACADpJ,QAAQC,GAAR,CAAYC,MAAZ,CAAmBmJ,6BAAnB,CAAmD,SAAUrH,CAAV,CAAiB,CAEhE,KAAM5B,GAASC,QAAQ,iBAAR,CAAf,CACIiJ,EAAc/I,GAAGC,UAAH,CAAc,GAAIR,SAAQC,GAAR,CAAYC,MAAZ,CAAmBqJ,iBAArC,CADlB,CAEIC,EAAgBjJ,GAAGM,eAAH,aAFpB,CAGI4I,EAAmB,SAAU5D,CAAV,CAAgB,CAC3BA,CAD2B,EAES,CAAhC,KAAgB6D,OAAhB,CAAwB7D,CAAxB,CAFuB,EAGvB2D,EAActI,IAAd,CAAmB2E,CAAnB,CAGX,CATL,CA4BI8D,EAAapJ,GAAGuC,QAAH,CAAY,UAAW,CAChC,MAAOvC,IAAGkD,MAAH,CAAUzB,EAAM4H,aAAhB,GAAkCrJ,GAAGkD,MAAH,CAAUzB,EAAM6H,SAAhB,CAC5C,CAFY,CA5BjB,CA0CA,MAVW,CACPF,WAAaA,CADN,CAEPL,YAAaA,CAFN,CAGPQ,UAVY,SAASC,CAAT,CAAc,CACtBT,EAAYS,CAAZ,CACH,CAKM,CAIPC,cAjBgB,UAAY,CACxB,KAAMC,GAAQ,GAAIjK,SAAQC,GAAR,CAAYC,MAAZ,CAAmBqJ,iBAAvB,CAAyCnJ,EAAOgB,IAAP,EAAzC,CAAd,CACA6I,EAAMC,uBAAN,CAAgCD,EAAM5H,IAAN,CAAW0E,SAAX,CAAqB0C,CAArB,CAFR,CAGxB,KAAKU,mBAAL,CAAyBjJ,IAAzB,CAA8B+I,CAA9B,CAHwB,CAIxBX,EAAYW,CAAZ,CACH,CAQM,CAKPG,iBA3BmB,SAAUH,CAAV,CAAiB,CAChC,GAAI1I,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK4I,mBAAL,CAAyB3I,MAAzB,CAAgCyI,CAAhC,CADe,CAEXA,EAAMC,uBAFK,EAGXD,EAAMC,uBAAN,CAA8BG,OAA9B,EAEP,CACJ,CAcM,CAMPb,cAAeA,CANR,CAWd;ACxDDxJ,QAAQC,GAAR,CAAYC,MAAZ,CAAmBoK,kBAAnB,CAAwC,SAAUtI,CAAV,CAAiB,CACrD,GAAIuI,GAAUlK,QAAQU,eAAeyJ,WAAvB,CAAd,CA6BA,MAAO,CACHC,IA7BM,UAAY,CACuB,UAAjC,QAAOzI,GAAM0I,eADH,CAEV1I,EAAM0I,eAAN,IAFU,CAIV1I,EAAM0I,eAAN,CAAwBnK,GAAGC,UAAH,IAJd,CAOd,GAAImK,GAAM,GAAI1D,GAAE2D,QAAhB,CAKA,MAHAL,GAAQM,IAAR,CAAatK,GAAG0E,OAAH,CAAW6F,MAAX,CAAkB9I,CAAlB,CAAb,CAAuC,uBAAvC,EACK0D,IADL,CACUiF,EAAII,OADd,CAGA,CAAOJ,EAAIK,OAAJ,EACV,CAeE,CAEHC,MAhBQ,UAAW,CACsB,UAAjC,QAAOjJ,GAAM0I,eADF,CAEX1I,EAAM0I,eAAN,IAFW,CAIX1I,EAAM0I,eAAN,CAAwBnK,GAAGC,UAAH,IAJb,CAOf,GAAImK,GAAM,GAAI1D,GAAE2D,QAAhB,CAKA,MAHAL,GAAQM,IAAR,CAAatK,GAAG0E,OAAH,CAAW6F,MAAX,CAAkB9I,CAAlB,CAAb,CAAuC,uBAAvC,EACK0D,IADL,CACUiF,EAAII,OADd,CAGA,CAAOJ,EAAIK,OAAJ,EACV,CACE,CAIV;AC3BDhL,QAAQC,GAAR,CAAYC,MAAZ,CAAmBgL,sBAAnB,CAA4C,UAAY,CACpD,GAAIX,GAAUlK,QAAQU,eAAeyJ,WAAvB,CAAd,CAKA,MAAO,CACHW,QALU,SAAUC,CAAV,CAAc,CACpB,MAAOb,GAAQM,IAAR,CAAatK,GAAGuK,MAAH,CAAUM,CAAV,CAAb,CAA4B,6CAA5B,CACV,CAEE,CAGV,EACDpL,QAAQC,GAAR,CAAYC,MAAZ,CAAmBmL,uBAAnB,CAA6C,UAAY,CACrD,GAAIjL,GAASC,QAAQ,iBAAR,CAAb,CACIiL,EAAMjL,QAAQ,cAAR,CADV,CAEIkK,EAAUlK,QAAQU,eAAeyJ,WAAvB,CAFd,CAmBOe,EAAO,UAAY,CAClB,GAAIhK,GAAO,IAAX,CACAgJ,EAAQM,IAAR,CAAatK,GAAGuK,MAAH,CAAUvJ,CAAV,CAAb,CAA8B,oBAA9B,EACCiK,IADD,CACM,SAAU7F,CAAV,CAAkB,CAChBA,EAAO8F,OAEd,CAJD,CAKH,CA1BL,CAkHA,MAAO,CACHC,mBApGqB,UAAY,CAC7B,KAAKC,yBAAL,CAA+BzK,IAA/B,CAAoC,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmB0L,eAAvB,CAAuC,CACvEhH,MAAOxE,EAAOgB,IAAP,EADgE,CAAvC,CAApC,CAGH,CA+FE,CAEHyK,sBAzFwB,SAAUC,CAAV,CAAqB,CACzC,GAAIvK,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIoJ,GAAM,GAAI1D,GAAE2D,QAAhB,CASA,MARAU,GAAIS,WAAJ,CAAgB,6IAAhB,CAA+J,oBAA/J,eACKrG,IADL,CACU,SAAUsG,CAAV,CAAwB,CACL,KAAjB,IADsB,GAEtBzK,EAAKoK,yBAAL,CAA+BnK,MAA/B,CAAsCsK,CAAtC,CAFsB,CAGtBP,EAAKU,IAAL,CAAU1K,CAAV,CAHsB,CAK7B,CANL,CAQA,CAAOoJ,EAAIK,OAAJ,EACV,CACJ,CAyEE,CAGHkB,UAlHY,UAAY,CACpB,KAAKC,gBAAL,CAAsBjL,IAAtB,CAA2B,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBkM,MAAvB,CAA8B,CACrDxH,MAAOxE,EAAOgB,IAAP,EAD8C,CAErDiL,MAAO,CAF8C,CAA9B,CAA3B,CAIH,CA0GE,CAIHC,WA5Ea,SAAUC,CAAV,CAAkB,CAC3B,GAAIhL,GAAO,IAAX,CACA,MAAO,WAAY,CACflB,oDAAsD,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CACzE,GAAItG,GAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgBoH,CAAhB,CAAlB,CAAZ,CACAnH,EAAOmH,MAAP,CAAcvH,CAAd,CAFyE,CAGzEsG,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKiL,eAAL,CAAqBC,OAArB,CAA6BF,CAA7B,CAAqCvH,CAArC,CAEP,CANL,CAOH,CAVD,CAWH,CACJ,CAyDE,CAKH0H,aA9Ge,SAAUC,CAAV,CAAiB,CAC5B,GAAIpL,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK4K,gBAAL,CAAsB3K,MAAtB,CAA6BmL,CAA7B,CACH,CACJ,CAoGE,CAMHC,gBA9DkB,UAAY,CAC1B,GAAI1K,GAAK,GAAIlC,SAAQC,GAAR,CAAYC,MAAZ,CAAmB2M,YAAvB,CAAoC,CAAEjI,MAAOxE,EAAOgB,IAAP,EAAT,CAApC,CAAT,CACIG,EAAO,IADX,CAGAlB,2DAA6D,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CAChFlG,EAAO0H,IAAP,CAAY5K,CAAZ,CADgF,CAEhFoJ,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKwL,sBAAL,CAA4B7L,IAA5B,CAAiCgB,CAAjC,CAEP,CANL,CAOH,CATD,CAWH,CAyCE,CAOH8K,iBA/CmB,SAAUF,CAAV,CAAgB,CAC/B,GAAIvL,GAAO,IAAX,CACA,MAAO,WAAY,CACflB,2DAA6D,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CAChF,GAAItG,GAAQuF,EAAQ0C,YAAR,CAAqB1M,GAAG0E,OAAH,CAAWE,IAAX,CAAgB2H,CAAhB,CAArB,CAAZ,CACA1H,EAAO0H,IAAP,CAAY9H,CAAZ,CAFgF,CAGhFsG,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEN,IAAV,GAFgB,EAGhBpE,EAAKwL,sBAAL,CAA4BN,OAA5B,CAAoCK,CAApC,CAA0C9H,CAA1C,CAEP,CANL,CAOH,CAVD,CAWH,CACJ,CAyBE,CAQHkI,mBAhCqB,SAAUJ,CAAV,CAAgB,CACjC,GAAIvL,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKwL,sBAAL,CAA4BvL,MAA5B,CAAmCsL,CAAnC,CACH,CACJ,CAmBE,CASHK,cA3BgB,SAAUZ,CAAV,CAAkB,CAC9B,GAAIa,GAAW,IAAf,CACA,MAAO,WAAY,CACfC,QAAQC,GAAR,CAAY,WAAZ,CAAyBF,CAAzB,CADe,CAEfC,QAAQC,GAAR,CAAY,aAAZ,CAA2Bf,CAA3B,CAFe,CAGflM,iDAAmD,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CACtElG,EAAO7B,IAAP,CAAY6J,EAASG,UAAT,EAAZ,CAAmChB,EAAOiB,iBAAP,EAAnC,CADsE,CAEtElC,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACN,IAAV,GADgB,EAEhB4G,EAAOiB,iBAAP,CAAyBpI,EAAOqI,cAAP,EAAzB,CAEP,CALL,CAOH,CATD,CAWH,CACJ,CACE,CAWV;ACrIDzN,QAAQC,GAAR,CAAYC,MAAZ,CAAmBwN,iBAAnB,CAAuC,UAAY,CAE/C,GA4CI7K,GAAwBtC,GAAGuC,QAAH,CAAY,UAAY,CAE/C,CAFuB,CA5C5B,CA+CA,MAAO,CACHgB,6BAhD+B,UAAY,CAC3C,GAAIvC,GAAO,IAAX,CACIyB,EAAIC,OAAOC,IAAP,CAAY,iCAAZ,CAA+C,QAA/C,CAAyD,UAAYC,OAAOC,MAAnB,CAA4B,SAA5B,CAAwCD,OAAOE,KAA/C,CAAuD,sCAAhH,CADR,CAEIC,EAAMN,EAAEC,MAAF,EAAYD,CAFtB,CAGIO,EAAO,UAAY,CACfD,EAAIE,IAAJ,CAAWjD,GAAGkD,MAAH,CAAUlC,EAAKwC,wBAAf,CADI,CAEVf,EAAEQ,IAFQ,GAGXR,EAAEQ,IAAF,CAAS,yBAHE,EAKfF,EAAIK,KAAJ,CAAY,SAAUH,CAAV,CAAgBI,CAAhB,CAAuB,CAC/BrC,EAAKwC,wBAAL,CAA8BP,CAA9B,CAD+B,CAE3BI,CAF2B,EAG3BZ,EAAEY,KAAF,EAEP,CACJ,CAdL,CAeIN,EAAIO,WAhBmC,CAiBvCP,EAAIO,WAAJ,CAAgB,QAAhB,CAA0BN,CAA1B,CAjBuC,CAmBvCA,GAEP,CA0BM,CAEHS,6BA3B2B,UAAY,CACvC,GAAIzC,GAAO,IAAX,CACIyB,EAAIC,OAAOC,IAAP,CAAY,iCAAZ,CAA+C,QAA/C,CAAyD,UAAYC,OAAOC,MAAnB,CAA4B,SAA5B,CAAwCD,OAAOE,KAA/C,CAAuD,sCAAhH,CADR,CAEIC,EAAMN,EAAEC,MAAF,EAAYD,CAFtB,CAGIO,EAAO,UAAY,CACfD,EAAIE,IAAJ,CAAWjD,GAAGkD,MAAH,CAAUlC,EAAK0C,wBAAf,CADI,CAEVjB,EAAEQ,IAFQ,GAGXR,EAAEQ,IAAF,CAAS,yBAHE,EAKfF,EAAIK,KAAJ,CAAY,SAAUH,CAAV,CAAgBI,CAAhB,CAAuB,CAC/BrC,EAAK0C,wBAAL,CAA8BT,CAA9B,CAD+B,CAE3BI,CAF2B,EAG3BZ,EAAEY,KAAF,EAEP,CACJ,CAdL,CAeIN,EAAIO,WAhB+B,CAiBnCP,EAAIO,WAAJ,CAAgB,QAAhB,CAA0BN,CAA1B,CAjBmC,CAmBnCA,GAEP,CAIM,CAGHV,sBAAuBA,CAHpB,CAKV;ACvDD7C,QAAQC,GAAR,CAAYC,MAAZ,CAAmByN,0BAAnB,CAAgD,UAAY,CAwDxD,MAAO,CACHC,oBAvDsB,UAAY,CAClC,GAAIrM,GAAO,IAAX,CACIyB,EAAIC,OAAOC,IAAP,CAAY,iCAAZ,CAA+C,QAA/C,CAAyD,UAAYC,OAAOC,MAAnB,CAA4B,SAA5B,CAAwCD,OAAOE,KAA/C,CAAuD,sCAAhH,CADR,CAEIC,EAAMN,EAAEC,MAAF,EAAYD,CAFtB,CAGIO,EAAO,UAAY,CACfD,EAAIE,IAAJ,CAAWjD,GAAGkD,MAAH,CAAUlC,EAAKmC,OAAf,CADI,CAEVV,EAAEQ,IAFQ,GAGXR,EAAEQ,IAAF,CAAS,yBAHE,EAKfF,EAAIK,KAAJ,CAAY,SAAUH,CAAV,CAAgBI,CAAhB,CAAuB,CAC/BrC,EAAKsM,eAAL,CAAqBrK,CAArB,CAD+B,CAE3BI,CAF2B,EAG3BZ,EAAEY,KAAF,EAEP,CACJ,CAdL,CAeIN,EAAIO,WAhB0B,CAiB9BP,EAAIO,WAAJ,CAAgB,QAAhB,CAA0BN,CAA1B,CAjB8B,CAmB9BA,GAEP,CAiCM,CAEHuK,YAlCU,UAAY,CAClB,GAAIvM,GAAO,IAAX,CACAlB,8DAAgE,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CACpFD,EAAOG,MAAP,CAAchE,EAAKiE,MAAL,EAAd,CADoF,CAEpFJ,EAAO2I,eAAP,CAAuBxM,EAAKyM,sBAAL,EAAvB,CAFoF,CAGpF3I,EAAKI,UAAL,CAAgBL,CAAhB,CAAuB7D,EAAKiE,MAAL,EAAvB,EACKE,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKyM,sBAAL,CAA4B5I,EAAO2I,eAAP,EAA5B,CAEP,CANL,CAQH,CAXD,CAYH,CAkBE,CAGHE,WApBa,UAAW,CAEpB,GAAI1M,GAAO,IAAX,CACAlB,kEAAoE,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CACxFD,EAAOG,MAAP,CAAchE,EAAKiE,MAAL,EAAd,CADwF,CAExFJ,EAAO8I,eAAP,CAAuB3M,EAAKgB,gBAAL,EAAvB,CAFwF,CAGxF8C,EAAKI,UAAL,CAAgBL,CAAhB,CAAwB7D,EAAKiE,MAAL,EAAxB,EACKE,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKgB,gBAAL,CAAsB6C,EAAO8I,eAAP,EAAtB,CAEP,CANL,CAQH,CAXD,CAYH,CAEE,CAKV;AC/DDlO,QAAQC,GAAR,CAAYC,MAAZ,CAAmBiO,iBAAnB,CAAuC,UAAY,CAE/C;AACA,GAAI/N,GAASC,QAAQ,iBAAR,CAAb,CAmDA,MAAO,CACH+N,kBAzCoB,UAAY,CAC5B,KAAKC,wBAAL,CAA8BnN,IAA9B,CAAmC,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBoO,cAAvB,CAAsClO,EAAOgB,IAAP,EAAtC,CAAnC,CACH,CAsCE,CAEHmN,qBAvCuB,SAAU/J,CAAV,CAAe,CAClC,GAAIjD,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8M,wBAAL,CAA8B7M,MAA9B,CAAqCgD,CAArC,CACH,CAEJ,CA+BE,CAGHgK,yBArD2B,UAAY,CACnC,KAAKC,+BAAL,CAAqCvN,IAArC,CAA0C,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBwO,qBAAvB,CAA6CtO,EAAOgB,IAAP,EAA7C,CAA1C,CACH,CAgDE,CAIHuN,4BAnD8B,SAAUC,CAAV,CAAc,CACxC,GAAIrN,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKkN,+BAAL,CAAqCjN,MAArC,CAA4CoN,CAA5C,CACH,CAEJ,CAyCE,CAKHnK,cAnCgB,UAAY,CACxB,KAAKC,oBAAL,CAA0BxD,IAA1B,CAA+B,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmByE,UAAvB,CAAkCvE,EAAOgB,IAAP,EAAlC,CAA/B,CACH,CA4BE,CAMH0E,iBAjCmB,SAAUtB,CAAV,CAAe,CAC9B,GAAIjD,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKmD,oBAAL,CAA0BlD,MAA1B,CAAiCgD,CAAjC,CACH,CAEJ,CAqBE,CAOHJ,QAjBU,UAAY,CAClB,KAAKC,cAAL,CAAoBnD,IAApB,CAAyB,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBoE,IAAvB,CAA4BlE,EAAOgB,IAAP,EAA5B,CAAzB,CACH,CAQE,CAQHmD,WAfa,SAAUC,CAAV,CAAe,CACxB,GAAIjD,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8C,cAAL,CAAoB7C,MAApB,CAA2BgD,CAA3B,CACH,CAEJ,CACE,CASHvC,UA7BY,UAAY,CACpB,KAAKM,gBAAL,CAAsBrB,IAAtB,CAA2B,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmB2O,MAAvB,CAA8BzO,EAAOgB,IAAP,EAA9B,CAA3B,CACH,CAkBE,CAUHoB,aA3Be,SAAUgC,CAAV,CAAe,CAC1B,GAAIjD,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKgB,gBAAL,CAAsBf,MAAtB,CAA6BgD,CAA7B,CACH,CAEJ,CAWE,CAYV;AChEDxE,QAAQC,GAAR,CAAYC,MAAZ,CAAmB4O,uBAAnB,CAA6C,UAAY,CAErD,GAAI1O,GAASC,QAAQ,iBAAR,CAAb,CACII,EAAaF,GAAGC,UAAH,IADjB,CAEIG,EAAMJ,GAAGC,UAAH,IAFV,CAGII,EAASL,GAAGM,eAAH,EAHb,CAIA,MAAO,CACHJ,WAAYA,CADT,CAEHE,IAAKA,CAFF,CAGHC,OAAQA,CAHL,CAKV;ACRDZ,QAAQC,GAAR,CAAYC,MAAZ,CAAmB6O,aAAnB,CAAmC,UAAY,CAE3C,GAAI3O,GAASC,QAAQ,iBAAR,CAAb,CACM2O,EAAkB,SAAUC,CAAV,CAAoBC,CAApB,CAA2BC,CAA3B,CAAiC,CAC/C9O,QAAQ,CAAC,cAAgB8O,CAAjB,CAAuB,cAAvB,CAAR,CAAgD,SAAU/J,CAAV,CAAkBC,CAAlB,CAAwB,CACpED,EAAO8J,KAAP,CAAaA,CAAb,CADoE,CAEvC,UAAzB,QAAO9J,GAAOG,MAFkD,EAIhE8H,QAAQC,GAAR,CAAY,4BAA8BlI,EAAOG,MAAP,CAAcM,IAAxD,CAJgE,CAMpER,EAAKI,UAAL,CAAgBL,CAAhB,EACCM,IADD,CACM,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBsJ,EAASC,CAAT,CAEP,CAND,CAQH,CAdD,CAeH,CAjBP,CAyCA,MANS,CACLE,SAlBa,SAAUH,CAAV,CAAoBhH,CAApB,CAA0B,CACjC,GAAIiH,GAAQ,GAAIlP,SAAQC,GAAR,CAAYC,MAAZ,CAAmB+H,EAAO,OAA1B,CAAJ,CAAuC7H,EAAOgB,IAAP,EAAvC,CAAZ,CACA4N,EAAgBC,CAAhB,CAA0BC,CAA1B,CAAiC,SAAWjH,EAAKoH,WAAL,EAA5C,CACH,CAcE,CAELC,UAfc,SAAUJ,CAAV,CAAiB,CACzB,GAAI3N,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIgO,GAAYhP,GAAGkD,MAAH,CAAUyL,EAAMM,KAAhB,CAAhB,CACIxK,EAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgB+J,CAAhB,CAAlB,CADZ,CAEIO,EAAU,mCAFd,CAGIxH,EAAOwH,EAAQC,IAAR,CAAaH,CAAb,EAAwB,CAAxB,CAHX,CAMAP,EAAgBzN,EAAKoO,KAArB,CAA4B3K,CAA5B,CAAmC,SAAWiD,EAAKoH,WAAL,EAA9C,CACH,CACJ,CAEE,CAOZ;AC9CDrP,QAAQC,GAAR,CAAYC,MAAZ,CAAmB0P,iBAAnB,CAAuC,SAAU5N,CAAV,CAAiB,CAEpD,GAAI5B,GAASC,QAAQ,iBAAR,CAAb,CACIkD,EAAO,UAAW,CAEd,GAAIsM,GAAUtP,GAAGkD,MAAH,CAAUzB,EAAM8N,sBAAhB,CAAd,CACAC,EAAEF,CAAF,EAAWG,IAAX,CAAgB,SAAUxI,CAAV,CAAa,CACzBA,EAAEyI,WAAF,IADyB,CAEzBzI,EAAE0I,SAAF,IACH,CAHD,CAHc,CAOd,GAAIC,GAAQJ,EAAEF,CAAF,EAAWM,KAAX,EAAZ,CACIC,EAAOL,EAAEF,CAAF,EAAWO,IAAX,EADX,CAEID,CATU,EAUVA,EAAMD,SAAN,IAVU,CAYVE,CAZU,EAaVA,EAAKH,WAAL,IAEP,CAhBL,CAyBII,EAAO,SAAUC,CAAV,CAAiBC,CAAjB,CAAuBC,CAAvB,CAA2B,CAC9B,GAAIA,IAAOD,CAAX,EAEA,GAAIE,GAASH,EAAMC,CAAN,CAAb,CACIG,EAAYF,EAAKD,CAAL,CAAY,CAAC,CAAb,CAAiB,CADjC,CAGA,IAAK,GAAII,GAAIJ,CAAb,CAAmBI,IAAMH,CAAzB,CAA6BG,GAAKD,CAAlC,CACIJ,EAAMK,CAAN,EAAWL,EAAMK,EAAID,CAAV,CAAX,CAEJJ,EAAME,CAAN,EAAYC,CARZ,CASH,CAnCL,CAoCIG,EAAU,SAAUC,CAAV,CAAeC,CAAf,CAAqB,CAE3B,GAAIC,GAAQ/O,EAAM8N,sBAAN,GAA+BpG,OAA/B,CAAuCmH,CAAvC,CAAZ,CACIG,EAAQzQ,GAAGkD,MAAH,CAAUzB,EAAM8N,sBAAhB,CADZ,CAEAO,EAAKW,CAAL,CAAYD,CAAZ,CAAmBA,EAAQD,CAA3B,CAJ2B,CAM3Bf,EAAEiB,CAAF,EAAShB,IAAT,CAAc,SAAUxI,CAAV,CAAa,CACvBA,EAAEyI,WAAF,IADuB,CAEvBzI,EAAE0I,SAAF,IACH,CAHD,CAN2B,CAU3BH,EAAEiB,CAAF,EAASb,KAAT,GAAiBD,SAAjB,IAV2B,CAW3BH,EAAEiB,CAAF,EAASZ,IAAT,GAAgBH,WAAhB,IAX2B,CAY3BjO,EAAM8N,sBAAN,CAA6BkB,CAA7B,CACH,CAjDL,CA2DA,MAFAzN,IAEA,CAAO,CACH0N,mBAvCqB,SAAUJ,CAAV,CAAe,CAChC7O,EAAM8N,sBAAN,CAA6BtO,MAA7B,CAAoCqP,CAApC,CADgC,CAEhCtN,GACH,CAmCE,CAEH2N,gBA5CkB,UAAY,CAC1BlP,EAAM8N,sBAAN,CAA6B5O,IAA7B,CAAkC,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBiR,YAAvB,CAAoC,CAAEvM,MAAOxE,EAAOgB,IAAP,EAAT,CAAwB6O,cAAxB,CAApC,CAAlC,CAD0B,CAE1B1M,GACH,CAuCE,CAGH6N,SAZW,SAAUP,CAAV,CAAe,CACtBD,EAAQC,CAAR,CAAa,CAAb,CACH,CAOE,CAIHQ,OAVS,SAAUR,CAAV,CAAe,CACpBD,EAAQC,CAAR,CAAa,CAAC,CAAd,CACH,CAIE,CAMV,EACD7Q,QAAQC,GAAR,CAAYC,MAAZ,CAAmBoR,mBAAnB,CAAyC,SAAUtP,CAAV,CAAiB,CAEtD,GAAIkO,GAAY3P,GAAGC,UAAH,IAAhB,CACIyP,EAAc1P,GAAGC,UAAH,IADlB,CAGA,MAAO,CACHyP,YAAaA,CADV,CAEHC,UAAWA,CAFR,CAIV;AClFDlQ,QAAQC,GAAR,CAAYC,MAAZ,CAAmBqR,kBAAnB,CAAwC,UAAY,CAEhD,MAAO,EAEV;ACDDvR,QAAQC,GAAR,CAAYC,MAAZ,CAAmBsR,kBAAnB,CAAwC,UAAY,CAoBhD,MAAO,CACHC,SAnBW,UAAY,CACvB,GAAIlQ,GAAO,IAAX,CACIyB,EAAIC,OAAOC,IAAP,CAAY,2BAAZ,CAAyC,QAAzC,CAAmD,UAAYC,OAAOC,MAAnB,CAA4B,SAA5B,CAAwCD,OAAOE,KAA/C,CAAuD,sCAA1G,CADR,CAEIE,EAAO,UAAY,CACfP,EAAEQ,IAAF,CAASjD,GAAGkD,MAAH,CAAUlC,EAAKmQ,IAAf,CADM,CAEf1O,EAAEW,KAAF,CAAU,SAAUH,CAAV,CAAgBI,CAAhB,CAAuB,CAC7BrC,EAAKmQ,IAAL,CAAUlO,CAAV,CAD6B,CAEzBI,CAFyB,EAGzBZ,EAAEY,KAAF,EAEP,CACJ,CAVL,CAWIZ,EAAEa,WAZiB,CAanBb,EAAEa,WAAF,CAAc,QAAd,CAAwBN,CAAxB,CAbmB,CAenBA,GAEP,CACM,CAGV;AC/BDvD,QAAQC,GAAR,CAAYC,MAAZ,CAAmByR,mBAAnB,CAAyC,UAAY,CAIjD,MAFS,EAGZ;ACCD3R,QAAQC,GAAR,CAAYC,MAAZ,CAAmB0R,uBAAnB,CAA6C,UAAY,CACrD,GAAIC,GAAOtR,GAAGC,UAAH,EAAX,CACIqF,EAAOtF,GAAGC,UAAH,EADX,CAEA,MAAO,CACHqR,KAAMA,CADH,CAEHhM,KAAOA,CAFJ,CAIV;ACPD7F,QAAQC,GAAR,CAAYC,MAAZ,CAAmB4R,oBAAnB,CAA0C,UAAY,CAClD,GAAI1R,GAASC,QAAQ,iBAAR,CAAb,CAWA,MAAO,CACHqB,UAXY,UAAW,CACnB,KAAKC,qBAAL,CAA2BT,IAA3B,CAAgC,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmB0B,WAAvB,CAAmCxB,EAAOgB,IAAP,EAAnC,CAAhC,CACH,CAQE,CAEHS,aATe,SAAUC,CAAV,CAAkB,CAC7B,GAAIP,GAAO,IAAX,CACA,MAAO,WAAW,CACdA,EAAKI,qBAAL,CAA2BH,MAA3B,CAAkCM,CAAlC,CACH,CAEJ,CACE,CAIV;ACfD9B,QAAQC,GAAR,CAAYC,MAAZ,CAAmB6R,qBAAnB,CAA2C,UAAY,CACnD,GAAI3R,GAASC,QAAQ,iBAAR,CAAb,CAgBA,MAAO,CACHwI,UAhBY,UAAY,CACpB,GAAItH,GAAO,IAAX,CACI0H,EAAS,GAAIjJ,SAAQC,GAAR,CAAYC,MAAZ,CAAmB8R,YAAvB,CAAoC5R,EAAOgB,IAAP,EAApC,CADb,CAEAG,EAAK0Q,sBAAL,CAA4B/Q,IAA5B,CAAiC+H,CAAjC,CAEH,CAUE,CAEHD,aAXe,SAAUC,CAAV,CAAkB,CAC7B,GAAI1H,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK0Q,sBAAL,CAA4BzQ,MAA5B,CAAmCyH,CAAnC,CACH,CACJ,CAIE,CAGHC,kBANoB,UAAY,CAC5B,MAAO,MAAK+I,sBAAL,EACV,CACE,CAKV;ACrBDjS,QAAQC,GAAR,CAAYC,MAAZ,CAAmBgS,eAAnB,CAAqC,SAAUlQ,CAAV,CAAiB,CAElD;AACA,GAAI5B,GAASC,QAAQ,iBAAR,CAAb,CAgCA,MAJA0P,GAAE/N,EAAMmQ,wBAAN,EAAF,EAAoCnC,IAApC,CAAyC,SAASxI,CAAT,CAAY,CACjDA,EAAE4K,KAAF,GAAUC,UAAV,CAAuB9R,GAAGC,UAAH,IAC1B,CAFD,CAIA,CAAO,CACH8R,kBAhCoB,SAAUrK,CAAV,CAAgB,CAChC,GAAI1G,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAI+D,GAAS,GAAItF,SAAQC,GAAR,CAAYC,MAAZ,CAAmBqS,cAAvB,CAAsCnS,EAAOgB,IAAP,EAAtC,CAAb,CACIoR,EAAQxS,QAAQC,GAAR,CAAYC,MAAZ,CAAmB+H,CAAnB,EAAyB7H,EAAOgB,IAAP,EAAzB,CADZ,CAIAkE,EAAOmN,IAAP,CAAY1L,SAAZ,CAAsB,SAASS,CAAT,CAAY,CAC9BgL,EAAMC,IAAN,CAAWjL,CAAX,CACH,CAFD,CALe,CAQflC,EAAOoN,KAAP,CAAa3L,SAAb,CAAuB,SAASS,CAAT,CAAY,CAC/BgL,EAAME,KAAN,CAAYlL,CAAZ,CACH,CAFD,CARe,CAYflC,EAAO8M,KAAP,CAAaI,CAAb,CAZe,CAafA,EAAMH,UAAN,CAAmB9R,GAAGC,UAAH,IAbJ,CAcfe,EAAK4Q,wBAAL,CAA8BjR,IAA9B,CAAmCoE,CAAnC,CACH,CACJ,CAaE,CAEHqN,qBAduB,SAAUnO,CAAV,CAAe,CAClC,GAAIjD,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK4Q,wBAAL,CAA8B3Q,MAA9B,CAAqCgD,CAArC,CACH,CAEJ,CAME,CAIV;ACzCDxE,QAAQC,GAAR,CAAYC,MAAZ,CAAmB0S,qBAAnB,CAA2C,SAAU5Q,CAAV,CAAiB,CAExD,GAAI,CAEA,GAAI6Q,GAAW,8BAAf,CACIC,EAASvS,GAAGkD,MAAH,CAAUzB,EAAMoQ,KAAhB,CADb,CAEIW,EAAQ,IAFZ,CAGIC,EAAQ,IAHZ,CAIIF,CANJ,GAOIC,EAAQF,EAASnD,IAAT,CAAcnP,GAAGkD,MAAH,CAAUqP,EAAOtD,KAAjB,CAAd,EAAuC,CAAvC,CAAR,CACAwD,EAAQ,wBAA0BD,CAA1B,CAAkC,MAR9C,CAYH,CAAC,MAAOE,CAAP,CAAY,CAEb,CACDD,EAAQA,GAAS,kCAjBuC,CAkBxD,GAAInB,GAAOtR,GAAGC,UAAH,CAAcwS,CAAd,CAAX,CAYA,MAXAhR,GAAMoQ,KAAN,CAAYrL,SAAZ,CAAsB,SAAUmM,CAAV,CAAa,CAC/B,GAAKA,EAAE1D,KAAP,EAIA,GAAIC,GAAU,8BAAd,CACI5J,EAAO4J,EAAQC,IAAR,CAAanP,GAAGkD,MAAH,CAAUyP,EAAE1D,KAAZ,CAAb,EAAiC,CAAjC,CADX,CAEAqC,EAAK,wBAA0BhM,CAA1B,CAAiC,MAAtC,CANA,CASH,CAVD,CAWA,CAAO,CACHgM,KAAMA,CADH,CAGV;AC9BD7R,QAAQC,GAAR,CAAYC,MAAZ,CAAmBiT,sBAAnB,CAA4C,UAAY,CACpD,GAAI/S,GAASC,QAAQ,iBAAR,CAAb,CAaA,MAAO,CACH+S,iBAbmB,UAAY,CAC3B,GAAI7R,GAAO,IAAX,CACI0D,EAAU,GAAIjF,SAAQC,GAAR,CAAYC,MAAZ,cAAJ,CAAwCE,EAAOgB,IAAP,EAAxC,CADd,CAEAG,EAAK8R,uBAAL,CAA6BnS,IAA7B,CAAkC+D,CAAlC,CAEH,CAOE,CAEHqO,oBARsB,SAAUrO,CAAV,CAAmB,CACrC,GAAI1D,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8R,uBAAL,CAA6B7R,MAA7B,CAAoCyD,CAApC,CACH,CACJ,CACE,CAIV;AClBDjF,QAAQC,GAAR,CAAYC,MAAZ,CAAmBqT,aAAnB,CAAmC,SAAUvR,CAAV,CAAiB,CAChD,GAAI5B,GAASC,QAAQ,iBAAR,CAAb,CA2DI2O,EAAkB,SAAUC,CAAV,CAAoBC,CAApB,CAA2BC,CAA3B,CAAiC,CAC/C9O,QAAQ,CAAC,cAAgB8O,CAAjB,CAAuB,cAAvB,CAAR,CAAgD,SAAU/J,CAAV,CAAkBC,CAAlB,CAAwB,CACpED,EAAO8J,KAAP,CAAaA,CAAb,CADoE,CAIpE7J,EAAKI,UAAL,CAAgBL,CAAhB,EACCM,IADD,CACM,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBsJ,EAASC,CAAT,CAEP,CAND,CAQH,CAZD,CAaH,CAzEL,CA2GA,MARAlN,GAAMwR,aAAN,CAAoBzM,SAApB,CAA8B,SAASuJ,CAAT,CAAgB,CACtCA,CADsC,CAEtCtO,EAAMyR,YAAN,CAAmB,IAAnB,CAFsC,CAItCzR,EAAMyR,YAAN,CAAmB,CAAEpR,KAAM9B,GAAGC,UAAH,CAAc,kBAAd,CAAR,CAAnB,CAEP,CAND,CAQA,CAAO,CACHkT,eAxFiB,SAAUnH,CAAV,CAAkB,CAC/B,GAAIhL,GAAO,IAAX,CACAlB,8DAAgE,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CACnF,GAAItG,GAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgBoH,CAAhB,CAAlB,CAAZ,CACAnH,EAAOmH,MAAP,CAAcvH,CAAd,CAFmF,CAGnFsG,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKoS,yBAAL,CAA+B3O,EAAM2O,yBAAN,EAA/B,CAEP,CANL,CAOH,CAVD,CAYH,CAyEE,CAEHzH,UA5GY,UAAY,CACpB,KAAKC,gBAAL,CAAsBjL,IAAtB,CAA2B,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBkM,MAAvB,CAA8BhM,EAAOgB,IAAP,EAA9B,CAA3B,CACH,CAwGE,CAGHkL,WA1Ga,SAAUC,CAAV,CAAkB,CAC3B,GAAIhL,GAAO,IAAX,CACA,MAAO,WAAY,CACflB,oDAAsD,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CACzE,GAAItG,GAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgBoH,CAAhB,CAAlB,CAAZ,CACAnH,EAAOmH,MAAP,CAAcvH,CAAd,CAFyE,CAGzEsG,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKiL,eAAL,CAAqBC,OAArB,CAA6BF,CAA7B,CAAqCvH,CAArC,CAEP,CANL,CAOH,CAVD,CAWH,CACJ,CAwFE,CAIHmI,cAtEgB,SAAUZ,CAAV,CAAkB,CAC9B,GAAIa,GAAW,IAAf,CACA,MAAO,WAAY,CACfC,QAAQC,GAAR,CAAY,WAAZ,CAAyBF,CAAzB,CADe,CAEfC,QAAQC,GAAR,CAAY,aAAZ,CAA2Bf,CAA3B,CAFe,CAGflM,iDAAmD,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CACtElG,EAAO7B,IAAP,CAAY6J,EAASG,UAAT,EAAZ,CAAmChB,EAAOiB,iBAAP,EAAnC,CADsE,CAEtElC,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACL,IAAX,IADgB,EAEhB4G,EAAOiB,iBAAP,CAAyBpI,EAAOqI,cAAP,EAAzB,CAEP,CALL,CAOH,CATD,CAWH,CACJ,CAiDE,CAKHf,aA7Ee,SAAUC,CAAV,CAAiB,CAC5B,GAAIpL,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK4K,gBAAL,CAAsB3K,MAAtB,CAA6BmL,CAA7B,CACH,CACJ,CAmEE,CAMHyC,SAvCW,SAAUH,CAAV,CAAoBhH,CAApB,CAA0B,CACjC,GAAIiH,GAAQ,GAAIlP,SAAQC,GAAR,CAAYC,MAAZ,CAAmB+H,EAAO,OAA1B,CAAJ,CAAuC7H,EAAOgB,IAAP,EAAvC,CAAZ,CACA4N,EAAgBC,CAAhB,CAA0BC,CAA1B,CAAiC,SAAWjH,EAAKoH,WAAL,EAA5C,CACH,CA8BE,CAOHuE,YAxBc,UAAY,CACtB,GAAIrS,GAAO,IAAX,CACI0N,EAAW1N,EAAKoO,KAAL,EAAcpO,EAAKkS,YADlC,CAEA,MAAO,WAAY,CACfxE,EAAS,CAAE5M,KAAM9B,GAAGC,UAAH,CAAc,kBAAd,CAAR,CAAT,CACH,CACJ,CAWE,CAQH8O,UArCY,SAAUJ,CAAV,CAAiB,CACzB,GAAI3N,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIgO,GAAYhP,GAAGkD,MAAH,CAAUyL,EAAMM,KAAhB,CAAhB,CACIxK,EAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgB+J,CAAhB,CAAlB,CADZ,CAEIO,EAAU,mCAFd,CAGIxH,EAAOwH,EAAQC,IAAR,CAAaH,CAAb,EAAwB,CAAxB,CAHX,CAMAP,EAAgBzN,EAAKoO,KAAL,EAAcpO,EAAKkS,YAAnC,CAAiDzO,CAAjD,CAAwD,SAAWiD,EAAKoH,WAAL,EAAnE,CACH,CACJ,CAkBE,CAUV;ACpHDrP,QAAQC,GAAR,CAAYC,MAAZ,CAAmB2T,gBAAnB,CAAsC,UAAY,CAE9C,GAAIzT,GAASC,QAAQ,iBAAR,CAAb,CACI2O,EAAkB,SAAUC,CAAV,CAAoBC,CAApB,CAA2BC,CAA3B,CAAiC,CAC/C9O,QAAQ,CAAC,cAAgB8O,CAAjB,CAAuB,cAAvB,CAAR,CAAgD,SAAU/J,CAAV,CAAkBC,CAAlB,CAAwB,CACpED,EAAO8J,KAAP,CAAaA,CAAb,CADoE,CAIpE7J,EAAKI,UAAL,CAAgBL,CAAhB,EACCM,IADD,CACM,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBsJ,EAASC,CAAT,CAEP,CAND,CAQH,CAZD,CAaH,CAfL,CAuCA,MANS,CACLE,SAlBW,SAAUH,CAAV,CAAoBhH,CAApB,CAA0B,CACjC,GAAIiH,GAAQ,GAAIlP,SAAQC,GAAR,CAAYC,MAAZ,CAAmB+H,EAAO,OAA1B,CAAJ,CAAuC7H,EAAOgB,IAAP,EAAvC,CAAZ,CACA4N,EAAgBC,CAAhB,CAA0BC,CAA1B,CAAiC,SAAWjH,EAAKoH,WAAL,EAA5C,CACH,CAcI,CAELC,UAfY,SAAUJ,CAAV,CAAiB,CACzB,GAAI3N,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIgO,GAAYhP,GAAGkD,MAAH,CAAUyL,EAAMM,KAAhB,CAAhB,CACIxK,EAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgB+J,CAAhB,CAAlB,CADZ,CAEIO,EAAU,mCAFd,CAGIxH,EAAOwH,EAAQC,IAAR,CAAaH,CAAb,EAAwB,CAAxB,CAHX,CAMAP,EAAgBzN,EAAKoO,KAArB,CAA4B3K,CAA5B,CAAmC,SAAWiD,EAAKoH,WAAL,EAA9C,CACH,CACJ,CAEI,CAOZ;AC/CDrP,QAAQC,GAAR,CAAYC,MAAZ,CAAmB4T,2BAAnB,CAAiD,SAAS9R,CAAT,CAAgB,CAK7D,MAHKA,GAAM+R,IAAN,EAGL,EAFI/R,EAAM+R,IAAN,CAAW,eAAX,CAEJ,CAAO,EAEV;ACDD/T,QAAQC,GAAR,CAAYC,MAAZ,CAAmB8T,wBAAnB,CAA8C,UAAY,CAEtD,KAAM5T,GAASC,QAAQ,iBAAR,CAAf,CA4DA,MAXS,CACL4T,uBAXyB,SAAUC,CAAV,CAAe,CACpCC,MAAM,kBAAoBD,CAA1B,CACH,CAQI,CAELE,yBAT2B,SAAUF,CAAV,CAAe,CACtC,GAAI3S,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8S,4BAAL,CAAkC7S,MAAlC,CAAyC0S,CAAzC,CACH,CACJ,CAEI,CAGLI,sBA9BwB,UAAY,CAChC,GAAI/S,GAAO,IAAX,CACAlB,sDAAwD,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CAC5EA,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBoK,EAAE3K,EAAOmP,kBAAP,EAAF,EAA+BvE,IAA/B,CAAoC,SAAUxI,CAAV,CAAa,CAC7CjG,EAAK8S,4BAAL,CAAkCnT,IAAlC,CAAuCsG,CAAvC,CACH,CAFD,CAIP,CARL,CAUH,CAXD,CAcH,CAWI,CAILgN,gBAzCkB,SAAUvK,CAAV,CAAiB,CAC/B,GAAI1I,GAAO,IAAX,CACA,MAAO,WAAW,CACdA,EAAKkT,mBAAL,CAAyBjT,MAAzB,CAAgCyI,CAAhC,CACH,CACJ,CAgCI,CAKLyK,aApCe,UAAY,CACvB,GAAIzK,GAAQ,GAAIjK,SAAQC,GAAR,CAAYC,MAAZ,CAAmByU,WAAvB,CAAmC,CAAE/P,MAAOxE,EAAOgB,IAAP,EAAT,CAAyBwT,aAAzB,CAAnC,CAAZ,CACA,KAAKH,mBAAL,CAAyBvT,IAAzB,CAA8B+I,CAA9B,CACH,CA4BI,CAML4K,eAhDiB,UAAW,CACxB,GAAI5K,GAAQ,GAAIjK,SAAQC,GAAR,CAAYC,MAAZ,CAAmB4U,iBAAvB,CAAyC1U,EAAOgB,IAAP,EAAzC,CAAZ,CACA6I,EAAM0F,KAAN,CAAY,CAAEtN,KAAM9B,GAAGC,UAAH,CAAc,SAAd,CAAR,CAAZ,CAFwB,CAGxB,KAAKuU,2BAAL,CAAiC7T,IAAjC,CAAsC+I,CAAtC,CACH,CAsCI,CAOL+K,kBAvDoB,SAAU/K,CAAV,CAAiB,CACjC,GAAI1I,GAAO,IAAX,CACA,MAAO,WAAW,CACdA,EAAKwT,2BAAL,CAAiCvT,MAAjC,CAAwCyI,CAAxC,CACH,CACJ,CA2CI,CAYZ;AClEDjK,QAAQC,GAAR,CAAYC,MAAZ,CAAmB+U,uBAAnB,CAA6C,UAAY,CACrD,GAAI7U,GAASC,QAAQ,iBAAR,CAAb,CAaA,MAAO,CACHwI,UAbY,UAAW,CACnB,KAAKqM,wBAAL,CAA8BhU,IAA9B,CAAmC,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBiV,cAAvB,CAAsC/U,EAAOgB,IAAP,EAAtC,CAAnC,CACH,CAUE,CAEH4H,aAXe,SAASC,CAAT,CAAiB,CAC5B,GAAI1H,GAAO,IAAX,CACA,MAAO,WAAW,CACdA,EAAK2T,wBAAL,CAA8B1T,MAA9B,CAAqCyH,CAArC,CACH,CACJ,CAIE,CAGHC,kBANoB,UAAW,CAC3B,MAAO,MAAKgM,wBAAL,EACV,CACE,CAKV;ACrBDlV,QAAQC,GAAR,CAAYC,MAAZ,CAAmBkV,oBAAnB,CAA0C,SAAUpT,CAAV,CAAiB,CAEvD;AACA,GAAI5B,GAASC,QAAQ,iBAAR,CAAb,CA+BIgV,EAAkB9U,GAAGC,UAAH,CAAcD,GAAGkD,MAAH,CAAUzB,EAAMsT,WAAhB,CAAd,CA/BtB,CAgCA,MAAO,CACHlH,kBAhCoB,UAAY,CAC5B,KAAKC,wBAAL,CAA8BnN,IAA9B,CAAmC,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBoO,cAAvB,CAAsClO,EAAOgB,IAAP,EAAtC,CAAnC,CACH,CA6BE,CAEHmN,qBA9BuB,SAAU/J,CAAV,CAAe,CAClC,GAAIjD,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8M,wBAAL,CAA8B7M,MAA9B,CAAqCgD,CAArC,CACH,CAEJ,CAsBE,CAGHJ,QAdU,UAAY,CAClB,KAAKC,cAAL,CAAoBnD,IAApB,CAAyB,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBoE,IAAvB,CAA4BlE,EAAOgB,IAAP,EAA5B,CAAzB,CACH,CASE,CAIHmD,WAZa,SAAUC,CAAV,CAAe,CACxB,GAAIjD,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8C,cAAL,CAAoB7C,MAApB,CAA2BgD,CAA3B,CACH,CAEJ,CAEE,CAKHvC,UA1BY,UAAY,CACpB,KAAKM,gBAAL,CAAsBrB,IAAtB,CAA2B,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmB2O,MAAvB,CAA8BzO,EAAOgB,IAAP,EAA9B,CAA3B,CACH,CAmBE,CAMHoB,aAxBe,SAAUgC,CAAV,CAAe,CAC1B,GAAIjD,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKgB,gBAAL,CAAsBf,MAAtB,CAA6BgD,CAA7B,CACH,CAEJ,CAYE,CAOH6Q,gBAAiBA,CAPd,CASV;ACpDDrV,QAAQC,GAAR,CAAYC,MAAZ,CAAmBqV,sBAAnB,CAA4C,UAAY,CACpD;AACA,GAAInV,GAASC,QAAQ,iBAAR,CAAb,CAWA,MAAO,CACHqH,0BAX4B,SAAUC,CAAV,CAAgB,CACxC,GAAIpG,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKqG,6BAAL,CAAmCpG,MAAnC,CAA0CmG,CAA1C,CACH,CACJ,CAKE,CAEHE,uBANyB,UAAY,CACjC,KAAKD,6BAAL,CAAmC1G,IAAnC,CAAwC,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmB4H,mBAAvB,CAA2C1H,EAAOgB,IAAP,EAA3C,CAAxC,CACH,CAEE,CAKV;ACRDpB,QAAQC,GAAR,CAAYC,MAAZ,CAAmBsV,kBAAnB,CAAwC,SAAUC,CAAV,CAAgB,CAEpD,KAAMrV,GAASC,QAAQ,iBAAR,CAAf,CACIsJ,EAAapJ,GAAGuC,QAAH,CAAY,UAAY,CACjC,KAAM4S,GAAKnV,GAAGkD,MAAH,CAAUgS,EAAKpT,IAAf,GAAwB9B,GAAGkD,MAAH,CAAUgS,EAAKE,SAAf,CAAxB,EAAqDpV,GAAGkD,MAAH,CAAUgS,EAAKjQ,MAAf,CAAhE,CADiC,MAE5BiQ,GAAKG,aAAL,IAAwBrV,GAAGsV,UAAH,CAAcJ,EAAKG,aAAL,GAAqBjM,UAAnC,CAFI,CAGtB+L,GAAMD,EAAKG,aAAL,GAAqBjM,UAArB,EAHgB,CAI1B+L,CACV,CALY,CADjB,CAiGA,MAAO,CACHzB,uBAXyB,SAAUC,CAAV,CAAe,CACpC7G,QAAQyI,IAAR,CAAc,mBAAkB5B,CAAI,EAApC,CACH,CAQE,CAEHE,yBAT2B,SAAUF,CAAV,CAAe,CACtC,GAAI3S,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8S,4BAAL,CAAkC7S,MAAlC,CAAyC0S,CAAzC,CACH,CACJ,CAEE,CAGHI,sBA5BwB,UAAY,CAChC,GAAI/S,GAAO,IAAX,CACAlB,sDAAwD,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CAC5EA,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBoK,EAAE3K,EAAOmP,kBAAP,EAAF,EAA+BvE,IAA/B,CAAoC,SAAUxI,CAAV,CAAa,CAC7CjG,EAAK8S,4BAAL,CAAkCnT,IAAlC,CAAuCsG,CAAvC,CACH,CAFD,CAIP,CARL,CAUH,CAXD,CAYH,CAWE,CAIHuO,uBA9CyB,SAAU7T,CAAV,CAAc,CACnC,GAAIX,GAAO,IAAX,CACA,MAAO,WAAY,CACflB,uEAAyE,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CAC5F,GAAItG,GAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgBjD,CAAhB,CAAlB,CAAZ,CACAkD,EAAO4Q,QAAP,CAAgBhR,CAAhB,CAF4F,CAG5FI,EAAOqQ,IAAP,CAAYlU,CAAZ,CAH4F,CAI5F+J,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAK0U,sBAAL,CAA4BxJ,OAA5B,CAAoCvK,CAApC,CAAwC8C,CAAxC,CAEP,CANL,CAOH,CAXD,CAYH,CACJ,CA0BE,CAKHkR,yBA/F2B,SAAUjM,CAAV,CAAiB,CACxC,GAAI1I,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK0U,sBAAL,CAA4BzU,MAA5B,CAAmCyI,CAAnC,CACH,CACJ,CAqFE,CAMHkM,sBA1FwB,UAAY,CAChC,KAAMxL,GAAM,GAAI1D,GAAE2D,QAAlB,CACI1I,EAAK,GAAIlC,SAAQC,GAAR,CAAYC,MAAZ,CAAmBkW,kBAAvB,CAA0C,CAAExR,MAAOxE,EAAOgB,IAAP,EAAT,CAA1C,CADT,CAEIG,EAAO,IAFX,CAkBA,MAdAlB,wEAAyE,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CAC5FlG,EAAO8J,KAAP,CAAahN,CAAb,CAD4F,CAE5FkD,EAAOqQ,IAAP,CAAYlU,CAAZ,CAF4F,CAG5F+J,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACL,IAAX,IADgB,EAEhBpE,EAAK0U,sBAAL,CAA4B/U,IAA5B,CAAiCgB,CAAjC,CAFgB,CAGhByI,EAAII,OAAJ,CAAY7I,CAAZ,CAHgB,EAKhByI,EAAII,OAAJ,IAEP,CARL,CASH,CAZD,CAcA,CAAOJ,EAAIK,OAAJ,EACV,CAgEE,CAOHqL,mBAtEqB,UAAY,CAC7B,KAAM1L,GAAM,GAAI1D,GAAE2D,QAAlB,CACI1I,EAAK,GAAIlC,SAAQC,GAAR,CAAYC,MAAZ,CAAmBoW,eAAvB,CAAuC,CAAE1R,MAAOxE,EAAOgB,IAAP,EAAT,CAAvC,CADT,CAEIG,EAAO,IAFX,CAkBA,MAdAlB,qEAAsE,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CACzFlG,EAAO8J,KAAP,CAAahN,CAAb,CADyF,CAEzFkD,EAAOqQ,IAAP,CAAYlU,CAAZ,CAFyF,CAGzF+J,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACL,IAAX,IADgB,EAEhBpE,EAAK0U,sBAAL,CAA4B/U,IAA5B,CAAiCgB,CAAjC,CAFgB,CAGhByI,EAAII,OAAJ,CAAY7I,CAAZ,CAHgB,EAKhByI,EAAII,OAAJ,IAEP,CARL,CASH,CAZD,CAcA,CAAOJ,EAAIK,OAAJ,EACV,CA2CE,CAQHrB,WAAYA,CART,CAUV;AC/GD3J,QAAQC,GAAR,CAAYC,MAAZ,CAAmBqW,oBAAnB,CAA0C,UAAY,CAElD,MAAO,CACH1Q,KAAMtF,GAAGC,UAAH,CAAc,gBAAd,CADH,CAEHqR,KAAMtR,GAAGC,UAAH,CAAc,gBAAd,CAFH,CAIV,EACDR,QAAQC,GAAR,CAAYC,MAAZ,CAAmBsW,qBAAnB,CAA2C,UAAY,CAEnD,MAAO,CACH3Q,KAAMtF,GAAGC,UAAH,CAAc,iBAAd,CADH,CAEHqR,KAAMtR,GAAGC,UAAH,CAAc,eAAd,CAFH,CAIV,EACDR,QAAQC,GAAR,CAAYC,MAAZ,CAAmBuW,sBAAnB,CAA4C,UAAY,CAEpD,MAAO,CACH5Q,KAAMtF,GAAGC,UAAH,CAAc,kBAAd,CADH,CAEHqR,KAAMtR,GAAGC,UAAH,CAAc,kBAAd,CAFH,CAGHkW,YAAc3G,EAAE4G,KAAF,CAAQ,CAAR,CAAU,EAAV,CAHX,CAKV;ACtBD3W,QAAQC,GAAR,CAAYC,MAAZ,CAAmB0W,qBAAnB,CAA2C,UAAY,CAEnD,MAAO,IAAI5W,SAAQC,GAAR,CAAYC,MAAZ,CAAmB2W,yBAEjC;ACND7W,QAAQC,GAAR,CAAYC,MAAZ,CAAmB4W,qBAAnB,CAA2C,SAAU9U,CAAV,CAAiB,CAOxD,MALAA,GAAMsF,IAAN,CAAWP,SAAX,CAAqB,SAASS,CAAT,CAAY,CACnB,2BAAN,IADyB,EAEzBxF,EAAMyR,YAAN,CAAmB,IAAnB,CAEP,CAJD,CAKA,CAAO,EACV;ACTDzT,QAAQC,GAAR,CAAYC,MAAZ,CAAmB6W,0BAAnB,CAAgD,SAAU/U,CAAV,CAAiB,CAO7D,MALAA,GAAMgV,UAAN,CAAiBjQ,SAAjB,CAA2B,SAASkQ,CAAT,CAAc,CAChCA,CADgC,EAEjCjV,EAAMyR,YAAN,CAAmB,EAAnB,CAEP,CAJD,CAKA,CAAO,EACV;ACADzT,QAAQC,GAAR,CAAYC,MAAZ,CAAmBgX,WAAnB,CAAiC,SAAUlV,CAAV,CAAiB,CAE9C,KAAM5B,GAASC,QAAQ,iBAAR,CAAf,CACI2O,EAAkB,SAAUC,CAAV,CAAoBC,CAApB,CAA2BC,CAA3B,CAAiC,CAC/C9O,QAAQ,CAAE,cAAa8O,CAAK,EAApB,CAAuB,cAAvB,CAAR,CAAgD,SAAU/J,CAAV,CAAkBC,CAAlB,CAAwB,CACpED,EAAO8J,KAAP,CAAaA,CAAb,CADoE,CAIpE7J,EAAKI,UAAL,CAAgBL,CAAhB,EACCM,IADD,CACM,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBsJ,EAASC,CAAT,CAEP,CAND,CAQH,CAZD,CAaH,CAfL,CAgCIiI,EAAiB5W,GAAGuC,QAAH,CAAY,UAAW,OACF,QAA9B,MAAGW,MAAH,CAAUzB,EAAMoV,QAAhB,CADgC,EAIF,WAA9B,MAAG3T,MAAH,CAAUzB,EAAMoV,QAAhB,CAKP,CATgB,CAhCrB,CAkDA,MAPW,CACPD,eAAgBA,CADT,CAEP/H,SA7BW,SAAUH,CAAV,CAAoBhH,CAApB,CAA0B,CACjC,KAAMiH,GAAQ,GAAIlP,SAAQC,GAAR,CAAYC,MAAZ,CAAmB+H,EAAO,OAA1B,CAAJ,CAAuC7H,EAAOgB,IAAP,EAAvC,CAAd,CACA4N,EAAgBC,CAAhB,CAA0BC,CAA1B,CAAiC,SAAWjH,EAAKoH,WAAL,EAA5C,CACH,CAwBM,CAGPC,UA1BY,SAAUJ,CAAV,CAAiBD,CAAjB,CAA2B,CACnC,MAAO,WAAY,CACf,KAAMM,GAAYhP,GAAGkD,MAAH,CAAUyL,EAAMM,KAAhB,CAAlB,CACIxK,EAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgB+J,CAAhB,CAAlB,CADZ,CAEIO,EAAU,mCAFd,CAGIxH,EAAOwH,EAAQC,IAAR,CAAaH,CAAb,EAAwB,CAAxB,CAHX,CAMAP,EAAgBC,CAAhB,CAA0BjK,CAA1B,CAAiC,SAAWiD,EAAKoH,WAAL,EAA5C,CAEH,CACJ,CAYM,CAQd;ACtDDrP,QAAQC,GAAR,CAAYC,MAAZ,CAAmBmX,+BAAnB,CAAqD,SAAUrV,CAAV,CAAiB,CAElE,GAAIsV,GAAI,GAAItX,SAAQC,GAAR,CAAYC,MAAZ,CAAmB2W,yBAA/B,CAEA,MAAOS,EACV;ACJDtX,QAAQC,GAAR,CAAYC,MAAZ,CAAmBqX,mBAAnB,CAAyC,UAAY,CAEjD,GAAInX,GAASC,QAAQ,iBAAR,CAAb,CAmBA,MANS,CACLwU,eAPiB,UAAW,CACxB,GAAI5K,GAAQ,GAAIjK,SAAQC,GAAR,CAAYC,MAAZ,CAAmB4U,iBAAvB,CAAyC1U,EAAOgB,IAAP,EAAzC,CAAZ,CACA6I,EAAM0F,KAAN,CAAY,CAAEtN,KAAM9B,GAAGC,UAAH,CAAc,SAAd,CAAR,CAAZ,CAFwB,CAGxB,KAAKuU,2BAAL,CAAiC7T,IAAjC,CAAsC+I,CAAtC,CACH,CAEI,CAEL+K,kBAdoB,SAAU/K,CAAV,CAAiB,CACjC,GAAI1I,GAAO,IAAX,CACA,MAAO,WAAW,CACdA,EAAKwT,2BAAL,CAAiCvT,MAAjC,CAAwCyI,CAAxC,CACH,CACJ,CAOI,CAOZ;ACrBDjK,QAAQC,GAAR,CAAYC,MAAZ,CAAmBsX,wBAAnB,CAA8C,UAAY,CAEtD,GAAIpX,GAASC,QAAQ,iBAAR,CAAb,CACI2O,EAAkB,SAAUC,CAAV,CAAoBC,CAApB,CAA2BC,CAA3B,CAAiC5J,CAAjC,CAAyC,CACvDlF,QAAQ,CAAC,cAAgB8O,CAAjB,CAAuB,cAAvB,CAAR,CAAgD,SAAU/J,CAAV,CAAkBC,CAAlB,CAAwB,CACpED,EAAO8J,KAAP,CAAaA,CAAb,CADoE,CAEvC,UAAzB,QAAO9J,GAAOG,MAFkD,GAGhEH,EAAOG,MAAP,CAAcA,CAAd,CAHgE,CAIhE8H,QAAQC,GAAR,CAAY,4BAA8BlI,EAAOG,MAAP,CAAcM,IAAxD,CAJgE,EAOpER,EAAKI,UAAL,CAAgBL,CAAhB,EACCM,IADD,CACM,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBsJ,EAASC,CAAT,CAEP,CAND,CAQH,CAfD,CAgBH,CAlBL,CA0CA,MANS,CACLE,SAlBW,SAAUH,CAAV,CAAoBhH,CAApB,CAA0B1C,CAA1B,CAAkC,CACzC,GAAI2J,GAAQ,GAAIlP,SAAQC,GAAR,CAAYC,MAAZ,CAAmB+H,EAAO,OAA1B,CAAJ,CAAuC7H,EAAOgB,IAAP,EAAvC,CAAZ,CACA4N,EAAgBC,CAAhB,CAA0BC,CAA1B,CAAiC,SAAWjH,EAAKoH,WAAL,EAA5C,CAAgE9J,CAAhE,CACH,CAcI,CAEL+J,UAfY,SAAUJ,CAAV,CAAiB,CACzB,GAAI3N,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIgO,GAAYhP,GAAGkD,MAAH,CAAUyL,EAAMM,KAAhB,CAAhB,CACIxK,EAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgB+J,CAAhB,CAAlB,CADZ,CAEIO,EAAU,mCAFd,CAGIxH,EAAOwH,EAAQC,IAAR,CAAaH,CAAb,EAAwB,CAAxB,CAHX,CAMAP,EAAgBzN,EAAKoO,KAArB,CAA4B3K,CAA5B,CAAmC,SAAWiD,EAAKoH,WAAL,EAA9C,CACH,CACJ,CAEI,CAOZ;ACpDDrP,QAAQC,GAAR,CAAYC,MAAZ,CAAmBuX,QAAnB,CAA8BzX,QAAQC,GAAR,CAAYC,MAAZ,CAAmBuX,QAAnB,EAA+B,GAC7DzX,QAAQC,GAAR,CAAYC,MAAZ,CAAmBuX,QAAnB,CAA4BC,OAA5B,CAAsC,SAAS1V,CAAT,CAAgB,CAElD,MADAA,GAAQA,GAAS,EACjB,CAAO,CACH2V,SAAUpX,GAAGC,UAAH,CAAewB,EAAM2V,QAAN,QAAf,CADP,CACwD;AAC3DC,eAAgBrX,GAAGC,UAAH,CAAc,QAAd,CAFb,CAEsC;AACzCqX,MAAOtX,GAAGC,UAAH,CAAcwB,EAAM6V,KAAN,EAAe,EAA7B,CAHJ,CAIHC,UAAYvX,GAAGC,UAAH,CAAcwB,EAAM6V,KAApB,CAJT,CAMV,EACD7X,QAAQC,GAAR,CAAYC,MAAZ,CAAmBuX,QAAnB,CAA4BM,wBAA5B,CAAuD,SAAU/V,CAAV,CAAiB,CACpE,KAAMwF,GAAI,GAAIxH,SAAQC,GAAR,CAAYC,MAAZ,CAAmB8X,eAAvB,CAAuChW,CAAvC,CAAV,CACAwF,EAAEyQ,EAAF,CAAO1X,GAAGC,UAAH,CAAc,IAAd,CAF6D,CAGpEgH,EAAE0Q,MAAF,CAAW3X,GAAGC,UAAH,CAAc,qBAAd,CAHyD,CAIpEgH,EAAE2Q,QAAF,CAAa5X,GAAGC,UAAH,CAAc,IAAd,CAJuD,CAKpEgH,EAAE4Q,OAAF,CAAY7X,GAAGC,UAAH,IALwD,CAMpEgH,EAAE6Q,oBAAF,CAAyB9X,GAAGC,UAAH,IAN2C,CAOpEgH,EAAE8Q,MAAF,CAAW/X,GAAGC,UAAH,CAAc,IAAd,CAPyD,CAQpEgH,EAAE+Q,QAAF,CAAahY,GAAGC,UAAH,CAAc,IAAd,CARuD,CASpEgH,EAAEqQ,KAAF,CAAUtX,GAAGC,UAAH,CAAc,EAAd,CAT0D,CAUpEgH,EAAEkQ,OAAF,CAAYnX,GAAGC,UAAH,CAAc,GAAIR,SAAQC,GAAR,CAAYC,MAAZ,CAAmBuX,QAAnB,CAA4BC,OAA9C,CAVwD,CAWpElQ,QAAa,+EAXuD,CAapE,GAAI+C,GAAUlK,QAAQ,sBAAR,CAAd,CACA,GAAI2B,GAA0B,QAAjB,QAAOA,EAApB,CACI,IAAK,GAAIwW,EAAT,GAAcxW,EAAd,CACI,GAAIA,EAAMyW,cAAN,CAAqBD,CAArB,CAAJ,CAA6B,CACzB;AACA,GAAIjY,GAAGmY,YAAH,CAAgBlR,EAAEgR,CAAF,CAAhB,GAAyB,QAAUhR,GAAEgR,CAAF,CAAvC,CAA6C,CACzC,KAAMG,GAAS3W,EAAMwW,CAAN,EAASI,OAAT,EAAoB5W,EAAMwW,CAAN,CAAnC,CACA,GAAIzI,EAAE4I,CAAF,EAAUE,OAAV,EAAJ,CAAyB,CACrBrR,EAAEgR,CAAF,EAAKzI,EAAE4I,CAAF,EAAU1S,GAAV,CAAc,SAAU6S,CAAV,CAAc,CAAE,MAAOvO,GAAQ0C,YAAR,CAAqB6L,CAArB,CAA2B,CAAhE,CAAL,CADqB,CAErB,QACH,CACJ,CACGvY,GAAGmY,YAAH,CAAgBlR,EAAEgR,CAAF,CAAhB,CATqB,EAUrBhR,EAAEgR,CAAF,EAAKxW,EAAMwW,CAAN,CAAL,CAEP,CA5B2D,MA+BhExW,IAA0B,QAAjB,QAAOA,EA/BgD,EAgChEwF,EAAE5C,KAAF,CAAQ5C,CAAR,CAhCgE,CAmChEhC,QAAQC,GAAR,CAAYC,MAAZ,CAAmB6Y,+BAnC6C,CAoCzDhJ,EAAEvI,CAAF,EAAKwR,MAAL,CAAY,GAAIhZ,SAAQC,GAAR,CAAYC,MAAZ,CAAmB+Y,4BAAvB,CAAoDzR,CAApD,CAAuDxF,CAAvD,CAAZ,CApCyD,CAsC7DwF,CACV;AC1CDxH,QAAQC,GAAR,CAAYC,MAAZ,CAAmBgZ,0BAAnB,CAAgD,UAAY,CAExD,GAAI9Y,GAASC,QAAQ,iBAAR,CAAb,CAuBA,MAPS,CACL8Y,YALc,SAAUlP,CAAV,CAAiB,CAC3B,KAAKmP,4BAAL,CAAkClY,IAAlC,CAAuC+I,CAAvC,CACH,CAEI,CAEL5D,WAXa,UAAY,CACrB,GAAI4D,GAAQ,GAAIjK,SAAQC,GAAR,CAAYC,MAAZ,CAAmBmZ,kBAAvB,CAA0CjZ,EAAOgB,IAAP,EAA1C,CAAZ,CACA6I,EAAM0F,KAAN,CAAY,CAAEtN,KAAM9B,GAAGC,UAAH,CAAc,SAAd,CAAR,CAAZ,CAFqB,CAGrB,KAAK4Y,4BAAL,CAAkClY,IAAlC,CAAuC+I,CAAvC,CACH,CAKI,CAGL1D,cAlBgB,SAAUN,CAAV,CAAe,CAC3B,GAAI1E,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK6X,4BAAL,CAAkC5X,MAAlC,CAAyCyE,CAAzC,CACH,CACJ,CAUI,CAQZ;AC/BDjG,QAAQC,GAAR,CAAYC,MAAZ,CAAmBoZ,iBAAnB,CAAuC,SAAUC,CAAV,CAAe,CAClD,GAAInZ,GAASC,QAAQ,iBAAR,CAAb,CAeA,MAJwC,EAApC,KAAImZ,kBAAJ,GAAyBC,MAI7B,GAHIF,EAAIC,kBAAJ,CAAuBtY,IAAvB,CAA4B,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBwZ,QAAvB,CAAgC,CAAE9U,MAAOxE,EAAOgB,IAAP,EAAT,CAAyByD,OAAS,OAAlC,CAAhC,CAA5B,CAGJ,CAFI0U,EAAIC,kBAAJ,CAAuBtY,IAAvB,CAA4B,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBwZ,QAAvB,CAAgC,CAAE9U,MAAOxE,EAAOgB,IAAP,EAAT,CAAyByD,OAAS,OAAlC,CAAhC,CAA5B,CAEJ,EAAO,CACH4B,QAfU,UAAY,CAClB,GAAIC,GAAO,GAAI1G,SAAQC,GAAR,CAAYC,MAAZ,CAAmBwZ,QAAvB,CAAgCtZ,EAAOgB,IAAP,EAAhC,CAAX,CACAmY,EAAIC,kBAAJ,CAAuBtY,IAAvB,CAA4BwF,CAA5B,CAEH,CAUE,CAEHG,WAXa,SAAUH,CAAV,CAAgB,CACzB,MAAO,WAAY,CACf6S,EAAIC,kBAAJ,CAAuBhY,MAAvB,CAA8BkF,CAA9B,CACH,CACJ,CAKE,CAIV;ACpBD1G,QAAQC,GAAR,CAAYC,MAAZ,CAAmByZ,iBAAnB,CAAuC,SAAUC,CAAV,CAAkB,CAIrD,MAAO,CACHC,SAJW,UAAW,CACtB,MAAOtZ,IAAGkD,MAAH,CAAUmW,EAAOE,KAAjB,EAA0B,GAA1B,CAAgCvZ,GAAGkD,MAAH,CAAUmW,EAAOG,IAAjB,CAC1C,CACM,CAGV;ACFD/Z,QAAQC,GAAR,CAAYC,MAAZ,CAAmB8Z,0BAAnB,CAAgD,UAAY,CAmCxD,MANS,CACL/F,uBAXyB,SAAUC,CAAV,CAAe,CACpCC,MAAM,kBAAoBD,CAA1B,CACH,CAQI,CAELE,yBAT2B,SAAUF,CAAV,CAAe,CACtC,GAAI3S,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8S,4BAAL,CAAkC7S,MAAlC,CAAyC0S,CAAzC,CACH,CACJ,CAEI,CAGLI,sBA9BwB,UAAY,CAChC,GAAI/S,GAAO,IAAX,CACAlB,sDAAwD,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CAC5EA,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBoK,EAAE3K,EAAOmP,kBAAP,EAAF,EAA+BvE,IAA/B,CAAoC,SAAUxI,CAAV,CAAa,CAC7CjG,EAAK8S,4BAAL,CAAkCnT,IAAlC,CAAuCsG,CAAvC,CACH,CAFD,CAIP,CARL,CAUH,CAXD,CAcH,CAWI,CAOZ;ACpCDxH,QAAQC,GAAR,CAAYC,MAAZ,CAAmB+Z,cAAnB,CAAoC,UAAY,CAE5C,GAAI7Z,GAASC,QAAQ,iBAAR,CAAb,CAuIA,MAZS,CACL4T,uBAXyB,SAAUC,CAAV,CAAe,CACpCC,MAAM,kBAAoBD,CAA1B,CACH,CAQI,CAELE,yBAT2B,SAAUF,CAAV,CAAe,CACtC,GAAI3S,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8S,4BAAL,CAAkC7S,MAAlC,CAAyC0S,CAAzC,CACH,CACJ,CAEI,CAGLI,sBA9BwB,UAAY,CAChC,GAAI/S,GAAO,IAAX,CACAlB,sDAAwD,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CAC5EA,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBoK,EAAE3K,EAAOmP,kBAAP,EAAF,EAA+BvE,IAA/B,CAAoC,SAAUxI,CAAV,CAAa,CAC7CjG,EAAK8S,4BAAL,CAAkCnT,IAAlC,CAAuCsG,CAAvC,CACH,CAFD,CAIP,CARL,CAUH,CAXD,CAcH,CAWI,CAIL/E,QA5CW,UAAY,CAClB,GAAIqK,GAAO,GAAI9M,SAAQC,GAAR,CAAYC,MAAZ,CAAmBiC,IAAvB,CAA4B/B,EAAOgB,IAAP,EAA5B,CAAX,CACA0L,EAAK1K,IAAL,CAAU,CAAEC,KAAM9B,GAAGC,UAAH,CAAc,SAAd,CAAR,CAAV,CAFkB,CAGlBsM,EAAKxK,KAAL,CAAW,CAAED,KAAM9B,GAAGC,UAAH,CAAc,SAAd,CAAR,CAAX,CAHkB,CAIlB,KAAKkC,cAAL,CAAoBxB,IAApB,CAAyB4L,CAAzB,CACH,CAmCG,CAKLnK,WAvCa,SAAUmK,CAAV,CAAgB,CACzB,GAAIvL,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKmB,cAAL,CAAoBlB,MAApB,CAA2BsL,CAA3B,CACH,CACJ,CA6BI,CAMLoN,aAhIe,SAAUC,CAAV,CAAkB,CAC7B,GAAI5Y,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK6Y,gBAAL,CAAsB5Y,MAAtB,CAA6B2Y,CAA7B,CACH,CACJ,CAqHI,CAOLE,UA3HY,SAAUpS,CAAV,CAAgB,CACxB,GAAI1G,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAI+Y,GAAIrS,EAAKoH,WAAL,GAAmB5C,OAAnB,CAA2B,IAA3B,CAAiC,GAAjC,CAAR,CACApM,QAAQ,CAAC,qBAAuBia,CAAxB,CAA2B,cAA3B,CAAR,CAAoD,SAAUlV,CAAV,CAAkBC,CAAlB,CAAwB,CACxE,GAA6B,UAAzB,QAAOD,GAAO+U,MAAlB,CAEI,WADA9M,SAAQkN,KAAR,CAAc,kBAAoBD,CAApB,CAAwB,wCAAtC,CACA,CAGJ;AACA,GAAItV,GAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG4E,IAAH,CAAQC,EAAO+U,MAAf,CAAlB,CAAZ,CAIA,IAAK,GAAI3B,EAAT,GAH0B,UAAvB,QAAOxT,GAAMwV,KAGhB,EAFIxV,EAAMwV,KAAN,CAAY,EAAZ,CAEJ,CAAcxV,CAAd,CACI,GAAIA,EAAMyT,cAAN,CAAqBD,CAArB,CAAJ,CAA6B,CACzB,GAAIhU,GAAMQ,EAAMwT,CAAN,CAAV,CACA,GAAU,OAAN,IAAJ,CACI,SAEAjY,GAAGmY,YAAH,CAAgBlU,CAAhB,GAAkD,UAA1B,QAAOA,GAAIiW,UALd,EAMrBjW,EAAI,IAAJ,CANqB,CAQrBjE,GAAGmY,YAAH,CAAgBlU,CAAhB,GAAkD,UAA1B,QAAOA,GAAIiW,UARd,EASrBjW,KAEP,CAELY,EAAO+U,MAAP,CAAcnV,CAAd,CAzBwE,CA2B1C,UAA1B,QAAOI,GAAOsV,OA3BsD,EA4BpEtV,EAAOsV,OAAP,CAAenZ,CAAf,CA5BoE,CA+BxE8D,EAAKI,UAAL,CAAgBL,CAAhB,EACCM,IADD,CACM,SAAUC,CAAV,CAAkB,CACpB,GAAKA,CAAL,EACe,IAAX,IADJ,CACqB,CAEjB,GAAIwU,GAAS/U,EAAO+U,MAAP,EAAb,CAEAA,EAAOvV,KAAP,CAAaxE,EAAOgB,IAAP,EAAb,CAJiB,CAKjB+Y,EAAOQ,QAAP,IALiB,CAMjBpZ,EAAK6Y,gBAAL,CAAsBlZ,IAAtB,CAA2BiZ,CAA3B,CACH,CACJ,CAXD,CAaH,CA5CD,CA8CH,CACJ,CAiEI,CAQLS,WAxEa,SAAUT,CAAV,CAAkB,CAC3B,GAAI5Y,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAI0G,GAAO1H,GAAGkD,MAAH,CAAU0W,EAAO3K,KAAjB,CAAX,CACIxK,EAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgBgV,CAAhB,CAAlB,CADZ,CAGA9Z,QAAQ,CAAC,qBAAuB4H,EAAKoH,WAAL,GAAmB5C,OAAnB,CAA2B,IAA3B,CAAiC,GAAjC,CAAxB,CAA+D,cAA/D,CAAR,CAAwF,SAAUrH,CAAV,CAAkBC,CAAlB,CAAwB,CAC5GD,EAAO+U,MAAP,CAAcnV,CAAd,CAD4G,CAE9E,UAA1B,QAAOI,GAAOsV,OAF0F,EAGxGtV,EAAOsV,OAAP,CAAenZ,CAAf,CAHwG,CAM5G8D,EAAKI,UAAL,CAAgBL,CAAhB,EACCM,IADD,CACM,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAK6Y,gBAAL,CAAsB3N,OAAtB,CAA8B0N,CAA9B,CAAsCnV,CAAtC,CAEP,CAND,CAQH,CAdD,CAgBH,CACJ,CAyCI,CAaZ;ACvJDhF,QAAQC,GAAR,CAAYC,MAAZ,CAAmB2a,eAAnB,CAAqC,UAAY,CA4E7C,MAAO,CACHC,cAzEgB,SAASC,CAAT,CAAa,CACzB,MAAO,WAAW,CACd,GAAI3a,GAASC,QAAQ,iBAAR,CAAb,CAGI2a,EAAQ,IAHZ,CAIIC,EAAa,GAAIjb,SAAQC,GAAR,CAAYC,MAAZ,CAAmBgb,UAAvB,CAAkC9a,EAAOgB,IAAP,EAAlC,CAJjB,CAMAf,yDAA2D,SAAS+E,CAAT,CAAiBC,CAAjB,CAAuB,CAC9ED,EAAO6V,UAAP,CAAkBA,CAAlB,CAD8E,CAGrD,UAArB,QAAO7V,GAAO2V,EAH4D,EAI1E3V,EAAO2V,EAAP,CAAUA,GAAV,CAJ0E,CAO9E1V,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAASC,CAAT,CAAiB,CACdA,CADc,EAEJ,IAAX,IAFe,EAGfqV,EAAMG,oBAAN,CAA2Bja,IAA3B,CAAgC+Z,CAAhC,CAGP,CAPL,CASH,CAhBD,CAiBH,CACJ,CA8CE,CAEHG,eA/CiB,SAAUH,CAAV,CAAsBI,CAAtB,CAAiC,CAC9C,GAAI9Z,GAAO,IAAX,CACIyD,EAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgB8V,CAAhB,CAAlB,CADZ,CAGA,MAAO,WAAY,CACf5a,yDAA2D,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CAC/ED,EAAO6V,UAAP,CAAkBjW,CAAlB,CAD+E,CAGtD,UAArB,QAAOI,GAAO2V,EAH6D,EAI3E3V,EAAO2V,EAAP,CARUM,CAQA,EAAV,CAJ2E,CAO/EhW,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACpB,GAAKA,CAAL,EACe,IAAX,IADJ,CAEI,IAAK,GAAIC,EAAT,GAAcqV,EAAd,CACiC,UAAzB,QAAOA,GAAWrV,CAAX,CAAP,EAA8D,YAAvB,KAAWA,CAAX,EAAcC,IAD7D,CAEQoV,EAAWrV,CAAX,EAAcrF,GAAGkD,MAAH,CAAUuB,EAAMY,CAAN,CAAV,CAAd,CAFR,CAIQqV,EAAWrV,CAAX,EAAgBZ,EAAMY,CAAN,CAI/B,CAZL,CAcH,CArBD,CAsBH,CAEJ,CAgBE,CAGH0V,iBAlBmB,SAAUL,CAAV,CAAsBI,CAAtB,CAAiC,CAChD,GAAI9Z,GAAO,IAAX,CAEA,MAAO,WAAY,CAFG8Z,CAGlB,GAAKE,kBAAL,GAA0BC,OAA1B,CAAkC,SAAUC,CAAV,CAAe,CACzCA,EAAIP,UAAJ,KAAqBD,EAAWhD,EAAX,EADoB,EAEzCwD,EAAIP,UAAJ,CAAe,EAAf,CAEP,CAJD,CADe,CAOf3Z,EAAK4Z,oBAAL,CAA0B3Z,MAA1B,CAAiCyZ,CAAjC,CACH,CAEJ,CAEE,CAKV;ACvEDjb,QAAQC,GAAR,CAAYC,MAAZ,CAAmBwb,2BAAnB,CAAiD,UAAY,CACzD,GAAItb,GAASC,QAAQ,iBAAR,CAAb,CAcA,MAAO,CACH2H,mBAdqB,SAAUC,CAAV,CAAgB,CACjC,GAAI1G,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAI0D,GAAU,GAAIjF,SAAQC,GAAR,CAAYC,MAAZ,CAAmB+H,EAAO,SAA1B,CAAJ,CAAyC7H,EAAOgB,IAAP,EAAzC,CAAd,CACAG,EAAK+E,yBAAL,CAA+BpF,IAA/B,CAAoC+D,CAApC,CACH,CACJ,CAOE,CAEHiD,sBARwB,SAAUjD,CAAV,CAAmB,CACvC,GAAI1D,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK+E,yBAAL,CAA+B9E,MAA/B,CAAsCyD,CAAtC,CACH,CACJ,CACE,CAIV;ACrBDjF,QAAQC,GAAR,CAAYC,MAAZ,CAAmByb,4BAAnB,CAAkD,UAAY,CAC1D,GAAIvb,GAASC,QAAQ,iBAAR,CAAb,CACIiL,EAAMjL,QAAQ,cAAR,CADV,CAEIkK,EAAUlK,QAAQU,eAAeyJ,WAAvB,CAFd,CAuFA,MAAO,CACH0B,UArFY,UAAY,CACpB,KAAKC,gBAAL,CAAsBjL,IAAtB,CAA2B,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBkM,MAAvB,CAA8B,CACrDxH,MAAOxE,EAAOgB,IAAP,EAD8C,CAErDiL,MAAO,CAF8C,CAA9B,CAA3B,CAIH,CA+EE,CAEHC,WA1Ea,SAAUC,CAAV,CAAkB,CAC3B,GAAIhL,GAAO,IAAX,CACA,MAAO,WAAY,CACflB,oDAAsD,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CACzE,GAAItG,GAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgBoH,CAAhB,CAAlB,CAAZ,CACAnH,EAAOmH,MAAP,CAAcvH,CAAd,CAFyE,CAGzEsG,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKiL,eAAL,CAAqBC,OAArB,CAA6BF,CAA7B,CAAqCvH,CAArC,CAEP,CANL,CAOH,CAVD,CAWH,CACJ,CAyDE,CAGH0H,aAjFe,SAAUC,CAAV,CAAiB,CAC5B,GAAIpL,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK4K,gBAAL,CAAsB3K,MAAtB,CAA6BmL,CAA7B,CACH,CACJ,CAyEE,CAIHC,gBA5DkB,UAAY,CAC1B,GAAI1K,GAAK,GAAIlC,SAAQC,GAAR,CAAYC,MAAZ,CAAmB2M,YAAvB,CAAoC,CAAEjI,MAAOxE,EAAOgB,IAAP,EAAT,CAApC,CAAT,CACIG,EAAO,IADX,CAGAlB,2DAA6D,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CAChFlG,EAAO0H,IAAP,CAAY5K,CAAZ,CADgF,CAEhFoJ,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKwL,sBAAL,CAA4B7L,IAA5B,CAAiCgB,CAAjC,CAEP,CANL,CAOH,CATD,CAWH,CAyCE,CAKH8K,iBA7CmB,SAAUF,CAAV,CAAgB,CAC/B,GAAIvL,GAAO,IAAX,CACA,MAAO,WAAY,CACflB,2DAA6D,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CAChF,GAAItG,GAAQuF,EAAQ0C,YAAR,CAAqB1M,GAAG0E,OAAH,CAAWE,IAAX,CAAgB2H,CAAhB,CAArB,CAAZ,CACA1H,EAAO0H,IAAP,CAAY9H,CAAZ,CAFgF,CAGhFsG,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKwL,sBAAL,CAA4BN,OAA5B,CAAoCK,CAApC,CAA0C9H,CAA1C,CAEP,CANL,CAOH,CAVD,CAWH,CACJ,CAyBE,CAMHkI,mBA9BqB,SAAUJ,CAAV,CAAgB,CACjC,GAAIvL,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKwL,sBAAL,CAA4BvL,MAA5B,CAAmCsL,CAAnC,CACH,CACJ,CAmBE,CAOHK,cAzBgB,SAAUZ,CAAV,CAAkB,CAC9B,GAAIa,GAAW,IAAf,CACA,MAAO,WAAY,CACfC,QAAQC,GAAR,CAAY,WAAZ,CAAyBF,CAAzB,CADe,CAEfC,QAAQC,GAAR,CAAY,aAAZ,CAA2Bf,CAA3B,CAFe,CAGflM,iDAAmD,SAAU+E,CAAV,CAAkBkG,CAAlB,CAAuB,CACtElG,EAAO7B,IAAP,CAAY6J,EAASG,UAAT,EAAZ,CAAmChB,EAAOiB,iBAAP,EAAnC,CADsE,CAEtElC,EAAI7F,UAAJ,CAAeL,CAAf,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACL,IAAX,IADgB,EAEhB4G,EAAOiB,iBAAP,CAAyBpI,EAAOqI,cAAP,EAAzB,CAEP,CALL,CAOH,CATD,CAWH,CACJ,CACE,CASV;AC/FDzN,QAAQC,GAAR,CAAYC,MAAZ,CAAmB0b,eAAnB,CAAqC,UAAY,CAE7C,GAAIxb,GAASC,QAAQ,iBAAR,CAAb,CACIC,EAAWC,GAAGC,UAAH,EADf,CAEII,EAASL,GAAGM,eAAH,EAFb,CAGA,MAAO,CACHP,SAAUA,CADP,CAEHM,OAAQA,CAFL,CAIV;ACXDZ,QAAQC,GAAR,CAAYC,MAAZ,CAAmB2b,iBAAnB,CAAuC,SAAU7Z,CAAV,CAAiB,CAGpDA,EAAMyQ,IAAN,CAAW1L,SAAX,CAAqB,SAAUzF,CAAV,CAAa,CACzBf,GAAGkD,MAAH,CAAUzB,EAAM6C,MAAhB,CADyB,EAE1B7C,EAAM6C,MAAN,CAAavD,EAAEmL,OAAF,CAAU,GAAV,CAAe,GAAf,EACRA,OADQ,CACA,UADA,CACY,KADZ,EACmBqP,IADnB,EAAb,CAGP,CALD,CAHoD,CASpD;AACA,GAAI1b,GAASC,QAAQ,iBAAR,CAAb,CAiBA,MAAO,CACHmO,yBAjB2B,UAAY,CACnC,KAAKC,+BAAL,CAAqCvN,IAArC,CAA0C,GAAIlB,SAAQC,GAAR,CAAYC,MAAZ,CAAmBwO,qBAAvB,CAA6CtO,EAAOgB,IAAP,EAA7C,CAA1C,CACH,CAcE,CAEHuN,4BAf8B,SAAUC,CAAV,CAAc,CACxC,GAAIrN,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKkN,+BAAL,CAAqCjN,MAArC,CAA4CoN,CAA5C,CACH,CAEJ,CAOE,CAGHmN,kBANoB,UAAY,CAC5B,KAAKC,WAAL,CAAiB,EAAjB,CACH,CACE,CAIHC,mBAVqB,UAAY,CAC7B,KAAKC,YAAL,CAAkB,EAAlB,CACH,CAIE,CAMV;AC7BDlc,QAAQC,GAAR,CAAYC,MAAZ,CAAmBic,yBAAnB,CAA+C,SAAUna,CAAV,CAAiB,CAE5D,GAAI5B,GAASC,QAAQ,iBAAR,CAAb,CACI+b,EAAS7b,GAAGC,UAAH,IADb,CAEI+J,EAAUlK,QAAQU,eAAeyJ,WAAvB,CAFd,CAGI6R,EAAqB9b,GAAGM,eAAH,EAHzB,CA2UIyb,EAAa,SAAUC,CAAV,CAAmB,CAC5B,GAAIC,GAAKD,GAAW,KAAKE,aAAL,EAApB,CACAxV,EAAEC,GAAF,CAAM,0CAA4CsV,CAAlD,EACKhR,IADL,CACU,SAAU7F,CAAV,CAAkB,CACpB0W,EAAmB1W,CAAnB,CACH,CAHL,CAIH,CAjVL,CA8WA,MA3BA3D,GAAMya,aAAN,CAAoB1V,SAApB,CAA8BuV,CAA9B,CA2BA,CAzBS,CACLF,OAAQA,CADH,CAELM,sBA3JwB,SAAUC,CAAV,CAA2B,CAC/C,GAAIpb,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKqb,yBAAL,CAA+Bpb,MAA/B,CAAsCmb,CAAtC,CACH,CACJ,CAoJI,CAGLE,mBA9MqB,UAAY,CAC7B,GAAItb,GAAO,IAAX,CACIob,EAAkB,GAAI3c,SAAQC,GAAR,CAAYC,MAAZ,CAAmB4c,eAAvB,CAAuC1c,EAAOgB,IAAP,EAAvC,CADtB,CAGAf,8DAAgE,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CACpFD,EAAOuX,eAAP,CAAuBA,CAAvB,CADoF,CAE3D,UAArB,QAAOvX,GAAO2V,EAFkE,EAGhF3V,EAAO2V,EAAP,CAAUxZ,CAAV,CAHgF,CAKpF8D,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKqb,yBAAL,CAA+B1b,IAA/B,CAAoCyb,CAApC,CAEP,CANL,CAQH,CAbD,CAgBH,CAuLI,CAILI,oBA1LsB,SAAUJ,CAAV,CAA2B,CAC7C,GAAIpb,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIyD,GAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgBwX,CAAhB,CAAlB,CAAZ,CAEAtc,8DAAgE,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CACpFD,EAAOuX,eAAP,CAAuB3X,CAAvB,CADoF,CAE3D,UAArB,QAAOI,GAAO2V,EAFkE,EAGhF3V,EAAO2V,EAAP,CAAUxZ,CAAV,CAHgF,CAMpF8D,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACpB,GAAKA,CAAL,EACe,IAAX,IADJ,CAEI,IAAK,GAAIC,EAAT,GAAc+W,EAAd,CACsC,UAA9B,QAAOA,GAAgB/W,CAAhB,CAAP,EAAwE,YAA5B,KAAgBA,CAAhB,EAAmBC,IADvE,CAEQ8W,EAAgB/W,CAAhB,EAAmBrF,GAAGkD,MAAH,CAAUuB,EAAMY,CAAN,CAAV,CAAnB,CAFR,CAIQ+W,EAAgB/W,CAAhB,EAAqBZ,EAAMY,CAAN,CAIpC,CAZL,CAcH,CApBD,CAsBH,CACJ,CA0JI,CAKLoX,qBAtGuB,SAAUC,CAAV,CAA0B,CAC7C,GAAI1b,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK2b,wBAAL,CAA8B1b,MAA9B,CAAqCyb,CAArC,CACH,CACJ,CA4FI,CAMLE,kBAzJoB,UAAY,CAC5B,GAAI5b,GAAO,IAAX,CACI0b,EAAiB,GAAIjd,SAAQC,GAAR,CAAYC,MAAZ,CAAmBkd,cAAvB,CAAsChd,EAAOgB,IAAP,EAAtC,CADrB,CAGAf,6DAA+D,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CACnFD,EAAO6X,cAAP,CAAsBA,CAAtB,CADmF,CAE1D,UAArB,QAAO7X,GAAO2V,EAFiE,EAG/E3V,EAAO2V,EAAP,CAAUxZ,CAAV,CAH+E,CAKnF8D,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAK2b,wBAAL,CAA8Bhc,IAA9B,CAAmC+b,CAAnC,CAEP,CANL,CAQH,CAbD,CAgBH,CA+HI,CAOLI,mBArIqB,SAAUJ,CAAV,CAA0B,CAC3C,GAAI1b,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIyD,GAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgB8X,CAAhB,CAAlB,CAAZ,CAEA5c,6DAA+D,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CACnFD,EAAO6X,cAAP,CAAsBjY,CAAtB,CADmF,CAE1D,UAArB,QAAOI,GAAO2V,EAFiE,EAG/E3V,EAAO2V,EAAP,CAAUxZ,CAAV,CAH+E,CAMnF8D,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACpB,GAAKA,CAAL,EACe,IAAX,IADJ,CAEI,IAAK,GAAIC,EAAT,GAAcqX,EAAd,CACqC,UAA7B,QAAOA,GAAerX,CAAf,CAAP,EAAsE,YAA3B,KAAeA,CAAf,EAAkBC,IADrE,CAEQoX,EAAerX,CAAf,EAAkBrF,GAAGkD,MAAH,CAAUuB,EAAMY,CAAN,CAAV,CAAlB,CAFR,CAIQqX,EAAerX,CAAf,EAAoBZ,EAAMY,CAAN,CAInC,CAZL,CAcH,CApBD,CAsBH,CACJ,CAkGI,CAQL0X,eAzNiB,SAAUC,CAAV,CAAoB,CACjC,GAAIhc,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKic,4BAAL,CAAkChc,MAAlC,CAAyC+b,CAAzC,CACH,CACJ,CA4MI,CASLE,YAhRc,SAAUxV,CAAV,CAAgB,CAC1B,GAAI1G,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIgc,GAAW,GAAIvd,SAAQC,GAAR,CAAYC,MAAZ,CAAmB+H,EAAO,UAA1B,CAAJ,CAA0C7H,EAAOgB,IAAP,EAA1C,CAAf,CAEAf,QAAQ,CAAC,uBAAyB4H,EAAKoH,WAAL,EAA1B,CAA8C,cAA9C,CAAR,CAAuE,SAAUjK,CAAV,CAAkBC,CAAlB,CAAwB,CAC3FD,EAAOmY,QAAP,CAAgBA,CAAhB,CAD2F,CAElE,UAArB,QAAOnY,GAAO2V,EAFyE,EAGvF3V,EAAO2V,EAAP,CAAUxZ,CAAV,CAHuF,CAK3F8D,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKic,4BAAL,CAAkCtc,IAAlC,CAAuCqc,CAAvC,CAEP,CANL,CAQH,CAbD,CAeH,CACJ,CAkPI,CAULG,aA3Pe,SAAUH,CAAV,CAAoB,CAC/B,GAAIhc,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIoc,GAAepd,GAAGkD,MAAH,CAAU8Z,EAAS/N,KAAnB,CAAnB,CACIxK,EAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgBoY,CAAhB,CAAlB,CADZ,CAEI9N,EAAU,sCAFd,CAGIxH,EAAOwH,EAAQC,IAAR,CAAaiO,CAAb,EAA2B,CAA3B,CAHX,CAKAtd,QAAQ,CAAC,uBAAyB4H,EAAKoH,WAAL,EAA1B,CAA8C,cAA9C,CAAR,CAAuE,SAAUjK,CAAV,CAAkBC,CAAlB,CAAwB,CAC3FD,EAAOmY,QAAP,CAAgBvY,CAAhB,CAD2F,CAElE,UAArB,QAAOI,GAAO2V,EAFyE,EAGvF3V,EAAO2V,EAAP,CAAUxZ,CAAV,CAHuF,CAM3F8D,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACpB,GAAKA,CAAL,EACe,IAAX,IADJ,CAEI,IAAK,GAAIC,EAAT,GAAc2X,EAAd,CAC+B,UAAvB,QAAOA,GAAS3X,CAAT,CAAP,EAA0D,YAArB,KAASA,CAAT,EAAYC,IADzD,CAEQ0X,EAAS3X,CAAT,EAAYrF,GAAGkD,MAAH,CAAUuB,EAAMY,CAAN,CAAV,CAAZ,CAFR,CAIQ2X,EAAS3X,CAAT,EAAcZ,EAAMY,CAAN,CAI7B,CAZL,CAcH,CApBD,CAsBH,CACJ,CAkNI,CAWLwO,yBAlF2B,SAAUF,CAAV,CAAe,CACtC,GAAI3S,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK8S,4BAAL,CAAkC7S,MAAlC,CAAyC0S,CAAzC,CACH,CACJ,CAkEI,CAYLI,sBAvGwB,UAAY,CAChC,GAAI/S,GAAO,IAAX,CACAlB,sDAAwD,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CAC5EA,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBoK,EAAE3K,EAAOmP,kBAAP,EAAF,EAA+BvE,IAA/B,CAAoC,SAAUxI,CAAV,CAAa,CAC7CjG,EAAK8S,4BAAL,CAAkCnT,IAAlC,CAAuCsG,CAAvC,CACH,CAFD,CAIP,CARL,CAUH,CAXD,CAcH,CA2EI,CAaLyM,uBAvFyB,SAAUC,CAAV,CAAe,CACpCC,MAAM,kBAAoBD,CAA1B,CACH,CAwEI,CAcL0J,YA/Uc,SAAU3V,CAAV,CAAgB,CAC1B,GAAI1G,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIsc,GAAW,GAAI7d,SAAQC,GAAR,CAAYC,MAAZ,CAAmB+H,EAAO,UAA1B,CAAJ,CAA0C7H,EAAOgB,IAAP,EAA1C,CAAf,CAEAf,QAAQ,CAAC,uBAAyB4H,EAAKoH,WAAL,EAA1B,CAA8C,cAA9C,CAAR,CAAuE,SAAUjK,CAAV,CAAkBC,CAAlB,CAAwB,CAC3FD,EAAOyY,QAAP,CAAgBA,CAAhB,CAD2F,CAElE,UAArB,QAAOzY,GAAO2V,EAFyE,EAGvF3V,EAAO2V,EAAP,CAAUxZ,CAAV,CAHuF,CAK3F8D,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAKga,kBAAL,CAAwBra,IAAxB,CAA6B2c,CAA7B,CAEP,CANL,CAQH,CAbD,CAeH,CACJ,CA4SI,CAeLC,aA1Te,SAAUD,CAAV,CAAoB,CAC/B,GAAItc,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIyD,GAAQuF,EAAQ0C,YAAR,CAAqB1M,GAAG0E,OAAH,CAAWE,IAAX,CAAgB0Y,CAAhB,CAArB,CAAZ,CACI5V,EAAO1H,GAAGkD,MAAH,CAAUoa,EAAS7W,QAAnB,CADX,CAGAoV,KAJe,CAKf/b,QAAQ,CAAC,uBAAyB4H,EAAKoH,WAAL,EAA1B,CAA8C,cAA9C,CAAR,CAAuE,SAAUjK,CAAV,CAAkBC,CAAlB,CAAwB,CAC3FD,EAAOyY,QAAP,CAAgB7Y,CAAhB,CAD2F,CAGlE,UAArB,QAAOI,GAAO2V,EAHyE,EAIvF3V,EAAO2V,EAAP,CAAUxZ,CAAV,CAJuF,CAO3F8D,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CAEpB,GADAsB,EAAE,iCAAF,EAAqCzF,MAArC,EACA,CAAKmE,CAAL,EACe,IAAX,IADJ,CAEI,IAAK,GAAIC,EAAT,GAAciY,EAAd,CACI,GAAIA,EAASpF,cAAT,CAAwB7S,CAAxB,CAAJ,CAAgC,CAC5B,GAAIpF,GAAkC,YAArB,KAASoF,CAAT,EAAYC,IAAZ,EAA0D,GAArB,KAASD,CAAT,EAAYC,IAAlE,CAC2B,UAAvB,QAAOgY,GAASjY,CAAT,CAAP,EAAqCpF,CAFb,CAGxBqd,EAASjY,CAAT,EAAYrF,GAAGkD,MAAH,CAAUuB,EAAMY,CAAN,CAAV,CAAZ,CAHwB,CAKxBiY,EAASjY,CAAT,EAAcZ,EAAMY,CAAN,CAErB,CAGZ,CAhBL,CAkBH,CAzBD,CA2BH,CACJ,CAwQI,CAgBLmY,eAjWiB,SAAUF,CAAV,CAAoB,CACjC,GAAItc,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAKga,kBAAL,CAAwB/Z,MAAxB,CAA+Bqc,CAA/B,CACH,CACJ,CA4UI,CAiBLvB,WAAYA,CAjBP,CAkBL0B,YAAa3B,CAlBR,CAmBL4B,iBA9VmB,SAAUxC,CAAV,CAAe,CAC9B,GAAIla,GAAO,IAAX,CACA,MAAO,WAAY,CACfwO,EAAExO,EAAKga,kBAAL,EAAF,EAA6BvL,IAA7B,CAAkC,SAAUxI,CAAV,CAAa,CAC3CA,EAAE0W,WAAF,IACH,CAFD,CADe,CAIfzC,EAAIyC,WAAJ,IAEH,CACJ,CAkUI,CAoBLC,YArFc,UAAY,CACtB,GAAI5c,GAAO,IAAX,CACI6c,EAAW,GAAIpe,SAAQC,GAAR,CAAYC,MAAZ,CAAmBme,QAAvB,CAAgCje,EAAOgB,IAAP,EAAhC,CADf,CAEAf,uDAAyD,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CAC7ED,EAAOgZ,QAAP,CAAgBA,CAAhB,CAD6E,CAEpD,UAArB,QAAOhZ,GAAO2V,EAF2D,EAGzE3V,EAAO2V,EAAP,CAAUxZ,CAAV,CAHyE,CAK7E8D,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBpE,EAAK+c,kBAAL,CAAwBpd,IAAxB,CAA6Bkd,CAA7B,CAEP,CANL,CAQH,CAbD,CAgBH,CA8CI,CAqBLG,aAlEe,SAAUH,CAAV,CAAoB,CAC/B,GAAI7c,GAAO,IAAX,CACA,MAAO,WAAY,CACf,GAAIyD,GAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgBiZ,CAAhB,CAAlB,CAAZ,CAEA/d,uDAAyD,SAAU+E,CAAV,CAAkBC,CAAlB,CAAwB,CAC7ED,EAAOgZ,QAAP,CAAgBpZ,CAAhB,CAD6E,CAEpD,UAArB,QAAOI,GAAO2V,EAF2D,EAGzE3V,EAAO2V,EAAP,CAAUxZ,CAAV,CAHyE,CAM7E8D,EAAKI,UAAL,CAAgBL,CAAhB,EACKM,IADL,CACU,SAAUC,CAAV,CAAkB,CACpB,GAAKA,CAAL,EACe,IAAX,IADJ,CAEI,IAAK,GAAIC,EAAT,GAAcwY,EAAd,CAC+B,UAAvB,QAAOA,GAASxY,CAAT,CAAP,EAA0D,YAArB,KAASA,CAAT,EAAYC,IADzD,CAEQuY,EAASxY,CAAT,EAAYrF,GAAGkD,MAAH,CAAUuB,EAAMY,CAAN,CAAV,CAAZ,CAFR,CAIQwY,EAASxY,CAAT,EAAcZ,EAAMY,CAAN,CAI7B,CAZL,CAcH,CApBD,CAsBH,CACJ,CAiBI,CAsBL4Y,eAtCiB,SAAUJ,CAAV,CAAoB,CACjC,GAAI7c,GAAO,IAAX,CACA,MAAO,WAAY,CACfA,EAAK+c,kBAAL,CAAwB9c,MAAxB,CAA+B4c,CAA/B,CACH,CACJ,CAWI,CA0BZ;ACpXDpe,QAAQC,GAAR,CAAYC,MAAZ,CAAmBue,uBAAnB,CAA6C,UAAY,CAErD,MAAO,EAEV;ACFDze,QAAQC,GAAR,CAAYC,MAAZ,CAAmBwe,mBAAnB,CAAyC,UAAY,CAEjD,GA4CI7b,GAAwBtC,GAAGuC,QAAH,CAAY,UAAY,CAE/C,CAFuB,CA5C5B,CA+CA,MAAO,CACHgB,6BAhD+B,UAAY,CAC3C,GAAIvC,GAAO,IAAX,CACIyB,EAAIC,OAAOC,IAAP,CAAY,iCAAZ,CAA+C,QAA/C,CAAyD,UAAYC,OAAOC,MAAnB,CAA4B,SAA5B,CAAwCD,OAAOE,KAA/C,CAAuD,sCAAhH,CADR,CAEIC,EAAMN,EAAEC,MAAF,EAAYD,CAFtB,CAGIO,EAAO,UAAY,CACfD,EAAIE,IAAJ,CAAWjD,GAAGkD,MAAH,CAAUlC,EAAKwC,wBAAf,CADI,CAEVf,EAAEQ,IAFQ,GAGXR,EAAEQ,IAAF,CAAS,yBAHE,EAKfF,EAAIK,KAAJ,CAAY,SAAUH,CAAV,CAAgBI,CAAhB,CAAuB,CAC/BrC,EAAKwC,wBAAL,CAA8BP,CAA9B,CAD+B,CAE3BI,CAF2B,EAG3BZ,EAAEY,KAAF,EAEP,CACJ,CAdL,CAeIN,EAAIO,WAhBmC,CAiBvCP,EAAIO,WAAJ,CAAgB,QAAhB,CAA0BN,CAA1B,CAjBuC,CAmBvCA,GAEP,CA0BM,CAEHS,6BA3B2B,UAAY,CACvC,GAAIzC,GAAO,IAAX,CACIyB,EAAIC,OAAOC,IAAP,CAAY,iCAAZ,CAA+C,QAA/C,CAAyD,UAAYC,OAAOC,MAAnB,CAA4B,SAA5B,CAAwCD,OAAOE,KAA/C,CAAuD,sCAAhH,CADR,CAEIC,EAAMN,EAAEC,MAAF,EAAYD,CAFtB,CAGIO,EAAO,UAAY,CACfD,EAAIE,IAAJ,CAAWjD,GAAGkD,MAAH,CAAUlC,EAAK0C,wBAAf,CADI,CAEVjB,EAAEQ,IAFQ,GAGXR,EAAEQ,IAAF,CAAS,yBAHE,EAKfF,EAAIK,KAAJ,CAAY,SAAUH,CAAV,CAAgBI,CAAhB,CAAuB,CAC/BrC,EAAK0C,wBAAL,CAA8BT,CAA9B,CAD+B,CAE3BI,CAF2B,EAG3BZ,EAAEY,KAAF,EAEP,CACJ,CAdL,CAeIN,EAAIO,WAhB+B,CAiBnCP,EAAIO,WAAJ,CAAgB,QAAhB,CAA0BN,CAA1B,CAjBmC,CAmBnCA,GAEP,CAIM,CAGHV,sBAAuBA,CAHpB,CAKV;ACvDD7C,QAAQC,GAAR,CAAYC,MAAZ,CAAmBye,yBAAnB,CAA+C,UAAY,CACvD,GAAIpd,GAAO,IAAX,CACInB,EAASC,QAAQ,iBAAR,CADb,CAEI2O,EAAkB,SAAUC,CAAV,CAAoBC,CAApB,CAA2BC,CAA3B,CAAiC,CAC/C9O,QAAQ,CAAC,cAAgB8O,CAAjB,CAAuB,cAAvB,CAAR,CAAgD,SAAU/J,CAAV,CAAkBC,CAAlB,CAAwB,CACpED,EAAO8J,KAAP,CAAaA,CAAb,CADoE,CAIpE7J,EAAKI,UAAL,CAAgBL,CAAhB,EACCM,IADD,CACM,SAAUC,CAAV,CAAkB,CACfA,CADe,EAEL,IAAX,IAFgB,EAGhBsJ,EAASC,CAAT,CAEP,CAND,CAQH,CAZD,CAaH,CAhBL,CAoCA,MAlBA3N,GAAK6N,QAAL,CAAgB,SAASH,CAAT,CAAmBhH,CAAnB,CAAyB,CACrC,GAAIiH,GAAQ,GAAIlP,SAAQC,GAAR,CAAYC,MAAZ,CAAmB+H,EAAO,OAA1B,CAAJ,CAAuC7H,EAAOgB,IAAP,EAAvC,CAAZ,CACI4N,EAAgBC,CAAhB,CAA0BC,CAA1B,CAAiC,SAAWjH,EAAKoH,WAAL,EAA5C,CACP,CAeD,CAbA9N,EAAK+N,SAAL,CAAiB,SAASJ,CAAT,CAAgBD,CAAhB,CAA0B,CACvC,MAAO,WAAW,CACd,GAAIM,GAAYhP,GAAGkD,MAAH,CAAUyL,EAAMM,KAAhB,CAAhB,CACIxK,EAAQzE,GAAG0E,OAAH,CAAWC,MAAX,CAAkB3E,GAAG0E,OAAH,CAAWE,IAAX,CAAgB+J,CAAhB,CAAlB,CADZ,CAEIO,EAAU,mCAFd,CAGIxH,EAAOwH,EAAQC,IAAR,CAAaH,CAAb,EAAwB,CAAxB,CAHX,CAMAP,EAAgBC,CAAhB,CAA0BjK,CAA1B,CAAiC,SAAWiD,EAAKoH,WAAL,EAA5C,CAEH,CACJ,CAED,CAAO9N,CACV,EAEDvB,QAAQC,GAAR,CAAYC,MAAZ,CAAmBye,yBAAnB,CAA6CC,SAA7C,CAAyD,GAAI5e,SAAQC,GAAR,CAAYC,MAAZ,CAAmB2e","file":"__partial.min.js","sourcesContent":["/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nvar bespoke = bespoke || {};\r\nbespoke.sph = bespoke.sph || {};\r\nbespoke.sph.domain = bespoke.sph.domain || {};\r\n\r\n\r\nbespoke.sph.domain.ActivityPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        hasError = ko.observable(),\r\n        breakpoint = ko.observable(false),\r\n        selected = ko.observable(false),\r\n        hit = ko.observable(false),\r\n        errors = ko.observableArray();\r\n    return {\r\n        breakpoint: breakpoint,\r\n        hit: hit,\r\n        selected: selected,\r\n        hasError: hasError,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.AssemblyFieldPartial = function () {\r\n    var system = require(objectbuilders.system),\r\n        addParameter = function () {\r\n            this.MethodArgCollection.push(new bespoke.sph.domain.MethodArg(system.guid()));\r\n        },\r\n        removeParameter = function(p) {\r\n            var self = this;\r\n            return function() {\r\n                self.MethodArgCollection.remove(p);\r\n            };\r\n        };\r\n    return {\r\n        addParameter: addParameter,\r\n        removeParameter: removeParameter\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.BarChartItemPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addSeries = function() {\r\n            this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(system.guid()));\r\n        },\r\n        removeSeries = function (series) {\r\n            var self = this;\r\n            return function() {\r\n                self.ChartSeriesCollection.remove(series);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addSeries: addSeries,\r\n        removeSeries: removeSeries\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.BusinessRulePartial = function (model) {\r\n\r\n    var system = require('durandal/system'),\r\n        addFilter = function () {\r\n            var self = this,\r\n                br = new bespoke.sph.domain.Rule(system.guid());\r\n\r\n            br.Left({ Name: ko.observable(\"+ Field\") });\r\n            br.Right({ Name: ko.observable(\"+ Field\") });\r\n\r\n            self.FilterCollection.push(br);\r\n\r\n        },\r\n        removeFilter = function (br) {\r\n            var self = this;\r\n            return function () {\r\n                self.FilterCollection.remove(br);\r\n            };\r\n        },\r\n        addRule = function () {\r\n            var self = this,\r\n                br = new bespoke.sph.domain.Rule(system.guid());\r\n\r\n            br.Left({ Name: ko.observable(\"+ Field\") });\r\n            br.Right({ Name: ko.observable(\"+ Field\") });\r\n\r\n            self.RuleCollection.push(br);\r\n\r\n        },\r\n        removeRule = function (br) {\r\n            var self = this;\r\n            return function () {\r\n                self.RuleCollection.remove(br);\r\n            };\r\n        };\r\n\r\n\r\n\r\n    return {\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter,\r\n        addRule: addRule,\r\n        removeRule: removeRule\r\n    };\r\n};\r\n","/// <reference path=\"../../Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../SphApp/schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.ButtonPartial = function () {\r\n\r\n    var editCommand = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.Command);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.Command(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        editOperationSuccessCallback = function () {\r\n            var self = this,\r\n                w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n                wdw = w.window || w,\r\n                init = function () {\r\n                    wdw.code = ko.unwrap(self.OperationSuccessCallback);\r\n                    if (!w.code) {\r\n                        w.code = \"//insert your code here\";\r\n                    }\r\n                    wdw.saved = function (code, close) {\r\n                        self.OperationSuccessCallback(code);\r\n                        if (close) {\r\n                            w.close();\r\n                        }\r\n                    };\r\n                };\r\n            if (wdw.attachEvent) { // for ie\r\n                wdw.attachEvent(\"onload\", init);\r\n            } else {\r\n                init();\r\n            }\r\n        },\r\n    editOperationFailureCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationFailureCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationFailureCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        canSetSuccessCallback = ko.computed(function () {\r\n\r\n        });\r\n    return {\r\n        editCommand: editCommand,\r\n        editOperationSuccessCallback: editOperationSuccessCallback,\r\n        editOperationFailureCallback: editOperationFailureCallback,\r\n        canSetSuccessCallback: canSetSuccessCallback\r\n    };\r\n};","bespoke.sph.domain.CatchScopePartial = function () {\r\n\r\n\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n\r\n\r\nbespoke.sph.domain.ChildEntityListViewPartial = function (model) {\r\n    // ViewColumn\r\n    var system = require('durandal/system'),\r\n        addViewColumn = function () {\r\n            this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn({ WebId: system.guid(),Header :'<New Column>'}));\r\n        },\r\n        removeViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addSort = function () {\r\n            this.SortCollection.push(new bespoke.sph.domain.Sort(system.guid()));\r\n        },\r\n        removeSort = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.SortCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n    editViewColumn = function (vc) {\r\n        return function () {\r\n            var clone = ko.mapping.fromJS(ko.mapping.toJS(vc));\r\n\r\n            require(['viewmodels/view.column.dialog', 'durandal/app'], function (dialog, app2) {\r\n                dialog.column(clone);\r\n                dialog.entity(model.Entity());\r\n\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            for (var g in vc) {\r\n                                if (typeof vc[g] === \"function\" && vc[g].name === \"observable\") {\r\n                                    vc[g](ko.unwrap(clone[g]));\r\n                                } else {\r\n                                    vc[g] = clone[g];\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n        };\r\n    };\r\n    return {\r\n        addSort: addSort,\r\n        removeSort: removeSort,\r\n        addViewColumn: addViewColumn,\r\n        editViewColumn: editViewColumn,\r\n        removeViewColumn: removeViewColumn\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.ChildWorkflowActivityPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        removeMapping = function (map) {\r\n            var self = this;\r\n            return function () {\r\n                self.PropertyMappingCollection.remove(map);\r\n            };\r\n        },\r\n        addMapping = function () {\r\n            var map = new bespoke.sph.domain.PropertyMapping(system.guid());\r\n            this.PropertyMappingCollection.push(map);\r\n        },\r\n        removeExecutedMapping = function (map) {\r\n            var self = this;\r\n            return function () {\r\n                self.ExecutedPropertyMappingCollection.remove(map);\r\n            };\r\n        },\r\n        addExecutedMapping = function () {\r\n            var map = new bespoke.sph.domain.PropertyMapping(system.guid());\r\n            this.ExecutedPropertyMappingCollection.push(map);\r\n        };\r\n\r\n    var vm = {\r\n        addExecutedMapping: addExecutedMapping,\r\n        removeExecutedMapping: removeExecutedMapping,\r\n        addMapping: addMapping,\r\n        removeMapping: removeMapping\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ComboBoxPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addItem = function () {\r\n            var self = this;\r\n            var item = new bespoke.sph.domain.ComboBoxItem(system.guid());\r\n            self.ComboBoxItemCollection.push(item);\r\n\r\n        },\r\n        removeItem = function (item) {\r\n            var self = this;\r\n            return function () {\r\n                self.ComboBoxItemCollection.remove(item);\r\n            };\r\n        };\r\n    return {\r\n        addItem: addItem,\r\n        removeItem: removeItem\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ComplexMemberPartial = function(model) {\r\n    model.Name.subscribe(function(name) {\r\n        if (!ko.unwrap(model.TypeName)) {\r\n            $.get(\"/entity-definition/singular/\" + name).done(model.TypeName);\r\n        }\r\n    });\r\n\r\n}","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\nbespoke.sph.domain.ConstantFieldPartial = function (model, option) {\r\n\r\n    var vm = {\r\n        Type: ko.observable(),\r\n        Value: ko.observable(option.Value)\r\n    };\r\n\r\n    vm.Value.subscribe(function(v) {\r\n        if (!ko.unwrap(model.Name)) {\r\n            model.Name(v);\r\n        }\r\n    });\r\n    return vm;\r\n};","/// <reference path=\"../../Scripts/jquery-2.1.1.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n\r\n\r\nbespoke.sph.domain.CorrelationTypePartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeCorrelationProperty = function (prop) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationPropertyCollection.remove(prop);\r\n            };\r\n        },\r\n        addCorrelationProperty = function () {\r\n            this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(system.guid()));\r\n        };\r\n    return {\r\n        removeCorrelationProperty: removeCorrelationProperty,\r\n        addCorrelationProperty: addCorrelationProperty\r\n\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.CreateEntityActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addPropertyMapping = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var mapping = new bespoke.sph.domain[type + 'Mapping'](system.guid());\r\n                self.PropertyMappingCollection.push(mapping);\r\n            };\r\n        },\r\n        removePropertyMapping = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.PropertyMappingCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addPropertyMapping: addPropertyMapping,\r\n        removePropertyMapping: removePropertyMapping\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.DataGridItemPartial = function () {\r\n\r\n    // DataGridGroup\r\n    var system = require('durandal/system'),\r\n        addDataGridGroupDefinition = function () {\r\n            this.DataGridGroupDefinitionCollection.push(new bespoke.sph.domain.DataGridGroupDefinition(system.guid()));\r\n        },\r\n        removeDataGridGroupDefinition = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.DataGridGroupDefinitionCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addColumn = function () {\r\n            var self = this;\r\n            self.DataGridColumnCollection.push(new bespoke.sph.domain.DataGridColumn(system.guid()));\r\n        },\r\n        removeColumn = function (column) {\r\n            var self = this;\r\n            return function () {\r\n                self.DataGridColumnCollection.remove(column);\r\n            };\r\n        };\r\n\r\n    return {\r\n        addColumn: addColumn,\r\n        removeColumn: removeColumn,\r\n        addDataGridGroupDefinition: addDataGridGroupDefinition,\r\n        removeDataGridGroupDefinition: removeDataGridGroupDefinition\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.DecisionActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function() {\r\n            this.DecisionBranchCollection.push(new bespoke.sph.domain.DecisionBranch(system.guid()));\r\n        },\r\n        removeBranch = function(branch) {\r\n            var self = this;\r\n            return function() {\r\n                self.DecisionBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function() {\r\n            return this.DecisionBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.DelayActivityPartial = function () {\r\n\r\n    return {\r\n        isAsync:true\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.DelimitedTextFormatterPartial = function (model) {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        selectedRow = ko.observable(new bespoke.sph.domain.FlatFileDetailTag()),\r\n        parentOptions = ko.observableArray([\"$record\"]),\r\n        childNameChanged = function (name) {\r\n            if (name) {\r\n                if (parentOptions().indexOf(name) < 0) {\r\n                    parentOptions.push(name);\r\n                }\r\n            }\r\n        },\r\n        removeDetailsRow = function (child) {\r\n            var self = this;\r\n            return function () {\r\n                self.DetailRowCollection.remove(child);\r\n                if (child.nameChangedSubscription) {\r\n                    child.nameChangedSubscription.dispose();\r\n                }\r\n            };\r\n        },\r\n        addDetailsRow = function () {\r\n            const child = new bespoke.sph.domain.FlatFileDetailTag(system.guid());\r\n            child.nameChangedSubscription = child.Name.subscribe(childNameChanged);\r\n            this.DetailRowCollection.push(child);\r\n            selectedRow(child);\r\n        },\r\n        selectRow = function(row) {\r\n            selectedRow(row);\r\n        },\r\n        isWizardOk = ko.computed(function() {\r\n            return ko.unwrap(model.SampleStoreId) && ko.unwrap(model.Delimiter);\r\n        });\r\n\r\n    const vm = {\r\n        isWizardOk : isWizardOk,\r\n        selectedRow: selectedRow,\r\n        selectRow : selectRow,\r\n        addDetailsRow: addDetailsRow,\r\n        removeDetailsRow: removeDetailsRow,\r\n        parentOptions: parentOptions\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","\r\nbespoke.sph.domain.EntityChartPartial = function (model) {\r\n    var context = require(objectbuilders.datacontext),\r\n        pin = function () {\r\n            if (typeof model.IsDashboardItem === \"function\") {\r\n                model.IsDashboardItem(true);\r\n            } else {\r\n                model.IsDashboardItem = ko.observable(true);\r\n            }\r\n\r\n            var tcs = new $.Deferred();\r\n\r\n            context.post(ko.mapping.toJSON(model), '/sph/entitychart/save')\r\n                .done(tcs.resolve);\r\n\r\n            return tcs.promise();\r\n        },\r\n        unpin = function() {\r\n            if (typeof model.IsDashboardItem === \"function\") {\r\n                model.IsDashboardItem(false);\r\n            } else {\r\n                model.IsDashboardItem = ko.observable(false);\r\n            }\r\n\r\n            var tcs = new $.Deferred();\r\n\r\n            context.post(ko.mapping.toJSON(model), '/sph/entitychart/save')\r\n                .done(tcs.resolve);\r\n\r\n            return tcs.promise();\r\n        };\r\n    return {\r\n        pin: pin,\r\n        unpin : unpin\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ServiceContractPartial = function () {\r\n    var context = require(objectbuilders.datacontext),\r\n        publish = function (ed) {\r\n            return context.post(ko.toJSON(ed), \"/entity-definition/publish/service-contract\");\r\n        };\r\n\r\n    return {\r\n        publish: publish\r\n    };\r\n}\r\nbespoke.sph.domain.EntityDefinitionPartial = function () {\r\n    var system = require(\"durandal/system\"),\r\n        app = require(\"durandal/app\"),\r\n        context = require(objectbuilders.datacontext),\r\n        addMember = function () {\r\n            this.MemberCollection.push(new bespoke.sph.domain.Member({\r\n                WebId: system.guid(),\r\n                Boost: 1\r\n            }));\r\n        },\r\n        removeMember = function (floor) {\r\n            var self = this;\r\n            return function () {\r\n                self.MemberCollection.remove(floor);\r\n            };\r\n        },\r\n        addEntityOperation = function () {\r\n            this.EntityOperationCollection.push(new bespoke.sph.domain.EntityOperation({\r\n                WebId: system.guid()\r\n            }));\r\n        }, save = function () {\r\n            var self = this;\r\n            context.post(ko.toJSON(self), \"/entity-definition\")\r\n            .then(function (result) {\r\n                if (result.success) {\r\n                }\r\n            });\r\n        },\r\n        removeEntityOperation = function (operation) {\r\n            var self = this;\r\n            return function () {\r\n                var tcs = new $.Deferred();\r\n                app.showMessage(\"Are you sure you want to remove this operation, this operation cannot be undone and will commit the entire changes to your EntityDefinition\", \"Reactive Developer\", [\"Yes\", \"No\"])\r\n                    .done(function (dialogResult) {\r\n                        if (dialogResult === \"Yes\") {\r\n                            self.EntityOperationCollection.remove(operation);\r\n                            save.call(self);\r\n                        }\r\n                    });\r\n\r\n                return tcs.promise();\r\n            };\r\n        },\r\n        editMember = function (member) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/member.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                    dialog.member(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BlockCollection.replace(member, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        addBusinessRule = function () {\r\n            var br = new bespoke.sph.domain.BusinessRule({ WebId: system.guid() });\r\n            var self = this;\r\n\r\n            require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                dialog.rule(br);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.BusinessRuleCollection.push(br);\r\n                        }\r\n                    });\r\n            });\r\n\r\n        },\r\n        editBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = context.toObservable(ko.mapping.toJS(rule));\r\n                    dialog.rule(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result == \"OK\") {\r\n                                self.BusinessRuleCollection.replace(rule, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        removeBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                self.BusinessRuleCollection.remove(rule);\r\n            };\r\n        },\r\n        editMemberMap = function (member) {\r\n            var building = this;\r\n            return function () {\r\n                console.log(\"show map \", building);\r\n                console.log(\" on member \", member);\r\n                require([\"viewmodels/member.map\", \"durandal/app\"], function (dialog, app) {\r\n                    dialog.init(building.BuildingId(), member.MemberPlanStoreId());\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (result == \"OK\") {\r\n                                member.MemberPlanStoreId(dialog.spatialStoreId());\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        };\r\n    return {\r\n        addEntityOperation: addEntityOperation,\r\n        removeEntityOperation: removeEntityOperation,\r\n        addMember: addMember,\r\n        editMember: editMember,\r\n        removeMember: removeMember,\r\n        addBusinessRule: addBusinessRule,\r\n        editBusinessRule: editBusinessRule,\r\n        removeBusinessRule: removeBusinessRule,\r\n        editMemberMap: editMemberMap\r\n    };\r\n};","/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.EntityFormPartial = function () {\r\n\r\n    var editOperationSuccessCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationSuccessCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationSuccessCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n    editOperationFailureCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationFailureCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationFailureCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        canSetSuccessCallback = ko.computed(function () {\r\n\r\n        });\r\n    return {\r\n        editOperationSuccessCallback: editOperationSuccessCallback,\r\n        editOperationFailureCallback: editOperationFailureCallback,\r\n        canSetSuccessCallback: canSetSuccessCallback\r\n    };\r\n};","/// <reference path=\"../../Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n\r\nbespoke.sph.domain.EntityLookupElementPartial = function () {\r\n\r\n    var editDisplayTemplate = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.Command);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.DisplayTemplate(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n    editColumns = function () {\r\n            var self = this;\r\n            require([\"viewmodels/members.selector.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.entity(self.Entity());\r\n                dialog.selectedMembers(self.LookupColumnCollection());\r\n                app2.showDialog(dialog,self.Entity())\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.LookupColumnCollection(dialog.selectedMembers());\r\n                        }\r\n                    });\r\n\r\n            });\r\n        },\r\n        editFilter = function() {\r\n\r\n            var self = this;\r\n            require([\"viewmodels/entity.lookup.filter.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.entity(self.Entity());\r\n                dialog.selectedFilters(self.FilterCollection());\r\n                app2.showDialog(dialog, self.Entity())\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.FilterCollection(dialog.selectedFilters());\r\n                        }\r\n                    });\r\n\r\n            });\r\n        };\r\n\r\n    return {\r\n        editDisplayTemplate: editDisplayTemplate,\r\n        editColumns: editColumns,\r\n        editFilter: editFilter\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/SphApp/services/system.js\" />\r\n/// <reference path=\"/SphApp/schemas/form.designer.g.js\" />\r\n\r\n\r\nbespoke.sph.domain.EntityViewPartial = function () {\r\n\r\n    // Filter\r\n    var system = require(\"durandal/system\"),\r\n        addConditionalFormatting = function () {\r\n            this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(system.guid()));\r\n        },\r\n        removeConditionalFormatting = function (cf) {\r\n            var self = this;\r\n            return function () {\r\n                self.ConditionalFormattingCollection.remove(cf);\r\n            };\r\n\r\n        },\r\n        addRouteParameter = function () {\r\n            this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(system.guid()));\r\n        },\r\n        removeRouteParameter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.RouteParameterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addViewColumn = function () {\r\n            this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn(system.guid()));\r\n        },\r\n        removeViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addFilter = function () {\r\n            this.FilterCollection.push(new bespoke.sph.domain.Filter(system.guid()));\r\n        },\r\n        removeFilter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.FilterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addSort = function () {\r\n            this.SortCollection.push(new bespoke.sph.domain.Sort(system.guid()));\r\n        },\r\n        removeSort = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.SortCollection.remove(obj);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addRouteParameter: addRouteParameter,\r\n        removeRouteParameter: removeRouteParameter,\r\n        addConditionalFormatting: addConditionalFormatting,\r\n        removeConditionalFormatting: removeConditionalFormatting,\r\n        addViewColumn: addViewColumn,\r\n        removeViewColumn: removeViewColumn,\r\n        addSort: addSort,\r\n        removeSort: removeSort,\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ExecutedActivityPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        breakpoint = ko.observable(false),\r\n        hit = ko.observable(false),\r\n        errors = ko.observableArray();\r\n    return {\r\n        breakpoint: breakpoint,\r\n        hit: hit,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.FilterPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n          showFieldDialog = function (accessor, field, path) {\r\n              require([\"viewmodels/\" + path, \"durandal/app\"], function (dialog, app2) {\r\n                  dialog.field(field);\r\n                  if (typeof dialog.entity === \"function\") {\r\n                      //dialog.entity();\r\n                      console.log(\"found the entity dialog :\" + dialog.entity.name);\r\n                  }\r\n                  app2.showDialog(dialog)\r\n                  .done(function (result) {\r\n                      if (!result) return;\r\n                      if (result === \"OK\") {\r\n                          accessor(field);\r\n                      }\r\n                  });\r\n\r\n              });\r\n          },\r\n          addField = function (accessor, type) {\r\n              var field = new bespoke.sph.domain[type + \"Field\"](system.guid());\r\n              showFieldDialog(accessor, field, \"field.\" + type.toLowerCase());\r\n          },\r\n          editField = function (field) {\r\n              var self = this;\r\n              return function () {\r\n                  var fieldType = ko.unwrap(field.$type),\r\n                      clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                      pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                      type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                  showFieldDialog(self.Field, clone, \"field.\" + type.toLowerCase());\r\n              };\r\n          };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../../Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.FormDialogPartial = function (model) {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        init = function() {\r\n\r\n            var buttons = ko.unwrap(model.DialogButtonCollection);\r\n            _(buttons).each(function (v) {\r\n                v.canMoveDown(true);\r\n                v.canMoveUp(true);\r\n            });\r\n            var first = _(buttons).first(),\r\n                last = _(buttons).last();\r\n            if (first) {\r\n                first.canMoveUp(false);\r\n            }\r\n            if (last) {\r\n                last.canMoveDown(false);\r\n            }\r\n        },\r\n        addDialogButton = function () {\r\n            model.DialogButtonCollection.push(new bespoke.sph.domain.DialogButton({ WebId: system.guid(), canMoveDown: false }));\r\n            init();\r\n        },\r\n        removeDialogButton = function (btn) {\r\n            model.DialogButtonCollection.remove(btn);\r\n            init();\r\n        },\r\n        move = function (array, from, to) {\r\n            if (to === from) return;\r\n\r\n            var target = array[from];\r\n            var increment = to < from ? -1 : 1;\r\n\r\n            for (var k = from; k !== to; k += increment) {\r\n                array[k] = array[k + increment];\r\n            }\r\n            array[to] = target;\r\n        },\r\n        arrange = function (btn, step) {\r\n\r\n            var index = model.DialogButtonCollection().indexOf(btn);\r\n            var temps = ko.unwrap(model.DialogButtonCollection);\r\n            move(temps, index, index + step);\r\n\r\n            _(temps).each(function (v) {\r\n                v.canMoveDown(true);\r\n                v.canMoveUp(true);\r\n            });\r\n            _(temps).first().canMoveUp(false);\r\n            _(temps).last().canMoveDown(false);\r\n            model.DialogButtonCollection(temps);\r\n        },\r\n        moveDown = function (btn) {\r\n            arrange(btn, 1);\r\n        },\r\n        moveUp = function (btn) {\r\n            arrange(btn, -1);\r\n        };\r\n\r\n    init();\r\n\r\n    return {\r\n        removeDialogButton: removeDialogButton,\r\n        addDialogButton: addDialogButton,\r\n        moveDown: moveDown,\r\n        moveUp: moveUp\r\n    };\r\n};\r\nbespoke.sph.domain.DialogButtonPartial = function (model) {\r\n\r\n    var canMoveUp = ko.observable(true),\r\n        canMoveDown = ko.observable(true);\r\n\r\n    return {\r\n        canMoveDown: canMoveDown,\r\n        canMoveUp: canMoveUp\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.FormElementPartial = function () {\r\n    \r\n    return {\r\n    };\r\n};\r\n\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.HtmlElementPartial = function () {\r\n\r\n    var editHtml = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=html\", '_blank', 'height=' + screen.height + ',width=' + screen.width + ',toolbar=0,location=0,fullscreen=yes'),\r\n            init = function () {\r\n                w.code = ko.unwrap(self.Text);\r\n                w.saved = function (code, close) {\r\n                    self.Text(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (w.attachEvent) { // for ie\r\n            w.attachEvent('onload', init);\r\n        } else {\r\n            init();\r\n        }\r\n    };\r\n    return {\r\n        editHtml: editHtml\r\n    };\r\n};","\r\nbespoke.sph.domain.FormTemplatePartial = function () {\r\n\r\n    var vm = {\r\n    };\r\n    return vm;\r\n}","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.IntervalSchedulePartial = function () {\r\n    var icon = ko.observable(),\r\n        name = ko.observable();\r\n    return {\r\n        icon: icon,\r\n        name : name\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.LineChartItemPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addSeries = function() {\r\n            this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(system.guid()));\r\n        },\r\n        removeSeries = function (series) {\r\n            var self = this;\r\n            return function() {\r\n                self.ChartSeriesCollection.remove(series);\r\n            };\r\n\r\n        };\r\n    return {\r\n        addSeries: addSeries,\r\n        removeSeries: removeSeries\r\n    };\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.ListenActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function () {\r\n            var self = this;\r\n            var branch = new bespoke.sph.domain.ListenBranch(system.guid());\r\n            self.ListenBranchCollection.push(branch);\r\n\r\n        },\r\n        removeBranch = function (branch) {\r\n            var self = this;\r\n            return function () {\r\n                self.ListenBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function () {\r\n            return this.ListenBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ListViewPartial = function (model) {\r\n\r\n    // ListViewColumn\r\n    var system = require('durandal/system'),\r\n        addListViewColumn = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var column = new bespoke.sph.domain.ListViewColumn(system.guid()),\r\n                    input = bespoke.sph.domain[type](system.guid());\r\n\r\n\r\n                column.Path.subscribe(function(v) {\r\n                    input.Path(v);\r\n                });\r\n                column.Label.subscribe(function(v) {\r\n                    input.Label(v);\r\n                });\r\n\r\n                column.Input(input);\r\n                input.isSelected = ko.observable(false);\r\n                self.ListViewColumnCollection.push(column);\r\n            };\r\n        },\r\n        removeListViewColumn = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.ListViewColumnCollection.remove(obj);\r\n            };\r\n\r\n        };\r\n\r\n    _(model.ListViewColumnCollection()).each(function(v) {\r\n        v.Input().isSelected = ko.observable(false);\r\n    });\r\n\r\n    return {\r\n        addListViewColumn: addListViewColumn,\r\n        removeListViewColumn: removeListViewColumn\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.ListViewColumnPartial = function (model) {\r\n\r\n    try {\r\n\r\n        var pattern1 = /Bespoke\\.Sph\\.Domain\\.(.*?),/,\r\n            input1 = ko.unwrap(model.Input),\r\n            name1 = null,\r\n            icon1 = null;\r\n        if (input1) {\r\n            name1 = pattern1.exec(ko.unwrap(input1.$type))[1],\r\n            icon1 = '/images/form.element.' + name1 + '.png';\r\n        }\r\n\r\n\r\n    } catch (err) {\r\n\r\n    }\r\n    icon1 = icon1 || '/images/form.element.textbox.png';\r\n    var icon = ko.observable(icon1);\r\n    model.Input.subscribe(function (c) {\r\n        if (!c.$type) {\r\n            return;\r\n        }\r\n\r\n        var pattern = /Bespoke\\.Sph\\.Domain\\.(.*?),/,\r\n            name = pattern.exec(ko.unwrap(c.$type))[1];\r\n        icon('/images/form.element.' + name + '.png');\r\n\r\n\r\n    });\r\n    return {\r\n        icon: icon\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.MappingActivityPartial = function () {\r\n    var system = require(\"durandal/system\"),\r\n        addMappingSource = function () {\r\n            var self = this;\r\n            var mapping = new bespoke.sph.domain[\"MappingSource\"](system.guid());\r\n            self.MappingSourceCollection.push(mapping);\r\n\r\n        },\r\n        removeMappingSource = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.MappingSourceCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addMappingSource: addMappingSource,\r\n        removeMappingSource: removeMappingSource\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../schemassystem.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\n\r\nbespoke.sph.domain.MemberPartial = function (model) {\r\n    var system = require(\"durandal/system\"),\r\n        addMember = function () {\r\n            this.MemberCollection.push(new bespoke.sph.domain.Member(system.guid()));\r\n        },\r\n        editMember = function (member) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/member.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                    dialog.member(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BlockCollection.replace(member, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        editPermission = function (member) {\r\n            var self = this;\r\n            require([\"viewmodels/field.permission.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                dialog.member(clone);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.FieldPermissionCollection(clone.FieldPermissionCollection());\r\n                        }\r\n                    });\r\n            });\r\n\r\n        },\r\n        removeMember = function (floor) {\r\n            var self = this;\r\n            return function () {\r\n                self.MemberCollection.remove(floor);\r\n            };\r\n        },\r\n        editMemberMap = function (member) {\r\n            var building = this;\r\n            return function () {\r\n                console.log(\"show map \", building);\r\n                console.log(\" on member \", member);\r\n                require([\"viewmodels/member.map\", \"durandal/app\"], function (dialog, app) {\r\n                    dialog.init(building.BuildingId(), member.MemberPlanStoreId());\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (result === \"OK\") {\r\n                                member.MemberPlanStoreId(dialog.spatialStoreId());\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require([\"viewmodels/\" + path, \"durandal/app\"], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            var field = new bespoke.sph.domain[type + \"Field\"](system.guid());\r\n            showFieldDialog(accessor, field, \"field.\" + type.toLowerCase());\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field || self.DefaultValue, clone, \"field.\" + type.toLowerCase());\r\n            };\r\n        },\r\n        removeField = function () {\r\n            var self = this,\r\n                accessor = self.Field || self.DefaultValue;\r\n            return function () {\r\n                accessor({ Name: ko.observable(\"[Select a value]\") });\r\n            };\r\n        };\r\n\r\n\r\n    model.AllowMultiple.subscribe(function(array) {\r\n        if (array) {\r\n            model.DefaultValue(null);\r\n        } else {\r\n            model.DefaultValue({ Name: ko.observable(\"[Select a value]\") });\r\n        }\r\n    });\r\n\r\n    return {\r\n        editPermission: editPermission,\r\n        addMember: addMember,\r\n        editMember: editMember,\r\n        editMemberMap: editMemberMap,\r\n        removeMember: removeMember,\r\n        addField: addField,\r\n        removeField: removeField,\r\n        editField: editField\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.MethodArgPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field, clone, 'field.' + type.toLowerCase());\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.NotificationActivityPartial = function(model) {\r\n    \r\n    if (!model.From()) {\r\n        model.From(\"admin@@sph.my\");\r\n    }\r\n    return {\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.OperationEndpointPartial = function () {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        removeChildAction = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.SetterActionChildCollection.remove(child);\r\n            };\r\n        },\r\n        addChildAction = function() {\r\n            var child = new bespoke.sph.domain.SetterActionChild(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.SetterActionChildCollection.push(child);\r\n        },\r\n        removePatchPath = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.PatchPathCollection.remove(child);\r\n            };\r\n        },\r\n        addPatchPath = function () {\r\n            var child = new bespoke.sph.domain.PatchSetter({ WebId: system.guid() , IsRequired: true});\r\n            this.PatchPathCollection.push(child);\r\n        },\r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert(\"not implemented\" + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        removePatchPath: removePatchPath,\r\n        addPatchPath: addPatchPath,\r\n        addChildAction: addChildAction,\r\n        removeChildAction: removeChildAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ParallelActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addBranch = function() {\r\n            this.ParallelBranchCollection.push(new bespoke.sph.domain.ParallelBranch(system.guid()));\r\n        },\r\n        removeBranch = function(branch) {\r\n            var self = this;\r\n            return function() {\r\n                self.ParallelBranchCollection.remove(branch);\r\n            };\r\n        },\r\n        multipleEndPoints = function() {\r\n            return this.ParallelBranchCollection();\r\n        };\r\n    return {\r\n        addBranch: addBranch,\r\n        removeBranch: removeBranch,\r\n        multipleEndPoints: multipleEndPoints\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"/SphApp/services/system.js\" />\r\n/// <reference path=\"/SphApp/schemas/form.designer.g.js\" />\r\n\r\n\r\nbespoke.sph.domain.QueryEndpointPartial = function (model) {\r\n\r\n    // Filter\r\n    var system = require(\"durandal/system\"),\r\n        addRouteParameter = function () {\r\n            this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(system.guid()));\r\n        },\r\n        removeRouteParameter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.RouteParameterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addFilter = function () {\r\n            this.FilterCollection.push(new bespoke.sph.domain.Filter(system.guid()));\r\n        },\r\n        removeFilter = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.FilterCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        addSort = function () {\r\n            this.SortCollection.push(new bespoke.sph.domain.Sort(system.guid()));\r\n        },\r\n        removeSort = function (obj) {\r\n            var self = this;\r\n            return function () {\r\n                self.SortCollection.remove(obj);\r\n            };\r\n\r\n        },\r\n        allowQueryCache = ko.observable(ko.unwrap(model.CacheFilter));\r\n    return {\r\n        addRouteParameter: addRouteParameter,\r\n        removeRouteParameter: removeRouteParameter,\r\n        addSort: addSort,\r\n        removeSort: removeSort,\r\n        addFilter: addFilter,\r\n        removeFilter: removeFilter,\r\n        allowQueryCache: allowQueryCache\r\n    };\r\n};","bespoke.sph.domain.ReceiveActivityPartial = function () {\r\n    //\r\n    var system = require('durandal/system'),\r\n        removeCorrelationProperty = function (prop) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationPropertyCollection.remove(prop);\r\n            };\r\n        },\r\n        addCorrelationProperty = function () {\r\n            this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(system.guid()));\r\n        };\r\n\r\n    return {\r\n        removeCorrelationProperty: removeCorrelationProperty,\r\n        addCorrelationProperty: addCorrelationProperty\r\n\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\nbespoke.sph.domain.ReceivePortPartial = function (port) {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        isWizardOk = ko.computed(function () {\r\n            const ok = ko.unwrap(port.Name) && ko.unwrap(port.Formatter) && ko.unwrap(port.Entity);\r\n            if ( port.TextFormatter() && ko.isComputed(port.TextFormatter().isWizardOk))\r\n                return ok && port.TextFormatter().isWizardOk();\r\n            return ok;\r\n        }),\r\n        removeHeaderFieldMapping = function (child) {\r\n            var self = this;\r\n            return function () {\r\n                self.FieldMappingCollection.remove(child);\r\n            };\r\n        },\r\n        addHeaderFieldMapping = function () {\r\n            const tcs = new $.Deferred(),\r\n                br = new bespoke.sph.domain.HeaderFieldMapping({ WebId: system.guid() }),\r\n                self = this;\r\n\r\n            require([\"viewmodels/receive.port.header.field.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                dialog.field(br);\r\n                dialog.port(self);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (result === \"OK\") {\r\n                            self.FieldMappingCollection.push(br);\r\n                            tcs.resolve(br);\r\n                        } else {\r\n                            tcs.resolve(false);\r\n                        }\r\n                    });\r\n            });\r\n\r\n            return tcs.promise();\r\n        },\r\n        addUriFieldMapping = function () {\r\n            const tcs = new $.Deferred(),\r\n                br = new bespoke.sph.domain.UriFieldMapping({ WebId: system.guid() }),\r\n                self = this;\r\n\r\n            require([\"viewmodels/receive.port.uri.field.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                dialog.field(br);\r\n                dialog.port(self);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (result === \"OK\") {\r\n                            self.FieldMappingCollection.push(br);\r\n                            tcs.resolve(br);\r\n                        } else {\r\n                            tcs.resolve(false);\r\n                        }\r\n                    });\r\n            });\r\n\r\n            return tcs.promise();\r\n        },\r\n        editHeaderFieldMapping = function (br) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/receive.port.header.field.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(br));\r\n                    dialog.location(clone);\r\n                    dialog.port(self);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.FieldMappingCollection.replace(br, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            console.warn(`Not implemented ${dll}`);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    return {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        editHeaderFieldMapping: editHeaderFieldMapping,\r\n        removeHeaderFieldMapping: removeHeaderFieldMapping,\r\n        addHeaderFieldMapping: addHeaderFieldMapping,\r\n        addUriFieldMapping: addUriFieldMapping,\r\n        isWizardOk: isWizardOk\r\n    };\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.DailySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Daily Schedule\"),\r\n        icon: ko.observable(\"fa fa-calendar\")\r\n    };\r\n};\r\nbespoke.sph.domain.WeeklySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Weekly Schedule\"),\r\n        icon: ko.observable(\"fa fa-th-list\")\r\n    };\r\n};\r\nbespoke.sph.domain.MonthlySchedulePartial = function () {\r\n\r\n    return {\r\n        name: ko.observable(\"Monthly Schedule\"),\r\n        icon: ko.observable(\"fa fa-calendar-o\"),\r\n        dateOptions : _.range(1,31)\r\n    };\r\n};\r\n\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../prototypes/IntervalScheduleContainer.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\nbespoke.sph.domain.ReportDeliveryPartial = function () {\r\n\r\n    return new bespoke.sph.domain.IntervalScheduleContainer();\r\n\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.RouteParameterPartial = function (model) {\r\n\r\n    model.Type.subscribe(function(v) {\r\n        if (v === \"System.DateTime, mscorlib\") {\r\n            model.DefaultValue(null);\r\n        }\r\n    });\r\n    return {};\r\n};","/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n\r\nbespoke.sph.domain.RouteParameterFieldPartial = function (model) {\r\n    // TODO : In QueryEndpoint filter, if term were defined, then maybe we could suggest the name and type\r\n    model.IsOptional.subscribe(function(opt) {\r\n        if (!opt) {\r\n            model.DefaultValue(\"\");\r\n        }\r\n    });\r\n    return {};\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.RulePartial = function (model) {\r\n\r\n    const system = require(\"durandal/system\"),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require([`viewmodels/${path}`, \"durandal/app\"], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type) {\r\n            const field = new bespoke.sph.domain[type + \"Field\"](system.guid());\r\n            showFieldDialog(accessor, field, \"field.\" + type.toLowerCase());\r\n        },\r\n        editField = function (field, accessor) {\r\n            return function () {\r\n                const fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(accessor, clone, \"field.\" + type.toLowerCase());\r\n\r\n            };\r\n        },\r\n        binaryOperator = ko.computed(function() {\r\n            if (ko.unwrap(model.Operator) === \"IsNull\") {\r\n                return false;\r\n            }\r\n            if (ko.unwrap(model.Operator) === \"IsNotNull\") {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        });\r\n\r\n    const vm = {\r\n        binaryOperator: binaryOperator,\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n/// <reference path=\"../prototypes/IntervalScheduleContainer.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.ScheduledTriggerActivityPartial = function (model) {\r\n\r\n    var b = new bespoke.sph.domain.IntervalScheduleContainer();\r\n    \r\n    return b;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.SetterActionPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        removeChildAction = function (child) {\r\n            var self = this;\r\n            return function() {\r\n                self.SetterActionChildCollection.remove(child);\r\n            };\r\n        },\r\n        addChildAction = function() {\r\n            var child = new bespoke.sph.domain.SetterActionChild(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.SetterActionChildCollection.push(child);\r\n        };\r\n\r\n    var vm = {\r\n        addChildAction: addChildAction,\r\n        removeChildAction: removeChildAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"~/Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.SetterActionChildPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path, entity) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n                if (typeof dialog.entity === \"function\") {\r\n                    dialog.entity(entity);\r\n                    console.log(\"found the entity dialog :\" + dialog.entity.name);\r\n                }\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        addField = function (accessor, type, entity) {\r\n            var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase(), entity);\r\n        },\r\n        editField = function (field) {\r\n            var self = this;\r\n            return function () {\r\n                var fieldType = ko.unwrap(field.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                    type = pattern.exec(fieldType)[1];\r\n\r\n\r\n                showFieldDialog(self.Field, clone, 'field.' + type.toLowerCase());\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        addField: addField,\r\n        editField: editField\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","///<reference path=\"../schemas/form.designer.g.js\"/>\r\n///<reference path=\"~/Scripts/require.js\"/>\r\n///<reference path=\"~/Scripts/knockout-3.4.0.debug.js\"/>\r\n///<reference path=\"~/Scripts/jquery-2.2.0.intellisense.js\"/>\r\n\r\n\r\nbespoke.sph.domain.Adapters = bespoke.sph.domain.Adapters || {};\r\nbespoke.sph.domain.Adapters.Polling = function(model) {\r\n    model = model || {};\r\n    return {\r\n        Interval: ko.observable( model.Interval || 5 * 60 * 1000), // 5 minutes\r\n        IntervalPeriod: ko.observable(\"minute\"), // 5 minutes\r\n        Query: ko.observable(model.Query || \"\"),\r\n        StartDate : ko.observable(model.Query)\r\n    }\r\n}\r\nbespoke.sph.domain.Adapters.SqlServerReceiveLocation = function (model) {\r\n    const v = new bespoke.sph.domain.ReceiveLocation(model);\r\n    v.Id = ko.observable(null);\r\n    v.Server = ko.observable(\"(localdb)\\\\Projects\");\r\n    v.Database = ko.observable(null);\r\n    v.Trusted = ko.observable(true);\r\n    v.UseQueryNotification = ko.observable(true);\r\n    v.UserId = ko.observable(null);\r\n    v.Password = ko.observable(null);\r\n    v.Query = ko.observable(\"\");\r\n    v.Polling = ko.observable(new bespoke.sph.domain.Adapters.Polling()),\r\n    v[\"$type\"] = \"Bespoke.Sph.Integrations.Adapters.SqlServerReceiveLocation, sqlserver.adapter\";\r\n\r\n    var context = require(\"services/datacontext\");\r\n    if (model && typeof model === \"object\") {\r\n        for (let n in model) {\r\n            if (model.hasOwnProperty(n)) {\r\n                // array\r\n                if (ko.isObservable(v[n]) && \"push\" in v[n]) {\r\n                    const values = model[n].$values || model[n];\r\n                    if (_(values).isArray()) {\r\n                        v[n](_(values).map(function (ai) { return context.toObservable(ai); }));\r\n                        continue;\r\n                    }\r\n                }\r\n                if (ko.isObservable(v[n])) {\r\n                    v[n](model[n]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (model && typeof model === \"string\") {\r\n        v.WebId(model);\r\n    }\r\n\r\n    if (bespoke.sph.domain.SqlServerReceiveLocationPartial) {\r\n        return _(v).extend(new bespoke.sph.domain.FolderReceiveLocationPartial(v, model));\r\n    }\r\n    return v;\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\n\r\nbespoke.sph.domain.StartWorkflowActionPartial = function () {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        removeMapping = function (map) {\r\n            var self = this;\r\n            return function () {\r\n                self.WorkflowTriggerMapCollection.remove(map);\r\n            };\r\n        },\r\n        addMapping = function () {\r\n            var child = new bespoke.sph.domain.WorkflowTriggerMap(system.guid());\r\n            child.Field({ Name: ko.observable(\"+ Field\") });\r\n            this.WorkflowTriggerMapCollection.push(child);\r\n        },\r\n        editMapping = function (child) {\r\n            this.WorkflowTriggerMapCollection.push(child);\r\n        };\r\n\r\n    var vm = {\r\n        editMapping: editMapping,\r\n        addMapping: addMapping,\r\n        removeMapping: removeMapping\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.3.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.TabControlPartial = function (tab) {\r\n    var system = require(\"durandal/system\"),\r\n        addItem = function () {\r\n            var item = new bespoke.sph.domain.TabPanel(system.guid());\r\n            tab.TabPanelCollection.push(item);\r\n\r\n        },\r\n        removeItem = function (item) {\r\n            return function () {\r\n                tab.TabPanelCollection.remove(item);\r\n            };\r\n        };\r\n    if (tab.TabPanelCollection().length === 0) {\r\n        tab.TabPanelCollection.push(new bespoke.sph.domain.TabPanel({ WebId: system.guid() , Header : \"Tab 1\"}));\r\n        tab.TabPanelCollection.push(new bespoke.sph.domain.TabPanel({ WebId: system.guid() , Header : \"Tab 2\"}));\r\n    }\r\n    return {\r\n        addItem: addItem,\r\n        removeItem: removeItem\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.TimePeriodPartial = function (period) {\r\n    var toString = function() {\r\n        return ko.unwrap(period.Count) + \" \" + ko.unwrap(period.Unit);\r\n    };\r\n    return {\r\n        toString: toString\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.TransformDefinitionPartial = function () {\r\n\r\n    var addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert(\"not implemented\" + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.TriggerPartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        removeAction = function (action) {\r\n            var self = this;\r\n            return function () {\r\n                self.ActionCollection.remove(action);\r\n            };\r\n        },\r\n        addAction = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var t = type.toLowerCase().replace(\", \", \",\");\r\n                require([\"viewmodels/action.\" + t, \"durandal/app\"], function (dialog, app2) {\r\n                    if (typeof dialog.action !== \"function\") {\r\n                        console.error(\"The dialog for \" + t + \" do not implement action as observable\");\r\n                        return;\r\n                    }\r\n\r\n                    // initialize the action properties\r\n                    var clone = ko.mapping.fromJS(ko.toJS(dialog.action));\r\n                    if(typeof clone.Title === \"function\"){\r\n                        clone.Title(\"\");\r\n                    }\r\n                    for (var n in clone) {\r\n                        if (clone.hasOwnProperty(n)) {\r\n                            var obj = clone[n];\r\n                            if (n === \"$type\") {\r\n                                continue;\r\n                            }\r\n                            if (ko.isObservable(obj) && typeof obj.destroyAll !== \"function\") {\r\n                                obj(null);\r\n                            }\r\n                            if (ko.isObservable(obj) && typeof obj.destroyAll === \"function\") {\r\n                                obj([]);\r\n                            }\r\n                        }\r\n                    }\r\n                    dialog.action(clone);\r\n\r\n                    if (typeof dialog.trigger === \"function\") {\r\n                        dialog.trigger(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n\r\n                            var action = dialog.action();\r\n\r\n                            action.WebId(system.guid());\r\n                            action.IsActive(true);\r\n                            self.ActionCollection.push(action);\r\n                        }\r\n                    });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editAction = function (action) {\r\n            var self = this;\r\n            return function () {\r\n                var type = ko.unwrap(action.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(action));\r\n\r\n                require([\"viewmodels/action.\" + type.toLowerCase().replace(\", \", \",\"), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.action(clone);\r\n                    if (typeof dialog.trigger === \"function\") {\r\n                        dialog.trigger(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.ActionCollection.replace(action, clone);\r\n                        }\r\n                    });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n         addRule = function () {\r\n             var rule = new bespoke.sph.domain.Rule(system.guid());\r\n             rule.Left({ Name: ko.observable(\"+ Field\") });\r\n             rule.Right({ Name: ko.observable(\"+ Field\") });\r\n             this.RuleCollection.push(rule);\r\n         },\r\n        removeRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                self.RuleCollection.remove(rule);\r\n            };\r\n        },\r\n        \r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require(['viewmodels/assembly.dialog', 'durandal/app'], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert('not implemented' + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        };\r\n\r\n    var vm = {\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        addRule: addRule,\r\n        removeRule: removeRule,\r\n        removeAction: removeAction,\r\n        addAction: addAction,\r\n        editAction: editAction\r\n\r\n    };\r\n\r\n    return vm;\r\n};\r\n","bespoke.sph.domain.TryScopePartial = function () {\r\n\r\n\r\n    var\r\n        addCatchScope = function(wd) {\r\n            return function() {\r\n                var system = require('durandal/system');\r\n\r\n\r\n                var self2 = this;\r\n                var catchScope = new bespoke.sph.domain.CatchScope(system.guid());\r\n\r\n                require(['viewmodels/catch.scope.dialog', 'durandal/app'], function(dialog, app2) {\r\n                    dialog.catchScope(catchScope);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(wd());\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function(result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self2.CatchScopeCollection.push(catchScope);\r\n                            }\r\n\r\n                        });\r\n\r\n                });\r\n            };\r\n        },\r\n        editCatchScope = function (catchScope, wdOutside) {\r\n            var self = this, wd = wdOutside;\r\n            var clone = ko.mapping.fromJS(ko.mapping.toJS(catchScope));\r\n\r\n            return function () {\r\n                require(['viewmodels/catch.scope.dialog', 'durandal/app'], function (dialog, app2) {\r\n                    dialog.catchScope(clone);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(wd());\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in catchScope) {\r\n                                    if (typeof catchScope[g] === \"function\" && catchScope[g].name === \"observable\") {\r\n                                        catchScope[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        catchScope[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n            };\r\n\r\n        },\r\n        removeCatchScope = function (catchScope, wdOutside) {\r\n            var self = this, wd = wdOutside;\r\n            \r\n            return function () {\r\n                wd().ActivityCollection().forEach(function (act) {\r\n                    if (act.CatchScope() === catchScope.Id()) {\r\n                        act.CatchScope(\"\");\r\n                    }\r\n                });\r\n\r\n                self.CatchScopeCollection.remove(catchScope);\r\n            };\r\n            \r\n        };\r\n\r\n    return {\r\n        addCatchScope: addCatchScope,\r\n        editCatchScope: editCatchScope,\r\n        removeCatchScope: removeCatchScope\r\n    };\r\n};","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.1.1.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.UpdateEntityActivityPartial = function () {\r\n    var system = require('durandal/system'),\r\n        addPropertyMapping = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var mapping = new bespoke.sph.domain[type + 'Mapping'](system.guid());\r\n                self.PropertyMappingCollection.push(mapping);\r\n            };\r\n        },\r\n        removePropertyMapping = function (mapping) {\r\n            var self = this;\r\n            return function () {\r\n                self.PropertyMappingCollection.remove(mapping);\r\n            };\r\n        };\r\n    return {\r\n        addPropertyMapping: addPropertyMapping,\r\n        removePropertyMapping: removePropertyMapping\r\n    };\r\n};","/// <reference path=\"../schemas/form.designer.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"/Scripts/jquery-2.2.0.intellisense.js\" />\r\n/// <reference path=\"/Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"/Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"/Scripts/require.js\" />\r\n\r\nbespoke.sph.domain.ValueObjectDefinitionPartial = function () {\r\n    var system = require(\"durandal/system\"),\r\n        app = require(\"durandal/app\"),\r\n        context = require(objectbuilders.datacontext),\r\n        addMember = function () {\r\n            this.MemberCollection.push(new bespoke.sph.domain.Member({\r\n                WebId: system.guid(),\r\n                Boost: 1\r\n            }));\r\n        },\r\n        removeMember = function (floor) {\r\n            var self = this;\r\n            return function () {\r\n                self.MemberCollection.remove(floor);\r\n            };\r\n        },\r\n        editMember = function (member) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/member.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = ko.mapping.fromJS(ko.mapping.toJS(member));\r\n                    dialog.member(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BlockCollection.replace(member, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        addBusinessRule = function () {\r\n            var br = new bespoke.sph.domain.BusinessRule({ WebId: system.guid() });\r\n            var self = this;\r\n\r\n            require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                dialog.rule(br);\r\n                app.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.BusinessRuleCollection.push(br);\r\n                        }\r\n                    });\r\n            });\r\n\r\n        },\r\n        editBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                require([\"viewmodels/business.rule.dialog\", \"durandal/app\"], function (dialog, app) {\r\n                    var clone = context.toObservable(ko.mapping.toJS(rule));\r\n                    dialog.rule(clone);\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.BusinessRuleCollection.replace(rule, clone);\r\n                            }\r\n                        });\r\n                });\r\n            };\r\n        },\r\n        removeBusinessRule = function (rule) {\r\n            var self = this;\r\n            return function () {\r\n                self.BusinessRuleCollection.remove(rule);\r\n            };\r\n        },\r\n        editMemberMap = function (member) {\r\n            var building = this;\r\n            return function () {\r\n                console.log(\"show map \", building);\r\n                console.log(\" on member \", member);\r\n                require([\"viewmodels/member.map\", \"durandal/app\"], function (dialog, app) {\r\n                    dialog.init(building.BuildingId(), member.MemberPlanStoreId());\r\n                    app.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (result === \"OK\") {\r\n                                member.MemberPlanStoreId(dialog.spatialStoreId());\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        };\r\n    return {\r\n        addMember: addMember,\r\n        editMember: editMember,\r\n        removeMember: removeMember,\r\n        addBusinessRule: addBusinessRule,\r\n        editBusinessRule: editBusinessRule,\r\n        removeBusinessRule: removeBusinessRule,\r\n        editMemberMap: editMemberMap\r\n    };\r\n};\r\n","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.VariablePartial = function () {\r\n\r\n    var system = require('durandal/system'),\r\n        hasError = ko.observable(),\r\n        errors = ko.observableArray();\r\n    return {\r\n        hasError: hasError,\r\n        errors: errors\r\n    };\r\n};","/// <reference path=\"../schemas/report.builder.g.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../App/durandal/amd/require.js\" />\r\n/// <reference path=\"../../App/durandal/system.js\" />\r\n\r\n\r\nbespoke.sph.domain.ViewColumnPartial = function (model) {\r\n\r\n\r\n    model.Path.subscribe(function (p) {\r\n        if (!ko.unwrap(model.Header)) {\r\n            model.Header(p.replace(\".\", \" \")\r\n                .replace(/([A-Z])/g, \" $1\").trim());\r\n        }\r\n    });\r\n    // Filter\r\n    var system = require(\"durandal/system\"),\r\n        addConditionalFormatting = function () {\r\n            this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(system.guid()));\r\n        },\r\n        removeConditionalFormatting = function (cf) {\r\n            var self = this;\r\n            return function () {\r\n                self.ConditionalFormattingCollection.remove(cf);\r\n            };\r\n\r\n        },\r\n        removeIconCssClass = function () {\r\n            this.IconCssClass(\"\");\r\n        },\r\n        removeIconStoreId = function () {\r\n            this.IconStoreId(\"\");\r\n        };\r\n    return {\r\n        addConditionalFormatting: addConditionalFormatting,\r\n        removeConditionalFormatting: removeConditionalFormatting,\r\n        removeIconStoreId: removeIconStoreId,\r\n        removeIconCssClass: removeIconCssClass\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../durandal/amd/require.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.WorkflowDefinitionPartial = function (model) {\r\n\r\n    var system = require(\"durandal/system\"),\r\n        isBusy = ko.observable(false),\r\n        context = require(objectbuilders.datacontext),\r\n        elementNameOptions = ko.observableArray(),\r\n        removeActivity = function (activity) {\r\n            var self = this;\r\n            return function () {\r\n                self.ActivityCollection.remove(activity);\r\n            };\r\n        },\r\n        setStartActivity = function (act) {\r\n            var self = this;\r\n            return function () {\r\n                _(self.ActivityCollection()).each(function (v) {\r\n                    v.IsInitiator(false);\r\n                });\r\n                act.IsInitiator(true);\r\n\r\n            };\r\n        },\r\n        addActivity = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var activity = new bespoke.sph.domain[type + \"Activity\"](system.guid());\r\n\r\n                require([\"viewmodels/activity.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.activity(activity);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.ActivityCollection.push(activity);\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editActivity = function (activity) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = context.toObservable(ko.mapping.toJS(activity)),\r\n                    type = ko.unwrap(activity.TypeName);\r\n\r\n                isBusy(true);\r\n                require([\"viewmodels/activity.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.activity(clone);\r\n\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            $(\"div.modalBlockout,div.modalHost\").remove();\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in activity) {\r\n                                    if (activity.hasOwnProperty(g)) {\r\n                                        var observable = activity[g].name === \"observable\" || activity[g].name === \"d\";\r\n                                        if (typeof activity[g] === \"function\" && observable) {\r\n                                            activity[g](ko.unwrap(clone[g]));\r\n                                        } else {\r\n                                            activity[g] = clone[g];\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        addVariable = function (type) {\r\n            var self = this;\r\n            return function () {\r\n                var variable = new bespoke.sph.domain[type + \"Variable\"](system.guid());\r\n\r\n                require([\"viewmodels/variable.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.variable(variable);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                self.VariableDefinitionCollection.push(variable);\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        editVariable = function (variable) {\r\n            var self = this;\r\n            return function () {\r\n                var variableType = ko.unwrap(variable.$type),\r\n                    clone = ko.mapping.fromJS(ko.mapping.toJS(variable)),\r\n                    pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Variable,/,\r\n                    type = pattern.exec(variableType)[1];\r\n\r\n                require([\"viewmodels/variable.\" + type.toLowerCase(), \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.variable(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in variable) {\r\n                                    if (typeof variable[g] === \"function\" && variable[g].name === \"observable\") {\r\n                                        variable[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        variable[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeVariable = function (variable) {\r\n            var self = this;\r\n            return function () {\r\n                self.VariableDefinitionCollection.remove(variable);\r\n            };\r\n        },\r\n        addCorrelationType = function () {\r\n            var self = this;\r\n            var correlationType = new bespoke.sph.domain.CorrelationType(system.guid());\r\n\r\n            require([\"viewmodels/correlation.type.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.correlationType(correlationType);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.CorrelationTypeCollection.push(correlationType);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editCorrelationType = function (correlationType) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(correlationType));\r\n\r\n                require([\"viewmodels/correlation.type.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.correlationType(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in correlationType) {\r\n                                    if (typeof correlationType[g] === \"function\" && correlationType[g].name === \"observable\") {\r\n                                        correlationType[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        correlationType[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeCorrelationType = function (correlationType) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationTypeCollection.remove(correlationType);\r\n            };\r\n        },\r\n        addCorrelationSet = function () {\r\n            var self = this;\r\n            var correlationSet = new bespoke.sph.domain.CorrelationSet(system.guid());\r\n\r\n            require([\"viewmodels/correlation.set.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.correlationSet(correlationSet);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.CorrelationSetCollection.push(correlationSet);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editCorrelationSet = function (correlationSet) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(correlationSet));\r\n\r\n                require([\"viewmodels/correlation.set.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.correlationSet(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in correlationSet) {\r\n                                    if (typeof correlationSet[g] === \"function\" && correlationSet[g].name === \"observable\") {\r\n                                        correlationSet[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        correlationSet[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeCorrelationSet = function (correlationSet) {\r\n            var self = this;\r\n            return function () {\r\n                self.CorrelationSetCollection.remove(correlationSet);\r\n            };\r\n        },\r\n        addReferencedAssembly = function () {\r\n            var self = this;\r\n            require([\"viewmodels/assembly.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            _(dialog.selectedAssemblies()).each(function (v) {\r\n                                self.ReferencedAssemblyCollection.push(v);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editReferencedAssembly = function (dll) {\r\n            alert(\"not implemented\" + dll);\r\n        },\r\n        removeReferencedAssembly = function (dll) {\r\n            var self = this;\r\n            return function () {\r\n                self.ReferencedAssemblyCollection.remove(dll);\r\n            };\r\n        },\r\n        addTryScope = function () {\r\n            var self = this;\r\n            var tryScope = new bespoke.sph.domain.TryScope(system.guid());\r\n            require([\"viewmodels/try.scope.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                dialog.tryScope(tryScope);\r\n                if (typeof dialog.wd === \"function\") {\r\n                    dialog.wd(self);\r\n                }\r\n                app2.showDialog(dialog)\r\n                    .done(function (result) {\r\n                        if (!result) return;\r\n                        if (result === \"OK\") {\r\n                            self.TryScopeCollection.push(tryScope);\r\n                        }\r\n                    });\r\n\r\n            });\r\n\r\n\r\n        },\r\n        editTryScope = function (tryScope) {\r\n            var self = this;\r\n            return function () {\r\n                var clone = ko.mapping.fromJS(ko.mapping.toJS(tryScope));\r\n\r\n                require([\"viewmodels/try.scope.dialog\", \"durandal/app\"], function (dialog, app2) {\r\n                    dialog.tryScope(clone);\r\n                    if (typeof dialog.wd === \"function\") {\r\n                        dialog.wd(self);\r\n                    }\r\n\r\n                    app2.showDialog(dialog)\r\n                        .done(function (result) {\r\n                            if (!result) return;\r\n                            if (result === \"OK\") {\r\n                                for (var g in tryScope) {\r\n                                    if (typeof tryScope[g] === \"function\" && tryScope[g].name === \"observable\") {\r\n                                        tryScope[g](ko.unwrap(clone[g]));\r\n                                    } else {\r\n                                        tryScope[g] = clone[g];\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                });\r\n\r\n            };\r\n        },\r\n        removeTryScope = function (tryScope) {\r\n            var self = this;\r\n            return function () {\r\n                self.TryScopeCollection.remove(tryScope);\r\n            };\r\n        },\r\n        loadSchema = function (storeId) {\r\n            var id = storeId || this.SchemaStoreId();\r\n            $.get(\"/api/workflow-definitions/xsd-elements/\" + id)\r\n                .then(function (result) {\r\n                    elementNameOptions(result);\r\n                });\r\n        };\r\n\r\n    model.SchemaStoreId.subscribe(loadSchema);\r\n\r\n    var vm = {\r\n        isBusy: isBusy,\r\n        removeCorrelationType: removeCorrelationType,\r\n        addCorrelationType: addCorrelationType,\r\n        editCorrelationType: editCorrelationType,\r\n        removeCorrelationSet: removeCorrelationSet,\r\n        addCorrelationSet: addCorrelationSet,\r\n        editCorrelationSet: editCorrelationSet,\r\n        removeVariable: removeVariable,\r\n        addVariable: addVariable,\r\n        editVariable: editVariable,\r\n        removeReferencedAssembly: removeReferencedAssembly,\r\n        addReferencedAssembly: addReferencedAssembly,\r\n        editReferencedAssembly: editReferencedAssembly,\r\n        addActivity: addActivity,\r\n        editActivity: editActivity,\r\n        removeActivity: removeActivity,\r\n        loadSchema: loadSchema,\r\n        xsdElements: elementNameOptions,\r\n        setStartActivity: setStartActivity,\r\n        addTryScope: addTryScope,\r\n        editTryScope: editTryScope,\r\n        removeTryScope: removeTryScope\r\n    };\r\n\r\n    return vm;\r\n};\r\n","/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../schemas/trigger.workflow.g.js\" />\r\n/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../../Scripts/jquery-2.1.0.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n\r\n\r\n\r\nbespoke.sph.domain.WorkflowDesignerPartial = function () {\r\n  \r\n    return {\r\n    };\r\n};","/// <reference path=\"../../Scripts/jquery-2.0.3.intellisense.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.1.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/moment.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../services/domain.g.js\" />\r\n/// <reference path=\"../../Scripts/bootstrap.js\" />\r\n/// <reference path=\"../schemas/form.designer.g.js\" />\r\n\r\nbespoke.sph.domain.WorkflowFormPartial = function () {\r\n\r\n    var editOperationSuccessCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationSuccessCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationSuccessCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n    editOperationFailureCallback = function () {\r\n        var self = this,\r\n            w = window.open(\"/sph/editor/ace?mode=javascript\", \"_blank\", \"height=\" + screen.height + \",width=\" + screen.width + \",toolbar=0,location=0,fullscreen=yes\"),\r\n            wdw = w.window || w,\r\n            init = function () {\r\n                wdw.code = ko.unwrap(self.OperationFailureCallback);\r\n                if (!w.code) {\r\n                    w.code = \"//insert your code here\";\r\n                }\r\n                wdw.saved = function (code, close) {\r\n                    self.OperationFailureCallback(code);\r\n                    if (close) {\r\n                        w.close();\r\n                    }\r\n                };\r\n            };\r\n        if (wdw.attachEvent) { // for ie\r\n            wdw.attachEvent(\"onload\", init);\r\n        } else {\r\n            init();\r\n        }\r\n    },\r\n        canSetSuccessCallback = ko.computed(function () {\r\n\r\n        });\r\n    return {\r\n        editOperationSuccessCallback: editOperationSuccessCallback,\r\n        editOperationFailureCallback: editOperationFailureCallback,\r\n        canSetSuccessCallback: canSetSuccessCallback\r\n    };\r\n};","/// <reference path=\"../objectbuilders.js\" />\r\n/// <reference path=\"../services/datacontext.js\" />\r\n/// <reference path=\"../schemas/sph.domain.g.js\" />\r\n/// <reference path=\"../durandal/system.js\" />\r\n/// <reference path=\"../../Scripts/require.js\" />\r\n/// <reference path=\"../../Scripts/underscore.js\" />\r\n/// <reference path=\"../../Scripts/knockout-3.4.0.debug.js\" />\r\n/// <reference path=\"../../Scripts/knockout.mapping-latest.debug.js\" />\r\n\r\n\r\nbespoke.sph.domain.WorkflowTriggerMapPartial = function () {\r\n    var self = this,\r\n        system = require('durandal/system'),\r\n        showFieldDialog = function (accessor, field, path) {\r\n            require(['viewmodels/' + path, 'durandal/app'], function (dialog, app2) {\r\n                dialog.field(field);\r\n\r\n\r\n                app2.showDialog(dialog)\r\n                .done(function (result) {\r\n                    if (!result) return;\r\n                    if (result === \"OK\") {\r\n                        accessor(field);\r\n                    }\r\n                });\r\n\r\n            });\r\n        };\r\n\r\n    self.addField = function(accessor, type) {\r\n        var field = new bespoke.sph.domain[type + 'Field'](system.guid());\r\n            showFieldDialog(accessor, field, 'field.' + type.toLowerCase());\r\n    };\r\n\r\n    self.editField = function(field, accessor) {\r\n        return function() {\r\n            var fieldType = ko.unwrap(field.$type),\r\n                clone = ko.mapping.fromJS(ko.mapping.toJS(field)),\r\n                pattern = /Bespoke\\.Sph\\.Domain\\.(.*?)Field,/,\r\n                type = pattern.exec(fieldType)[1];\r\n\r\n\r\n            showFieldDialog(accessor, clone, 'field.' + type.toLowerCase());\r\n\r\n        };\r\n    };\r\n\r\n    return self;\r\n};\r\n\r\nbespoke.sph.domain.WorkflowTriggerMapPartial.prototype = new bespoke.sph.domain.FieldContainer();\r\n"],"sourceRoot":"/source/"}