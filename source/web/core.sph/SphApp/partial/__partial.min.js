var bespoke=bespoke||{};bespoke.sph=bespoke.sph||{},bespoke.sph.domain=bespoke.sph.domain||{},bespoke.sph.domain.ActivityPartial=function(){var e=(require("durandal/system"),ko.observable()),o=ko.observable(!1),r=ko.observable(!1),s=ko.observableArray();return{breakpoint:o,hit:r,hasError:e,errors:s}};
bespoke.sph.domain.AssemblyFieldPartial=function(){var e=require(objectbuilders.system),r=function(){this.MethodArgCollection.push(new bespoke.sph.domain.MethodArg(e.guid()))},o=function(e){var r=this;return function(){r.MethodArgCollection.remove(e)}};return{addParameter:r,removeParameter:o}};
bespoke.sph.domain.BarChartItemPartial=function(){var e=require("durandal/system"),r=function(){this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(e.guid()))},i=function(e){var r=this;return function(){r.ChartSeriesCollection.remove(e)}};return{addSeries:r,removeSeries:i}};
bespoke.sph.domain.BusinessRulePartial=function(e){var i=require("durandal/system"),o=function(){var e=this,o=new bespoke.sph.domain.Rule(i.guid());o.Left({Name:ko.observable("+ Field")}),o.Right({Name:ko.observable("+ Field")}),e.FilterCollection.push(o)},l=function(e){var i=this;return function(){i.FilterCollection.remove(e)}},n=function(){var e=this,o=new bespoke.sph.domain.Rule(i.guid());o.Left({Name:ko.observable("+ Field")}),o.Right({Name:ko.observable("+ Field")}),e.RuleCollection.push(o)},t=function(e){var i=this;return function(){i.RuleCollection.remove(e)}};return{addFilter:o,removeFilter:l,addRule:n,removeRule:t}};
bespoke.sph.domain.ButtonPartial=function(){var e=function(){var e=this,o=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),n=o.window||o,t=function(){n.code=ko.unwrap(e.Command),o.code||(o.code="//insert your code here"),n.saved=function(n,t){e.Command(n),t&&o.close()}};n.attachEvent?n.attachEvent("onload",t):t()};return{editCommand:e}};
bespoke.sph.domain.CatchScopePartial=function(){};
bespoke.sph.domain.ChildEntityListViewPartial=function(n){var o=require("durandal/system"),e=function(){this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn({WebId:o.guid(),Header:"<New Column>"}))},i=function(n){var o=this;return function(){o.ViewColumnCollection.remove(n)}},t=function(){this.SortCollection.push(new bespoke.sph.domain.Sort(o.guid()))},r=function(n){var o=this;return function(){o.SortCollection.remove(n)}},u=function(o){return function(){var e=ko.mapping.fromJS(ko.mapping.toJS(o));require(["viewmodels/view.column.dialog","durandal/app"],function(i,t){i.column(e),i.entity(n.Entity()),t.showDialog(i).done(function(n){if(n&&"OK"===n)for(var i in o)"function"==typeof o[i]&&"observable"===o[i].name?o[i](ko.unwrap(e[i])):o[i]=e[i]})})}};return{addSort:t,removeSort:r,addViewColumn:e,editViewColumn:u,removeViewColumn:i}};
bespoke.sph.domain.ComboBoxPartial=function(){var o=require("durandal/system"),e=function(){var e=this,t=new bespoke.sph.domain.ComboBoxItem(o.guid());e.ComboBoxItemCollection.push(t)},t=function(o){var e=this;return function(){e.ComboBoxItemCollection.remove(o)}};return{addItem:e,removeItem:t}};
bespoke.sph.domain.ConstantFieldPartial=function(e){var a={Type:ko.observable(),Value:ko.observable()};return a.Value.subscribe(function(a){ko.unwrap(e.Name)||e.Name(a)}),a};
bespoke.sph.domain.CorrelationTypePartial=function(){var r=require("durandal/system"),o=function(r){var o=this;return function(){o.CorrelationPropertyCollection.remove(r)}},e=function(){this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(r.guid()))};return{removeCorrelationProperty:o,addCorrelationProperty:e}};
bespoke.sph.domain.CreateEntityActivityPartial=function(){var n=require("durandal/system"),r=function(r){var e=this;return function(){var t=new bespoke.sph.domain[r+"Mapping"](n.guid());e.PropertyMappingCollection.push(t)}},e=function(n){var r=this;return function(){r.PropertyMappingCollection.remove(n)}};return{addPropertyMapping:r,removePropertyMapping:e}};
bespoke.sph.domain.DataGridItemPartial=function(){var i=require("durandal/system"),n=function(){this.DataGridGroupDefinitionCollection.push(new bespoke.sph.domain.DataGridGroupDefinition(i.guid()))},o=function(i){var n=this;return function(){n.DataGridGroupDefinitionCollection.remove(i)}},t=function(){var n=this;n.DataGridColumnCollection.push(new bespoke.sph.domain.DataGridColumn(i.guid()))},e=function(i){var n=this;return function(){n.DataGridColumnCollection.remove(i)}};return{addColumn:t,removeColumn:e,addDataGridGroupDefinition:n,removeDataGridGroupDefinition:o}};
bespoke.sph.domain.DecisionActivityPartial=function(){var n=require("durandal/system"),i=function(){this.DecisionBranchCollection.push(new bespoke.sph.domain.DecisionBranch(n.guid()))},e=function(n){var i=this;return function(){i.DecisionBranchCollection.remove(n)}},o=function(){return this.DecisionBranchCollection()};return{addBranch:i,removeBranch:e,multipleEndPoints:o}};
bespoke.sph.domain.DelayActivityPartial=function(){return{isAsync:!0}};
bespoke.sph.domain.EntityChartPartial=function(e){var t=require(objectbuilders.datacontext),o=function(){"function"==typeof e.IsDashboardItem?e.IsDashboardItem(!0):e.IsDashboardItem=ko.observable(!0);var o=new $.Deferred;return t.post(ko.mapping.toJSON(e),"/sph/entitychart/save").done(o.resolve),o.promise()},r=function(){"function"==typeof e.IsDashboardItem?e.IsDashboardItem(!1):e.IsDashboardItem=ko.observable(!1);var o=new $.Deferred;return t.post(ko.mapping.toJSON(e),"/sph/entitychart/save").done(o.resolve),o.promise()};return{pin:o,unpin:r}};
bespoke.sph.domain.ValueObjectDefinitionPartial=function(){var e=require("durandal/system"),n=(require("durandal/app"),require(objectbuilders.datacontext)),o=function(){this.MemberCollection.push(new bespoke.sph.domain.Member({WebId:e.guid(),Boost:1}))},i=function(e){var n=this;return function(){n.MemberCollection.remove(e)}},t=function(e){var n=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(o,i){var t=ko.mapping.fromJS(ko.mapping.toJS(e));o.member(t),i.showDialog(o).done(function(o){o&&"OK"===o&&n.BlockCollection.replace(e,t)})})}},r=function(){var n=new bespoke.sph.domain.BusinessRule({WebId:e.guid()}),o=this;require(["viewmodels/business.rule.dialog","durandal/app"],function(e,i){e.rule(n),i.showDialog(e).done(function(e){e&&"OK"===e&&o.BusinessRuleCollection.push(n)})})},u=function(e){var o=this;return function(){require(["viewmodels/business.rule.dialog","durandal/app"],function(i,t){var r=n.toObservable(ko.mapping.toJS(e));i.rule(r),t.showDialog(i).done(function(n){n&&"OK"==n&&o.BusinessRuleCollection.replace(e,r)})})}},s=function(e){var n=this;return function(){n.BusinessRuleCollection.remove(e)}},a=function(e){var n=this;return function(){console.log("show map ",n),console.log(" on member ",e),require(["viewmodels/member.map","durandal/app"],function(o,i){o.init(n.BuildingId(),e.MemberPlanStoreId()),i.showDialog(o).done(function(n){"OK"==n&&e.MemberPlanStoreId(o.spatialStoreId())})})}};return{addMember:o,editMember:t,removeMember:i,addBusinessRule:r,editBusinessRule:u,removeBusinessRule:s,editMemberMap:a}},bespoke.sph.domain.EntityDefinitionPartial=function(){var e=require("durandal/system"),n=require("durandal/app"),o=require(objectbuilders.datacontext),i=function(){this.MemberCollection.push(new bespoke.sph.domain.Member({WebId:e.guid(),Boost:1}))},t=function(e){var n=this;return function(){n.MemberCollection.remove(e)}},r=function(){this.EntityOperationCollection.push(new bespoke.sph.domain.EntityOperation({WebId:e.guid()}))},u=function(){var e=this;o.post(ko.toJSON(e),"/entity-definition").then(function(e){e.success})},s=function(e){var o=this;return function(){var i=new $.Deferred;return n.showMessage("Are you sure you want to remove this operation, this operation cannot be undone and will commit the entire changes to your EntityDefinition","Reactive Developer",["Yes","No"]).done(function(n){"Yes"===n&&(o.EntityOperationCollection.remove(e),u.call(o))}),i.promise()}},a=function(e){var n=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(o,i){var t=ko.mapping.fromJS(ko.mapping.toJS(e));o.member(t),i.showDialog(o).done(function(o){o&&"OK"===o&&n.BlockCollection.replace(e,t)})})}},l=function(){var n=new bespoke.sph.domain.BusinessRule({WebId:e.guid()}),o=this;require(["viewmodels/business.rule.dialog","durandal/app"],function(e,i){e.rule(n),i.showDialog(e).done(function(e){e&&"OK"===e&&o.BusinessRuleCollection.push(n)})})},d=function(e){var n=this;return function(){require(["viewmodels/business.rule.dialog","durandal/app"],function(i,t){var r=o.toObservable(ko.mapping.toJS(e));i.rule(r),t.showDialog(i).done(function(o){o&&"OK"==o&&n.BusinessRuleCollection.replace(e,r)})})}},c=function(e){var n=this;return function(){n.BusinessRuleCollection.remove(e)}},m=function(e){var n=this;return function(){console.log("show map ",n),console.log(" on member ",e),require(["viewmodels/member.map","durandal/app"],function(o,i){o.init(n.BuildingId(),e.MemberPlanStoreId()),i.showDialog(o).done(function(n){"OK"==n&&e.MemberPlanStoreId(o.spatialStoreId())})})}};return{addEntityOperation:r,removeEntityOperation:s,addMember:i,editMember:a,removeMember:t,addBusinessRule:l,editBusinessRule:d,removeBusinessRule:c,editMemberMap:m}};
bespoke.sph.domain.EntityFormPartial=function(){var e=function(){var e=this,a=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),o=a.window||a,t=function(){o.code=ko.unwrap(e.OperationSuccessCallback),a.code||(a.code="//insert your code here"),o.saved=function(o,t){e.OperationSuccessCallback(o),t&&a.close()}};o.attachEvent?o.attachEvent("onload",t):t()},a=function(){var e=this,a=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),o=a.window||a,t=function(){o.code=ko.unwrap(e.OperationFailureCallback),a.code||(a.code="//insert your code here"),o.saved=function(o,t){e.OperationFailureCallback(o),t&&a.close()}};o.attachEvent?o.attachEvent("onload",t):t()},o=ko.computed(function(){});return{editOperationSuccessCallback:e,editOperationFailureCallback:a,canSetSuccessCallback:o}};
bespoke.sph.domain.EntityLookupElementPartial=function(){var e=function(){var e=this,t=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),o=t.window||t,i=function(){o.code=ko.unwrap(e.Command),t.code||(t.code="//insert your code here"),o.saved=function(o,i){e.DisplayTemplate(o),i&&t.close()}};o.attachEvent?o.attachEvent("onload",i):i()},t=function(){var e=this;require(["viewmodels/members.selector.dialog","durandal/app"],function(t,o){t.entity(e.Entity()),t.selectedMembers(e.LookupColumnCollection()),o.showDialog(t,e.Entity()).done(function(o){o&&"OK"===o&&e.LookupColumnCollection(t.selectedMembers())})})},o=function(){var e=this;require(["viewmodels/entity.lookup.filter.dialog","durandal/app"],function(t,o){t.entity(e.Entity()),t.selectedFilters(e.FilterCollection()),o.showDialog(t,e.Entity()).done(function(o){o&&"OK"===o&&e.FilterCollection(t.selectedFilters())})})};return{editDisplayTemplate:e,editColumns:t,editFilter:o}};
bespoke.sph.domain.EntityOperationPartial=function(){var t=require("durandal/system"),e=function(t){var e=this;return function(){e.SetterActionChildCollection.remove(t)}},i=function(){var e=new bespoke.sph.domain.SetterActionChild(t.guid());e.Field({Name:ko.observable("+ Field")}),this.SetterActionChildCollection.push(e)},n=function(t){var e=this;return function(){e.PatchPathCollection.remove(t)}},o=function(){var e=new bespoke.sph.domain.PatchSetter({WebId:t.guid(),IsRequired:!0});this.PatchPathCollection.push(e)},a={removePatchPath:n,addPatchPath:o,addChildAction:i,removeChildAction:e};return a};
bespoke.sph.domain.EntityQueryPartial=function(){var e=require("durandal/system"),t=function(){this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(e.guid()))},o=function(e){var t=this;return function(){t.RouteParameterCollection.remove(e)}},r=function(){this.FilterCollection.push(new bespoke.sph.domain.Filter(e.guid()))},n=function(e){var t=this;return function(){t.FilterCollection.remove(e)}},i=function(){this.SortCollection.push(new bespoke.sph.domain.Sort(e.guid()))},u=function(e){var t=this;return function(){t.SortCollection.remove(e)}};return{addRouteParameter:t,removeRouteParameter:o,addSort:i,removeSort:u,addFilter:r,removeFilter:n}};
bespoke.sph.domain.EntityViewPartial=function(){var o=require("durandal/system"),e=function(){this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(o.guid()))},n=function(o){var e=this;return function(){e.ConditionalFormattingCollection.remove(o)}},t=function(){this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(o.guid()))},i=function(o){var e=this;return function(){e.RouteParameterCollection.remove(o)}},r=function(){this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn(o.guid()))},u=function(o){var e=this;return function(){e.ViewColumnCollection.remove(o)}},a=function(){this.FilterCollection.push(new bespoke.sph.domain.Filter(o.guid()))},l=function(o){var e=this;return function(){e.FilterCollection.remove(o)}},m=function(){this.SortCollection.push(new bespoke.sph.domain.Sort(o.guid()))},s=function(o){var e=this;return function(){e.SortCollection.remove(o)}};return{addRouteParameter:t,removeRouteParameter:i,addConditionalFormatting:e,removeConditionalFormatting:n,addViewColumn:r,removeViewColumn:u,addSort:m,removeSort:s,addFilter:a,removeFilter:l}};
bespoke.sph.domain.ExecutedActivityPartial=function(){var e=(require("durandal/system"),ko.observable(!1)),r=ko.observable(!1),a=ko.observableArray();return{breakpoint:e,hit:r,errors:a}};
bespoke.sph.domain.FilterPartial=function(){var e=require("durandal/system"),i=function(e,i,n){require(["viewmodels/"+n,"durandal/app"],function(n,o){n.field(i),"function"==typeof n.entity&&console.log("found the entity dialog :"+n.entity.name),o.showDialog(n).done(function(n){n&&"OK"===n&&e(i)})})},n=function(n,o){var t=new bespoke.sph.domain[o+"Field"](e.guid());i(n,t,"field."+o.toLowerCase())},o=function(e){var n=this;return function(){var o=ko.unwrap(e.$type),t=ko.mapping.fromJS(ko.mapping.toJS(e)),a=/Bespoke\.Sph\.Domain\.(.*?)Field,/,d=a.exec(o)[1];i(n.Field,t,"field."+d.toLowerCase())}},t={addField:n,editField:o};return t};
bespoke.sph.domain.FormDialogPartial=function(o){var n=require("durandal/system"),a=function(){var n=ko.unwrap(o.DialogButtonCollection);_(n).each(function(o){o.canMoveDown(!0),o.canMoveUp(!0)});var a=_(n).first(),t=_(n).last();a&&a.canMoveUp(!1),t&&t.canMoveDown(!1)},t=function(){o.DialogButtonCollection.push(new bespoke.sph.domain.DialogButton({WebId:n.guid(),canMoveDown:!1})),a()},e=function(n){o.DialogButtonCollection.remove(n),a()},i=function(o,n,a){if(a!==n){for(var t=o[n],e=n>a?-1:1,i=n;i!==a;i+=e)o[i]=o[i+e];o[a]=t}},c=function(n,a){var t=o.DialogButtonCollection().indexOf(n),e=ko.unwrap(o.DialogButtonCollection);i(e,t,t+a),_(e).each(function(o){o.canMoveDown(!0),o.canMoveUp(!0)}),_(e).first().canMoveUp(!1),_(e).last().canMoveDown(!1),o.DialogButtonCollection(e)},l=function(o){c(o,1)},u=function(o){c(o,-1)};return a(),{removeDialogButton:e,addDialogButton:t,moveDown:l,moveUp:u}},bespoke.sph.domain.DialogButtonPartial=function(o){var n=ko.observable(!0),a=ko.observable(!0);return{canMoveDown:a,canMoveUp:n}};
bespoke.sph.domain.FormElementPartial=function(){return{}};
bespoke.sph.domain.HtmlElementPartial=function(){var t=function(){var t=this,e=window.open("/sph/editor/ace?mode=html","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),n=function(){e.code=ko.unwrap(t.Text),e.saved=function(n,o){t.Text(n),o&&e.close()}};e.attachEvent?e.attachEvent("onload",n):n()};return{editHtml:t}};
bespoke.sph.domain.FormTemplatePartial=function(){var a={};return a};
bespoke.sph.domain.IntervalSchedulePartial=function(){var e=ko.observable(),a=ko.observable();return{icon:e,name:a}};
bespoke.sph.domain.LineChartItemPartial=function(){var e=require("durandal/system"),r=function(){this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(e.guid()))},i=function(e){var r=this;return function(){r.ChartSeriesCollection.remove(e)}};return{addSeries:r,removeSeries:i}};
bespoke.sph.domain.ListenActivityPartial=function(){var n=require("durandal/system"),i=function(){var i=this,t=new bespoke.sph.domain.ListenBranch(n.guid());i.ListenBranchCollection.push(t)},t=function(n){var i=this;return function(){i.ListenBranchCollection.remove(n)}},e=function(){return this.ListenBranchCollection()};return{addBranch:i,removeBranch:t,multipleEndPoints:e}};
bespoke.sph.domain.ListViewPartial=function(e){var i=require("durandal/system"),n=function(e){var n=this;return function(){var o=new bespoke.sph.domain.ListViewColumn(i.guid()),t=bespoke.sph.domain[e](i.guid());o.Path.subscribe(function(e){t.Path(e)}),o.Label.subscribe(function(e){t.Label(e)}),o.Input(t),t.isSelected=ko.observable(!1),n.ListViewColumnCollection.push(o)}},o=function(e){var i=this;return function(){i.ListViewColumnCollection.remove(e)}};return _(e.ListViewColumnCollection()).each(function(e){e.Input().isSelected=ko.observable(!1)}),{addListViewColumn:n,removeListViewColumn:o}};
bespoke.sph.domain.ListViewColumnPartial=function(e){try{var n=/Bespoke\.Sph\.Domain\.(.*?),/,o=ko.unwrap(e.Input),p=null,t=null;o&&(p=n.exec(ko.unwrap(o.$type))[1],t="/images/form.element."+p+".png")}catch(a){}t=t||"/images/form.element.textbox.png";var r=ko.observable(t);return e.Input.subscribe(function(e){if(e.$type){var n=/Bespoke\.Sph\.Domain\.(.*?),/,o=n.exec(ko.unwrap(e.$type))[1];r("/images/form.element."+o+".png")}}),{icon:r}};
bespoke.sph.domain.MappingActivityPartial=function(){var n=require("durandal/system"),e=function(){var e=this,i=new bespoke.sph.domain.MappingSource(n.guid());e.MappingSourceCollection.push(i)},i=function(n){var e=this;return function(){e.MappingSourceCollection.remove(n)}};return{addMappingSource:e,removeMappingSource:i}};
bespoke.sph.domain.MemberPartial=function(){var e=require("durandal/system"),o=function(){this.MemberCollection.push(new bespoke.sph.domain.Member(e.guid()))},i=function(e){var o=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(i,n){var r=ko.mapping.fromJS(ko.mapping.toJS(e));i.member(r),n.showDialog(i).done(function(i){i&&"OK"==i&&o.BlockCollection.replace(e,r)})})}},n=function(e){var o=this;require(["viewmodels/field.permission.dialog","durandal/app"],function(i,n){var r=ko.mapping.fromJS(ko.mapping.toJS(e));i.member(r),n.showDialog(i).done(function(e){e&&"OK"==e&&o.FieldPermissionCollection(r.FieldPermissionCollection())})})},r=function(e){var o=this;return function(){o.MemberCollection.remove(e)}},a=function(e){var o=this;return function(){console.log("show map ",o),console.log(" on member ",e),require(["viewmodels/member.map","durandal/app"],function(i,n){i.init(o.BuildingId(),e.MemberPlanStoreId()),n.showDialog(i).done(function(o){"OK"==o&&e.MemberPlanStoreId(i.spatialStoreId())})})}},t=function(e,o,i){require(["viewmodels/"+i,"durandal/app"],function(i,n){i.field(o),n.showDialog(i).done(function(i){i&&"OK"===i&&e(o)})})},d=function(o,i){var n=new bespoke.sph.domain[i+"Field"](e.guid());t(o,n,"field."+i.toLowerCase())},l=function(e){var o=this;return function(){var i=ko.unwrap(e.$type),n=ko.mapping.fromJS(ko.mapping.toJS(e)),r=/Bespoke\.Sph\.Domain\.(.*?)Field,/,a=r.exec(i)[1];t(o.Field,n,"field."+a.toLowerCase())}};return{editPermission:n,addMember:o,editMember:i,editMemberMap:a,removeMember:r,addField:d,editField:l}};
bespoke.sph.domain.MethodArgPartial=function(){var e=require("durandal/system"),i=function(e,i,o){require(["viewmodels/"+o,"durandal/app"],function(o,n){o.field(i),n.showDialog(o).done(function(o){o&&"OK"===o&&e(i)})})},o=function(o,n){var a=new bespoke.sph.domain[n+"Field"](e.guid());i(o,a,"field."+n.toLowerCase())},n=function(e){var o=this;return function(){var n=ko.unwrap(e.$type),a=ko.mapping.fromJS(ko.mapping.toJS(e)),d=/Bespoke\.Sph\.Domain\.(.*?)Field,/,r=d.exec(n)[1];i(o.Field,a,"field."+r.toLowerCase())}},a={addField:o,editField:n};return a};
bespoke.sph.domain.NotificationActivityPartial=function(i){return i.From()||i.From("admin@@sph.my"),{}};
bespoke.sph.domain.ParallelActivityPartial=function(){var n=require("durandal/system"),a=function(){this.ParallelBranchCollection.push(new bespoke.sph.domain.ParallelBranch(n.guid()))},l=function(n){var a=this;return function(){a.ParallelBranchCollection.remove(n)}},r=function(){return this.ParallelBranchCollection()};return{addBranch:a,removeBranch:l,multipleEndPoints:r}};
bespoke.sph.domain.ReceiveActivityPartial=function(){var r=require("durandal/system"),e=function(r){var e=this;return function(){e.CorrelationPropertyCollection.remove(r)}},o=function(){this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(r.guid()))};return{removeCorrelationProperty:e,addCorrelationProperty:o}};
bespoke.sph.domain.DailySchedulePartial=function(){return{name:ko.observable("Daily Schedule"),icon:ko.observable("fa fa-calendar")}},bespoke.sph.domain.WeeklySchedulePartial=function(){return{name:ko.observable("Weekly Schedule"),icon:ko.observable("fa fa-th-list")}},bespoke.sph.domain.MonthlySchedulePartial=function(){return{name:ko.observable("Monthly Schedule"),icon:ko.observable("fa fa-calendar-o"),dateOptions:_.range(1,31)}};
bespoke.sph.domain.ReportDeliveryPartial=function(){return new bespoke.sph.domain.IntervalScheduleContainer};
bespoke.sph.domain.RulePartial=function(){var e=require("durandal/system"),i=function(e,i,n){require(["viewmodels/"+n,"durandal/app"],function(n,o){n.field(i),o.showDialog(n).done(function(n){n&&"OK"===n&&e(i)})})},n=function(n,o){var a=new bespoke.sph.domain[o+"Field"](e.guid());i(n,a,"field."+o.toLowerCase())},o=function(e,n){return function(){var o=ko.unwrap(e.$type),a=ko.mapping.fromJS(ko.mapping.toJS(e)),d=/Bespoke\.Sph\.Domain\.(.*?)Field,/,r=d.exec(o)[1];i(n,a,"field."+r.toLowerCase())}},a={addField:n,editField:o};return a};
bespoke.sph.domain.ScheduledTriggerActivityPartial=function(e){var n=new bespoke.sph.domain.IntervalScheduleContainer;return n};
bespoke.sph.domain.ScreenActivityPartial=function(){return{isAsync:!0,canStart:!0}};
bespoke.sph.domain.SearchDefinitionPartial=function(){var e=require("durandal/system"),i=function(e){var i=this;return function(){i.FilterCollection.remove(e)}},r=function(){var i=new bespoke.sph.domain.Filter(e.guid());this.FilterCollection.push(i)},n={addFilter:r,removeFilter:i};return n};
bespoke.sph.domain.SetterActionPartial=function(){var e=require("durandal/system"),i=function(e){var i=this;return function(){i.SetterActionChildCollection.remove(e)}},t=function(){var i=new bespoke.sph.domain.SetterActionChild(e.guid());i.Field({Name:ko.observable("+ Field")}),this.SetterActionChildCollection.push(i)},n={addChildAction:t,removeChildAction:i};return n};
bespoke.sph.domain.SetterActionChildPartial=function(){var e=require("durandal/system"),i=function(e,i,n,o){require(["viewmodels/"+n,"durandal/app"],function(n,t){n.field(i),"function"==typeof n.entity&&(n.entity(o),console.log("found the entity dialog :"+n.entity.name)),t.showDialog(n).done(function(n){n&&"OK"===n&&e(i)})})},n=function(n,o,t){var a=new bespoke.sph.domain[o+"Field"](e.guid());i(n,a,"field."+o.toLowerCase(),t)},o=function(e){var n=this;return function(){var o=ko.unwrap(e.$type),t=ko.mapping.fromJS(ko.mapping.toJS(e)),a=/Bespoke\.Sph\.Domain\.(.*?)Field,/,d=a.exec(o)[1];i(n.Field,t,"field."+d.toLowerCase())}},t={addField:n,editField:o};return t};
bespoke.sph.domain.StartWorkflowActionPartial=function(){var o=require("durandal/system"),r=function(o){var r=this;return function(){r.WorkflowTriggerMapCollection.remove(o)}},e=function(){var r=new bespoke.sph.domain.WorkflowTriggerMap(o.guid());r.Field({Name:ko.observable("+ Field")}),this.WorkflowTriggerMapCollection.push(r)},i=function(o){this.WorkflowTriggerMapCollection.push(o)},n={editMapping:i,addMapping:e,removeMapping:r};return n};
bespoke.sph.domain.TabControlPartial=function(e){var n=require("durandal/system"),a=function(){var a=new bespoke.sph.domain.TabPanel(n.guid());e.TabPanelCollection.push(a)},o=function(n){return function(){e.TabPanelCollection.remove(n)}};return 0===e.TabPanelCollection().length&&(e.TabPanelCollection.push(new bespoke.sph.domain.TabPanel({WebId:n.guid(),Header:"Tab 1"})),e.TabPanelCollection.push(new bespoke.sph.domain.TabPanel({WebId:n.guid(),Header:"Tab 2"}))),{addItem:a,removeItem:o}};
bespoke.sph.domain.TransformDefinitionPartial=function(){var e=function(){var e=this;require(["viewmodels/assembly.dialog","durandal/app"],function(n,i){i.showDialog(n).done(function(i){i&&"OK"===i&&_(n.selectedAssemblies()).each(function(n){e.ReferencedAssemblyCollection.push(n)})})})},n=function(e){alert("not implemented"+e)},i=function(e){var n=this;return function(){n.ReferencedAssemblyCollection.remove(e)}},o={editReferencedAssembly:n,removeReferencedAssembly:i,addReferencedAssembly:e};return o};
bespoke.sph.domain.TriggerPartial=function(){var e=require("durandal/system"),o=function(e){var o=this;return function(){o.ActionCollection.remove(e)}},n=function(o){var n=this;return function(){var i=o.toLowerCase().replace(", ",",");require(["viewmodels/action."+i,"durandal/app"],function(o,t){if("function"!=typeof o.action)return void console.error("The dialog for "+i+" do not implement action as observable");var r=ko.mapping.fromJS(ko.toJS(o.action));"function"==typeof r.Title&&r.Title("");for(var a in r)if("function"==typeof r[a]&&"$type"!==a){var c=r[a]();"string"==typeof c&&r[a]("")}o.action(r),"function"==typeof o.trigger&&o.trigger(n),t.showDialog(o).done(function(i){if(i&&"OK"===i){var t=o.action();t.WebId(e.guid()),t.IsActive(!0),n.ActionCollection.push(t)}})})}},i=function(e){var o=this;return function(){var n=ko.unwrap(e.$type),i=ko.mapping.fromJS(ko.mapping.toJS(e));require(["viewmodels/action."+n.toLowerCase().replace(", ",","),"durandal/app"],function(n,t){n.action(i),"function"==typeof n.trigger&&n.trigger(o),t.showDialog(n).done(function(n){n&&"OK"===n&&o.ActionCollection.replace(e,i)})})}},t=function(){var o=new bespoke.sph.domain.Rule(e.guid());o.Left({Name:ko.observable("+ Field")}),o.Right({Name:ko.observable("+ Field")}),this.RuleCollection.push(o)},r=function(e){var o=this;return function(){o.RuleCollection.remove(e)}},a=function(){var e=this;require(["viewmodels/assembly.dialog","durandal/app"],function(o,n){n.showDialog(o).done(function(n){n&&"OK"===n&&_(o.selectedAssemblies()).each(function(o){e.ReferencedAssemblyCollection.push(o)})})})},c=function(e){alert("not implemented"+e)},l=function(e){var o=this;return function(){o.ReferencedAssemblyCollection.remove(e)}},u={editReferencedAssembly:c,removeReferencedAssembly:l,addReferencedAssembly:a,addRule:t,removeRule:r,removeAction:o,addAction:n,editAction:i};return u};
bespoke.sph.domain.TryScopePartial=function(){var o=function(o){return function(){var n=require("durandal/system"),c=this,e=new bespoke.sph.domain.CatchScope(n.guid());require(["viewmodels/catch.scope.dialog","durandal/app"],function(n,t){n.catchScope(e),"function"==typeof n.wd&&n.wd(o()),t.showDialog(n).done(function(o){o&&"OK"===o&&c.CatchScopeCollection.push(e)})})}},n=function(o,n){var c=n,e=ko.mapping.fromJS(ko.mapping.toJS(o));return function(){require(["viewmodels/catch.scope.dialog","durandal/app"],function(n,t){n.catchScope(e),"function"==typeof n.wd&&n.wd(c()),t.showDialog(n).done(function(n){if(n&&"OK"===n)for(var c in o)"function"==typeof o[c]&&"observable"===o[c].name?o[c](ko.unwrap(e[c])):o[c]=e[c]})})}},c=function(o,n){var c=this,e=n;return function(){e().ActivityCollection().forEach(function(n){n.CatchScope()===o.Id()&&n.CatchScope("")}),c.CatchScopeCollection.remove(o)}};return{addCatchScope:o,editCatchScope:n,removeCatchScope:c}};
bespoke.sph.domain.UpdateEntityActivityPartial=function(){var n=require("durandal/system"),r=function(r){var t=this;return function(){var e=new bespoke.sph.domain[r+"Mapping"](n.guid());t.PropertyMappingCollection.push(e)}},t=function(n){var r=this;return function(){r.PropertyMappingCollection.remove(n)}};return{addPropertyMapping:r,removePropertyMapping:t}};
bespoke.sph.domain.VariablePartial=function(){var r=(require("durandal/system"),ko.observable()),a=ko.observableArray();return{hasError:r,errors:a}};
bespoke.sph.domain.ViewColumnPartial=function(n){n.Path.subscribe(function(o){ko.unwrap(n.Header)||n.Header(o.replace("."," ").replace(/([A-Z])/g," $1").trim())});var o=require("durandal/system"),i=function(){this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(o.guid()))},t=function(n){var o=this;return function(){o.ConditionalFormattingCollection.remove(n)}},e=function(){this.IconCssClass("")},r=function(){this.IconStoreId("")};return{addConditionalFormatting:i,removeConditionalFormatting:t,removeIconStoreId:r,removeIconCssClass:e}};
bespoke.sph.domain.WorkflowDefinitionPartial=function(o){var e=require("durandal/system"),n=ko.observable(!1),i=require(objectbuilders.datacontext),t=ko.observableArray(),r=function(o){var e=this;return function(){e.ActivityCollection.remove(o)}},a=function(o){var e=this;return function(){_(e.ActivityCollection()).each(function(o){o.IsInitiator(!1)}),o.IsInitiator(!0)}},u=function(o){var n=this;return function(){var i=new bespoke.sph.domain[o+"Activity"](e.guid());require(["viewmodels/activity."+o.toLowerCase(),"durandal/app"],function(o,e){o.activity(i),"function"==typeof o.wd&&o.wd(n),e.showDialog(o).done(function(o){o&&"OK"===o&&n.ActivityCollection.push(i)})})}},c=function(o){var e=this;return function(){var t=i.toObservable(ko.mapping.toJS(o)),r=ko.unwrap(o.TypeName);n(!0),require(["viewmodels/activity."+r.toLowerCase(),"durandal/app"],function(n,i){n.activity(t),"function"==typeof n.wd&&n.wd(e),i.showDialog(n).done(function(e){if($("div.modalBlockout,div.modalHost").remove(),e&&"OK"===e)for(var n in o)if(o.hasOwnProperty(n)){var i="observable"===o[n].name||"d"===o[n].name;"function"==typeof o[n]&&i?o[n](ko.unwrap(t[n])):o[n]=t[n]}})})}},l=function(o){var n=this;return function(){var i=new bespoke.sph.domain[o+"Variable"](e.guid());require(["viewmodels/variable."+o.toLowerCase(),"durandal/app"],function(o,e){o.variable(i),"function"==typeof o.wd&&o.wd(n),e.showDialog(o).done(function(o){o&&"OK"===o&&n.VariableDefinitionCollection.push(i)})})}},d=function(o){var e=this;return function(){var n=ko.unwrap(o.$type),i=ko.mapping.fromJS(ko.mapping.toJS(o)),t=/Bespoke\.Sph\.Domain\.(.*?)Variable,/,r=t.exec(n)[1];require(["viewmodels/variable."+r.toLowerCase(),"durandal/app"],function(n,t){n.variable(i),"function"==typeof n.wd&&n.wd(e),t.showDialog(n).done(function(e){if(e&&"OK"===e)for(var n in o)"function"==typeof o[n]&&"observable"===o[n].name?o[n](ko.unwrap(i[n])):o[n]=i[n]})})}},f=function(o){var e=this;return function(){e.VariableDefinitionCollection.remove(o)}},s=function(){var o=this,n=new bespoke.sph.domain.CorrelationType(e.guid());require(["viewmodels/correlation.type.dialog","durandal/app"],function(e,i){e.correlationType(n),"function"==typeof e.wd&&e.wd(o),i.showDialog(e).done(function(e){e&&"OK"===e&&o.CorrelationTypeCollection.push(n)})})},p=function(o){var e=this;return function(){var n=ko.mapping.fromJS(ko.mapping.toJS(o));require(["viewmodels/correlation.type.dialog","durandal/app"],function(i,t){i.correlationType(n),"function"==typeof i.wd&&i.wd(e),t.showDialog(i).done(function(e){if(e&&"OK"===e)for(var i in o)"function"==typeof o[i]&&"observable"===o[i].name?o[i](ko.unwrap(n[i])):o[i]=n[i]})})}},v=function(o){var e=this;return function(){e.CorrelationTypeCollection.remove(o)}},m=function(){var o=this,n=new bespoke.sph.domain.CorrelationSet(e.guid());require(["viewmodels/correlation.set.dialog","durandal/app"],function(e,i){e.correlationSet(n),"function"==typeof e.wd&&e.wd(o),i.showDialog(e).done(function(e){e&&"OK"===e&&o.CorrelationSetCollection.push(n)})})},w=function(o){var e=this;return function(){var n=ko.mapping.fromJS(ko.mapping.toJS(o));require(["viewmodels/correlation.set.dialog","durandal/app"],function(i,t){i.correlationSet(n),"function"==typeof i.wd&&i.wd(e),t.showDialog(i).done(function(e){if(e&&"OK"===e)for(var i in o)"function"==typeof o[i]&&"observable"===o[i].name?o[i](ko.unwrap(n[i])):o[i]=n[i]})})}},y=function(o){var e=this;return function(){e.CorrelationSetCollection.remove(o)}},h=function(){var o=this;require(["viewmodels/assembly.dialog","durandal/app"],function(e,n){n.showDialog(e).done(function(n){n&&"OK"===n&&_(e.selectedAssemblies()).each(function(e){o.ReferencedAssemblyCollection.push(e)})})})},b=function(o){alert("not implemented"+o)},g=function(o){var e=this;return function(){e.ReferencedAssemblyCollection.remove(o)}},S=function(){var o=this,n=new bespoke.sph.domain.TryScope(e.guid());require(["viewmodels/try.scope.dialog","durandal/app"],function(e,i){e.tryScope(n),"function"==typeof e.wd&&e.wd(o),i.showDialog(e).done(function(e){e&&"OK"===e&&o.TryScopeCollection.push(n)})})},C=function(o){var e=this;return function(){var n=ko.mapping.fromJS(ko.mapping.toJS(o));require(["viewmodels/try.scope.dialog","durandal/app"],function(i,t){i.tryScope(n),"function"==typeof i.wd&&i.wd(e),t.showDialog(i).done(function(e){if(e&&"OK"===e)for(var i in o)"function"==typeof o[i]&&"observable"===o[i].name?o[i](ko.unwrap(n[i])):o[i]=n[i]})})}},k=function(o){var e=this;return function(){e.TryScopeCollection.remove(o)}},D=function(o){var e=o||this.SchemaStoreId();$.get("/WorkflowDefinition/GetXsdElementName/"+e).then(function(o){t(o)})};o.SchemaStoreId.subscribe(D);var A={isBusy:n,removeCorrelationType:v,addCorrelationType:s,editCorrelationType:p,removeCorrelationSet:y,addCorrelationSet:m,editCorrelationSet:w,removeVariable:f,addVariable:l,editVariable:d,removeReferencedAssembly:g,addReferencedAssembly:h,editReferencedAssembly:b,addActivity:u,editActivity:c,removeActivity:r,loadSchema:D,xsdElements:t,setStartActivity:a,addTryScope:S,editTryScope:C,removeTryScope:k};return A};
bespoke.sph.domain.WorkflowDesignerPartial=function(){return{}};
bespoke.sph.domain.WorkflowTriggerMapPartial=function(){var e=this,o=require("durandal/system"),i=function(e,o,i){require(["viewmodels/"+i,"durandal/app"],function(i,n){i.field(o),n.showDialog(i).done(function(i){i&&"OK"===i&&e(o)})})};return e.addField=function(e,n){var a=new bespoke.sph.domain[n+"Field"](o.guid());i(e,a,"field."+n.toLowerCase())},e.editField=function(e,o){return function(){var n=ko.unwrap(e.$type),a=ko.mapping.fromJS(ko.mapping.toJS(e)),r=/Bespoke\.Sph\.Domain\.(.*?)Field,/,d=r.exec(n)[1];i(o,a,"field."+d.toLowerCase())}},e},bespoke.sph.domain.WorkflowTriggerMapPartial.prototype=new bespoke.sph.domain.FieldContainer;
//# sourceMappingURL=__partial.min.js.map
