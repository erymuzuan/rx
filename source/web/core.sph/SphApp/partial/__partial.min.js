var bespoke=bespoke||{};bespoke.sph=bespoke.sph||{},bespoke.sph.domain=bespoke.sph.domain||{},bespoke.sph.domain.ActivityPartial=function(){var e=(require("durandal/system"),ko.observable()),o=ko.observable(!1),r=ko.observable(!1),s=ko.observableArray();return{breakpoint:o,hit:r,hasError:e,errors:s}};
bespoke.sph.domain.AssemblyFieldPartial=function(){var e=require(objectbuilders.system),r=function(){this.MethodArgCollection.push(new bespoke.sph.domain.MethodArg(e.guid()))},o=function(e){var r=this;return function(){r.MethodArgCollection.remove(e)}};return{addParameter:r,removeParameter:o}};
bespoke.sph.domain.BarChartItemPartial=function(){var e=require("durandal/system"),r=function(){this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(e.guid()))},i=function(e){var r=this;return function(){r.ChartSeriesCollection.remove(e)}};return{addSeries:r,removeSeries:i}};
bespoke.sph.domain.BusinessRulePartial=function(){var e=require("durandal/system"),i=function(){var i=this,o=new bespoke.sph.domain.Rule(e.guid());o.Left({Name:ko.observable("+ Field")}),o.Right({Name:ko.observable("+ Field")}),i.FilterCollection.push(o)},o=function(e){var i=this;return function(){i.FilterCollection.remove(e)}},l=function(){var i=this,o=new bespoke.sph.domain.Rule(e.guid());o.Left({Name:ko.observable("+ Field")}),o.Right({Name:ko.observable("+ Field")}),i.RuleCollection.push(o)},n=function(e){var i=this;return function(){i.RuleCollection.remove(e)}};return{addFilter:i,removeFilter:o,addRule:l,removeRule:n}};
bespoke.sph.domain.ButtonPartial=function(){var e=function(){var e=this,o=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),n=o.window||o,t=function(){n.code=ko.unwrap(e.Command),o.code||(o.code="//insert your code here"),n.saved=function(n,t){e.Command(n),t&&o.close()}};n.attachEvent?n.attachEvent("onload",t):t()};return{editCommand:e}};
bespoke.sph.domain.ChildEntityListViewPartial=function(n){var o=require("durandal/system"),e=function(){this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn({WebId:o.guid(),Header:"<New Column>"}))},i=function(n){var o=this;return function(){o.ViewColumnCollection.remove(n)}},t=function(){this.SortCollection.push(new bespoke.sph.domain.Sort(o.guid()))},r=function(n){var o=this;return function(){o.SortCollection.remove(n)}},u=function(o){return function(){var e=ko.mapping.fromJS(ko.mapping.toJS(o));require(["viewmodels/view.column.dialog","durandal/app"],function(i,t){i.column(e),i.entity(n.Entity()),t.showDialog(i).done(function(n){if(n&&"OK"===n)for(var i in o)"function"==typeof o[i]&&"observable"===o[i].name?o[i](ko.unwrap(e[i])):o[i]=e[i]})})}};return{addSort:t,removeSort:r,addViewColumn:e,editViewColumn:u,removeViewColumn:i}};
bespoke.sph.domain.ComboBoxPartial=function(){var o=require("durandal/system"),e=function(){var e=this,t=new bespoke.sph.domain.ComboBoxItem(o.guid());e.ComboBoxItemCollection.push(t)},t=function(o){var e=this;return function(){e.ComboBoxItemCollection.remove(o)}};return{addItem:e,removeItem:t}};
bespoke.sph.domain.ConstantFieldPartial=function(e){var a={Type:ko.observable(),Value:ko.observable()};return a.Value.subscribe(function(a){ko.unwrap(e.Name)||e.Name(a)}),a};
bespoke.sph.domain.CorrelationTypePartial=function(){var r=require("durandal/system"),o=function(r){var o=this;return function(){o.CorrelationPropertyCollection.remove(r)}},e=function(){this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(r.guid()))};return{removeCorrelationProperty:o,addCorrelationProperty:e}};
bespoke.sph.domain.CreateEntityActivityPartial=function(){var n=require("durandal/system"),r=function(r){var e=this;return function(){var t=new bespoke.sph.domain[r+"Mapping"](n.guid());e.PropertyMappingCollection.push(t)}},e=function(n){var r=this;return function(){r.PropertyMappingCollection.remove(n)}};return{addPropertyMapping:r,removePropertyMapping:e}};
bespoke.sph.domain.DataGridItemPartial=function(){var i=require("durandal/system"),n=function(){this.DataGridGroupDefinitionCollection.push(new bespoke.sph.domain.DataGridGroupDefinition(i.guid()))},o=function(i){var n=this;return function(){n.DataGridGroupDefinitionCollection.remove(i)}},t=function(){var n=this;n.DataGridColumnCollection.push(new bespoke.sph.domain.DataGridColumn(i.guid()))},e=function(i){var n=this;return function(){n.DataGridColumnCollection.remove(i)}};return{addColumn:t,removeColumn:e,addDataGridGroupDefinition:n,removeDataGridGroupDefinition:o}};
bespoke.sph.domain.DecisionActivityPartial=function(){var n=require("durandal/system"),i=function(){this.DecisionBranchCollection.push(new bespoke.sph.domain.DecisionBranch(n.guid()))},e=function(n){var i=this;return function(){i.DecisionBranchCollection.remove(n)}},o=function(){return this.DecisionBranchCollection()};return{addBranch:i,removeBranch:e,multipleEndPoints:o}};
bespoke.sph.domain.DelayActivityPartial=function(){return{isAsync:!0}};
bespoke.sph.domain.EntityChartPartial=function(e){var t=require(objectbuilders.datacontext),o=function(){"function"==typeof e.IsDashboardItem?e.IsDashboardItem(!0):e.IsDashboardItem=ko.observable(!0);var o=new $.Deferred;return t.post(ko.mapping.toJSON(e),"/sph/entitychart/save").done(o.resolve),o.promise()},r=function(){"function"==typeof e.IsDashboardItem?e.IsDashboardItem(!1):e.IsDashboardItem=ko.observable(!1);var o=new $.Deferred;return t.post(ko.mapping.toJSON(e),"/sph/entitychart/save").done(o.resolve),o.promise()};return{pin:o,unpin:r}};
bespoke.sph.domain.EntityDefinitionPartial=function(){var e=require("durandal/system"),n=require("durandal/app"),o=require(objectbuilders.datacontext),i=function(){this.MemberCollection.push(new bespoke.sph.domain.Member({WebId:e.guid(),Boost:1}))},t=function(e){var n=this;return function(){n.MemberCollection.remove(e)}},r=function(){this.EntityOperationCollection.push(new bespoke.sph.domain.EntityOperation({WebId:e.guid()}))},u=function(){var e=this;o.post(ko.toJSON(e),"/entity-definition").then(function(e){e.success})},s=function(e){var o=this;return function(){var i=new $.Deferred;return n.showMessage("Are you sure you want to remove this operation, this operation cannot be undone and will commit the entire changes to your EntityDefinition","Reactive Developer",["Yes","No"]).done(function(n){"Yes"===n&&(o.EntityOperationCollection.remove(e),u.call(o))}),i.promise()}},a=function(e){var n=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(o,i){var t=ko.mapping.fromJS(ko.mapping.toJS(e));o.member(t),i.showDialog(o).done(function(o){o&&"OK"==o&&n.BlockCollection.replace(e,t)})})}},l=function(){var n=new bespoke.sph.domain.BusinessRule({WebId:e.guid()}),o=this;require(["viewmodels/business.rule.dialog","durandal/app"],function(e,i){e.rule(n),i.showDialog(e).done(function(e){e&&"OK"==e&&o.BusinessRuleCollection.push(n)})})},d=function(e){var n=this;return function(){require(["viewmodels/business.rule.dialog","durandal/app"],function(i,t){var r=o.toObservable(ko.mapping.toJS(e));i.rule(r),t.showDialog(i).done(function(o){o&&"OK"==o&&n.BusinessRuleCollection.replace(e,r)})})}},c=function(e){var n=this;return function(){n.BusinessRuleCollection.remove(e)}},p=function(e){var n=this;return function(){console.log("show map ",n),console.log(" on member ",e),require(["viewmodels/member.map","durandal/app"],function(o,i){o.init(n.BuildingId(),e.MemberPlanStoreId()),i.showDialog(o).done(function(n){"OK"==n&&e.MemberPlanStoreId(o.spatialStoreId())})})}};return{addEntityOperation:r,removeEntityOperation:s,addMember:i,editMember:a,removeMember:t,addBusinessRule:l,editBusinessRule:d,removeBusinessRule:c,editMemberMap:p}};
bespoke.sph.domain.EntityLookupElementPartial=function(){var e=function(){var e=this,o=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),t=o.window||o,n=function(){t.code=ko.unwrap(e.Command),o.code||(o.code="//insert your code here"),t.saved=function(t,n){e.DisplayTemplate(t),n&&o.close()}};t.attachEvent?t.attachEvent("onload",n):n()},o=function(){var e=this;require(["viewmodels/members.selector.dialog","durandal/app"],function(o,t){o.entity(e.Entity()),t.showDialog(o,e.Entity()).done(function(t){t&&"OK"===t&&e.LookupColumnCollection(o.selectedMembers())})})};return{editDisplayTemplate:e,editColumns:o}};
bespoke.sph.domain.EntityOperationPartial=function(){var e=require("durandal/system"),i=function(e){var i=this;return function(){i.SetterActionChildCollection.remove(e)}},t=function(){var i=new bespoke.sph.domain.SetterActionChild(e.guid());i.Field({Name:ko.observable("+ Field")}),this.SetterActionChildCollection.push(i)},n={addChildAction:t,removeChildAction:i};return n};
bespoke.sph.domain.EntityViewPartial=function(){var o=require("durandal/system"),e=function(){this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(o.guid()))},n=function(o){var e=this;return function(){e.ConditionalFormattingCollection.remove(o)}},t=function(){this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(o.guid()))},i=function(o){var e=this;return function(){e.RouteParameterCollection.remove(o)}},r=function(){this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn(o.guid()))},u=function(o){var e=this;return function(){e.ViewColumnCollection.remove(o)}},a=function(){this.FilterCollection.push(new bespoke.sph.domain.Filter(o.guid()))},l=function(o){var e=this;return function(){e.FilterCollection.remove(o)}},m=function(){this.SortCollection.push(new bespoke.sph.domain.Sort(o.guid()))},s=function(o){var e=this;return function(){e.SortCollection.remove(o)}};return{addRouteParameter:t,removeRouteParameter:i,addConditionalFormatting:e,removeConditionalFormatting:n,addViewColumn:r,removeViewColumn:u,addSort:m,removeSort:s,addFilter:a,removeFilter:l}};
bespoke.sph.domain.ExecutedActivityPartial=function(){var e=(require("durandal/system"),ko.observable(!1)),r=ko.observable(!1),a=ko.observableArray();return{breakpoint:e,hit:r,errors:a}};
bespoke.sph.domain.FilterPartial=function(){var e=require("durandal/system"),i=function(e,i,n){require(["viewmodels/"+n,"durandal/app"],function(n,o){n.field(i),"function"==typeof n.entity&&console.log("found the entity dialog :"+n.entity.name),o.showDialog(n).done(function(n){n&&"OK"===n&&e(i)})})},n=function(n,o){var t=new bespoke.sph.domain[o+"Field"](e.guid());i(n,t,"field."+o.toLowerCase())},o=function(e){var n=this;return function(){var o=ko.unwrap(e.$type),t=ko.mapping.fromJS(ko.mapping.toJS(e)),a=/Bespoke\.Sph\.Domain\.(.*?)Field,/,d=a.exec(o)[1];i(n.Field,t,"field."+d.toLowerCase())}},t={addField:n,editField:o};return t};
bespoke.sph.domain.FormElementPartial=function(){return{}};
bespoke.sph.domain.HtmlElementPartial=function(){var t=function(){var t=this,e=window.open("/sph/editor/ace?mode=html","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),n=function(){e.code=ko.unwrap(t.Text),e.saved=function(n,o){t.Text(n),o&&e.close()}};e.attachEvent?e.attachEvent("onload",n):n()};return{editHtml:t}};
bespoke.sph.domain.FormTemplatePartial=function(){var a={};return a};
bespoke.sph.domain.IntervalSchedulePartial=function(){var e=ko.observable(),a=ko.observable();return{icon:e,name:a}};
bespoke.sph.domain.LineChartItemPartial=function(){var e=require("durandal/system"),r=function(){this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(e.guid()))},i=function(e){var r=this;return function(){r.ChartSeriesCollection.remove(e)}};return{addSeries:r,removeSeries:i}};
bespoke.sph.domain.ListViewPartial=function(e){var i=require("durandal/system"),n=function(e){var n=this;return function(){var o=new bespoke.sph.domain.ListViewColumn(i.guid()),t=bespoke.sph.domain[e](i.guid());o.Path.subscribe(function(e){t.Path(e)}),o.Label.subscribe(function(e){t.Label(e)}),o.Input(t),t.isSelected=ko.observable(!1),n.ListViewColumnCollection.push(o)}},o=function(e){var i=this;return function(){i.ListViewColumnCollection.remove(e)}};return _(e.ListViewColumnCollection()).each(function(e){e.Input().isSelected=ko.observable(!1)}),{addListViewColumn:n,removeListViewColumn:o}};
bespoke.sph.domain.ListViewColumnPartial=function(e){try{var n=/Bespoke\.Sph\.Domain\.(.*?),/,o=ko.unwrap(e.Input),p=null,t=null;o&&(p=n.exec(ko.unwrap(o.$type))[1],t="/images/form.element."+p+".png")}catch(a){}t=t||"/images/form.element.textbox.png";var r=ko.observable(t);return e.Input.subscribe(function(e){if(e.$type){var n=/Bespoke\.Sph\.Domain\.(.*?),/,o=n.exec(ko.unwrap(e.$type))[1];r("/images/form.element."+o+".png")}}),{icon:r}};
bespoke.sph.domain.ListenActivityPartial=function(){var n=require("durandal/system"),i=function(){var i=this,t=new bespoke.sph.domain.ListenBranch(n.guid());i.ListenBranchCollection.push(t)},t=function(n){var i=this;return function(){i.ListenBranchCollection.remove(n)}},e=function(){return this.ListenBranchCollection()};return{addBranch:i,removeBranch:t,multipleEndPoints:e}};
bespoke.sph.domain.MappingActivityPartial=function(){var n=require("durandal/system"),e=function(){var e=this,i=new bespoke.sph.domain.MappingSource(n.guid());e.MappingSourceCollection.push(i)},i=function(n){var e=this;return function(){e.MappingSourceCollection.remove(n)}};return{addMappingSource:e,removeMappingSource:i}};
bespoke.sph.domain.MemberPartial=function(){var e=require("durandal/system"),o=function(){this.MemberCollection.push(new bespoke.sph.domain.Member(e.guid()))},i=function(e){var o=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(i,n){var r=ko.mapping.fromJS(ko.mapping.toJS(e));i.member(r),n.showDialog(i).done(function(i){i&&"OK"==i&&o.BlockCollection.replace(e,r)})})}},n=function(e){var o=this;require(["viewmodels/field.permission.dialog","durandal/app"],function(i,n){var r=ko.mapping.fromJS(ko.mapping.toJS(e));i.member(r),n.showDialog(i).done(function(e){e&&"OK"==e&&o.FieldPermissionCollection(r.FieldPermissionCollection())})})},r=function(e){var o=this;return function(){o.MemberCollection.remove(e)}},a=function(e){var o=this;return function(){console.log("show map ",o),console.log(" on member ",e),require(["viewmodels/member.map","durandal/app"],function(i,n){i.init(o.BuildingId(),e.MemberPlanStoreId()),n.showDialog(i).done(function(o){"OK"==o&&e.MemberPlanStoreId(i.spatialStoreId())})})}},t=function(e,o,i){require(["viewmodels/"+i,"durandal/app"],function(i,n){i.field(o),n.showDialog(i).done(function(i){i&&"OK"===i&&e(o)})})},d=function(o,i){var n=new bespoke.sph.domain[i+"Field"](e.guid());t(o,n,"field."+i.toLowerCase())},l=function(e){var o=this;return function(){var i=ko.unwrap(e.$type),n=ko.mapping.fromJS(ko.mapping.toJS(e)),r=/Bespoke\.Sph\.Domain\.(.*?)Field,/,a=r.exec(i)[1];t(o.Field,n,"field."+a.toLowerCase())}};return{editPermission:n,addMember:o,editMember:i,editMemberMap:a,removeMember:r,addField:d,editField:l}};
bespoke.sph.domain.MethodArgPartial=function(){var e=require("durandal/system"),i=function(e,i,o){require(["viewmodels/"+o,"durandal/app"],function(o,n){o.field(i),n.showDialog(o).done(function(o){o&&"OK"===o&&e(i)})})},o=function(o,n){var a=new bespoke.sph.domain[n+"Field"](e.guid());i(o,a,"field."+n.toLowerCase())},n=function(e){var o=this;return function(){var n=ko.unwrap(e.$type),a=ko.mapping.fromJS(ko.mapping.toJS(e)),d=/Bespoke\.Sph\.Domain\.(.*?)Field,/,r=d.exec(n)[1];i(o.Field,a,"field."+r.toLowerCase())}},a={addField:o,editField:n};return a};
bespoke.sph.domain.NotificationActivityPartial=function(i){return i.From()||i.From("admin@@sph.my"),{}};
bespoke.sph.domain.ParallelActivityPartial=function(){var n=require("durandal/system"),a=function(){this.ParallelBranchCollection.push(new bespoke.sph.domain.ParallelBranch(n.guid()))},l=function(n){var a=this;return function(){a.ParallelBranchCollection.remove(n)}},r=function(){return this.ParallelBranchCollection()};return{addBranch:a,removeBranch:l,multipleEndPoints:r}};
bespoke.sph.domain.ReceiveActivityPartial=function(){var r=require("durandal/system"),e=function(r){var e=this;return function(){e.CorrelationPropertyCollection.remove(r)}},o=function(){this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(r.guid()))};return{removeCorrelationProperty:e,addCorrelationProperty:o}};
bespoke.sph.domain.ReportDeliveryPartial=function(){return new bespoke.sph.domain.IntervalScheduleContainer};
bespoke.sph.domain.RulePartial=function(){var e=require("durandal/system"),i=function(e,i,n){require(["viewmodels/"+n,"durandal/app"],function(n,o){n.field(i),o.showDialog(n).done(function(n){n&&"OK"===n&&e(i)})})},n=function(n,o){var a=new bespoke.sph.domain[o+"Field"](e.guid());i(n,a,"field."+o.toLowerCase())},o=function(e,n){return function(){var o=ko.unwrap(e.$type),a=ko.mapping.fromJS(ko.mapping.toJS(e)),d=/Bespoke\.Sph\.Domain\.(.*?)Field,/,r=d.exec(o)[1];i(n,a,"field."+r.toLowerCase())}},a={addField:n,editField:o};return a};
bespoke.sph.domain.ScheduledTriggerActivityPartial=function(){var e=new bespoke.sph.domain.IntervalScheduleContainer;return e};
bespoke.sph.domain.ScreenActivityPartial=function(){return{isAsync:!0,canStart:!0}};
bespoke.sph.domain.SearchDefinitionPartial=function(){var e=require("durandal/system"),i=function(e){var i=this;return function(){i.FilterCollection.remove(e)}},r=function(){var i=new bespoke.sph.domain.Filter(e.guid());this.FilterCollection.push(i)},n={addFilter:r,removeFilter:i};return n};
bespoke.sph.domain.SetterActionPartial=function(){var e=require("durandal/system"),i=function(e){var i=this;return function(){i.SetterActionChildCollection.remove(e)}},t=function(){var i=new bespoke.sph.domain.SetterActionChild(e.guid());i.Field({Name:ko.observable("+ Field")}),this.SetterActionChildCollection.push(i)},n={addChildAction:t,removeChildAction:i};return n};
bespoke.sph.domain.SetterActionChildPartial=function(){var e=require("durandal/system"),i=function(e,i,n,o){require(["viewmodels/"+n,"durandal/app"],function(n,t){n.field(i),"function"==typeof n.entity&&(n.entity(o),console.log("found the entity dialog :"+n.entity.name)),t.showDialog(n).done(function(n){n&&"OK"===n&&e(i)})})},n=function(n,o,t){var a=new bespoke.sph.domain[o+"Field"](e.guid());i(n,a,"field."+o.toLowerCase(),t)},o=function(e){var n=this;return function(){var o=ko.unwrap(e.$type),t=ko.mapping.fromJS(ko.mapping.toJS(e)),a=/Bespoke\.Sph\.Domain\.(.*?)Field,/,d=a.exec(o)[1];i(n.Field,t,"field."+d.toLowerCase())}},t={addField:n,editField:o};return t};
bespoke.sph.domain.StartWorkflowActionPartial=function(){var o=require("durandal/system"),r=function(o){var r=this;return function(){r.WorkflowTriggerMapCollection.remove(o)}},e=function(){var r=new bespoke.sph.domain.WorkflowTriggerMap(o.guid());r.Field({Name:ko.observable("+ Field")}),this.WorkflowTriggerMapCollection.push(r)},i=function(o){this.WorkflowTriggerMapCollection.push(o)},n={editMapping:i,addMapping:e,removeMapping:r};return n};
bespoke.sph.domain.TriggerPartial=function(){var e=require("durandal/system"),o=function(e){var o=this;return function(){o.ActionCollection.remove(e)}},n=function(o){var n=this;return function(){var i=o.toLowerCase().replace(", ",",");require(["viewmodels/action."+i,"durandal/app"],function(o,t){return"function"!=typeof o.action?void console.error("The dialog for "+i+" do not implement action as observable"):("function"==typeof o.trigger&&o.trigger(n),void t.showDialog(o).done(function(i){if(i&&"OK"===i){var t=o.action();t.WebId(e.guid()),t.IsActive(!0),n.ActionCollection.push(t)}}))})}},i=function(e){var o=this;return function(){var n=ko.unwrap(e.$type),i=ko.mapping.fromJS(ko.mapping.toJS(e));require(["viewmodels/action."+n.toLowerCase().replace(", ",","),"durandal/app"],function(n,t){n.action(i),"function"==typeof n.trigger&&n.trigger(o),t.showDialog(n).done(function(n){n&&"OK"===n&&o.ActionCollection.replace(e,i)})})}},t=function(){var o=new bespoke.sph.domain.Rule(e.guid());o.Left({Name:ko.observable("+ Field")}),o.Right({Name:ko.observable("+ Field")}),this.RuleCollection.push(o)},r=function(e){var o=this;return function(){o.RuleCollection.remove(e)}},a=function(){var e=this;require(["viewmodels/assembly.dialog","durandal/app"],function(o,n){n.showDialog(o).done(function(n){n&&"OK"===n&&_(o.selectedAssemblies()).each(function(o){e.ReferencedAssemblyCollection.push(o)})})})},c=function(e){alert("not implemented"+e)},l=function(e){var o=this;return function(){o.ReferencedAssemblyCollection.remove(e)}},u={editReferencedAssembly:c,removeReferencedAssembly:l,addReferencedAssembly:a,addRule:t,removeRule:r,removeAction:o,addAction:n,editAction:i};return u};
bespoke.sph.domain.UpdateEntityActivityPartial=function(){var n=require("durandal/system"),r=function(r){var t=this;return function(){var e=new bespoke.sph.domain[r+"Mapping"](n.guid());t.PropertyMappingCollection.push(e)}},t=function(n){var r=this;return function(){r.PropertyMappingCollection.remove(n)}};return{addPropertyMapping:r,removePropertyMapping:t}};
bespoke.sph.domain.VariablePartial=function(){var r=(require("durandal/system"),ko.observable()),a=ko.observableArray();return{hasError:r,errors:a}};
bespoke.sph.domain.ViewColumnPartial=function(){var n=require("durandal/system"),o=function(){this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(n.guid()))},i=function(n){var o=this;return function(){o.ConditionalFormattingCollection.remove(n)}},t=function(){this.IconCssClass("")},e=function(){this.IconStoreId("")};return{addConditionalFormatting:o,removeConditionalFormatting:i,removeIconStoreId:e,removeIconCssClass:t}};
bespoke.sph.domain.WorkflowDefinitionPartial=function(e){var o=require("durandal/system"),n=ko.observable(!1),i=require(objectbuilders.datacontext),t=ko.observableArray(),r=function(e){var o=this;return function(){o.ActivityCollection.remove(e)}},a=function(e){var o=this;return function(){_(o.ActivityCollection()).each(function(e){e.IsInitiator(!1)}),e.IsInitiator(!0)}},u=function(e){var n=this;return function(){var i=new bespoke.sph.domain[e+"Activity"](o.guid());require(["viewmodels/activity."+e.toLowerCase(),"durandal/app"],function(e,o){e.activity(i),"function"==typeof e.wd&&e.wd(n),o.showDialog(e).done(function(e){e&&"OK"===e&&n.ActivityCollection.push(i)})})}},l=function(e){var o=this;return function(){var t=i.toObservable(ko.mapping.toJS(e)),r=ko.unwrap(e.TypeName);n(!0),require(["viewmodels/activity."+r.toLowerCase(),"durandal/app"],function(n,i){n.activity(t),"function"==typeof n.wd&&n.wd(o),i.showDialog(n).done(function(o){if($("div.modalBlockout,div.modalHost").remove(),o&&"OK"===o)for(var n in e)if(e.hasOwnProperty(n)){var i="observable"===e[n].name||"d"===e[n].name;"function"==typeof e[n]&&i?e[n](ko.unwrap(t[n])):e[n]=t[n]}})})}},c=function(e){var n=this;return function(){var i=new bespoke.sph.domain[e+"Variable"](o.guid());require(["viewmodels/variable."+e.toLowerCase(),"durandal/app"],function(e,o){e.variable(i),"function"==typeof e.wd&&e.wd(n),o.showDialog(e).done(function(e){e&&"OK"===e&&n.VariableDefinitionCollection.push(i)})})}},d=function(e){var o=this;return function(){var n=ko.unwrap(e.$type),i=ko.mapping.fromJS(ko.mapping.toJS(e)),t=/Bespoke\.Sph\.Domain\.(.*?)Variable,/,r=t.exec(n)[1];require(["viewmodels/variable."+r.toLowerCase(),"durandal/app"],function(n,t){n.variable(i),"function"==typeof n.wd&&n.wd(o),t.showDialog(n).done(function(o){if(o&&"OK"===o)for(var n in e)"function"==typeof e[n]&&"observable"===e[n].name?e[n](ko.unwrap(i[n])):e[n]=i[n]})})}},f=function(e){var o=this;return function(){o.VariableDefinitionCollection.remove(e)}},s=function(){var e=this,n=new bespoke.sph.domain.CorrelationType(o.guid());require(["viewmodels/correlation.type.dialog","durandal/app"],function(o,i){o.correlationType(n),"function"==typeof o.wd&&o.wd(e),i.showDialog(o).done(function(o){o&&"OK"===o&&e.CorrelationTypeCollection.push(n)})})},p=function(e){var o=this;return function(){var n=ko.mapping.fromJS(ko.mapping.toJS(e));require(["viewmodels/correlation.type.dialog","durandal/app"],function(i,t){i.correlationType(n),"function"==typeof i.wd&&i.wd(o),t.showDialog(i).done(function(o){if(o&&"OK"===o)for(var i in e)"function"==typeof e[i]&&"observable"===e[i].name?e[i](ko.unwrap(n[i])):e[i]=n[i]})})}},v=function(e){var o=this;return function(){o.CorrelationTypeCollection.remove(e)}},m=function(){var e=this,n=new bespoke.sph.domain.CorrelationSet(o.guid());require(["viewmodels/correlation.set.dialog","durandal/app"],function(o,i){o.correlationSet(n),"function"==typeof o.wd&&o.wd(e),i.showDialog(o).done(function(o){o&&"OK"===o&&e.CorrelationSetCollection.push(n)})})},w=function(e){var o=this;return function(){var n=ko.mapping.fromJS(ko.mapping.toJS(e));require(["viewmodels/correlation.set.dialog","durandal/app"],function(i,t){i.correlationSet(n),"function"==typeof i.wd&&i.wd(o),t.showDialog(i).done(function(o){if(o&&"OK"===o)for(var i in e)"function"==typeof e[i]&&"observable"===e[i].name?e[i](ko.unwrap(n[i])):e[i]=n[i]})})}},y=function(e){var o=this;return function(){o.CorrelationSetCollection.remove(e)}},h=function(){var e=this;require(["viewmodels/assembly.dialog","durandal/app"],function(o,n){n.showDialog(o).done(function(n){n&&"OK"===n&&_(o.selectedAssemblies()).each(function(o){e.ReferencedAssemblyCollection.push(o)})})})},b=function(e){alert("not implemented"+e)},C=function(e){var o=this;return function(){o.ReferencedAssemblyCollection.remove(e)}},g=function(e){var o=e||this.SchemaStoreId();$.get("/WorkflowDefinition/GetXsdElementName/"+o).then(function(e){t(e)})};e.SchemaStoreId.subscribe(g);var k={isBusy:n,removeCorrelationType:v,addCorrelationType:s,editCorrelationType:p,removeCorrelationSet:y,addCorrelationSet:m,editCorrelationSet:w,removeVariable:f,addVariable:c,editVariable:d,removeReferencedAssembly:C,addReferencedAssembly:h,editReferencedAssembly:b,addActivity:u,editActivity:l,removeActivity:r,loadSchema:g,xsdElements:t,setStartActivity:a};return k};
bespoke.sph.domain.WorkflowDesignerPartial=function(){return{}};
bespoke.sph.domain.WorkflowTriggerMapPartial=function(){var e=this,o=require("durandal/system"),i=function(e,o,i){require(["viewmodels/"+i,"durandal/app"],function(i,n){i.field(o),n.showDialog(i).done(function(i){i&&"OK"===i&&e(o)})})};return e.addField=function(e,n){var a=new bespoke.sph.domain[n+"Field"](o.guid());i(e,a,"field."+n.toLowerCase())},e.editField=function(e,o){return function(){var n=ko.unwrap(e.$type),a=ko.mapping.fromJS(ko.mapping.toJS(e)),r=/Bespoke\.Sph\.Domain\.(.*?)Field,/,d=r.exec(n)[1];i(o,a,"field."+d.toLowerCase())}},e},bespoke.sph.domain.WorkflowTriggerMapPartial.prototype=new bespoke.sph.domain.FieldContainer;
bespoke.sph.domain.DailySchedulePartial=function(){return{name:ko.observable("Daily Schedule"),icon:ko.observable("fa fa-calendar")}},bespoke.sph.domain.WeeklySchedulePartial=function(){return{name:ko.observable("Weekly Schedule"),icon:ko.observable("fa fa-th-list")}},bespoke.sph.domain.MonthlySchedulePartial=function(){return{name:ko.observable("Monthly Schedule"),icon:ko.observable("fa fa-calendar-o"),dateOptions:_.range(1,31)}};
//# sourceMappingURL=__partial.min.js.map