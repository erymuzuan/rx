/// <reference path="../schemas/report.builder.g.js" />
/// <reference path="../../Scripts/knockout-3.4.0.debug.js" />
/// <reference path="../../Scripts/require.js" />
/// <reference path="../../Scripts/underscore.js" />
/// <reference path="../../Scripts/jquery-2.0.3.intellisense.js" />
/// <reference path="../../App/durandal/amd/require.js" />
/// <reference path="../../App/durandal/system.js" />
var bespoke=bespoke||{};bespoke.sph=bespoke.sph||{},bespoke.sph.domain=bespoke.sph.domain||{},bespoke.sph.domain.ActivityPartial=function(){var a=require("durandal/system"),b=ko.observable(),c=ko.observable(!1),d=ko.observable(!1),e=ko.observable(!1),f=ko.observableArray();return{breakpoint:c,hit:e,selected:d,hasError:b,errors:f}};
bespoke.sph.domain.AssemblyFieldPartial=function(){var a=require(objectbuilders.system);return{addParameter:function(){this.MethodArgCollection.push(new bespoke.sph.domain.MethodArg(a.guid()))},removeParameter:function(b){var c=this;return function(){c.MethodArgCollection.remove(b)}}}};
bespoke.sph.domain.BarChartItemPartial=function(){var a=require('durandal/system');return{addSeries:function(){this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(a.guid()))},removeSeries:function(b){var c=this;return function(){c.ChartSeriesCollection.remove(b)}}}};
bespoke.sph.domain.BusinessRulePartial=function(a){var b=require("durandal/system");return{addFilter:function(){var c=this,d=new bespoke.sph.domain.Rule(b.guid());d.Left({Name:ko.observable("+ Field")}),d.Right({Name:ko.observable("+ Field")}),c.FilterCollection.push(d)},removeFilter:function(c){var d=this;return function(){d.FilterCollection.remove(c)}},addRule:function(){var c=this,d=new bespoke.sph.domain.Rule(b.guid());d.Left({Name:ko.observable("+ Field")}),d.Right({Name:ko.observable("+ Field")}),c.RuleCollection.push(d)},removeRule:function(c){var d=this;return function(){d.RuleCollection.remove(c)}}}};
bespoke.sph.domain.ButtonPartial=function(){var a=ko.computed(function(){});return{editCommand:function(){var b=this,c=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),d=c.window||c,e=function(){d.code=ko.unwrap(b.Command),c.code||(c.code="//insert your code here"),d.saved=function(f,g){b.Command(f),g&&c.close()}};d.attachEvent?d.attachEvent("onload",e):e()},editOperationSuccessCallback:function(){var b=this,c=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),d=c.window||c,e=function(){d.code=ko.unwrap(b.OperationSuccessCallback),c.code||(c.code="//insert your code here"),d.saved=function(f,g){b.OperationSuccessCallback(f),g&&c.close()}};d.attachEvent?d.attachEvent("onload",e):e()},editOperationFailureCallback:function(){var b=this,c=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),d=c.window||c,e=function(){d.code=ko.unwrap(b.OperationFailureCallback),c.code||(c.code="//insert your code here"),d.saved=function(f,g){b.OperationFailureCallback(f),g&&c.close()}};d.attachEvent?d.attachEvent("onload",e):e()},canSetSuccessCallback:a}};
bespoke.sph.domain.CatchScopePartial=function(){};
bespoke.sph.domain.ChildEntityListViewPartial=function(a){// ViewColumn
var b=require('durandal/system');return{addSort:function(){this.SortCollection.push(new bespoke.sph.domain.Sort(b.guid()))},removeSort:function(c){var d=this;return function(){d.SortCollection.remove(c)}},addViewColumn:function(){this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn({WebId:b.guid(),Header:'<New Column>'}))},editViewColumn:function(c){return function(){var d=ko.mapping.fromJS(ko.mapping.toJS(c));require(['viewmodels/view.column.dialog','durandal/app'],function(e,f){e.column(d),e.entity(a.Entity()),f.showDialog(e).done(function(h){if(h&&'OK'===h)for(var i in c)'function'==typeof c[i]&&'observable'===c[i].name?c[i](ko.unwrap(d[i])):c[i]=d[i]})})}},removeViewColumn:function(c){var d=this;return function(){d.ViewColumnCollection.remove(c)}}}};
bespoke.sph.domain.ChildWorkflowActivityPartial=function(){var a=require("durandal/system");return{addExecutedMapping:function(){var b=new bespoke.sph.domain.PropertyMapping(a.guid());this.ExecutedPropertyMappingCollection.push(b)},removeExecutedMapping:function(b){var c=this;return function(){c.ExecutedPropertyMappingCollection.remove(b)}},addMapping:function(){var b=new bespoke.sph.domain.PropertyMapping(a.guid());this.PropertyMappingCollection.push(b)},removeMapping:function(b){var c=this;return function(){c.PropertyMappingCollection.remove(b)}}}};
bespoke.sph.domain.ComboBoxPartial=function(){var a=require('durandal/system');return{addItem:function(){var b=this,c=new bespoke.sph.domain.ComboBoxItem(a.guid());b.ComboBoxItemCollection.push(c)},removeItem:function(b){var c=this;return function(){c.ComboBoxItemCollection.remove(b)}}}};
bespoke.sph.domain.ComplexMemberPartial=function(a){a.Name.subscribe(function(b){ko.unwrap(a.TypeName)||$.get("/entity-definition/singular/"+b).done(a.TypeName)})};
bespoke.sph.domain.ConstantFieldPartial=function(a,b){var c={Type:ko.observable(),Value:ko.observable(b.Value)};return c.Value.subscribe(function(d){ko.unwrap(a.Name)||a.Name(d)}),c};
bespoke.sph.domain.CorrelationTypePartial=function(){var a=require('durandal/system');return{removeCorrelationProperty:function(b){var c=this;return function(){c.CorrelationPropertyCollection.remove(b)}},addCorrelationProperty:function(){this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(a.guid()))}}};
bespoke.sph.domain.CreateEntityActivityPartial=function(){var a=require('durandal/system');return{addPropertyMapping:function(b){var c=this;return function(){var d=new bespoke.sph.domain[b+'Mapping'](a.guid());c.PropertyMappingCollection.push(d)}},removePropertyMapping:function(b){var c=this;return function(){c.PropertyMappingCollection.remove(b)}}}};
bespoke.sph.domain.DataGridItemPartial=function(){// DataGridGroup
var a=require('durandal/system');return{addColumn:function(){var b=this;b.DataGridColumnCollection.push(new bespoke.sph.domain.DataGridColumn(a.guid()))},removeColumn:function(b){var c=this;return function(){c.DataGridColumnCollection.remove(b)}},addDataGridGroupDefinition:function(){this.DataGridGroupDefinitionCollection.push(new bespoke.sph.domain.DataGridGroupDefinition(a.guid()))},removeDataGridGroupDefinition:function(b){var c=this;return function(){c.DataGridGroupDefinitionCollection.remove(b)}}}};
bespoke.sph.domain.DecisionActivityPartial=function(){var a=require('durandal/system');return{addBranch:function(){this.DecisionBranchCollection.push(new bespoke.sph.domain.DecisionBranch(a.guid()))},removeBranch:function(b){var c=this;return function(){c.DecisionBranchCollection.remove(b)}},multipleEndPoints:function(){return this.DecisionBranchCollection()}}};
bespoke.sph.domain.DelayActivityPartial=function(){return{isAsync:!0}};
bespoke.sph.domain.DelimitedTextFormatterPartial=function(a){const b=require("durandal/system"),c=ko.observable(new bespoke.sph.domain.FlatFileDetailTag),d=ko.observableArray(["$record"]),e=function(g){g&&0>d().indexOf(g)&&d.push(g)},f=ko.computed(function(){return ko.unwrap(a.SampleStoreId)&&ko.unwrap(a.Delimiter)});return{isWizardOk:f,selectedRow:c,selectRow:function(g){c(g)},addDetailsRow:function(){const g=new bespoke.sph.domain.FlatFileDetailTag(b.guid());g.nameChangedSubscription=g.Name.subscribe(e),this.DetailRowCollection.push(g),c(g)},removeDetailsRow:function(g){var h=this;return function(){h.DetailRowCollection.remove(g),g.nameChangedSubscription&&g.nameChangedSubscription.dispose()}},parentOptions:d}};
bespoke.sph.domain.EntityChartPartial=function(a){var b=require(objectbuilders.datacontext);return{pin:function(){"function"==typeof a.IsDashboardItem?a.IsDashboardItem(!0):a.IsDashboardItem=ko.observable(!0);var c=new $.Deferred;return b.post(ko.mapping.toJSON(a),"/sph/entitychart/save").done(c.resolve),c.promise()},unpin:function(){"function"==typeof a.IsDashboardItem?a.IsDashboardItem(!1):a.IsDashboardItem=ko.observable(!1);var c=new $.Deferred;return b.post(ko.mapping.toJSON(a),"/sph/entitychart/save").done(c.resolve),c.promise()}}};
bespoke.sph.domain.ServiceContractPartial=function(){var a=require(objectbuilders.datacontext);return{publish:function(b){return a.post(ko.toJSON(b),"/entity-definition/publish/service-contract")}}},bespoke.sph.domain.EntityDefinitionPartial=function(){var a=require("durandal/system"),b=require("durandal/app"),c=require(objectbuilders.datacontext),d=function(){var e=this;c.post(ko.toJSON(e),"/entity-definition").then(function(f){f.success})};return{addEntityOperation:function(){this.EntityOperationCollection.push(new bespoke.sph.domain.EntityOperation({WebId:a.guid()}))},removeEntityOperation:function(e){var f=this;return function(){var g=new $.Deferred;return b.showMessage("Are you sure you want to remove this operation, this operation cannot be undone and will commit the entire changes to your EntityDefinition","Reactive Developer",["Yes","No"]).done(function(h){"Yes"===h&&(f.EntityOperationCollection.remove(e),d.call(f))}),g.promise()}},addMember:function(){this.MemberCollection.push(new bespoke.sph.domain.Member({WebId:a.guid(),Boost:1}))},editMember:function(e){var f=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(g,h){var i=ko.mapping.fromJS(ko.mapping.toJS(e));g.member(i),h.showDialog(g).done(function(j){j&&"OK"===j&&f.BlockCollection.replace(e,i)})})}},removeMember:function(e){var f=this;return function(){f.MemberCollection.remove(e)}},addBusinessRule:function(){var e=new bespoke.sph.domain.BusinessRule({WebId:a.guid()}),f=this;require(["viewmodels/business.rule.dialog","durandal/app"],function(g,h){g.rule(e),h.showDialog(g).done(function(i){i&&"OK"===i&&f.BusinessRuleCollection.push(e)})})},editBusinessRule:function(e){var f=this;return function(){require(["viewmodels/business.rule.dialog","durandal/app"],function(g,h){var i=c.toObservable(ko.mapping.toJS(e));g.rule(i),h.showDialog(g).done(function(j){j&&"OK"==j&&f.BusinessRuleCollection.replace(e,i)})})}},removeBusinessRule:function(e){var f=this;return function(){f.BusinessRuleCollection.remove(e)}},editMemberMap:function(e){var f=this;return function(){console.log("show map ",f),console.log(" on member ",e),require(["viewmodels/member.map","durandal/app"],function(g,h){g.init(f.BuildingId(),e.MemberPlanStoreId()),h.showDialog(g).done(function(i){"OK"==i&&e.MemberPlanStoreId(g.spatialStoreId())})})}}}};
bespoke.sph.domain.EntityFormPartial=function(){var a=ko.computed(function(){});return{editOperationSuccessCallback:function(){var b=this,c=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),d=c.window||c,e=function(){d.code=ko.unwrap(b.OperationSuccessCallback),c.code||(c.code="//insert your code here"),d.saved=function(f,g){b.OperationSuccessCallback(f),g&&c.close()}};d.attachEvent?d.attachEvent("onload",e):e()},editOperationFailureCallback:function(){var b=this,c=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),d=c.window||c,e=function(){d.code=ko.unwrap(b.OperationFailureCallback),c.code||(c.code="//insert your code here"),d.saved=function(f,g){b.OperationFailureCallback(f),g&&c.close()}};d.attachEvent?d.attachEvent("onload",e):e()},canSetSuccessCallback:a}};
bespoke.sph.domain.EntityLookupElementPartial=function(){return{editDisplayTemplate:function(){var a=this,b=window.open("/sph/editor/ace?mode=javascript","_blank",`height=${screen.height},width=${screen.width},toolbar=0,location=0,fullscreen=yes`),c=b.window||b,d=function(){c.code=ko.unwrap(a.Command),b.code||(b.code="//insert your code here"),c.saved=function(e,f){a.DisplayTemplate(e),f&&b.close()}};c.attachEvent?c.attachEvent("onload",d):d()},editColumns:function(){var a=this;require(["viewmodels/members.selector.dialog","durandal/app"],function(b,c){b.entity(a.Entity()),b.selectedMembers(a.LookupColumnCollection()),c.showDialog(b,a.Entity()).done(function(d){d&&"OK"===d&&a.LookupColumnCollection(b.selectedMembers())})})},editFilter:function(){var a=this;require(["viewmodels/entity.lookup.filter.dialog","durandal/app"],function(b,c){b.entity(a.Entity()),b.selectedFilters(a.FilterCollection()),c.showDialog(b,a.Entity()).done(function(d){d&&"OK"===d&&a.FilterCollection(b.selectedFilters())})})}}};
bespoke.sph.domain.EntityViewPartial=function(){// Filter
var a=require("durandal/system");return{addRouteParameter:function(){this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(a.guid()))},removeRouteParameter:function(b){var c=this;return function(){c.RouteParameterCollection.remove(b)}},addConditionalFormatting:function(){this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(a.guid()))},removeConditionalFormatting:function(b){var c=this;return function(){c.ConditionalFormattingCollection.remove(b)}},addViewColumn:function(){this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn(a.guid()))},removeViewColumn:function(b){var c=this;return function(){c.ViewColumnCollection.remove(b)}},addSort:function(){this.SortCollection.push(new bespoke.sph.domain.Sort(a.guid()))},removeSort:function(b){var c=this;return function(){c.SortCollection.remove(b)}},addFilter:function(){this.FilterCollection.push(new bespoke.sph.domain.Filter(a.guid()))},removeFilter:function(b){var c=this;return function(){c.FilterCollection.remove(b)}}}};
bespoke.sph.domain.ExecutedActivityPartial=function(){var a=require('durandal/system'),b=ko.observable(!1),c=ko.observable(!1),d=ko.observableArray();return{breakpoint:b,hit:c,errors:d}};
bespoke.sph.domain.FilterPartial=function(){var a=require("durandal/system"),b=function(c,d,e){require(["viewmodels/"+e,"durandal/app"],function(f,g){f.field(d),"function"==typeof f.entity&&console.log("found the entity dialog :"+f.entity.name),g.showDialog(f).done(function(h){h&&"OK"===h&&c(d)})})};return{addField:function(c,d){var e=new bespoke.sph.domain[d+"Field"](a.guid());b(c,e,"field."+d.toLowerCase())},editField:function(c){var d=this;return function(){var e=ko.unwrap(c.$type),f=ko.mapping.fromJS(ko.mapping.toJS(c)),g=/Bespoke\.Sph\.Domain\.(.*?)Field,/,h=g.exec(e)[1];b(d.Field,f,"field."+h.toLowerCase())}}}};
bespoke.sph.domain.FixedLengthTextFormatterPartial=function(a){const b=require("durandal/system"),c=ko.observableArray(["$record"]),d=function(j){j&&0>c().indexOf(j)&&c.push(j)},e=ko.computed(function(){return ko.unwrap(a.SampleStoreId)&&ko.unwrap(a.Delimiter)}),g=function(j,l,m){if(m!==l){const q=j[l],r=m<l?-1:1;for(let s=l;s!==m;s+=r)j[s]=j[s+r];j[m]=q}},h=function(j,l){const m=a.FieldMappingCollection,n=ko.unwrap(m),o=n.indexOf(j);g(n,o,o+l),m(n),m().forEach((p,q)=>p.Order(q+1))};return{isWizardOk:e,addDetailsRow:function(){const j=new bespoke.sph.domain.FlatFileDetailTag(b.guid());j.nameChangedSubscription=j.Name.subscribe(d),this.DetailRowCollection.push(j)},removeDetailsRow:function(j){var l=this;return function(){l.DetailRowCollection.remove(j),j.nameChangedSubscription&&j.nameChangedSubscription.dispose()}},parentOptions:c,moveUp:function(j){h(j,-1)},moveDown:function(j){h(j,1)},addField:function(){const j=new bespoke.sph.domain.FixedLengthTextFieldMapping(b.guid());this.FieldMappingCollection.push(j)},removeField:function(j){var l=this;return function(){l.FieldMappingCollection.remove(j)}}}};
bespoke.sph.domain.FormDialogPartial=function(a){var b=require("durandal/system"),c=function(){var f=ko.unwrap(a.DialogButtonCollection);_(f).each(function(i){i.canMoveDown(!0),i.canMoveUp(!0)});var g=_(f).first(),h=_(f).last();g&&g.canMoveUp(!1),h&&h.canMoveDown(!1)},d=function(f,g,h){if(h!==g){for(var i=f[g],j=h<g?-1:1,l=g;l!==h;l+=j)f[l]=f[l+j];f[h]=i}},e=function(f,g){var h=a.DialogButtonCollection().indexOf(f),i=ko.unwrap(a.DialogButtonCollection);d(i,h,h+g),_(i).each(function(j){j.canMoveDown(!0),j.canMoveUp(!0)}),_(i).first().canMoveUp(!1),_(i).last().canMoveDown(!1),a.DialogButtonCollection(i)};return c(),{removeDialogButton:function(f){a.DialogButtonCollection.remove(f),c()},addDialogButton:function(){a.DialogButtonCollection.push(new bespoke.sph.domain.DialogButton({WebId:b.guid(),canMoveDown:!1})),c()},moveDown:function(f){e(f,1)},moveUp:function(f){e(f,-1)}}},bespoke.sph.domain.DialogButtonPartial=function(a){var b=ko.observable(!0),c=ko.observable(!0);return{canMoveDown:c,canMoveUp:b}};
bespoke.sph.domain.FormElementPartial=function(){return{}};
bespoke.sph.domain.HtmlElementPartial=function(){return{editHtml:function(){var a=this,b=window.open('/sph/editor/ace?mode=html','_blank','height='+screen.height+',width='+screen.width+',toolbar=0,location=0,fullscreen=yes'),c=function(){b.code=ko.unwrap(a.Text),b.saved=function(d,e){a.Text(d),e&&b.close()}};b.attachEvent?b.attachEvent('onload',c):c()}}};
bespoke.sph.domain.FormTemplatePartial=function(){return{}};
bespoke.sph.domain.IntervalSchedulePartial=function(){var a=ko.observable(),b=ko.observable();return{icon:a,name:b}};
bespoke.sph.domain.LineChartItemPartial=function(){var a=require('durandal/system');return{addSeries:function(){this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(a.guid()))},removeSeries:function(b){var c=this;return function(){c.ChartSeriesCollection.remove(b)}}}};
bespoke.sph.domain.ListenActivityPartial=function(){var a=require('durandal/system');return{addBranch:function(){var b=this,c=new bespoke.sph.domain.ListenBranch(a.guid());b.ListenBranchCollection.push(c)},removeBranch:function(b){var c=this;return function(){c.ListenBranchCollection.remove(b)}},multipleEndPoints:function(){return this.ListenBranchCollection()}}};
bespoke.sph.domain.ListViewPartial=function(a){// ListViewColumn
var b=require('durandal/system');return _(a.ListViewColumnCollection()).each(function(c){c.Input().isSelected=ko.observable(!1)}),{addListViewColumn:function(c){var d=this;return function(){var e=new bespoke.sph.domain.ListViewColumn(b.guid()),f=bespoke.sph.domain[c](b.guid());e.Path.subscribe(function(g){f.Path(g)}),e.Label.subscribe(function(g){f.Label(g)}),e.Input(f),f.isSelected=ko.observable(!1),d.ListViewColumnCollection.push(e)}},removeListViewColumn:function(c){var d=this;return function(){d.ListViewColumnCollection.remove(c)}}}};
bespoke.sph.domain.ListViewColumnPartial=function(a){try{var b=/Bespoke\.Sph\.Domain\.(.*?),/,d=ko.unwrap(a.Input),e=null,f=null;d&&(e=b.exec(ko.unwrap(d.$type))[1],f='/images/form.element.'+e+'.png')}catch(h){}f=f||'/images/form.element.textbox.png';var g=ko.observable(f);return a.Input.subscribe(function(h){if(h.$type){var i=/Bespoke\.Sph\.Domain\.(.*?),/,j=i.exec(ko.unwrap(h.$type))[1];g('/images/form.element.'+j+'.png')}}),{icon:g}};
bespoke.sph.domain.MappingActivityPartial=function(){var a=require("durandal/system");return{addMappingSource:function(){var b=this,c=new bespoke.sph.domain.MappingSource(a.guid());b.MappingSourceCollection.push(c)},removeMappingSource:function(b){var c=this;return function(){c.MappingSourceCollection.remove(b)}}}};
bespoke.sph.domain.MemberPartial=function(a){const b=require("durandal/system"),c=function(d,e,f){require([`viewmodels/${f}`,"durandal/app"],function(g,h){g.field(e),h.showDialog(g).done(function(i){i&&"OK"===i&&d(e)})})};return a.AllowMultiple.subscribe(function(d){d?a.DefaultValue(null):a.DefaultValue({Name:ko.observable("[Select a value]")})}),{editPermission:function(d){var e=this;require(["viewmodels/field.permission.dialog","durandal/app"],function(f,g){var h=ko.mapping.fromJS(ko.mapping.toJS(d));f.member(h),g.showDialog(f).done(function(i){i&&"OK"===i&&e.FieldPermissionCollection(h.FieldPermissionCollection())})})},addMember:function(){this.MemberCollection.push(new bespoke.sph.domain.Member(b.guid()))},editMember:function(d){var e=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(f,g){var h=ko.mapping.fromJS(ko.mapping.toJS(d));f.member(h),g.showDialog(f).done(function(i){i&&"OK"===i&&e.BlockCollection.replace(d,h)})})}},editMemberMap:function(d){var e=this;return function(){console.log("show map ",e),console.log(" on member ",d),require(["viewmodels/member.map","durandal/app"],function(f,g){f.init(e.BuildingId(),d.MemberPlanStoreId()),g.showDialog(f).done(function(h){"OK"===h&&d.MemberPlanStoreId(f.spatialStoreId())})})}},removeMember:function(d){var e=this;return function(){e.MemberCollection.remove(d)}},addField:function(d,e){var f=new bespoke.sph.domain[e+"Field"](b.guid());c(d,f,"field."+e.toLowerCase())},removeField:function(){const d=this,e=d.Field||d.DefaultValue;return function(){e({Name:ko.observable("[Select a value]")})}},editField:function(d){var e=this;return function(){var f=ko.unwrap(d.$type),g=ko.mapping.fromJS(ko.mapping.toJS(d)),h=/Bespoke\.Sph\.Domain\.(.*?)Field,/,i=h.exec(f)[1];c(e.Field||e.DefaultValue,g,"field."+i.toLowerCase())}},attachedProperties:ko.observableArray()}};
bespoke.sph.domain.MethodArgPartial=function(){var a=require('durandal/system'),b=function(c,d,e){require(['viewmodels/'+e,'durandal/app'],function(f,g){f.field(d),g.showDialog(f).done(function(h){h&&'OK'===h&&c(d)})})};return{addField:function(c,d){var e=new bespoke.sph.domain[d+'Field'](a.guid());b(c,e,'field.'+d.toLowerCase())},editField:function(c){var d=this;return function(){var e=ko.unwrap(c.$type),f=ko.mapping.fromJS(ko.mapping.toJS(c)),g=/Bespoke\.Sph\.Domain\.(.*?)Field,/,h=g.exec(e)[1];b(d.Field,f,'field.'+h.toLowerCase())}}}};
bespoke.sph.domain.NotificationActivityPartial=function(a){return a.From()||a.From("admin@@sph.my"),{}};
bespoke.sph.domain.OperationEndpointPartial=function(){const a=require("durandal/system");return{editReferencedAssembly:function(b){alert("not implemented"+b)},removeReferencedAssembly:function(b){var c=this;return function(){c.ReferencedAssemblyCollection.remove(b)}},addReferencedAssembly:function(){var b=this;require(["viewmodels/assembly.dialog","durandal/app"],function(c,d){d.showDialog(c).done(function(e){e&&"OK"===e&&_(c.selectedAssemblies()).each(function(f){b.ReferencedAssemblyCollection.push(f)})})})},removePatchPath:function(b){var c=this;return function(){c.PatchPathCollection.remove(b)}},addPatchPath:function(){var b=new bespoke.sph.domain.PatchSetter({WebId:a.guid(),IsRequired:!0});this.PatchPathCollection.push(b)},addChildAction:function(){var b=new bespoke.sph.domain.SetterActionChild(a.guid());b.Field({Name:ko.observable("+ Field")}),this.SetterActionChildCollection.push(b)},removeChildAction:function(b){var c=this;return function(){c.SetterActionChildCollection.remove(b)}}}};
bespoke.sph.domain.ParallelActivityPartial=function(){var a=require('durandal/system');return{addBranch:function(){this.ParallelBranchCollection.push(new bespoke.sph.domain.ParallelBranch(a.guid()))},removeBranch:function(b){var c=this;return function(){c.ParallelBranchCollection.remove(b)}},multipleEndPoints:function(){return this.ParallelBranchCollection()}}};
bespoke.sph.domain.QueryEndpointPartial=function(a){// Filter
var b=require("durandal/system"),c=ko.observable(ko.unwrap(a.CacheFilter));return{addRouteParameter:function(){this.RouteParameterCollection.push(new bespoke.sph.domain.RouteParameter(b.guid()))},removeRouteParameter:function(d){var e=this;return function(){e.RouteParameterCollection.remove(d)}},addSort:function(){this.SortCollection.push(new bespoke.sph.domain.Sort(b.guid()))},removeSort:function(d){var e=this;return function(){e.SortCollection.remove(d)}},addFilter:function(){this.FilterCollection.push(new bespoke.sph.domain.Filter(b.guid()))},removeFilter:function(d){var e=this;return function(){e.FilterCollection.remove(d)}},allowQueryCache:c}};
bespoke.sph.domain.ReceiveActivityPartial=function(){//
var a=require('durandal/system');return{removeCorrelationProperty:function(b){var c=this;return function(){c.CorrelationPropertyCollection.remove(b)}},addCorrelationProperty:function(){this.CorrelationPropertyCollection.push(new bespoke.sph.domain.CorrelationProperty(a.guid()))}}};
bespoke.sph.domain.ReceivePortPartial=function(a){const b=require("durandal/system"),c=ko.computed(function(){const d=ko.unwrap(a.Name)&&ko.unwrap(a.Formatter)&&ko.unwrap(a.Entity);return a.TextFormatter()&&ko.isComputed(a.TextFormatter().isWizardOk)?d&&a.TextFormatter().isWizardOk():d});return{editReferencedAssembly:function(d){console.warn(`Not implemented ${d}`)},removeReferencedAssembly:function(d){var e=this;return function(){e.ReferencedAssemblyCollection.remove(d)}},addReferencedAssembly:function(){var d=this;require(["viewmodels/assembly.dialog","durandal/app"],function(e,f){f.showDialog(e).done(function(g){g&&"OK"===g&&_(e.selectedAssemblies()).each(function(h){d.ReferencedAssemblyCollection.push(h)})})})},editHeaderFieldMapping:function(d){var e=this;return function(){require(["viewmodels/receive.port.header.field.dialog","durandal/app"],function(f,g){var h=ko.mapping.fromJS(ko.mapping.toJS(d));f.location(h),f.port(e),g.showDialog(f).done(function(i){i&&"OK"===i&&e.FieldMappingCollection.replace(d,h)})})}},removeHeaderFieldMapping:function(d){var e=this;return function(){e.FieldMappingCollection.remove(d)}},addHeaderFieldMapping:function(){const d=new $.Deferred,e=new bespoke.sph.domain.HeaderFieldMapping({WebId:b.guid()}),f=this;return require(["viewmodels/receive.port.header.field.dialog","durandal/app"],function(g,h){g.field(e),g.port(f),h.showDialog(g).done(function(i){"OK"===i?(f.FieldMappingCollection.push(e),d.resolve(e)):d.resolve(!1)})}),d.promise()},addUriFieldMapping:function(){const d=new $.Deferred,e=new bespoke.sph.domain.UriFieldMapping({WebId:b.guid()}),f=this;return require(["viewmodels/receive.port.uri.field.dialog","durandal/app"],function(g,h){g.field(e),g.port(f),h.showDialog(g).done(function(i){"OK"===i?(f.FieldMappingCollection.push(e),d.resolve(e)):d.resolve(!1)})}),d.promise()},isWizardOk:c}};
bespoke.sph.domain.DailySchedulePartial=function(){return{name:ko.observable("Daily Schedule"),icon:ko.observable("fa fa-calendar")}},bespoke.sph.domain.WeeklySchedulePartial=function(){return{name:ko.observable("Weekly Schedule"),icon:ko.observable("fa fa-th-list")}},bespoke.sph.domain.MonthlySchedulePartial=function(){return{name:ko.observable("Monthly Schedule"),icon:ko.observable("fa fa-calendar-o"),dateOptions:_.range(1,31)}};
bespoke.sph.domain.ReportDeliveryPartial=function(){return new bespoke.sph.domain.IntervalScheduleContainer};
bespoke.sph.domain.RouteParameterPartial=function(a){return a.Type.subscribe(function(b){"System.DateTime, mscorlib"===b&&a.DefaultValue(null)}),{}};
bespoke.sph.domain.RouteParameterFieldPartial=function(a){return a.IsOptional.subscribe(function(b){b||a.DefaultValue("")}),{}};
bespoke.sph.domain.RulePartial=function(a){const b=require("durandal/system"),c=function(e,f,g){require([`viewmodels/${g}`,"durandal/app"],function(h,i){h.field(f),i.showDialog(h).done(function(j){j&&"OK"===j&&e(f)})})},d=ko.computed(function(){return"IsNull"!==ko.unwrap(a.Operator)&&"IsNotNull"!==ko.unwrap(a.Operator)});return{binaryOperator:d,addField:function(e,f){const g=new bespoke.sph.domain[f+"Field"](b.guid());c(e,g,"field."+f.toLowerCase())},editField:function(e,f){return function(){const g=ko.unwrap(e.$type),h=ko.mapping.fromJS(ko.mapping.toJS(e)),i=/Bespoke\.Sph\.Domain\.(.*?)Field,/,j=i.exec(g)[1];c(f,h,"field."+j.toLowerCase())}}}};
bespoke.sph.domain.ScheduledTriggerActivityPartial=function(a){var c=new bespoke.sph.domain.IntervalScheduleContainer;return c};
bespoke.sph.domain.SetterActionPartial=function(){var a=require("durandal/system");return{addChildAction:function(){var b=new bespoke.sph.domain.SetterActionChild(a.guid());b.Field({Name:ko.observable("+ Field")}),this.SetterActionChildCollection.push(b)},removeChildAction:function(b){var c=this;return function(){c.SetterActionChildCollection.remove(b)}}}};
bespoke.sph.domain.SetterActionChildPartial=function(){var a=require('durandal/system'),b=function(c,d,e,f){require(['viewmodels/'+e,'durandal/app'],function(g,h){g.field(d),'function'==typeof g.entity&&(g.entity(f),console.log('found the entity dialog :'+g.entity.name)),h.showDialog(g).done(function(i){i&&'OK'===i&&c(d)})})};return{addField:function(c,d,e){var f=new bespoke.sph.domain[d+'Field'](a.guid());b(c,f,'field.'+d.toLowerCase(),e)},editField:function(c){var d=this;return function(){var e=ko.unwrap(c.$type),f=ko.mapping.fromJS(ko.mapping.toJS(c)),g=/Bespoke\.Sph\.Domain\.(.*?)Field,/,h=g.exec(e)[1];b(d.Field,f,'field.'+h.toLowerCase())}}}};
bespoke.sph.domain.Adapters=bespoke.sph.domain.Adapters||{},bespoke.sph.domain.Adapters.Polling=function(a){return a=a||{},{Interval:ko.observable(a.Interval||300000),// 5 minutes
IntervalPeriod:ko.observable("minute"),// 5 minutes
Query:ko.observable(a.Query||""),StartDate:ko.observable(a.Query)}},bespoke.sph.domain.Adapters.SqlServerReceiveLocation=function(a){const b=new bespoke.sph.domain.ReceiveLocation(a);b.Id=ko.observable(null),b.Server=ko.observable("(localdb)\\Projects"),b.Database=ko.observable(null),b.Trusted=ko.observable(!0),b.UseQueryNotification=ko.observable(!0),b.UserId=ko.observable(null),b.Password=ko.observable(null),b.Query=ko.observable(""),b.Polling=ko.observable(new bespoke.sph.domain.Adapters.Polling),b.$type="Bespoke.Sph.Integrations.Adapters.SqlServerReceiveLocation, sqlserver.adapter";var c=require("services/datacontext");if(a&&"object"==typeof a)for(let d in a)if(a.hasOwnProperty(d)){// array
if(ko.isObservable(b[d])&&"push"in b[d]){const e=a[d].$values||a[d];if(_(e).isArray()){b[d](_(e).map(function(f){return c.toObservable(f)}));continue}}ko.isObservable(b[d])&&b[d](a[d])}return a&&"string"==typeof a&&b.WebId(a),bespoke.sph.domain.SqlServerReceiveLocationPartial?_(b).extend(new bespoke.sph.domain.FolderReceiveLocationPartial(b,a)):b};
bespoke.sph.domain.StartWorkflowActionPartial=function(){var a=require("durandal/system");return{editMapping:function(b){this.WorkflowTriggerMapCollection.push(b)},addMapping:function(){var b=new bespoke.sph.domain.WorkflowTriggerMap(a.guid());b.Field({Name:ko.observable("+ Field")}),this.WorkflowTriggerMapCollection.push(b)},removeMapping:function(b){var c=this;return function(){c.WorkflowTriggerMapCollection.remove(b)}}}};
bespoke.sph.domain.TabControlPartial=function(a){var b=require("durandal/system");return 0===a.TabPanelCollection().length&&(a.TabPanelCollection.push(new bespoke.sph.domain.TabPanel({WebId:b.guid(),Header:"Tab 1"})),a.TabPanelCollection.push(new bespoke.sph.domain.TabPanel({WebId:b.guid(),Header:"Tab 2"}))),{addItem:function(){var c=new bespoke.sph.domain.TabPanel(b.guid());a.TabPanelCollection.push(c)},removeItem:function(c){return function(){a.TabPanelCollection.remove(c)}}}};
bespoke.sph.domain.TimePeriodPartial=function(a){return{toString:function(){return ko.unwrap(a.Count)+" "+ko.unwrap(a.Unit)}}};
bespoke.sph.domain.TransformDefinitionPartial=function(){return{editReferencedAssembly:function(a){alert("not implemented"+a)},removeReferencedAssembly:function(a){var b=this;return function(){b.ReferencedAssemblyCollection.remove(a)}},addReferencedAssembly:function(){var a=this;require(["viewmodels/assembly.dialog","durandal/app"],function(b,c){c.showDialog(b).done(function(d){d&&"OK"===d&&_(b.selectedAssemblies()).each(function(e){a.ReferencedAssemblyCollection.push(e)})})})}}};
bespoke.sph.domain.TriggerPartial=function(){var a=require("durandal/system");return{editReferencedAssembly:function(b){alert("not implemented"+b)},removeReferencedAssembly:function(b){var c=this;return function(){c.ReferencedAssemblyCollection.remove(b)}},addReferencedAssembly:function(){var b=this;require(["viewmodels/assembly.dialog","durandal/app"],function(c,d){d.showDialog(c).done(function(e){e&&"OK"===e&&_(c.selectedAssemblies()).each(function(f){b.ReferencedAssemblyCollection.push(f)})})})},addRule:function(){var b=new bespoke.sph.domain.Rule(a.guid());b.Left({Name:ko.observable("+ Field")}),b.Right({Name:ko.observable("+ Field")}),this.RuleCollection.push(b)},removeRule:function(b){var c=this;return function(){c.RuleCollection.remove(b)}},removeAction:function(b){var c=this;return function(){c.ActionCollection.remove(b)}},addAction:function(b){var c=this;return function(){var d=b.toLowerCase().replace(", ",",");require(["viewmodels/action."+d,"durandal/app"],function(e,f){if("function"!=typeof e.action)return void console.error("The dialog for "+d+" do not implement action as observable");// initialize the action properties
var g=ko.mapping.fromJS(ko.toJS(e.action));for(var h in"function"==typeof g.Title&&g.Title(""),g)if(g.hasOwnProperty(h)){var i=g[h];if("$type"===h)continue;ko.isObservable(i)&&"function"!=typeof i.destroyAll&&i(null),ko.isObservable(i)&&"function"==typeof i.destroyAll&&i([])}e.action(g),"function"==typeof e.trigger&&e.trigger(c),f.showDialog(e).done(function(j){if(j&&"OK"===j){var k=e.action();k.WebId(a.guid()),k.IsActive(!0),c.ActionCollection.push(k)}})})}},editAction:function(b){var c=this;return function(){var d=ko.unwrap(b.$type),e=ko.mapping.fromJS(ko.mapping.toJS(b));require(["viewmodels/action."+d.toLowerCase().replace(", ",","),"durandal/app"],function(f,g){f.action(e),"function"==typeof f.trigger&&f.trigger(c),g.showDialog(f).done(function(h){h&&"OK"===h&&c.ActionCollection.replace(b,e)})})}}}};
bespoke.sph.domain.TryScopePartial=function(){return{addCatchScope:function(a){return function(){var b=require('durandal/system'),c=this,d=new bespoke.sph.domain.CatchScope(b.guid());require(['viewmodels/catch.scope.dialog','durandal/app'],function(e,f){e.catchScope(d),'function'==typeof e.wd&&e.wd(a()),f.showDialog(e).done(function(h){h&&'OK'===h&&c.CatchScopeCollection.push(d)})})}},editCatchScope:function(a,b){var c=this,d=ko.mapping.fromJS(ko.mapping.toJS(a));return function(){require(['viewmodels/catch.scope.dialog','durandal/app'],function(e,f){e.catchScope(d),'function'==typeof e.wd&&e.wd(b()),f.showDialog(e).done(function(h){if(h&&'OK'===h)for(var i in a)'function'==typeof a[i]&&'observable'===a[i].name?a[i](ko.unwrap(d[i])):a[i]=d[i]})})}},removeCatchScope:function(a,b){var c=this;return function(){b().ActivityCollection().forEach(function(d){d.CatchScope()===a.Id()&&d.CatchScope('')}),c.CatchScopeCollection.remove(a)}}}};
bespoke.sph.domain.UpdateEntityActivityPartial=function(){var a=require('durandal/system');return{addPropertyMapping:function(b){var c=this;return function(){var d=new bespoke.sph.domain[b+'Mapping'](a.guid());c.PropertyMappingCollection.push(d)}},removePropertyMapping:function(b){var c=this;return function(){c.PropertyMappingCollection.remove(b)}}}};
bespoke.sph.domain.ValueObjectDefinitionPartial=function(){var a=require("durandal/system"),b=require("durandal/app"),c=require(objectbuilders.datacontext);return{addMember:function(){this.MemberCollection.push(new bespoke.sph.domain.Member({WebId:a.guid(),Boost:1}))},editMember:function(d){var e=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(f,g){var h=ko.mapping.fromJS(ko.mapping.toJS(d));f.member(h),g.showDialog(f).done(function(i){i&&"OK"===i&&e.BlockCollection.replace(d,h)})})}},removeMember:function(d){var e=this;return function(){e.MemberCollection.remove(d)}},addBusinessRule:function(){var d=new bespoke.sph.domain.BusinessRule({WebId:a.guid()}),e=this;require(["viewmodels/business.rule.dialog","durandal/app"],function(f,g){f.rule(d),g.showDialog(f).done(function(h){h&&"OK"===h&&e.BusinessRuleCollection.push(d)})})},editBusinessRule:function(d){var e=this;return function(){require(["viewmodels/business.rule.dialog","durandal/app"],function(f,g){var h=c.toObservable(ko.mapping.toJS(d));f.rule(h),g.showDialog(f).done(function(i){i&&"OK"===i&&e.BusinessRuleCollection.replace(d,h)})})}},removeBusinessRule:function(d){var e=this;return function(){e.BusinessRuleCollection.remove(d)}},editMemberMap:function(d){var e=this;return function(){console.log("show map ",e),console.log(" on member ",d),require(["viewmodels/member.map","durandal/app"],function(f,g){f.init(e.BuildingId(),d.MemberPlanStoreId()),g.showDialog(f).done(function(h){"OK"===h&&d.MemberPlanStoreId(f.spatialStoreId())})})}}}};
bespoke.sph.domain.VariablePartial=function(){var a=require('durandal/system'),b=ko.observable(),c=ko.observableArray();return{hasError:b,errors:c}};
bespoke.sph.domain.ViewColumnPartial=function(a){a.Path.subscribe(function(c){ko.unwrap(a.Header)||a.Header(c.replace("."," ").replace(/([A-Z])/g," $1").trim())});// Filter
var b=require("durandal/system");return{addConditionalFormatting:function(){this.ConditionalFormattingCollection.push(new bespoke.sph.domain.ConditionalFormatting(b.guid()))},removeConditionalFormatting:function(c){var d=this;return function(){d.ConditionalFormattingCollection.remove(c)}},removeIconStoreId:function(){this.IconStoreId("")},removeIconCssClass:function(){this.IconCssClass("")}}};
bespoke.sph.domain.WorkflowDefinitionPartial=function(a){var b=require("durandal/system"),c=ko.observable(!1),d=require(objectbuilders.datacontext),e=ko.observableArray(),f=function(h){var i=h||this.SchemaStoreId();$.get("/api/workflow-definitions/xsd-elements/"+i).then(function(j){e(j)})};return a.SchemaStoreId.subscribe(f),{isBusy:c,removeCorrelationType:function(h){var i=this;return function(){i.CorrelationTypeCollection.remove(h)}},addCorrelationType:function(){var h=this,i=new bespoke.sph.domain.CorrelationType(b.guid());require(["viewmodels/correlation.type.dialog","durandal/app"],function(j,k){j.correlationType(i),"function"==typeof j.wd&&j.wd(h),k.showDialog(j).done(function(l){l&&"OK"===l&&h.CorrelationTypeCollection.push(i)})})},editCorrelationType:function(h){var i=this;return function(){var j=ko.mapping.fromJS(ko.mapping.toJS(h));require(["viewmodels/correlation.type.dialog","durandal/app"],function(k,l){k.correlationType(j),"function"==typeof k.wd&&k.wd(i),l.showDialog(k).done(function(m){if(m&&"OK"===m)for(var n in h)"function"==typeof h[n]&&"observable"===h[n].name?h[n](ko.unwrap(j[n])):h[n]=j[n]})})}},removeCorrelationSet:function(h){var i=this;return function(){i.CorrelationSetCollection.remove(h)}},addCorrelationSet:function(){var h=this,i=new bespoke.sph.domain.CorrelationSet(b.guid());require(["viewmodels/correlation.set.dialog","durandal/app"],function(j,k){j.correlationSet(i),"function"==typeof j.wd&&j.wd(h),k.showDialog(j).done(function(l){l&&"OK"===l&&h.CorrelationSetCollection.push(i)})})},editCorrelationSet:function(h){var i=this;return function(){var j=ko.mapping.fromJS(ko.mapping.toJS(h));require(["viewmodels/correlation.set.dialog","durandal/app"],function(k,l){k.correlationSet(j),"function"==typeof k.wd&&k.wd(i),l.showDialog(k).done(function(m){if(m&&"OK"===m)for(var n in h)"function"==typeof h[n]&&"observable"===h[n].name?h[n](ko.unwrap(j[n])):h[n]=j[n]})})}},removeVariable:function(h){var i=this;return function(){i.VariableDefinitionCollection.remove(h)}},addVariable:function(h){var i=this;return function(){var j=new bespoke.sph.domain[h+"Variable"](b.guid());require(["viewmodels/variable."+h.toLowerCase(),"durandal/app"],function(k,l){k.variable(j),"function"==typeof k.wd&&k.wd(i),l.showDialog(k).done(function(m){m&&"OK"===m&&i.VariableDefinitionCollection.push(j)})})}},editVariable:function(h){var i=this;return function(){var j=ko.unwrap(h.$type),k=ko.mapping.fromJS(ko.mapping.toJS(h)),l=/Bespoke\.Sph\.Domain\.(.*?)Variable,/,m=l.exec(j)[1];require(["viewmodels/variable."+m.toLowerCase(),"durandal/app"],function(n,o){n.variable(k),"function"==typeof n.wd&&n.wd(i),o.showDialog(n).done(function(p){if(p&&"OK"===p)for(var q in h)"function"==typeof h[q]&&"observable"===h[q].name?h[q](ko.unwrap(k[q])):h[q]=k[q]})})}},removeReferencedAssembly:function(h){var i=this;return function(){i.ReferencedAssemblyCollection.remove(h)}},addReferencedAssembly:function(){var h=this;require(["viewmodels/assembly.dialog","durandal/app"],function(i,j){j.showDialog(i).done(function(k){k&&"OK"===k&&_(i.selectedAssemblies()).each(function(l){h.ReferencedAssemblyCollection.push(l)})})})},editReferencedAssembly:function(h){alert("not implemented"+h)},addActivity:function(h){var i=this;return function(){var j=new bespoke.sph.domain[h+"Activity"](b.guid());require(["viewmodels/activity."+h.toLowerCase(),"durandal/app"],function(k,l){k.activity(j),"function"==typeof k.wd&&k.wd(i),l.showDialog(k).done(function(m){m&&"OK"===m&&i.ActivityCollection.push(j)})})}},editActivity:function(h){var i=this;return function(){var j=d.toObservable(ko.mapping.toJS(h)),k=ko.unwrap(h.TypeName);c(!0),require(["viewmodels/activity."+k.toLowerCase(),"durandal/app"],function(l,m){l.activity(j),"function"==typeof l.wd&&l.wd(i),m.showDialog(l).done(function(n){if($("div.modalBlockout,div.modalHost").remove(),n&&"OK"===n)for(var o in h)if(h.hasOwnProperty(o)){var p="observable"===h[o].name||"d"===h[o].name;"function"==typeof h[o]&&p?h[o](ko.unwrap(j[o])):h[o]=j[o]}})})}},removeActivity:function(h){var i=this;return function(){i.ActivityCollection.remove(h)}},loadSchema:f,xsdElements:e,setStartActivity:function(h){var i=this;return function(){_(i.ActivityCollection()).each(function(j){j.IsInitiator(!1)}),h.IsInitiator(!0)}},addTryScope:function(){var h=this,i=new bespoke.sph.domain.TryScope(b.guid());require(["viewmodels/try.scope.dialog","durandal/app"],function(j,k){j.tryScope(i),"function"==typeof j.wd&&j.wd(h),k.showDialog(j).done(function(l){l&&"OK"===l&&h.TryScopeCollection.push(i)})})},editTryScope:function(h){var i=this;return function(){var j=ko.mapping.fromJS(ko.mapping.toJS(h));require(["viewmodels/try.scope.dialog","durandal/app"],function(k,l){k.tryScope(j),"function"==typeof k.wd&&k.wd(i),l.showDialog(k).done(function(m){if(m&&"OK"===m)for(var n in h)"function"==typeof h[n]&&"observable"===h[n].name?h[n](ko.unwrap(j[n])):h[n]=j[n]})})}},removeTryScope:function(h){var i=this;return function(){i.TryScopeCollection.remove(h)}}}};
bespoke.sph.domain.WorkflowDesignerPartial=function(){return{}};
bespoke.sph.domain.WorkflowFormPartial=function(){var a=ko.computed(function(){});return{editOperationSuccessCallback:function(){var b=this,c=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),d=c.window||c,e=function(){d.code=ko.unwrap(b.OperationSuccessCallback),c.code||(c.code="//insert your code here"),d.saved=function(f,g){b.OperationSuccessCallback(f),g&&c.close()}};d.attachEvent?d.attachEvent("onload",e):e()},editOperationFailureCallback:function(){var b=this,c=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),d=c.window||c,e=function(){d.code=ko.unwrap(b.OperationFailureCallback),c.code||(c.code="//insert your code here"),d.saved=function(f,g){b.OperationFailureCallback(f),g&&c.close()}};d.attachEvent?d.attachEvent("onload",e):e()},canSetSuccessCallback:a}};
bespoke.sph.domain.WorkflowTriggerMapPartial=function(){var a=this,b=require('durandal/system'),c=function(d,e,f){require(['viewmodels/'+f,'durandal/app'],function(g,h){g.field(e),h.showDialog(g).done(function(i){i&&'OK'===i&&d(e)})})};return a.addField=function(d,e){var f=new bespoke.sph.domain[e+'Field'](b.guid());c(d,f,'field.'+e.toLowerCase())},a.editField=function(d,e){return function(){var f=ko.unwrap(d.$type),g=ko.mapping.fromJS(ko.mapping.toJS(d)),h=/Bespoke\.Sph\.Domain\.(.*?)Field,/,i=h.exec(f)[1];c(e,g,'field.'+i.toLowerCase())}},a},bespoke.sph.domain.WorkflowTriggerMapPartial.prototype=new bespoke.sph.domain.FieldContainer;
bespoke.sph.domain.XmlTextFormatterPartial=function(a){const b=require("durandal/system");return{addParentElement:function(){this.ParentElementValueCollection.push(new bespoke.sph.domain.XmlElementTextFieldMapping(b.guid()))},removeParentElement:function(c){var d=this;return function(){d.ParentElementValueCollection.remove(c)}},addParentAttribute:function(){this.ParentAttributeValueCollection.push(new bespoke.sph.domain.XmlAttributeTextFieldMapping({WebId:b.guid(),TypeName:"System.String, mscorlib"}))},removeParentAttribute:function(c){var d=this;return function(){d.ParentAttributeValueCollection.remove(c)}}}};
//# sourceMappingURL=__partial.min.js.map
