bespoke.sph.domain.WorkflowDefinitionPartial=function(n){var t=require("durandal/system"),i=ko.observable(!1),f=require(objectbuilders.datacontext),r=ko.observableArray(),e=function(n){var t=this;return function(){t.ActivityCollection.remove(n)}},o=function(n){var t=this;return function(){_(t.ActivityCollection()).each(function(n){n.IsInitiator(!1)});n.IsInitiator(!0)}},s=function(n){var i=this;return function(){var r=new bespoke.sph.domain[n+"Activity"](t.guid());require(["viewmodels/activity."+n.toLowerCase(),"durandal/app"],function(n,t){n.activity(r);typeof n.wd=="function"&&n.wd(i);t.showDialog(n).done(function(n){n&&n==="OK"&&i.ActivityCollection.push(r)})})}},h=function(n){var t=this;return function(){var u=ko.unwrap(n.$type),r=f.toObservable(ko.mapping.toJS(n)),e=/Bespoke\.Sph\.Domain\.(.*?)Activity,/.exec(u)[1];i(!0);require(["viewmodels/activity."+e.toLowerCase(),"durandal/app"],function(i,u){i.activity(r);typeof i.wd=="function"&&i.wd(t);u.showDialog(i).done(function(t){if(($("div.modalBlockout,div.modalHost").remove(),t)&&t==="OK")for(var i in n)typeof n[i]=="function"&&n[i].name==="observable"?n[i](ko.unwrap(r[i])):n[i]=r[i]})})}},c=function(n){var i=this;return function(){var r=new bespoke.sph.domain[n+"Variable"](t.guid());require(["viewmodels/variable."+n.toLowerCase(),"durandal/app"],function(n,t){n.variable(r);typeof n.wd=="function"&&n.wd(i);t.showDialog(n).done(function(n){n&&n==="OK"&&i.VariableDefinitionCollection.push(r)})})}},l=function(n){var t=this;return function(){var r=ko.unwrap(n.$type),i=ko.mapping.fromJS(ko.mapping.toJS(n)),u=/Bespoke\.Sph\.Domain\.(.*?)Variable,/.exec(r)[1];require(["viewmodels/variable."+u.toLowerCase(),"durandal/app"],function(r,u){r.variable(i);typeof r.wd=="function"&&r.wd(t);u.showDialog(r).done(function(t){if(t&&t==="OK")for(var r in n)typeof n[r]=="function"&&n[r].name==="observable"?n[r](ko.unwrap(i[r])):n[r]=i[r]})})}},a=function(n){var t=this;return function(){t.VariableDefinitionCollection.remove(n)}},v=function(){var n=this;require(["viewmodels/assembly.dialog","durandal/app"],function(t,i){i.showDialog(t).done(function(i){i&&i==="OK"&&_(t.selectedAssemblies()).each(function(t){n.ReferencedAssemblyCollection.push(t)})})})},y=function(n){alert("not implemented"+n)},p=function(n){var t=this;return function(){t.ReferencedAssemblyCollection.remove(n)}},u=function(n){var t=n||this.SchemaStoreId();$.get("/WorkflowDefinition/GetXsdElementName/"+t).then(function(n){r(n)})};return n.SchemaStoreId.subscribe(u),{isBusy:i,removeVariable:a,addVariable:c,editVariable:l,removeReferencedAssembly:p,addReferencedAssembly:v,editReferencedAssembly:y,addActivity:s,editActivity:h,removeActivity:e,loadSchema:u,xsdElements:r,setStartActivity:o}};
/*
//# sourceMappingURL=WorkflowDefinition.min.js.map
*/