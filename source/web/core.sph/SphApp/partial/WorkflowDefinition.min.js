var bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.WorkflowDefinitionPartial=function(n){var t=require("durandal/system"),u=require(objectbuilders.datacontext),i=ko.observableArray(),f=function(n){var t=this;return function(){t.ActivityCollection.remove(n)}},e=function(n){var t=this;return function(){_(t.ActivityCollection()).each(function(n){n.IsInitiator(!1)});n.IsInitiator(!0)}},o=function(n){var i=this;return function(){var r=new bespoke.sph.domain[n+"Activity"](t.guid());require(["viewmodels/activity."+n.toLowerCase(),"durandal/app"],function(n,t){n.activity(r);typeof n.wd=="function"&&n.wd(i);t.showModal(n).done(function(n){n&&n==="OK"&&i.ActivityCollection.push(r)})})}},s=function(n){var t=this;return function(){var r=ko.unwrap(n.$type),i=u.toObservable(ko.mapping.toJS(n)),f=/Bespoke\.Sph\.Domain\.(.*?)Activity,/.exec(r)[1];require(["viewmodels/activity."+f.toLowerCase(),"durandal/app"],function(r,u){r.activity(i);typeof r.wd=="function"&&r.wd(t);u.showModal(r).done(function(t){if(t&&t==="OK")for(var r in n)typeof n[r]=="function"&&n[r].name==="observable"?n[r](ko.unwrap(i[r])):n[r]=i[r]})})}},h=function(n){var i=this;return function(){var r=new bespoke.sph.domain[n+"Variable"](t.guid());require(["viewmodels/variable."+n.toLowerCase(),"durandal/app"],function(n,t){n.variable(r);typeof n.wd=="function"&&n.wd(i);t.showModal(n).done(function(n){n&&n==="OK"&&i.VariableDefinitionCollection.push(r)})})}},c=function(n){var t=this;return function(){var r=ko.unwrap(n.$type),i=ko.mapping.fromJS(ko.mapping.toJS(n)),u=/Bespoke\.Sph\.Domain\.(.*?)Variable,/.exec(r)[1];require(["viewmodels/variable."+u.toLowerCase(),"durandal/app"],function(r,u){r.variable(i);typeof r.wd=="function"&&r.wd(t);u.showModal(r).done(function(t){if(t&&t==="OK")for(var r in n)typeof n[r]=="function"&&n[r].name==="observable"?n[r](ko.unwrap(i[r])):n[r]=i[r]})})}},l=function(n){var t=this;return function(){t.VariableDefinitionCollection.remove(n)}},r=function(n){var t=n||this.SchemaStoreId();$.get("/WorkflowDefinition/GetXsdElementName/"+t).then(function(n){i(n)})};return n.SchemaStoreId.subscribe(r),{removeActivity:f,removeVariable:l,addActivity:o,editActivity:s,addVariable:h,editVariable:c,loadSchema:r,xsdElements:i,setStartActivity:e}};
/*
//# sourceMappingURL=WorkflowDefinition.min.js.map
*/