var bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ActivityPartial=function(){var u=require("durandal/system"),n=ko.observable(),t=ko.observable(!1),i=ko.observable(!1),r=ko.observableArray();return{breakpoint:t,hit:i,hasError:n,errors:r}};bespoke.sph.domain.AssemblyFieldPartial=function(){var n=require(objectbuilders.system),t=function(){this.MethodArgCollection.push(new bespoke.sph.domain.MethodArg(n.guid()))},i=function(n){var t=this;return function(){t.MethodArgCollection.remove(n)}};return{addParameter:t,removeParameter:i}};bespoke.sph.domain.BarChartItemPartial=function(){var n=require("durandal/system"),t=function(){this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(n.guid()))},i=function(n){var t=this;return function(){t.ChartSeriesCollection.remove(n)}};return{addSeries:t,removeSeries:i}};bespoke.sph.domain.BusinessRulePartial=function(){var n=require("durandal/system"),r=require(objectbuilders.datacontext),u=require(objectbuilders.logger),t=function(){var i=this,t=new bespoke.sph.domain.Rule(n.guid());t.Left({Name:ko.observable("+ Field")});t.Right({Name:ko.observable("+ Field")});i.RuleCollection.push(t)},i=function(n){var t=this;return function(){t.RuleCollection.remove(n)}};return{addRule:t,removeRule:i}};bespoke.sph.domain.ButtonPartial=function(){var n=function(){var t=this,n=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),i=function(){n.code=ko.unwrap(t.Command);n.code||(n.code="//insert your code here");n.saved=function(i,r){t.Command(i);r&&n.close()}};n.attachEvent?n.attachEvent("onload",i):i()};return{editCommand:n}};bespoke.sph.domain.ComboBoxPartial=function(){var n=require("durandal/system"),t=function(){var t=this,i=new bespoke.sph.domain.ComboBoxItem(n.guid());t.ComboBoxItemCollection.push(i)},i=function(n){var t=this;return function(){t.ComboBoxItemCollection.remove(n)}};return{addItem:t,removeItem:i}};bespoke.sph.domain.ConstantFieldPartial=function(){return{Type:ko.observable(),Value:ko.observable()}};bespoke.sph.domain.CreateEntityActivityPartial=function(){var n=require("durandal/system"),t=function(t){var i=this;return function(){var r=new bespoke.sph.domain[t+"Mapping"](n.guid());i.PropertyMappingCollection.push(r)}},i=function(n){var t=this;return function(){t.PropertyMappingCollection.remove(n)}};return{addPropertyMapping:t,removePropertyMapping:i}};bespoke.sph.domain.DataGridItemPartial=function(){var n=require("durandal/system"),t=function(){this.DataGridGroupDefinitionCollection.push(new bespoke.sph.domain.DataGridGroupDefinition(n.guid()))},i=function(n){var t=this;return function(){t.DataGridGroupDefinitionCollection.remove(n)}},r=function(){var t=this;t.DataGridColumnCollection.push(new bespoke.sph.domain.DataGridColumn(n.guid()))},u=function(n){var t=this;return function(){t.DataGridColumnCollection.remove(n)}};return{addColumn:r,removeColumn:u,addDataGridGroupDefinition:t,removeDataGridGroupDefinition:i}};bespoke.sph.domain.DecisionActivityPartial=function(){var n=require("durandal/system"),t=function(){this.DecisionBranchCollection.push(new bespoke.sph.domain.DecisionBranch(n.guid()))},i=function(n){var t=this;return function(){t.DecisionBranchCollection.remove(n)}},r=function(){return this.DecisionBranchCollection()};return{addBranch:t,removeBranch:i,multipleEndPoints:r}};bespoke.sph.domain.DelayActivityPartial=function(){return{isAsync:!0}};bespoke.sph.domain.EntityDefinitionPartial=function(){var n=require("durandal/system"),t=require(objectbuilders.datacontext),i=function(){this.MemberCollection.push(new bespoke.sph.domain.Member({WebId:n.guid(),Boost:1}))},r=function(n){var t=this;return function(){t.MemberCollection.remove(n)}},u=function(){this.EntityOperationCollection.push(new bespoke.sph.domain.EntityOperation({WebId:n.guid()}))},f=function(n){var t=this;return function(){t.EntityOperationCollection.remove(n)}},e=function(n){var t=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(i,r){var u=ko.mapping.fromJS(ko.mapping.toJS(n));i.member(u);r.showDialog(i).done(function(i){i&&i=="OK"&&t.BlockCollection.replace(n,u)})})}},o=function(){this.BusinessRuleCollection.push(new bespoke.sph.domain.BusinessRule({WebId:n.guid(),Name:"<New Rule>"}))},s=function(n){var i=this;return function(){require(["viewmodels/business.rule.dialog","durandal/app"],function(r,u){var f=t.toObservable(ko.mapping.toJS(n));r.rule(f);u.showDialog(r).done(function(t){t&&t=="OK"&&i.BusinessRuleCollection.replace(n,f)})})}},h=function(n){var t=this;return function(){t.BusinessRuleCollection.remove(n)}},c=function(n){var t=this;return function(){console.log("show map ",t);console.log(" on member ",n);require(["viewmodels/member.map","durandal/app"],function(i,r){i.init(t.BuildingId(),n.MemberPlanStoreId());r.showDialog(i).done(function(t){t=="OK"&&n.MemberPlanStoreId(i.spatialStoreId())})})}};return{addEntityOperation:u,removeEntityOperation:f,addMember:i,editMember:e,removeMember:r,addBusinessRule:o,editBusinessRule:s,removeBusinessRule:h,editMemberMap:c}};bespoke.sph.domain.EntityOperationPartial=function(){var n=require("durandal/system"),t=function(n){var t=this;return function(){t.SetterActionChildCollection.remove(n)}},i=function(){var t=new bespoke.sph.domain.SetterActionChild(n.guid());t.Field({Name:ko.observable("+ Field")});this.SetterActionChildCollection.push(t)};return{addChildAction:i,removeChildAction:t}};bespoke.sph.domain.EntityViewPartial=function(){var n=require("durandal/system"),t=function(){this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn(n.guid()))},i=function(n){var t=this;return function(){t.ViewColumnCollection.remove(n)}},r=function(){this.FilterCollection.push(new bespoke.sph.domain.Filter(n.guid()))},u=function(n){var t=this;return function(){t.FilterCollection.remove(n)}},f=function(){this.SortCollection.push(new bespoke.sph.domain.Sort(n.guid()))},e=function(n){var t=this;return function(){t.SortCollection.remove(n)}};return{addViewColumn:t,removeViewColumn:i,addSort:f,removeSort:e,addFilter:r,removeFilter:u}};bespoke.sph.domain.ExecutedActivityPartial=function(){var r=require("durandal/system"),n=ko.observable(!1),t=ko.observable(!1),i=ko.observableArray();return{breakpoint:n,hit:t,errors:i}};bespoke.sph.domain.FilterPartial=function(){var t=require("durandal/system"),n=function(n,t,i){require(["viewmodels/"+i,"durandal/app"],function(i,r){i.field(t);r.showDialog(i).done(function(i){i&&i==="OK"&&n(t)})})},i=function(i,r){var u=new bespoke.sph.domain[r+"Field"](t.guid());n(i,u,"field."+r.toLowerCase())},r=function(t){var i=this;return function(){var r=ko.unwrap(t.$type),u=ko.mapping.fromJS(ko.mapping.toJS(t)),f=/Bespoke\.Sph\.Domain\.(.*?)Field,/.exec(r)[1];n(i.Field,u,"field."+f.toLowerCase())}};return{addField:i,editField:r}};bespoke.sph.domain.FormElementPartial=function(){return{}};bespoke.sph.domain.HtmlElementPartial=function(){var n=function(){var t=this,n=window.open("/sph/editor/ace?mode=html","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),i=function(){n.code=ko.unwrap(t.Text);n.saved=function(i,r){t.Text(i);r&&n.close()}};n.attachEvent?n.attachEvent("onload",i):i()};return{editHtml:n}};bespoke.sph.domain.FormTemplatePartial=function(){return{}};bespoke.sph.domain.IntervalSchedulePartial=function(){var n=ko.observable(),t=ko.observable();return{icon:n,name:t}};bespoke.sph.domain.LineChartItemPartial=function(){var n=require("durandal/system"),t=function(){this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(n.guid()))},i=function(n){var t=this;return function(){t.ChartSeriesCollection.remove(n)}};return{addSeries:t,removeSeries:i}};bespoke.sph.domain.ListenActivityPartial=function(){var n=require("durandal/system"),t=function(){var t=this,i=new bespoke.sph.domain.ListenBranch(n.guid());t.ListenBranchCollection.push(i)},i=function(n){var t=this;return function(){t.ListenBranchCollection.remove(n)}},r=function(){return this.ListenBranchCollection()};return{addBranch:t,removeBranch:i,multipleEndPoints:r}};bespoke.sph.domain.ListViewPartial=function(n){var t=require("durandal/system"),i=function(n){var i=this;return function(){var r=new bespoke.sph.domain.ListViewColumn(t.guid()),u=bespoke.sph.domain[n](t.guid());r.Path.subscribe(function(n){u.Path(n)});r.Label.subscribe(function(n){u.Label(n)});r.Input(u);u.isSelected=ko.observable(!1);i.ListViewColumnCollection.push(r)}},r=function(n){var t=this;return function(){t.ListViewColumnCollection.remove(n)}};return _(n.ListViewColumnCollection()).each(function(n){n.Input().isSelected=ko.observable(!1)}),{addListViewColumn:i,removeListViewColumn:r}};bespoke.sph.domain.ListViewColumnPartial=function(n){var i;try{var r=ko.unwrap(n.Input),u=/Bespoke\.Sph\.Domain\.(.*?),/.exec(ko.unwrap(r.$type))[1],t="/images/form.element."+u+".png"}catch(f){}return t=t||"/images/form.element.textbox.png",i=ko.observable(t),n.Input.subscribe(function(n){if(n.$type){var t=/Bespoke\.Sph\.Domain\.(.*?),/.exec(ko.unwrap(n.$type))[1];i("/images/form.element."+t+".png")}}),{icon:i}};bespoke.sph.domain.MemberPartial=function(){var n=require("durandal/system"),t=function(){this.MemberCollection.push(new bespoke.sph.domain.Member(n.guid()))},i=function(n){var t=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(i,r){var u=ko.mapping.fromJS(ko.mapping.toJS(n));i.member(u);r.showDialog(i).done(function(i){i&&i=="OK"&&t.BlockCollection.replace(n,u)})})}},r=function(n){var t=this;require(["viewmodels/field.permission.dialog","durandal/app"],function(i,r){var u=ko.mapping.fromJS(ko.mapping.toJS(n));i.member(u);r.showDialog(i).done(function(n){n&&n=="OK"&&t.FieldPermissionCollection(u.FieldPermissionCollection())})})},u=function(n){var t=this;return function(){t.MemberCollection.remove(n)}},f=function(n){var t=this;return function(){console.log("show map ",t);console.log(" on member ",n);require(["viewmodels/member.map","durandal/app"],function(i,r){i.init(t.BuildingId(),n.MemberPlanStoreId());r.showDialog(i).done(function(t){t=="OK"&&n.MemberPlanStoreId(i.spatialStoreId())})})}};return{editPermission:r,addMember:t,editMember:i,editMemberMap:f,removeMember:u}};bespoke.sph.domain.MethodArgPartial=function(){var t=require("durandal/system"),n=function(n,t,i){require(["viewmodels/"+i,"durandal/app"],function(i,r){i.field(t);r.showDialog(i).done(function(i){i&&i==="OK"&&n(t)})})},i=function(i,r){var u=new bespoke.sph.domain[r+"Field"](t.guid());n(i,u,"field."+r.toLowerCase())},r=function(t){var i=this;return function(){var r=ko.unwrap(t.$type),u=ko.mapping.fromJS(ko.mapping.toJS(t)),f=/Bespoke\.Sph\.Domain\.(.*?)Field,/.exec(r)[1];n(i.Field,u,"field."+f.toLowerCase())}};return{addField:i,editField:r}};bespoke.sph.domain.NotificationActivityPartial=function(n){return n.From()||n.From("admin@@sph.my"),{}};bespoke.sph.domain.ParallelActivityPartial=function(){var n=require("durandal/system"),t=function(){this.ParallelBranchCollection.push(new bespoke.sph.domain.ParallelBranch(n.guid()))},i=function(n){var t=this;return function(){t.ParallelBranchCollection.remove(n)}},r=function(){return this.ParallelBranchCollection()};return{addBranch:t,removeBranch:i,multipleEndPoints:r}};bespoke.sph.domain.DailySchedulePartial=function(){return{name:ko.observable("Daily Schedule"),icon:ko.observable("fa fa-calendar")}};bespoke.sph.domain.WeeklySchedulePartial=function(){return{name:ko.observable("Weekly Schedule"),icon:ko.observable("fa fa-th-list")}};bespoke.sph.domain.MonthlySchedulePartial=function(){return{name:ko.observable("Monthly Schedule"),icon:ko.observable("fa fa-calendar-o"),dateOptions:_.range(1,31)}};bespoke.sph.domain.ReportDeliveryPartial=function(){return new bespoke.sph.domain.IntervalScheduleContainer};bespoke.sph.domain.RulePartial=function(){var t=require("durandal/system"),n=function(n,t,i){require(["viewmodels/"+i,"durandal/app"],function(i,r){i.field(t);r.showDialog(i).done(function(i){i&&i==="OK"&&n(t)})})},i=function(i,r){var u=new bespoke.sph.domain[r+"Field"](t.guid());n(i,u,"field."+r.toLowerCase())},r=function(t,i){return function(){var r=ko.unwrap(t.$type),u=ko.mapping.fromJS(ko.mapping.toJS(t)),f=/Bespoke\.Sph\.Domain\.(.*?)Field,/.exec(r)[1];n(i,u,"field."+f.toLowerCase())}};return{addField:i,editField:r}};bespoke.sph.domain.ScheduledTriggerActivityPartial=function(){return new bespoke.sph.domain.IntervalScheduleContainer};bespoke.sph.domain.ScreenActivityPartial=function(){return{isAsync:!0,canStart:!0}};bespoke.sph.domain.SetterActionPartial=function(){var n=require("durandal/system"),t=function(n){var t=this;return function(){t.SetterActionChildCollection.remove(n)}},i=function(){var t=new bespoke.sph.domain.SetterActionChild(n.guid());t.Field({Name:ko.observable("+ Field")});this.SetterActionChildCollection.push(t)};return{addChildAction:i,removeChildAction:t}};bespoke.sph.domain.SetterActionChildPartial=function(){var t=require("durandal/system"),n=function(n,t,i){require(["viewmodels/"+i,"durandal/app"],function(i,r){i.field(t);r.showDialog(i).done(function(i){i&&i==="OK"&&n(t)})})},i=function(i,r){var u=new bespoke.sph.domain[r+"Field"](t.guid());n(i,u,"field."+r.toLowerCase())},r=function(t){var i=this;return function(){var r=ko.unwrap(t.$type),u=ko.mapping.fromJS(ko.mapping.toJS(t)),f=/Bespoke\.Sph\.Domain\.(.*?)Field,/.exec(r)[1];n(i.Field,u,"field."+f.toLowerCase())}};return{addField:i,editField:r}};bespoke.sph.domain.StartWorkflowActionPartial=function(){var n=require("durandal/system"),t=function(n){var t=this;return function(){t.WorkflowTriggerMapCollection.remove(n)}},i=function(){var t=new bespoke.sph.domain.WorkflowTriggerMap(n.guid());t.Field({Name:ko.observable("+ Field")});this.WorkflowTriggerMapCollection.push(t)};return{addMapping:i,removeMapping:t}};bespoke.sph.domain.TriggerPartial=function(){var n=require("durandal/system"),t=function(n){var t=this;return function(){t.ActionCollection.remove(n)}},i=function(t){var i=this;return function(){var r=new bespoke.sph.domain[t+"Action"](n.guid());require(["viewmodels/action."+t.toLowerCase(),"durandal/app"],function(n,t){n.action(r);t.showDialog(n).done(function(n){n&&n==="OK"&&i.ActionCollection.push(r)})})}},r=function(n){var t=this;return function(){var r=ko.unwrap(n.$type),i=ko.mapping.fromJS(ko.mapping.toJS(n)),u=/Bespoke\.Sph\.Domain\.(.*?)Action,/.exec(r)[1];require(["viewmodels/action."+u.toLowerCase(),"durandal/app"],function(r,u){r.action(i);u.showDialog(r).done(function(r){r&&r==="OK"&&t.ActionCollection.replace(n,i)})})}},u=function(){var t=new bespoke.sph.domain.Rule(n.guid());t.Left({Name:ko.observable("+ Field")});t.Right({Name:ko.observable("+ Field")});this.RuleCollection.push(t)},f=function(n){var t=this;return function(){t.RuleCollection.remove(n)}};return{addRule:u,removeRule:f,removeAction:t,addAction:i,editAction:r}};bespoke.sph.domain.UpdateEntityActivityPartial=function(){var n=require("durandal/system"),t=function(t){var i=this;return function(){var r=new bespoke.sph.domain[t+"Mapping"](n.guid());i.PropertyMappingCollection.push(r)}},i=function(n){var t=this;return function(){t.PropertyMappingCollection.remove(n)}};return{addPropertyMapping:t,removePropertyMapping:i}};bespoke.sph.domain.VariablePartial=function(){var i=require("durandal/system"),n=ko.observable(),t=ko.observableArray();return{hasError:n,errors:t}};bespoke.sph.domain.WorkflowDefinitionPartial=function(n){var t=require("durandal/system"),i=ko.observable(!1),f=require(objectbuilders.datacontext),r=ko.observableArray(),e=function(n){var t=this;return function(){t.ActivityCollection.remove(n)}},o=function(n){var t=this;return function(){_(t.ActivityCollection()).each(function(n){n.IsInitiator(!1)});n.IsInitiator(!0)}},s=function(n){var i=this;return function(){var r=new bespoke.sph.domain[n+"Activity"](t.guid());require(["viewmodels/activity."+n.toLowerCase(),"durandal/app"],function(n,t){n.activity(r);typeof n.wd=="function"&&n.wd(i);t.showDialog(n).done(function(n){n&&n==="OK"&&i.ActivityCollection.push(r)})})}},h=function(n){var t=this;return function(){var u=ko.unwrap(n.$type),r=f.toObservable(ko.mapping.toJS(n)),e=/Bespoke\.Sph\.Domain\.(.*?)Activity,/.exec(u)[1];i(!0);require(["viewmodels/activity."+e.toLowerCase(),"durandal/app"],function(i,u){i.activity(r);typeof i.wd=="function"&&i.wd(t);u.showDialog(i).done(function(t){if(t&&t==="OK")for(var i in n)typeof n[i]=="function"&&n[i].name==="observable"?n[i](ko.unwrap(r[i])):n[i]=r[i]})})}},c=function(n){var i=this;return function(){var r=new bespoke.sph.domain[n+"Variable"](t.guid());require(["viewmodels/variable."+n.toLowerCase(),"durandal/app"],function(n,t){n.variable(r);typeof n.wd=="function"&&n.wd(i);t.showDialog(n).done(function(n){n&&n==="OK"&&i.VariableDefinitionCollection.push(r)})})}},l=function(n){var t=this;return function(){var r=ko.unwrap(n.$type),i=ko.mapping.fromJS(ko.mapping.toJS(n)),u=/Bespoke\.Sph\.Domain\.(.*?)Variable,/.exec(r)[1];require(["viewmodels/variable."+u.toLowerCase(),"durandal/app"],function(r,u){r.variable(i);typeof r.wd=="function"&&r.wd(t);u.showDialog(r).done(function(t){if(t&&t==="OK")for(var r in n)typeof n[r]=="function"&&n[r].name==="observable"?n[r](ko.unwrap(i[r])):n[r]=i[r]})})}},a=function(n){var t=this;return function(){t.VariableDefinitionCollection.remove(n)}},u=function(n){var t=n||this.SchemaStoreId();$.get("/WorkflowDefinition/GetXsdElementName/"+t).then(function(n){r(n)})};return n.SchemaStoreId.subscribe(u),{isBusy:i,removeActivity:e,removeVariable:a,addActivity:s,editActivity:h,addVariable:c,editVariable:l,loadSchema:u,xsdElements:r,setStartActivity:o}};bespoke.sph.domain.WorkflowDesignerPartial=function(){return{}};bespoke.sph.domain.WorkflowTriggerMapPartial=function(){return this};bespoke.sph.domain.WorkflowTriggerMapPartial.prototype=new bespoke.sph.domain.FieldContainer;
/*
//# sourceMappingURL=partial.min.js.map
*/