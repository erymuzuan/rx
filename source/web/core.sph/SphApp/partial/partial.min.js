var bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ActivityPartial=function(){var u=require("durandal/system"),n=ko.observable(),t=ko.observable(!1),i=ko.observable(!1),r=ko.observableArray();return{breakpoint:t,hit:i,hasError:n,errors:r}};bespoke.sph.domain.AssemblyFieldPartial=function(){var n=require(objectbuilders.system),t=function(){this.MethodArgCollection.push(new bespoke.sph.domain.MethodArg(n.guid()))},i=function(n){var t=this;return function(){t.MethodArgCollection.remove(n)}};return{addParameter:t,removeParameter:i}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.BarChartItemPartial=function(){var n=require("durandal/system"),t=function(){this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(n.guid()))},i=function(n){var t=this;return function(){t.ChartSeriesCollection.remove(n)}};return{addSeries:t,removeSeries:i}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.BlockPartial=function(){var n=require("durandal/system"),t=function(){this.FloorCollection.push(new bespoke.sph.domain.Floor(n.guid()))},i=function(n){var t=this;return function(){require(["viewmodels/block.dialog","durandal/app"],function(i,r){var u=ko.mapping.fromJS(ko.mapping.toJS(n));i.block(u);r.showDialog(i).done(function(i){i&&i=="OK"&&t.BlockCollection.replace(n,u)})})}},r=function(n){var t=this;return function(){t.FloorCollection.remove(n)}},u=function(n){var t=this;return function(){console.log("show map ",t);console.log(" on block ",n);require(["viewmodels/block.map","durandal/app"],function(i,r){i.init(t.BuildingId(),n.FloorPlanStoreId());r.showDialog(i).done(function(t){t=="OK"&&n.FloorPlanStoreId(i.spatialStoreId())})})}};return{addFloor:t,editFloor:i,editFloorMap:u,removeFloor:r}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.BusinessRulePartial=function(){var n=require("durandal/system"),r=require(objectbuilders.datacontext),u=require(objectbuilders.logger),t=function(){var i=this,t=new bespoke.sph.domain.Rule(n.guid());t.Left({Name:ko.observable("+ Field")});t.Right({Name:ko.observable("+ Field")});i.RuleCollection.push(t)},i=function(n){var t=this;return function(){t.RuleCollection.remove(n)}};return{addRule:t,removeRule:i}};bespoke.sph.domain.ButtonPartial=function(){var n=function(){var t=this,n=window.open("/sph/editor/ace?mode=javascript","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),i=function(){n.code=ko.unwrap(t.Command);n.code||(n.code="//insert your code here");n.saved=function(i,r){t.Command(i);r&&n.close()}};n.attachEvent?n.attachEvent("onload",i):i()};return{editCommand:n}};bespoke.sph.domain.ComboBoxPartial=function(){var n=require("durandal/system"),t=function(){var t=this,i=new bespoke.sph.domain.ComboBoxItem(n.guid());t.ComboBoxItemCollection.push(i)},i=function(n){var t=this;return function(){t.ComboBoxItemCollection.remove(n)}};return{addItem:t,removeItem:i}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ComplaintPartial=function(n){var t=require("durandal/system"),i=function(t){var r=this,u=String.format("ComplaintId eq {0}",n.ComplaintId()),i=new $.Deferred;return t.loadOneAsync("Maintenance",u).done(function(n){r.MaintenanceStatus(n.Status());i.resolve(n.Status)}),i.promise()},r=function(n){var t=_(this.CustomFieldValueCollection()).find(function(t){return t.Name()===n});if(!t)throw"Cannot find custom field for "+n+" in Complaint";return t.Value},u=function(n){var t=_(this.CustomListValueCollection()).find(function(t){return t.Name()===n});if(!t)throw"Cannot find custom list named "+n+" in Building";return t},f=function(n){return function(){var i=_(this.CustomListValueCollection()).find(function(t){return t.Name()===n}),r=new bespoke.sph.domain.CustomListRow(t.guid()),u=_(i.CustomFieldCollection()).map(function(n){var r=t.guid(),i=new bespoke.sph.domain.CustomFieldValue(r);return i.Name(n.Name()),i.Type(n.Type()),i});r.CustomFieldValueCollection(u);i.CustomListRowCollection.push(r)}},e=function(n,t){var i=this,r=_(i.CustomListValueCollection()).find(function(t){return t.Name()===n});return function(){r.CustomListRowCollection.remove(t)}};return{CustomField:r,CustomList:u,addCustomListItem:f,removeCustomListItem:e,MaintenanceStatus:ko.observable(),getMaintenanceStatus:i}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ComplaintTemplatePartial=function(){var n=this,t=require(objectbuilders.system);return{selectedBusinessRule:ko.observable(new bespoke.sph.domain.BusinessRule(t.guid())),addBusinessRule:n.addBusinessRule,removeBusinessRule:n.removeBusinessRule,editBusinessRule:n.editBusinessRule}};bespoke.sph.domain.ComplaintTemplatePartial.prototype=new bespoke.sph.domain.BusinessRuleBase;bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ConstantFieldPartial=function(){return{Type:ko.observable(),Value:ko.observable()}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ContractPartial=function(){var n=function(n){var t=this,r=String.format("ContractNo eq '{0}'",t.ReferenceNo()),u=String.format("ContractNo eq '{0}'",t.ReferenceNo()),f=n.getSumAsync("Invoice",r,"Amount"),e=n.getSumAsync("Payment",u,"Amount"),i=new $.Deferred;return $.when(f,e).then(function(n,r){var u=parseFloat(n)-parseFloat(r);t.Accrued(u);t.CanPaid(!0);u||t.CanPaid(!1);i.resolve(u)}),i.promise()};return{Accrued:ko.observable(),CanPaid:ko.observable(),getAccruedAmount:n}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ContractTemplatePartial=function(){var n=require("durandal/system"),t=function(){this.CustomFieldCollection.push(new bespoke.sph.domain.CustomField(n.guid()))},i=function(n){var t=this;return function(){t.CustomFieldCollection.remove(n)}};return{CustomFieldCollection:ko.observableArray(),addCustomField:t,removeCustomField:i}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.CreateEntityActivityPartial=function(){var n=require("durandal/system"),t=function(t){var i=this;return function(){var r=new bespoke.sph.domain[t+"Mapping"](n.guid());i.PropertyMappingCollection.push(r)}},i=function(n){var t=this;return function(){t.PropertyMappingCollection.remove(n)}};return{addPropertyMapping:t,removePropertyMapping:i}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.DataGridItemPartial=function(){var n=require("durandal/system"),t=function(){this.DataGridGroupDefinitionCollection.push(new bespoke.sph.domain.DataGridGroupDefinition(n.guid()))},i=function(n){var t=this;return function(){t.DataGridGroupDefinitionCollection.remove(n)}},r=function(){var t=this;t.DataGridColumnCollection.push(new bespoke.sph.domain.DataGridColumn(n.guid()))},u=function(n){var t=this;return function(){t.DataGridColumnCollection.remove(n)}};return{addColumn:r,removeColumn:u,addDataGridGroupDefinition:t,removeDataGridGroupDefinition:i}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.DecisionActivityPartial=function(){var n=require("durandal/system"),t=function(){this.DecisionBranchCollection.push(new bespoke.sph.domain.DecisionBranch(n.guid()))},i=function(n){var t=this;return function(){t.DecisionBranchCollection.remove(n)}},r=function(){return this.DecisionBranchCollection()};return{addBranch:t,removeBranch:i,multipleEndPoints:r}};bespoke.sph.domain.DelayActivityPartial=function(){return{isAsync:!0}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.EntityDefinitionPartial=function(){var n=require("durandal/system"),t=function(){this.MemberCollection.push(new bespoke.sph.domain.Member(n.guid()))},i=function(n){var t=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(i,r){var u=ko.mapping.fromJS(ko.mapping.toJS(n));i.member(u);r.showDialog(i).done(function(i){i&&i=="OK"&&t.BlockCollection.replace(n,u)})})}},r=function(n){var t=this;return function(){t.MemberCollection.remove(n)}},u=function(n){var t=this;return function(){console.log("show map ",t);console.log(" on member ",n);require(["viewmodels/member.map","durandal/app"],function(i,r){i.init(t.BuildingId(),n.MemberPlanStoreId());r.showDialog(i).done(function(t){t=="OK"&&n.MemberPlanStoreId(i.spatialStoreId())})})}};return{addMember:t,editMember:i,editMemberMap:u,removeMember:r}};bespoke.sph.domain.EntityViewPartial=function(){var n=require("durandal/system"),t=function(){this.ViewColumnCollection.push(new bespoke.sph.domain.ViewColumn(n.guid()))},i=function(n){var t=this;return function(){t.ViewColumnCollection.remove(n)}},r=function(){this.FilterCollection.push(new bespoke.sph.domain.Filter(n.guid()))},u=function(n){var t=this;return function(){t.FilterCollection.remove(n)}};return{addViewColumn:t,removeViewColumn:i,addFilter:r,removeFilter:u}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ExecutedActivityPartial=function(){var r=require("durandal/system"),n=ko.observable(!1),t=ko.observable(!1),i=ko.observableArray();return{breakpoint:n,hit:t,errors:i}};bespoke.sph.domain.FormElementPartial=function(){return{}};bespoke.sph.domain.HtmlElementPartial=function(){var n=function(){var t=this,n=window.open("/sph/editor/ace?mode=html","_blank","height="+screen.height+",width="+screen.width+",toolbar=0,location=0,fullscreen=yes"),i=function(){n.code=ko.unwrap(t.Text);n.saved=function(i,r){t.Text(i);r&&n.close()}};n.attachEvent?n.attachEvent("onload",i):i()};return{editHtml:n}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.FormTemplatePartial=function(){return{}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.IntervalSchedulePartial=function(){var n=ko.observable(),t=ko.observable();return{icon:n,name:t}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.LineChartItemPartial=function(){var n=require("durandal/system"),t=function(){this.ChartSeriesCollection.push(new bespoke.sph.domain.ChartSeries(n.guid()))},i=function(n){var t=this;return function(){t.ChartSeriesCollection.remove(n)}};return{addSeries:t,removeSeries:i}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ListenActivityPartial=function(){var n=require("durandal/system"),t=function(){var t=this,i=new bespoke.sph.domain.ListenBranch(n.guid());t.ListenBranchCollection.push(i)},i=function(n){var t=this;return function(){t.ListenBranchCollection.remove(n)}},r=function(){return this.ListenBranchCollection()};return{addBranch:t,removeBranch:i,multipleEndPoints:r}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ListViewPartial=function(){var n=require("durandal/system"),t=function(t){var i=this;return function(){var r=new bespoke.sph.domain.ListViewColumn(n.guid()),u=bespoke.sph.domain[t](n.guid());r.Input(u);i.ListViewColumnCollection.push(r)}},i=function(n){var t=this;return function(){t.ListViewColumnCollection.remove(n)}};return{addListViewColumn:t,removeListViewColumn:i}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ListViewColumnPartial=function(n){var t=ko.observable("/images/form.element.textbox.png");return n.Input.subscribe(function(n){if(n.$type){var i=/Bespoke\.Sph\.Domain\.(.*?),/.exec(ko.unwrap(n.$type))[1];t("/images/form.element."+i+".png")}}),{icon:t}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.MaintenanceTemplatePartial=function(){var n=this,t=require(objectbuilders.system);return{selectedBusinessRule:ko.observable(new bespoke.sph.domain.BusinessRule(t.guid())),addBusinessRule:n.addBusinessRule,removeBusinessRule:n.removeBusinessRule,editBusinessRule:n.editBusinessRule}};bespoke.sph.domain.MaintenanceTemplatePartial.prototype=new bespoke.sph.domain.BusinessRuleBase;bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.MemberPartial=function(){var n=require("durandal/system"),t=function(){this.MemberCollection.push(new bespoke.sph.domain.Member(n.guid()))},i=function(n){var t=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(i,r){var u=ko.mapping.fromJS(ko.mapping.toJS(n));i.member(u);r.showDialog(i).done(function(i){i&&i=="OK"&&t.BlockCollection.replace(n,u)})})}},r=function(n){var t=this;return function(){t.MemberCollection.remove(n)}},u=function(n){var t=this;return function(){console.log("show map ",t);console.log(" on member ",n);require(["viewmodels/member.map","durandal/app"],function(i,r){i.init(t.BuildingId(),n.MemberPlanStoreId());r.showDialog(i).done(function(t){t=="OK"&&n.MemberPlanStoreId(i.spatialStoreId())})})}};return{addMember:t,editMember:i,editMemberMap:u,removeMember:r}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.MethodArgPartial=function(){var t=require("durandal/system"),n=function(n,t,i){require(["viewmodels/"+i,"durandal/app"],function(i,r){i.field(t);r.showDialog(i).done(function(i){i&&i==="OK"&&n(t)})})},i=function(i,r){var u=new bespoke.sph.domain[r+"Field"](t.guid());n(i,u,"field."+r.toLowerCase())},r=function(t){var i=this;return function(){var r=ko.unwrap(t.$type),u=ko.mapping.fromJS(ko.mapping.toJS(t)),f=/Bespoke\.Sph\.Domain\.(.*?)Field,/.exec(r)[1];n(i.Field,u,"field."+f.toLowerCase())}};return{addField:i,editField:r}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ParallelActivityPartial=function(){var n=require("durandal/system"),t=function(){this.ParallelBranchCollection.push(new bespoke.sph.domain.ParallelBranch(n.guid()))},i=function(n){var t=this;return function(){t.ParallelBranchCollection.remove(n)}},r=function(){return this.ParallelBranchCollection()};return{addBranch:t,removeBranch:i,multipleEndPoints:r}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.Rent.prototype.RentPaid=function(){var n=_(this.PaymentDistributionCollection()).reduce(function(n,t){return n+t.Amount},0);return n.toFixed(2)};bespoke.sph.domain.Rent.prototype.Accrued=function(){var n=this.Amount()-this.RentPaid;return n.toFixed(2)};bespoke.sph.domain.Rent.prototype.AccumulatedAccrued=ko.observable();bespoke.sph.domain.Rent.prototype.TotalPayment=function(){var n=this.AccumulatedAccrued+this.Amount;return n.toFixed(2)};bespoke.sph.domain.RentPartial=function(){return{AccumulatedAccrued:ko.observable()}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.DailySchedulePartial=function(){return{name:ko.observable("Daily Schedule"),icon:ko.observable("fa fa-calendar")}};bespoke.sph.domain.WeeklySchedulePartial=function(){return{name:ko.observable("Weekly Schedule"),icon:ko.observable("fa fa-th-list")}};bespoke.sph.domain.MonthlySchedulePartial=function(){return{name:ko.observable("Monthly Schedule"),icon:ko.observable("fa fa-calendar-o"),dateOptions:_.range(1,31)}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ReportDeliveryPartial=function(){return new bespoke.sph.domain.IntervalScheduleContainer};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.RulePartial=function(){var t=require("durandal/system"),n=function(n,t,i){require(["viewmodels/"+i,"durandal/app"],function(i,r){i.field(t);r.showDialog(i).done(function(i){i&&i==="OK"&&n(t)})})},i=function(i,r){var u=new bespoke.sph.domain[r+"Field"](t.guid());n(i,u,"field."+r.toLowerCase())},r=function(t,i){return function(){var r=ko.unwrap(t.$type),u=ko.mapping.fromJS(ko.mapping.toJS(t)),f=/Bespoke\.Sph\.Domain\.(.*?)Field,/.exec(r)[1];n(i,u,"field."+f.toLowerCase())}};return{addField:i,editField:r}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ScheduledTriggerActivityPartial=function(){return new bespoke.sph.domain.IntervalScheduleContainer};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.ScreenActivityPartial=function(){return{isAsync:!0,canStart:!0}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.SetterActionPartial=function(){var n=require("durandal/system"),t=function(n){var t=this;return function(){t.SetterActionChildCollection.remove(n)}},i=function(){var t=new bespoke.sph.domain.SetterActionChild(n.guid());t.Field({Name:ko.observable("+ Field")});this.SetterActionChildCollection.push(t)};return{addChildAction:i,removeChildAction:t}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.SetterActionChildPartial=function(){var t=require("durandal/system"),n=function(n,t,i){require(["viewmodels/"+i,"durandal/app"],function(i,r){i.field(t);r.showDialog(i).done(function(i){i&&i==="OK"&&n(t)})})},i=function(i,r){var u=new bespoke.sph.domain[r+"Field"](t.guid());n(i,u,"field."+r.toLowerCase())},r=function(t){var i=this;return function(){var r=ko.unwrap(t.$type),u=ko.mapping.fromJS(ko.mapping.toJS(t)),f=/Bespoke\.Sph\.Domain\.(.*?)Field,/.exec(r)[1];n(i.Field,u,"field."+f.toLowerCase())}};return{addField:i,editField:r}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.SpacePartial=function(n){var i=require("durandal/system"),u=require(objectbuilders.datacontext),f=require(objectbuilders.logger),e=function(n){var t=_(this.CustomFieldValueCollection()).find(function(t){return t.Name()===n});if(!t)throw"Cannot find custom field for "+n+" in Space";return t.Value},o=function(n){var t=_(this.CustomListValueCollection()).find(function(t){return t.Name()===n});if(!t)throw"Cannot find custom list named "+n+" in Building";return t},s=function(n){return function(){var t=_(this.CustomListValueCollection()).find(function(t){return t.Name()===n}),r=new bespoke.sph.domain.CustomListRow(i.guid()),u=_(t.CustomFieldCollection()).map(function(n){var r=i.guid(),t=new bespoke.sph.domain.CustomFieldValue(r);return t.Name(n.Name()),t.Type(n.Type()),t});r.CustomFieldValueCollection(u);t.CustomListRowCollection.push(r)}},h=function(n,t){var i=this,r=_(i.CustomListValueCollection()).find(function(t){return t.Name()===n});return function(){r.CustomListRowCollection.remove(t)}},c=function(n){var t=this;return function(){require(["viewmodels/photo.dialog","durandal/app"],function(i,r){var u=ko.mapping.fromJS(ko.mapping.toJS(n));i.photo(u);r.showDialog(i).done(function(i){i=="OK"&&t.PhotoCollection.replace(n,u)})})}},l=function(){var n=this;require(["viewmodels/photo.dialog","durandal/app"],function(t,r){var u=new bespoke.sph.domain.Photo(i.guid());t.photo(u);r.showDialog(t).done(function(t){t&&t=="OK"&&n.PhotoCollection.push(u)})})},a=function(n){var t=this;return function(){t.PhotoCollection.remove(n)}},r=ko.observable(),t=function(n){if(n){var t=$.get("/Space/GetEncodedPath/"+n),i=$.get("/Space/GetCenter/"+n);$.when(t,i).then(function(n,t){if(t[0]){var i=t[0],u=String.format("http://maps.google.com/maps/api/staticmap?center={0},{1}&size=640x300&markers={0},{1}&sensor=false",i.Lat,i.Lng);r(u)}})}},v=function(n){var i=new $.Deferred;return u.post(JSON.stringify(n),"/Space/SaveMap").then(function(r){i.resolve(!0);f.log("Map has been successfully saved ",r,"buildingdetail",!0);t(n.spaceId)}),i.promise()};return typeof n.SpaceId=="number"&&t(n.SpaceId),typeof n.SpaceId=="function"&&(t(n.SpaceId()),n.SpaceId.subscribe(t)),{CustomField:e,CustomList:o,addCustomListItem:s,removeCustomListItem:h,staticMap:r,ApplicationTemplateOptions:ko.observableArray([]),addPhoto:l,editPhoto:c,removePhoto:a,saveMap:v}};bespoke.sph.domain.RolePartial=function(){return{permissions:ko.observableArray()}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.StartWorkflowActionPartial=function(){var n=require("durandal/system"),t=function(n){var t=this;return function(){t.WorkflowTriggerMapCollection.remove(n)}},i=function(){var t=new bespoke.sph.domain.WorkflowTriggerMap(n.guid());t.Field({Name:ko.observable("+ Field")});this.WorkflowTriggerMapCollection.push(t)};return{addMapping:i,removeMapping:t}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.TriggerPartial=function(){var n=require("durandal/system"),t=function(n){var t=this;return function(){t.ActionCollection.remove(n)}},i=function(t){var i=this;return function(){var r=new bespoke.sph.domain[t+"Action"](n.guid());require(["viewmodels/action."+t.toLowerCase(),"durandal/app"],function(n,t){n.action(r);t.showDialog(n).done(function(n){n&&n==="OK"&&i.ActionCollection.push(r)})})}},r=function(n){var t=this;return function(){var r=ko.unwrap(n.$type),i=ko.mapping.fromJS(ko.mapping.toJS(n)),u=/Bespoke\.Sph\.Domain\.(.*?)Action,/.exec(r)[1];require(["viewmodels/action."+u.toLowerCase(),"durandal/app"],function(r,u){r.action(i);u.showDialog(r).done(function(r){r&&r==="OK"&&t.ActionCollection.replace(n,i)})})}},u=function(){var t=new bespoke.sph.domain.Rule(n.guid());t.Left({Name:ko.observable("+ Field")});t.Right({Name:ko.observable("+ Field")});this.RuleCollection.push(t)},f=function(n){var t=this;return function(){t.RuleCollection.remove(n)}};return{addRule:u,removeRule:f,removeAction:t,addAction:i,editAction:r}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.UpdateEntityActivityPartial=function(){var n=require("durandal/system"),t=function(t){var i=this;return function(){var r=new bespoke.sph.domain[t+"Mapping"](n.guid());i.PropertyMappingCollection.push(r)}},i=function(n){var t=this;return function(){t.PropertyMappingCollection.remove(n)}};return{addPropertyMapping:t,removePropertyMapping:i}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.VariablePartial=function(){var i=require("durandal/system"),n=ko.observable(),t=ko.observableArray();return{hasError:n,errors:t}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.WorkflowDefinitionPartial=function(n){var t=require("durandal/system"),u=require(objectbuilders.datacontext),i=ko.observableArray(),f=function(n){var t=this;return function(){t.ActivityCollection.remove(n)}},e=function(n){var t=this;return function(){_(t.ActivityCollection()).each(function(n){n.IsInitiator(!1)});n.IsInitiator(!0)}},o=function(n){var i=this;return function(){var r=new bespoke.sph.domain[n+"Activity"](t.guid());require(["viewmodels/activity."+n.toLowerCase(),"durandal/app"],function(n,t){n.activity(r);typeof n.wd=="function"&&n.wd(i);t.showDialog(n).done(function(n){n&&n==="OK"&&i.ActivityCollection.push(r)})})}},s=function(n){var t=this;return function(){var r=ko.unwrap(n.$type),i=u.toObservable(ko.mapping.toJS(n)),f=/Bespoke\.Sph\.Domain\.(.*?)Activity,/.exec(r)[1];require(["viewmodels/activity."+f.toLowerCase(),"durandal/app"],function(r,u){r.activity(i);typeof r.wd=="function"&&r.wd(t);u.showDialog(r).done(function(t){if(t&&t==="OK")for(var r in n)typeof n[r]=="function"&&n[r].name==="observable"?n[r](ko.unwrap(i[r])):n[r]=i[r]})})}},h=function(n){var i=this;return function(){var r=new bespoke.sph.domain[n+"Variable"](t.guid());require(["viewmodels/variable."+n.toLowerCase(),"durandal/app"],function(n,t){n.variable(r);typeof n.wd=="function"&&n.wd(i);t.showDialog(n).done(function(n){n&&n==="OK"&&i.VariableDefinitionCollection.push(r)})})}},c=function(n){var t=this;return function(){var r=ko.unwrap(n.$type),i=ko.mapping.fromJS(ko.mapping.toJS(n)),u=/Bespoke\.Sph\.Domain\.(.*?)Variable,/.exec(r)[1];require(["viewmodels/variable."+u.toLowerCase(),"durandal/app"],function(r,u){r.variable(i);typeof r.wd=="function"&&r.wd(t);u.showDialog(r).done(function(t){if(t&&t==="OK")for(var r in n)typeof n[r]=="function"&&n[r].name==="observable"?n[r](ko.unwrap(i[r])):n[r]=i[r]})})}},l=function(n){var t=this;return function(){t.VariableDefinitionCollection.remove(n)}},r=function(n){var t=n||this.SchemaStoreId();$.get("/WorkflowDefinition/GetXsdElementName/"+t).then(function(n){i(n)})};return n.SchemaStoreId.subscribe(r),{removeActivity:f,removeVariable:l,addActivity:o,editActivity:s,addVariable:h,editVariable:c,loadSchema:r,xsdElements:i,setStartActivity:e}};bespoke.sph.domain.WorkflowDesignerPartial=function(){return{}};bespoke=bespoke||{};bespoke.sph=bespoke.sph||{};bespoke.sph.domain=bespoke.sph.domain||{};bespoke.sph.domain.WorkflowTriggerMapPartial=function(){return this};bespoke.sph.domain.WorkflowTriggerMapPartial.prototype=new bespoke.sph.domain.FieldContainer;
/*
//# sourceMappingURL=partial.min.js.map
*/