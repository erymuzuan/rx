bespoke.sph.domain.MemberPartial=function(){var n=require("durandal/system"),i=function(){this.MemberCollection.push(new bespoke.sph.domain.Member(n.guid()))},r=function(n){var t=this;return function(){require(["viewmodels/member.dialog","durandal/app"],function(i,r){var u=ko.mapping.fromJS(ko.mapping.toJS(n));i.member(u);r.showDialog(i).done(function(i){i&&i=="OK"&&t.BlockCollection.replace(n,u)})})}},u=function(n){var t=this;require(["viewmodels/field.permission.dialog","durandal/app"],function(i,r){var u=ko.mapping.fromJS(ko.mapping.toJS(n));i.member(u);r.showDialog(i).done(function(n){n&&n=="OK"&&t.FieldPermissionCollection(u.FieldPermissionCollection())})})},f=function(n){var t=this;return function(){t.MemberCollection.remove(n)}},e=function(n){var t=this;return function(){console.log("show map ",t);console.log(" on member ",n);require(["viewmodels/member.map","durandal/app"],function(i,r){i.init(t.BuildingId(),n.MemberPlanStoreId());r.showDialog(i).done(function(t){t=="OK"&&n.MemberPlanStoreId(i.spatialStoreId())})})}},t=function(n,t,i){require(["viewmodels/"+i,"durandal/app"],function(i,r){i.field(t);r.showDialog(i).done(function(i){i&&i==="OK"&&n(t)})})},o=function(i,r){var u=new bespoke.sph.domain[r+"Field"](n.guid());t(i,u,"field."+r.toLowerCase())},s=function(n){var i=this;return function(){var r=ko.unwrap(n.$type),u=ko.mapping.fromJS(ko.mapping.toJS(n)),f=/Bespoke\.Sph\.Domain\.(.*?)Field,/.exec(r)[1];t(i.Field,u,"field."+f.toLowerCase())}};return{editPermission:u,addMember:i,editMember:r,editMemberMap:e,removeMember:f,addField:o,editField:s}};
/*
//# sourceMappingURL=Member.min.js.map
*/