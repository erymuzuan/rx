@model dynamic

@{
    ViewBag.Title = "title";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript" data-script="true">
    define(['services/datacontext'], function () {
        var complaint = ko.observable(new bespoke.sph.domain.Complaint()),
            query = ko.observable(''),
            status = ko.observable(''),
            activate = function (routeData) {
                status(routeData.status);
                query(String.format("Status eq '{0}'", status()));
                
                return true;
            },
            exportList = function (){};
            

        var vm = {
            activate: activate,
            query: query,
            complaintCollection: ko.observableArray(),
            toolbar: ko.observable({
                reloadCommand: function () {
                    return activate();
                },
                printCommand: ko.observable({
                    entity: ko.observable("Complaint"),
                    id: ko.observable(0),
                    item: complaint,
                }),
                exportCommand: exportList,
            })
        };

        return vm;
    });
</script>
