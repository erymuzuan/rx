#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.34003
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Bespoke.Sph.Web.Areas.Sph.Views.Editor
{
    using System;
    using System.Collections.Generic;
    
    #line 1 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
    using System.Configuration;
    
    #line default
    #line hidden
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    
    #line 2 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
    using System.Web.Mvc.Html;
    
    #line default
    #line hidden
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/Sph/Views/Editor/Page.cshtml")]
    public partial class Page : System.Web.Mvc.WebViewPage<Bespoke.Sph.Web.ViewModels.EditorPageViewModel>
    {
        public Page()
        {
        }
        public override void Execute()
        {
            
            #line 5 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
  
    Layout = null;
    var theme = ConfigurationManager.AppSettings["sph:AceTheme"] ?? "crimson_editor";
    var fontSize = ConfigurationManager.AppSettings["sph:AceFontSize"] ?? "18";

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n<!DOCTYPE html>\r\n<html");

WriteLiteral(" lang=\"en\"");

WriteLiteral(">\r\n<head>\r\n    <meta");

WriteLiteral(" charset=\"UTF-8\"");

WriteLiteral(">\r\n    <meta");

WriteLiteral(" http-equiv=\"X-UA-Compatible\"");

WriteLiteral(" content=\"IE=edge,chrome=1\"");

WriteLiteral(">\r\n    <title>Editor</title>\r\n    <link");

WriteAttribute("href", Tuple.Create(" href=\"", 486), Tuple.Create("\"", 520)
, Tuple.Create(Tuple.Create("", 493), Tuple.Create<System.Object, System.Int32>(Href("~/Content/bootstrap.min.css")
, 493), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n    <link");

WriteAttribute("href", Tuple.Create(" href=\"", 552), Tuple.Create("\"", 589)
, Tuple.Create(Tuple.Create("", 559), Tuple.Create<System.Object, System.Int32>(Href("~/Content/font-awesome.min.css")
, 559), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n    <style");

WriteLiteral(" type=\"text/css\"");

WriteLiteral(" media=\"screen\"");

WriteLiteral(@">
        body {
            overflow: hidden;
        }

        #editor {
            margin: 0;
            margin-top: 50px;
            position: absolute;
            top: 0;
            bottom: 20px;
            left: 0;
            right: 0;
            font-size: ");

            
            #line 32 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
                   Write(fontSize);

            
            #line default
            #line hidden
WriteLiteral("px;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n");

WriteLiteral("    ");

            
            #line 37 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
Write(Html.Partial("_Toolbar"));

            
            #line default
            #line hidden
WriteLiteral("\r\n    <pre");

WriteLiteral(" id=\"editor\"");

WriteLiteral(">\r\n// PLEASE WAIT WHILE YOUR SCRIPT IS LOADING\r\n</pre>\r\n\r\n\r\n    <div");

WriteLiteral(" class=\"modalBlockout\"");

WriteLiteral(" style=\"z-index: 1051; opacity: 0.4;\"");

WriteLiteral(" data-bind=\"visible: isBusy\"");

WriteLiteral("></div>\r\n    <img");

WriteAttribute("src", Tuple.Create(" src=\"", 1220), Tuple.Create("\"", 1249)
, Tuple.Create(Tuple.Create("", 1226), Tuple.Create<System.Object, System.Int32>(Href("~/Images/spinner-md.gif")
, 1226), false)
);

WriteLiteral(" alt=\"loading\"");

WriteLiteral(" class=\"absolute-center\"");

WriteLiteral(" data-bind=\"visible: isBusy\"");

WriteLiteral(" />\r\n\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 1334), Tuple.Create("\"", 1360)
, Tuple.Create(Tuple.Create("", 1340), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/ace/ace.js")
, 1340), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(" charset=\"utf-8\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 1423), Tuple.Create("\"", 1458)
, Tuple.Create(Tuple.Create("", 1429), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/jquery-2.0.3.min.js")
, 1429), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(" charset=\"utf-8\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 1521), Tuple.Create("\"", 1553)
, Tuple.Create(Tuple.Create("", 1527), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/bootstrap.min.js")
, 1527), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(" charset=\"utf-8\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 1616), Tuple.Create("\"", 1649)
, Tuple.Create(Tuple.Create("", 1622), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/knockout-3.0.0.js")
, 1622), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(" charset=\"utf-8\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 1712), Tuple.Create("\"", 1754)
, Tuple.Create(Tuple.Create("", 1718), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/knockout.mapping-latest.js")
, 1718), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(" charset=\"utf-8\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 1817), Tuple.Create("\"", 1850)
, Tuple.Create(Tuple.Create("", 1823), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/underscore.min.js")
, 1823), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(" charset=\"utf-8\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 1913), Tuple.Create("\"", 1942)
, Tuple.Create(Tuple.Create("", 1919), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/moment.min.js")
, 1919), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(" charset=\"utf-8\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 2005), Tuple.Create("\"", 2044)
, Tuple.Create(Tuple.Create("", 2011), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/_function.prototypes.js")
, 2011), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(" charset=\"utf-8\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 2107), Tuple.Create("\"", 2132)
, Tuple.Create(Tuple.Create("", 2113), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/_utils.js")
, 2113), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(" charset=\"utf-8\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 2195), Tuple.Create("\"", 2223)
, Tuple.Create(Tuple.Create("", 2201), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/_ko.kendo.js")
, 2201), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(" charset=\"utf-8\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 2286), Tuple.Create("\"", 2318)
, Tuple.Create(Tuple.Create("", 2292), Tuple.Create<System.Object, System.Int32>(Href("~/SphApp/objectbuilders.js")
, 2292), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 2365), Tuple.Create("\"", 2391)
, Tuple.Create(Tuple.Create("", 2371), Tuple.Create<System.Object, System.Int32>(Href("~/Scripts/require.js")
, 2371), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral("></script>\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 2438), Tuple.Create("\"", 2482)
, Tuple.Create(Tuple.Create("", 2444), Tuple.Create<System.Object, System.Int32>(Href("~/SphApp/schemas/trigger.workflow.g.js")
, 2444), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral("></script>\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">

        var bespoke = bespoke || {};
        bespoke.sph = bespoke.sph || {};
        bespoke.sph.domain = bespoke.sph.domain || {};


        require.config({
            baseUrl: ""/SphApp"",
            waitSeconds: 15
        });
        define('jquery', function () { return jQuery; });
        define('knockout', ko);
    </script>

    <script>

        var editor = ace.edit(""editor"");
        editor.setTheme(""ace/theme/");

            
            #line 77 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
                              Write(theme);

            
            #line default
            #line hidden
WriteLiteral("\");\r\n        require([\'services/datacontext\', \'jquery\', \'services/app\', \'services" +
"/system\'], function (context, jquery, app, system) {\r\n\r\n");

            
            #line 80 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
            
            
            #line default
            #line hidden
            
            #line 80 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
              
            var mode = this.Request.QueryString["mode"] ?? "csharp";
        
            
            #line default
            #line hidden
WriteLiteral("\r\n            editor.getSession().setMode(\"ace/mode/");

            
            #line 83 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
                                             Write(mode);

            
            #line default
            #line hidden
WriteLiteral(@""");

            var count = 0;
            while (!window.code && count < 3) {
                alert(count + "": Cannot detect code"");
                count++;
            }
            editor.setValue(window.code);
            var cursor2 = localStorage.getItem(""page_");

            
            #line 91 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
                                                Write(Model.Page.PageId);

            
            #line default
            #line hidden
WriteLiteral(@"""),
                c = JSON.parse(cursor2);
            if (c) {
                editor.focus();
                editor.gotoLine(c.row);
                editor.moveCursorToPosition(c);
            } else {
                editor.gotoLine(1);
            }


            editor.commands.addCommand({
                name: 'GotoLine',
                bindKey: { win: 'Ctrl-G', mac: 'Command-G' },
                exec: function () {
                    require(['viewmodels/ace.goto.line'], function (dialog) {
                        app.showModal(dialog)
                            .done(function (result) {
                                if (result === ""OK"") {
                                    editor.gotoLine(dialog.line());
                                }
                            });
                    });
                },
                readOnly: true
            });

            var isBusy = ko.observable(),
                save = function () {
                    if (window.saved)
                        window.saved(editor.getValue());

                },
                saveAndClose = function () {
                    if (window.saved)
                        window.saved(editor.getValue(), true);

                    var cursor = editor.selection.getCursor();
                    if (cursor) {
                        localStorage.setItem(""page_");

            
            #line 130 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
                                              Write(Model.Page.PageId);

            
            #line default
            #line hidden
WriteLiteral(@""", JSON.stringify(cursor));
                    }

                },
                copy = function () {

                },
                paste = function () {

                }, search = function () {

                },
                gotoLine = function (number) {

                },
                logs = function () {

                    require(['viewmodels/page.logs', 'services/app'], function (dialog, app2) {
                        var query = ""Type eq 'Page' and EntityId = ");

            
            #line 148 "..\..\Areas\Sph\Views\Editor\Page.cshtml"
                                                              Write(Model.Page.PageId);

            
            #line default
            #line hidden
WriteLiteral("\";\r\n                        context.loadAsync(\"AuditTrail\", query)\r\n             " +
"               .done(function (lo) {\r\n                                dialog.log" +
"s(lo.itemCollection);\r\n                                app2.showDialog(dialog)\r\n" +
"                                    .done(function (result) {\r\n                 " +
"                       if (result === \"OK\") {\r\n                                 " +
"           editor.setValue(dialog.code());\r\n                                    " +
"    }\r\n                                    });\r\n\r\n                            })" +
";\r\n\r\n                    });\r\n                },\r\n                vm = {\r\n      " +
"              paste: paste,\r\n                    searchText: ko.observable(),\r\n " +
"                   copy: copy,\r\n                    save: save,\r\n               " +
"     search: search,\r\n                    saveAndClose: saveAndClose,\r\n         " +
"           gotoLine: gotoLine,\r\n                    logs: logs,\r\n               " +
"     isBusy: isBusy,\r\n                    snippets: ko.observableArray(),\r\n     " +
"               openSnippetEditor: function () {\r\n                        require" +
"([\'viewmodels/snippets.dialog\', \'services/app\'], function (dialog, app2) {\r\n\r\n  " +
"                          app2.showModal(dialog)\r\n                              " +
"  .done(function () {\r\n\r\n                                });\r\n\r\n                " +
"        });\r\n                    },\r\n                    showHelp: function () {" +
"\r\n\r\n                    }\r\n                };\r\n            ko.applyBindings(vm, " +
"document.getElementById(\'header-navbar\'));\r\n\r\n\r\n\r\n\r\n            $(\'#theme\').chan" +
"ge(function () {\r\n                editor.setTheme(\"ace/theme/\" + $(this).val());" +
"\r\n                $.post(\'/Editor/SaveSetting\', { \'ace-theme\': $(this).val() });" +
"\r\n            });\r\n            $(\'#font-size\').change(function () {\r\n           " +
"     $(\'#editor\').css(\"font-size\", $(this).val() + \"px\");\r\n                $.pos" +
"t(\'/Editor/SaveSetting\', { \'ace-font-size\': $(this).val() });\r\n            });\r\n" +
"            $(\'#snippets-list\').on(\'click\', \'li>a\', function () {\r\n             " +
"   var sp = ko.dataFor(this),\r\n                    code = ko.unwrap(sp.code);\r\n " +
"               editor.insert(code);\r\n            });\r\n\r\n            $.getJSON(\'/" +
"code.snippets.js\')\r\n                .done(function (snippets) {\r\n               " +
"     vm.snippets(snippets);\r\n                });\r\n\r\n        });\r\n    </script>\r\n" +
"\r\n</body>\r\n</html>\r\n");

        }
    }
}
#pragma warning restore 1591
