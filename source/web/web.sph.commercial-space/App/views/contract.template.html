<div class="container-fluid">
    <div class="row-fluid">
        <h1 class="span12">Jenis kontrak</h1>
    </div>
</div>
<div class="tabbable">
    <ul class="nav-tabs nav">
        <li class="active">
            <a href="#form-div" data-toggle="tab">General</a>
        </li>
        <li>
            <a href="#topics-div" data-toggle="tab">Topics dan Klaus</a>
        </li>
        <li>
            <a href="#customFields-div" data-toggle="tab">Lain-lain</a>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="form-div">

            <form class="form-horizontal" data-bind="with : template">
                <div class="control-group">
                    <label for="template-Type" class="control-label">Jenis</label>
                    <div class="controls">
                        <input data-bind="value: Type" id="template-Type" type="text" name="template-Type" />
                    </div>
                </div>
                <div class="control-group">
                    <label for="template-Description" class="control-label">Keterangan</label>
                    <div class="controls">
                        <textarea rows="5" class="input-block-level" data-bind="value: Description" id="template-Description" name="template-Description"></textarea>
                    </div>
                </div>
                <div class="control-group">
                    <label for="template-InterestRate" class="control-label">Kadar Faedah </label>
                    <div class="controls ">
                        <div class="input-append">
                            <input data-bind="value: InterestRate" class="input-small" id="template-InterestRate" type="text" name="template-InterestRate" />
                            <span class="add-on">%</span>
                        </div>
                    </div>
                </div>
                <div>
                    <table id="document-sokongan-table" class="table table-striped">
                        <thead>
                            <tr>

                                <th>Nama</th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: { data: DocumentTemplateCollection, afterAdd: $root.configureUpload }">
                            <tr>

                                <td>
                                    <input type="text" data-bind="value: Name, uniqueName: true" />
                                </td>
                                <td>
                                    <div data-bind="visible: !StoreId()">
                                        <input class="input-medium " type="file" value="upload" name="files" />

                                    </div>
                                    <a download data-bind="visible: StoreId, attr: { href: '/BinaryStore/Get/' + StoreId() }">Download</a>
                                </td>
                                <td>
                                    <button class="btn btn-link" title="Buang dokumen ini" data-bind="click: $parent.removeDocumentCommand">Buang</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <input type="button" name="addAttachmentCommand" class="btn pull-right" value="+ Dokument" data-bind="click: $root.addAttachmentCommand" />
                </div>
            </form>
        </div>
        <div class="tab-pane" id="topics-div">
            <div class="row-fluid">
                <div class="span4">
                    <label>Topics</label>
                    <ul class="nav nav-stacked listview" data-bind="foreach: template().TopicCollection">
                        <li>
                            <div>
                                <a href="#" class="topic-title-link" data-bind="text: Title, click: $parent.selectTopicCommand"></a>
                                <a data-toggle="modal" href="#topic-dialog" data-bind="click : $root.editTopic" class="topic-edit-link">Edit</a>
                            </div>
                        </li>
                    </ul>
                    <a type="button" class="btn btn-link"
                       data-toggle="modal"
                       href="#topic-dialog" data-bind="click: startAddTopicCommand">+ Topic</a>

                </div>
                <!-- if ko : $root.selectedTopic() -->
                <div class="span8">
                    <a type="button" class="btn btn-link"
                       data-toggle="modal"
                       href="#clause-dialog"
                       data-bind="click: startAddClauseCommand">+ Klaus</a>
                    <ul class="nav nav-stacked listview" data-bind="foreach: $root.selectedTopic().ClauseCollection">
                        <li>
                            <div>
                                <i data-bind="text: ($index() + 1)" class="add-on"></i>.
                                <a href="#" data-bind="text: Title, click: $root.selectClauseCommand"></a>
                                <a data-toggle="modal" href="#clause-dialog" data-bind="click: $root.editClause" class="pull-right">View</a>
                            </div>
                        </li>
                    </ul>

                </div>

                <!-- /ko -->
            </div>
        </div>
        
        <div class="tab-pane" id ="customFields-div">
            <table id="Table1" class="table table-striped">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Type</th>
                                <th>ValuePath</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: CustomFieldValueCollection">
                            <tr>
                                <td>
                                    <input type="text" data-bind="value: Name, uniqueName: true" />
                                </td>
                                <td>
                                    <input type="text" data-bind="value: Type, uniqueName: true" />
                                </td>
                                <td>
                                     <input type="text" data-bind="value: Value, uniqueName: true" />
                                </td>
                                <td>
                                    <button class="btn btn-link" title="Buang" data-bind="click: $parent.removeCustomFieldCommand">Buang</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
        </div>
    </div>
</div>



<section class="modal hide" id="topic-dialog">

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h3>Topic</h3>
    </div>
    <div class="modal-body">
        <form data-bind="with : editedTopic">
            <div class="control-group">
                <label for="topic-Title" class="control-label">Tajuk</label>
                <div class="controls">
                    <input data-bind="value: Title" id="topic-Title" type="text" name="topic-Title" />
                </div>
            </div>
            <div class="control-group">
                <label for="topic-Text" class="control-label">Text</label>
                <div class="controls">
                    <textarea class="input-large input-block-level" rows="5" data-bind="value: Text" id="topic-Text" name="topic-Text"></textarea>
                </div>
            </div>
            <div class="control-group">
                <label for="topic-Description" class="control-label">Nota</label>
                <div class="controls">
                    <textarea class="input-block-level" data-bind="value: Description" id="topic-Description" rows="3" name="topic-Description" />
                </div>
            </div>

        </form>
    </div>
    <div class="modal-footer">
        <input data-dismiss="modal" type="button" class="btn btn-primary" value="OK" data-bind="click: topicDialogOk" />
        <a href="#" class="btn" data-dismiss="modal">Cancel</a>
    </div>
</section>


<section class="modal hide" id="clause-dialog">

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h3>Klaus</h3>
    </div>
    <div class="modal-body" data-bind="with : $root.editedClause">
        <form>
            <div class="control-group">
                <label for="clause-Title" class="control-label">Tajuk</label>
                <div class="controls">
                    <input data-bind="value: Title" id="clause-Title" type="text" name="clause.Title" />
                </div>
            </div>
            <div class="control-group">
                <label for="clause-Text" class="control-label">Text</label>
                <div class="controls">
                    <textarea class="input-large input-block-level" rows="5" data-bind="value: Text" id="clause-Text"
                              name="topic.Text"></textarea>
                </div>
            </div>
            <div class="control-group">
                <label for="clause-Description" class="control-label">Nota</label>
                <div class="controls">
                    <textarea class="input-block-level" data-bind="value: Description" id="clause-Description" rows="3"
                              name="clause.Description" />
                </div>
            </div>

        </form>
    </div>

    <div class="modal-footer">
        <input data-dismiss="modal" type="button" class="btn btn-primary" value="OK" data-bind="click: $root.clauseDialogButtonOk" />
        <a href="#" class="btn" data-dismiss="modal">Cancel</a>
    </div>
</section>
