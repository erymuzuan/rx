@using System.Web.Mvc.Html
@using System.Web.Optimization
@using Bespoke.Sph.Domain
@model Bespoke.Sph.Web.Controllers.WorkflowStartViewModel

@{
    ViewBag.Title = Model.WorkflowDefinition.Name;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <h1>@Model.Screen.Title</h1>
</div>
<div class="row">
    <form class="form-horizontal" id="workflow-start-form">
        @foreach (var fe in Model.Screen.FormDesign.FormElementCollection)
        {
            fe.Path = fe.Path.ConvertJavascriptObjectToFunction();

            @Html.EditorFor(f => fe)
        }
        <div class="form-group">
            <button type="submit">Save</button>
        </div>
    </form>

</div>

@section scripts
{
    <script type="text/javascript">
        require(['services/datacontext', 'jquery'], function(context) {

            var vm = {
                @foreach (var v in Model.WorkflowDefinition.VariableDefinitionCollection)
                {
                    <text>
                @v.Name : @Html.Raw(v.GetEmptyJson(Model.WorkflowDefinition)),

                </text>
                }

                isBusy : ko.observable()


            };
            var ovm = context.toObservable(vm);
            ko.applyBindings(ovm);

        });

    </script>
}


.