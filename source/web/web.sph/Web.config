<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <sectionGroup name="spring">
      <section name="context" type="Spring.Context.Support.ContextHandler, Spring.Core" />
      <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core" />
      <section name="typeAliases" type="Spring.Context.Support.TypeAliasesSectionHandler, Spring.Core" />
    </sectionGroup>

    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="Bespoke.Sph.Web.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
    <section name="resizer" type="ImageResizer.ResizerSection" requirePermission="false" />

  </configSections>
  <connectionStrings>
    <add name="Sph" connectionString="Data Source=(localdb)\Projects;Initial Catalog=sph;Integrated Security=True;Connect Timeout=30;Encrypt=False;TrustServerCertificate=False" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>
    <add key="sph:BaseUrl2" value="55555localhost:4436" />
    <add key="sph:BaseUrl" value="http://localhost:4436" />
    <add key="sph:EnableWorkflowGetCacheDependency" value="false" />
    <add key="sph:AceTheme" value="monokai" />
    <add key="sph:AceFontSize" value="18" />
    <add key="sph:ApplicationName" value="Dev" />
    <add key="owin:AutomaticAppStartup" value="true" />
    <add key="webpages:Version" value="3.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="theme" value="matyie" />
    <add key="jpg.max.width" value="750" />
    <add key="RuleFields" value="Constant,Document,Function,PropertyChanged,Assembly" />
  </appSettings>
  
  <system.web>
    <customErrors mode="Off" />
    <compilation debug="true" targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Sph/SphAccount/Login" timeout="2880" />
    </authentication>
    <pages controlRenderingCompatibilityVersion="4.0">
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>


    <roleManager enabled="true" cacheRolesInCookie="true" defaultProvider="SphRoleProvider">
      <providers>
        <clear />
        <add applicationName="sph" connectionStringName="sph" name="SphRoleProvider" type="System.Web.Security.SqlRoleProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
      </providers>
    </roleManager>

    <membership defaultProvider="AspNetSqlMembershipProvider">
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" connectionStringName="sph" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" passwordFormat="Hashed" minRequiredNonalphanumericCharacters="0" minRequiredPasswordLength="4" applicationName="sph" />
      </providers>
    </membership>




    <httpModules>
      <add name="ImageResizingModule" type="ImageResizer.InterceptModule" />
    </httpModules>
  </system.web>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="ImageResizingModule" type="ImageResizer.InterceptModule" />
    </modules>
    <rewrite>
      <rules configSource="rewrite.config" />
    </rewrite>
    <validation validateIntegratedModeConfiguration="false" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Antlr3.Runtime" publicKeyToken="EB42632606E9261F" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.5.0.2" newVersion="3.5.0.2" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.Core" publicKeyToken="2780ccd10d57b246" />
        <bindingRedirect oldVersion="0.0.0.0-4.3.0.0" newVersion="4.3.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.AspNet" publicKeyToken="2780ccd10d57b246" />
        <bindingRedirect oldVersion="0.0.0.0-4.3.0.0" newVersion="4.3.0.0" />
      </dependentAssembly>
      
      
      
      <dependentAssembly>
        <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-1.5.2.14234" newVersion="1.5.2.14234" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Common.Logging" publicKeyToken="af08829b84f0328e" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.1.2.0" newVersion="2.1.2.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Net.Http.Formatting" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Data.OData" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.6.0.0" newVersion="5.6.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Data.Edm" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.6.0.0" newVersion="5.6.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Spatial" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.6.0.0" newVersion="5.6.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Antlr3.Runtime" publicKeyToken="eb42632606e9261f" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.5.0.2" newVersion="3.5.0.2" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Http.OData" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.2.0" newVersion="2.0.2.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.2.0" newVersion="2.0.2.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.Core" publicKeyToken="2780ccd10d57b246" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.3.4.13329" newVersion="4.3.4.13329" />
      </dependentAssembly>
    <dependentAssembly><assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" /><bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" /></dependentAssembly><dependentAssembly><assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" /><bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" /></dependentAssembly><dependentAssembly><assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" /><bindingRedirect oldVersion="0.0.0.0-5.1.0.0" newVersion="5.1.0.0" /></dependentAssembly></assemblyBinding>

  </runtime>
  <spring>
    <context>
      <resource uri="config://spring/objects" />
    </context>
    <typeAliases>
      <alias name="AuditTrail" type="Bespoke.Sph.Domain.AuditTrail, domain.sph" />
      <alias name="Designation" type="Bespoke.Sph.Domain.Designation, domain.sph" />
      <alias name="EntityDefinition" type="Bespoke.Sph.Domain.EntityDefinition, domain.sph" />
      <alias name="EntityForm" type="Bespoke.Sph.Domain.EntityForm, domain.sph" />
      <alias name="EntityView" type="Bespoke.Sph.Domain.EntityView, domain.sph" />
      <alias name="Message" type="Bespoke.Sph.Domain.Message, domain.sph" />
      <alias name="Page" type="Bespoke.Sph.Domain.Page, domain.sph" />
      <alias name="ReportDefinition" type="Bespoke.Sph.Domain.ReportDefinition, domain.sph" />
      <alias name="ReportDelivery" type="Bespoke.Sph.Domain.ReportDelivery, domain.sph" />
      <alias name="SpatialStore" type="Bespoke.Sph.Domain.SpatialStore, domain.sph" />
      <alias name="Setting" type="Bespoke.Sph.Domain.Setting, domain.sph" />
      <alias name="Tracker" type="Bespoke.Sph.Domain.Tracker, domain.sph" />
      <alias name="Trigger" type="Bespoke.Sph.Domain.Trigger, domain.sph" />
      <alias name="UserProfile" type="Bespoke.Sph.Domain.UserProfile, domain.sph" />
      <alias name="Watcher" type="Bespoke.Sph.Domain.Watcher, domain.sph" />
      <alias name="WorkflowDefinition" type="Bespoke.Sph.Domain.WorkflowDefinition, domain.sph" />
      <alias name="Workflow" type="Bespoke.Sph.Domain.Workflow, domain.sph" />
    </typeAliases>
    <objects>
      <object name="IPersistence" type="Bespoke.Sph.SqlRepository.SqlPersistence, sql.repository">
        <constructor-arg name="connectionString" value="Data Source=(localdb)\Projects;Initial Catalog=Sph;Integrated Security=True;Connect Timeout=30;Encrypt=False;TrustServerCertificate=False;Application Name=sph.cs.web" />
      </object>
      <object name="IBrokerConnection" type="Bespoke.Sph.RabbitMqPublisher.DefaultBrokerConnection, rabbitmq.changepublisher">
        <property name="Port" value="5672" />
        <property name="Password" value="guest" />
        <property name="Username" value="guest" />
        <property name="Host" value="localhost" />
        <property name="VirtualHost" value="sph.0009" />
      </object>
      <object name="IEntityChangePublisher" type="Bespoke.Sph.RabbitMqPublisher.ChangePublisherClient,rabbitmq.changepublisher">
        <constructor-arg name="connection" ref="IBrokerConnection" />
      </object>
      <object name="IEntityChangedListener&lt;Message&gt;" type="Bespoke.Sph.RabbitMqPublisher.EntityChangedListener&lt;Message&gt;,rabbitmq.changepublisher">
        <constructor-arg name="connection" ref="IBrokerConnection" />
      </object>
      <object name="IEntityChangedListener&lt;Page&gt;" type="Bespoke.Sph.RabbitMqPublisher.EntityChangedListener&lt;Page&gt;,rabbitmq.changepublisher">
        <constructor-arg name="connection" ref="IBrokerConnection" />
      </object>
      <object name="IDocumentGenerator" type="Bespoke.Sph.WordGenerator.WordGenerator, word.document.generator">
        <property name="DefaultNamespace" value="Bespoke.Sph.Domain" />
      </object>
      <object name="ITemplateEngine" type="Bespoke.Sph.Templating.RazorEngine, razor.template" />
      <object name="IScriptEngine" type="Bespoke.Sph.RoslynScriptEngines.RoslynScriptEngine , roslyn.scriptengine" />
      <object name="ITaskScheduler" type="Bespoke.Sph.WindowsTaskScheduler.TaskScheduler , windows.taskschedulers">
        <constructor-arg name="executable" value="C:\project\work\sph\source\scheduler\scheduler.delayactivity\bin\Debug\scheduler.delayactivity.exe" />
      </object>
      <object name="IBinaryStore" type="Bespoke.Sph.SqlRepository.SqlBinaryStore, sql.repository" />
      <object name="ISpatialService&lt;SpatialStore&gt;" type="Bespoke.Sph.SqlRepository.SqlSpatial&lt;SpatialStore&gt;, sql.repository" />

      <object name="IReportDataSource" type="Bespoke.Sph.SqlReportDataSource.SqlDataSource, report.sqldatasource" />


      <object name="IRepository&lt;AuditTrail&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;AuditTrail&gt;, sql.repository" />
      <object name="IRepository&lt;Designation&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;Designation&gt;, sql.repository" />
      <object name="IRepository&lt;EntityDefinition&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;EntityDefinition&gt;, sql.repository" />
      <object name="IRepository&lt;EntityForm&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;EntityForm&gt;, sql.repository" />
      <object name="IRepository&lt;EntityView&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;EntityView&gt;, sql.repository" />
      <object name="IRepository&lt;Message&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;Message&gt;, sql.repository" />
      <object name="IRepository&lt;Page&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;Page&gt;, sql.repository" />
      <object name="IRepository&lt;ReportDefinition&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;ReportDefinition&gt;, sql.repository" />
      <object name="IRepository&lt;ReportDelivery&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;ReportDelivery&gt;, sql.repository" />
      <object name="IRepository&lt;SpatialStore&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;SpatialStore&gt;, sql.repository" />
      <object name="IRepository&lt;Setting&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;Setting&gt;, sql.repository" />
      <object name="IRepository&lt;Tracker&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;Tracker&gt;, sql.repository">
        <property name="IsJson" value="true" />
      </object>
      <object name="IRepository&lt;Trigger&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;Trigger&gt;, sql.repository" />
      <object name="IRepository&lt;UserProfile&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;UserProfile&gt;, sql.repository" />
      <object name="IRepository&lt;Watcher&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;Watcher&gt;, sql.repository" />
      <object name="IRepository&lt;WorkflowDefinition&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;WorkflowDefinition&gt;, sql.repository" />
      <object name="IRepository&lt;Workflow&gt;" type="Bespoke.Sph.SqlRepository.SqlRepository&lt;Workflow&gt;, sql.repository">
        <property name="IsJson" value="true" />
      </object>
      <object name="QueryProvider" type="Bespoke.Sph.SqlRepository.SqlQueryProvider, sql.repository" />
      <object name="IPagingTranslator" type="Bespoke.Sph.SqlRepository.Sql2008PagingTranslator, sql.repository" />
      <object name="ISqlServerMetadata" type="Bespoke.Sph.SqlRepository.SqlServer2012Metadata, sql.repository" />
      <object name="IDirectoryService" type="Bespoke.Sph.DirectoryServices.AspNetDirectoryService, sqlmembership.directoryservices" />
      <object name="INotificationService" type="Bespoke.Sph.EmailServiceNotification.EmailService, email.service" />
      <object name="IPagingTranslator2" type="Bespoke.Sph.Web.Api.Sql2008PagingTranslator, core.sph" />


    </objects>
  </spring>

  <system.net>
    <mailSettings>
      <smtp deliveryMethod="SpecifiedPickupDirectory">
        <specifiedPickupDirectory pickupDirectoryLocation="c:\temp\sphEmail" />
      </smtp>
    </mailSettings>



  </system.net>


  <applicationSettings>
    <Bespoke.Sph.Web.Properties.Settings>
      <setting name="theme" serializeAs="String">
        <value>matyie</value>
      </setting>
    </Bespoke.Sph.Web.Properties.Settings>
  </applicationSettings>
  <resizer>
    <plugins>
      <add name="MvcRoutingShim" />
    </plugins>
  </resizer>


</configuration>
