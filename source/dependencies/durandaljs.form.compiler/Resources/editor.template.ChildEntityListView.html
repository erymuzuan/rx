
@{
    var element = Model.Element;
    var guid = Guid.NewGuid().ToString();
}



<div class="form-group" data-bind="visible:@element.Visible">
    <h3>@element.Label</h3>
    <table class="table table-condensed table-striped" data-bind="serverPaging :{ query: @Raw(element.Query), entity : '@element.Entity', list: bespoke.getSingletonObservableArray('@guid')}">
        <thead>
            <tr>
                @foreach (var col in element.ViewColumnCollection)
                {
                    <th>@col.Header</th>
                }
            </tr>
        </thead>
        <tbody data-bind="foreach: bespoke.getSingletonObservableArray('@guid')">
            <tr>
                @foreach (var col in element.ViewColumnCollection)
                {
                    var binding = string.Format(col.Format, col.Path);
                    if (col.IsLinkColumn)
                    {
                        <td>
                            <a data-bind="attr : {href:'#@col.FormRoute' + '/' + @(element.Entity)Id(), title:'@col.Header' }">
                                @if (!string.IsNullOrWhiteSpace(col.IconCssClass))
                                {
                                    <i class="@col.IconCssClass"></i>
                                }
                                @if (!string.IsNullOrWhiteSpace(col.IconStoreId))
                                {
                                    <img src="/sph/images/get/@col.IconStoreId" alt="@col.Header" />
                                }
                                <span data-bind="@binding"></span>
                            </a>
                        </td>
                    }
                    else
                    {
                        <td data-bind="@binding"></td>
                    }
                }
            </tr>
        </tbody>
    </table>
</div>