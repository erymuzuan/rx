{
  "$type": "System.Threading.Tasks.Task`1[[subscriber.entities.EntityMigrationPackage, subscriber.entities.dev]], mscorlib",
  "Result": {
    "$type": "subscriber.entities.EntityMigrationPackage, subscriber.entities.dev",
    "CreateTableSql": "\r\nUSE [DevV1]\r\nGO\r\nIF (EXISTS (SELECT * \r\n                 FROM INFORMATION_SCHEMA.TABLES \r\n                 WHERE TABLE_SCHEMA = 'DevV1' \r\n                 AND  TABLE_NAME = 'Vehicle'))\r\nBEGIN\r\n    exec sp_rename '[DevV1.Vehicle]',[DevV1.Vehicle_Original]\r\nEND\r\nGO\r\nCREATE TABLE [DevV1].[Vehicle](\r\n  [Id] VARCHAR(50) PRIMARY KEY NOT NULL\r\n,[No] VARCHAR(255) NOT NULL\r\n,[Make] VARCHAR(255) NOT NULL\r\n,[Model] VARCHAR(255) NOT NULL\r\n,[Json] VARCHAR(MAX)\r\n,[CreatedDate] SMALLDATETIME NOT NULL DEFAULT GETDATE()\r\n,[CreatedBy] VARCHAR(255) NULL\r\n,[ChangedDate] SMALLDATETIME NOT NULL DEFAULT GETDATE()\r\n,[ChangedBy] VARCHAR(255) NULL\r\n)\r\n",
    "MigrationCode": "//migrate)\r\n                var readSql = \"SELECT [Id],[Json] FROM [DevV1].[Vehicle_Original]\";\r\n                var builder = new Builder { EntityDefinition = item, Name = item.Name };\r\n                builder.Initialize();\r\n\r\n                using (var cmd = new SqlCommand(readSql, conn))\r\n                {\r\n                    using (var reader = await cmd.ExecuteReaderAsync())\r\n                    {\r\n                        while (reader.Read())\r\n                        {\r\n                            var id = reader.GetString(0);\r\n                            var json = reader.GetString(1);\r\n\r\n                            var setting = new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.All };\r\n                            var ent = JsonConvert.DeserializeObject<Vehicle>(json, setting);\r\n                            ent.Id = id;\r\n                            //\r\n                            await builder.InsertAsync(ent);\r\n                        }\r\n\r\n                    }\r\n                }",
    "EntityDefinition": {
      "$type": "Bespoke.Sph.Domain.EntityDefinition, domain.sph",
      "CodeNamespace": "Bespoke.DevV1_vehicle.Domain",
      "MemberCollection": {
        "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.Member, domain.sph]], domain.sph",
        "$values": [
          {
            "$type": "Bespoke.Sph.Domain.Member, domain.sph",
            "FullName": "No",
            "MemberCollection": {
              "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.Member, domain.sph]], domain.sph",
              "$values": []
            },
            "FieldPermissionCollection": {
              "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.FieldPermission, domain.sph]], domain.sph",
              "$values": []
            },
            "Name": "No",
            "TypeName": "System.String, mscorlib",
            "IsNullable": false,
            "IsNotIndexed": false,
            "IsAnalyzed": false,
            "IsFilterable": true,
            "IsExcludeInAll": false,
            "Boost": 0,
            "DefaultValue": null,
            "WebId": "f647c683-1179-463a-c0f1-91a429022b60"
          },
          {
            "$type": "Bespoke.Sph.Domain.Member, domain.sph",
            "FullName": "Make",
            "MemberCollection": {
              "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.Member, domain.sph]], domain.sph",
              "$values": []
            },
            "FieldPermissionCollection": {
              "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.FieldPermission, domain.sph]], domain.sph",
              "$values": []
            },
            "Name": "Make",
            "TypeName": "System.String, mscorlib",
            "IsNullable": false,
            "IsNotIndexed": false,
            "IsAnalyzed": false,
            "IsFilterable": true,
            "IsExcludeInAll": false,
            "Boost": 0,
            "DefaultValue": null,
            "WebId": "118e3032-afe2-4652-8cfe-e6e9e08bcfc7"
          },
          {
            "$type": "Bespoke.Sph.Domain.Member, domain.sph",
            "FullName": "Model",
            "MemberCollection": {
              "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.Member, domain.sph]], domain.sph",
              "$values": []
            },
            "FieldPermissionCollection": {
              "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.FieldPermission, domain.sph]], domain.sph",
              "$values": []
            },
            "Name": "Model",
            "TypeName": "System.String, mscorlib",
            "IsNullable": false,
            "IsNotIndexed": false,
            "IsAnalyzed": false,
            "IsFilterable": true,
            "IsExcludeInAll": false,
            "Boost": 0,
            "DefaultValue": null,
            "WebId": "ea1bdbe6-4e51-4d43-fd76-33203282cfe4"
          },
          {
            "$type": "Bespoke.Sph.Domain.Member, domain.sph",
            "FullName": null,
            "MemberCollection": {
              "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.Member, domain.sph]], domain.sph",
              "$values": []
            },
            "FieldPermissionCollection": {
              "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.FieldPermission, domain.sph]], domain.sph",
              "$values": []
            },
            "Name": "Category",
            "TypeName": "System.String, mscorlib",
            "IsNullable": false,
            "IsNotIndexed": false,
            "IsAnalyzed": false,
            "IsFilterable": false,
            "IsExcludeInAll": false,
            "Boost": 0,
            "DefaultValue": null,
            "WebId": "21031be6-c237-49bc-c33a-3a572057e948"
          },
          {
            "$type": "Bespoke.Sph.Domain.Member, domain.sph",
            "FullName": null,
            "MemberCollection": {
              "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.Member, domain.sph]], domain.sph",
              "$values": []
            },
            "FieldPermissionCollection": {
              "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.FieldPermission, domain.sph]], domain.sph",
              "$values": []
            },
            "Name": "ModelYear",
            "TypeName": "System.Int32, mscorlib",
            "IsNullable": false,
            "IsNotIndexed": false,
            "IsAnalyzed": false,
            "IsFilterable": false,
            "IsExcludeInAll": false,
            "Boost": 0,
            "DefaultValue": null,
            "WebId": "a0492f7a-1667-4786-fe6d-618bb04afff7"
          }
        ]
      },
      "BusinessRuleCollection": {
        "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.BusinessRule, domain.sph]], domain.sph",
        "$values": []
      },
      "EntityOperationCollection": {
        "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.EntityOperation, domain.sph]], domain.sph",
        "$values": []
      },
      "AuthorizedRoleCollection": {
        "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[System.String, mscorlib]], domain.sph",
        "$values": []
      },
      "Performer": {
        "$type": "Bespoke.Sph.Domain.Performer, domain.sph",
        "UserProperty": "",
        "Value": "",
        "IsPublic": true,
        "WebId": null
      },
      "Name": "Vehicle",
      "Plural": "Vehicles",
      "IconStoreId": "dc679429-aa82-46f6-bfa0-d3f757fb7d4f",
      "IconClass": "fa fa-anchor",
      "RecordName": "No",
      "IsPublished": true,
      "IsShowOnNavigationBar": false,
      "CreatedBy": "admin",
      "Id": "vehicle",
      "CreatedDate": "2015-02-12T17:07:33.3125395+08:00",
      "ChangedBy": "admin",
      "ChangedDate": "2015-02-12T17:14:03.2860947+08:00",
      "WebId": "9925a1a3-580f-43b0-c6c9-11d206b9b2cf"
    }
  },
  "Id": 13,
  "Exception": null,
  "Status": "RanToCompletion",
  "IsCanceled": false,
  "IsCompleted": true,
  "CreationOptions": "None",
  "AsyncState": null,
  "IsFaulted": false
}