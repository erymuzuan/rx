{
  "$type": "Bespoke.Sph.Domain.WorkflowDefinition, domain.sph",
  "ActivityCollection": {
    "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.Activity, domain.sph]], domain.sph",
    "$values": [
      {
        "$type": "Bespoke.Sph.Domain.ExpressionActivity, domain.sph",
        "Expression": "this.GetAccountNoSql = $@\"SELECT c.[AccountNumber] FROM [Sales].[Customer] c\n  INNER JOIN [Person].[Person] p\n  ON c.PersonID = p.BusinessEntityID\n  WHERE p.[FirstName] = '{RxCustomer.FirstName}' AND p.[LastName] = '{RxCustomer.LastName}'\";",
        "IsAsync": false,
        "ExecutedCode": null,
        "ExecutingCode": null,
        "TypeName": "Expression",
        "WorkflowDesigner": {
          "$type": "Bespoke.Sph.Domain.WorkflowDesigner, domain.sph",
          "X": 111,
          "Y": 117,
          "WebId": null
        },
        "IsInitiator": true,
        "NextActivityWebId": "54408ba9-ea99-4d87-f944-c7191643b4cf",
        "Name": "SetSelectAccountNoSql",
        "TryScope": null,
        "CatchScope": null,
        "WebId": "21c2381f-cca3-4269-984c-eede6f3dc540"
      },
      {
        "$type": "Bespoke.Sph.Domain.UpdateEntityActivity, domain.sph",
        "Entity": "customer",
        "EntityIdPath": "RxCustomer.Id",
        "UseVariable": null,
        "IsUsingVariable": false,
        "PropertyMappingCollection": {
          "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.PropertyMapping, domain.sph]], domain.sph",
          "$values": [
            {
              "$type": "Bespoke.Sph.Domain.SimpleMapping, domain.sph",
              "Source": "AvAccountNo",
              "Destination": "AccountNo",
              "WebId": "41a704ed-6b62-4b9a-a8d4-6679764a6ad5"
            }
          ]
        },
        "IsAsync": false,
        "ExecutedCode": null,
        "ExecutingCode": null,
        "TypeName": "UpdateEntity",
        "WorkflowDesigner": {
          "$type": "Bespoke.Sph.Domain.WorkflowDesigner, domain.sph",
          "X": 112,
          "Y": 654,
          "WebId": null
        },
        "IsInitiator": false,
        "NextActivityWebId": "61afc54d-d61d-4d9e-be77-38372bdce742",
        "Name": "UpdateAccountNo",
        "TryScope": null,
        "CatchScope": null,
        "WebId": "96661f07-8b99-40b8-8ebb-bee9210bf4b0"
      },
      {
        "$type": "Bespoke.Sph.Domain.SendActivity, domain.sph",
        "PortType": null,
        "Adapter": "Bespoke.DevV1.Adapters.AdventureWorks.AdventureWorks",
        "Method": "UspUpdateRxIdAsync",
        "AdapterAssembly": "DevV1.AdventureWorks",
        "IsSynchronous": false,
        "ArgumentPath": "AvCustomer",
        "ReturnValuePath": null,
        "ExceptionFilterCollection": {
          "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.ExceptionFilter, domain.sph]], domain.sph",
          "$values": []
        },
        "InitializingCorrelationSetCollection": {
          "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[System.String, mscorlib]], domain.sph",
          "$values": []
        },
        "FollowingCorrelationSetCollection": {
          "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[System.String, mscorlib]], domain.sph",
          "$values": []
        },
        "IsAsync": false,
        "ExecutedCode": null,
        "ExecutingCode": null,
        "TypeName": "Send",
        "WorkflowDesigner": {
          "$type": "Bespoke.Sph.Domain.WorkflowDesigner, domain.sph",
          "X": 784,
          "Y": 688,
          "WebId": null
        },
        "IsInitiator": false,
        "NextActivityWebId": "79f2817d-9e7a-444b-d2aa-f4f788e96239",
        "Name": "UpdateRxId",
        "TryScope": null,
        "CatchScope": null,
        "WebId": "93958b8d-70e6-4303-f064-d34ac42ea863"
      },
      {
        "$type": "Bespoke.Sph.Domain.SendActivity, domain.sph",
        "PortType": null,
        "Adapter": "Bespoke.DevV1.Adapters.AdventureWorks.CustomerAdapter",
        "Method": "ExecuteScalarAsync",
        "AdapterAssembly": "DevV1.AdventureWorks",
        "IsSynchronous": false,
        "ArgumentPath": "GetAccountNoSql",
        "ReturnValuePath": "AvAccountNo",
        "ExceptionFilterCollection": {
          "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.ExceptionFilter, domain.sph]], domain.sph",
          "$values": []
        },
        "InitializingCorrelationSetCollection": {
          "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[System.String, mscorlib]], domain.sph",
          "$values": []
        },
        "FollowingCorrelationSetCollection": {
          "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[System.String, mscorlib]], domain.sph",
          "$values": []
        },
        "IsAsync": false,
        "ExecutedCode": null,
        "ExecutingCode": null,
        "TypeName": "Send",
        "WorkflowDesigner": {
          "$type": "Bespoke.Sph.Domain.WorkflowDesigner, domain.sph",
          "X": 112,
          "Y": 422,
          "WebId": null
        },
        "IsInitiator": false,
        "NextActivityWebId": "96661f07-8b99-40b8-8ebb-bee9210bf4b0",
        "Name": "GetAwAccountNo",
        "TryScope": null,
        "CatchScope": null,
        "WebId": "54408ba9-ea99-4d87-f944-c7191643b4cf"
      },
      {
        "$type": "Bespoke.Sph.Domain.EndActivity, domain.sph",
        "IsTerminating": false,
        "IsAsync": false,
        "ExecutedCode": null,
        "ExecutingCode": null,
        "TypeName": "End",
        "WorkflowDesigner": {
          "$type": "Bespoke.Sph.Domain.WorkflowDesigner, domain.sph",
          "X": 783,
          "Y": 864,
          "WebId": null
        },
        "IsInitiator": false,
        "NextActivityWebId": null,
        "Name": "End_4",
        "TryScope": null,
        "CatchScope": null,
        "WebId": "79f2817d-9e7a-444b-d2aa-f4f788e96239"
      },
      {
        "$type": "Bespoke.Sph.Domain.SendActivity, domain.sph",
        "PortType": null,
        "Adapter": "Bespoke.DevV1.Adapters.AdventureWorks.CustomerAdapter",
        "Method": "LoadOneAsync",
        "AdapterAssembly": "DevV1.AdventureWorks",
        "IsSynchronous": false,
        "ArgumentPath": "AwCustomerId",
        "ReturnValuePath": "AvCustomer",
        "ExceptionFilterCollection": {
          "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.ExceptionFilter, domain.sph]], domain.sph",
          "$values": []
        },
        "InitializingCorrelationSetCollection": {
          "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[System.String, mscorlib]], domain.sph",
          "$values": []
        },
        "FollowingCorrelationSetCollection": {
          "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[System.String, mscorlib]], domain.sph",
          "$values": []
        },
        "IsAsync": false,
        "ExecutedCode": null,
        "ExecutingCode": null,
        "TypeName": "Send",
        "WorkflowDesigner": {
          "$type": "Bespoke.Sph.Domain.WorkflowDesigner, domain.sph",
          "X": 784,
          "Y": 179,
          "WebId": null
        },
        "IsInitiator": false,
        "NextActivityWebId": "93958b8d-70e6-4303-f064-d34ac42ea863",
        "Name": "GetCustomer",
        "TryScope": null,
        "CatchScope": null,
        "WebId": "61afc54d-d61d-4d9e-be77-38372bdce742"
      }
    ]
  },
  "VariableDefinitionCollection": {
    "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.Variable, domain.sph]], domain.sph",
    "$values": [
      {
        "$type": "Bespoke.Sph.Domain.ClrTypeVariable, domain.sph",
        "Assembly": "",
        "CanInitiateWithDefaultConstructor": true,
        "Name": "RxCustomer",
        "TypeName": "Bespoke.DevV1.Customers.Domain.Customer, DevV1.Customer",
        "DefaultValue": "",
        "WebId": "e5081a4e-8d83-43c0-b2bc-4b8297d8bddc"
      },
      {
        "$type": "Bespoke.Sph.Domain.ClrTypeVariable, domain.sph",
        "Assembly": "",
        "CanInitiateWithDefaultConstructor": true,
        "Name": "AvCustomer",
        "TypeName": "Bespoke.DevV1.Adapters.AdventureWorks.Customer, DevV1.AdventureWorks",
        "DefaultValue": "",
        "WebId": "4bc0fe26-ea0a-43ad-a2f2-df04075a43e4"
      },
      {
        "$type": "Bespoke.Sph.Domain.SimpleVariable, domain.sph",
        "Name": "GetAccountNoSql",
        "TypeName": "System.String, mscorlib",
        "DefaultValue": "",
        "WebId": "a554419a-b42c-4d37-9127-b8c8f3243b3f"
      },
      {
        "$type": "Bespoke.Sph.Domain.SimpleVariable, domain.sph",
        "Name": "AvAccountNo",
        "TypeName": "System.String, mscorlib",
        "DefaultValue": "",
        "WebId": "1b32eeb8-e754-4c65-b16f-3ecb491a4ba5"
      },
      {
        "$type": "Bespoke.Sph.Domain.SimpleVariable, domain.sph",
        "Name": "AwCustomerId",
        "TypeName": "System.Int32, mscorlib",
        "DefaultValue": "",
        "WebId": "8683bd55-b9a3-47a9-cd31-f2d5fb38bd85"
      },
      {
        "$type": "Bespoke.Sph.Domain.ClrTypeVariable, domain.sph",
        "Assembly": "",
        "CanInitiateWithDefaultConstructor": false,
        "Name": "UpdateAdvRequest",
        "TypeName": "Bespoke.DevV1.Adapters.AdventureWorks.UspUpdateRxIdRequest, DevV1.AdventureWorks",
        "DefaultValue": "",
        "WebId": "07ddfacc-c68d-47cd-9951-0ea198bc0dca"
      }
    ]
  },
  "ReferencedAssemblyCollection": {
    "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.ReferencedAssembly, domain.sph]], domain.sph",
    "$values": [
      {
        "$type": "Bespoke.Sph.Domain.ReferencedAssembly, domain.sph",
        "Name": "DevV1.Customer",
        "FullName": "DevV1.Customer, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null",
        "Version": "0.0.0.0",
        "Location": "E:\\project\\work\\rx.v1\\source\\web\\web.sph\\bin\\DevV1.Customer.dll",
        "IsGac": false,
        "IsStrongName": false,
        "RuntimeVersion": "v4.0.30319",
        "WebId": null
      },
      {
        "$type": "Bespoke.Sph.Domain.ReferencedAssembly, domain.sph",
        "Name": "DevV1.AdventureWorks",
        "FullName": "DevV1.AdventureWorks, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null",
        "Version": "0.0.0.0",
        "Location": "E:\\project\\work\\rx.v1\\source\\web\\web.sph\\bin\\DevV1.AdventureWorks.dll",
        "IsGac": false,
        "IsStrongName": false,
        "RuntimeVersion": "v4.0.30319",
        "WebId": null
      }
    ]
  },
  "CorrelationSetCollection": {
    "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.CorrelationSet, domain.sph]], domain.sph",
    "$values": []
  },
  "CorrelationTypeCollection": {
    "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.CorrelationType, domain.sph]], domain.sph",
    "$values": []
  },
  "TryScopeCollection": {
    "$type": "Bespoke.Sph.Domain.ObjectCollection`1[[Bespoke.Sph.Domain.TryScope, domain.sph]], domain.sph",
    "$values": []
  },
  "Name": "Get new customer account no from AdventureWorks",
  "Note": "",
  "IsActive": true,
  "SchemaStoreId": "6c5ed9bb-4520-4f1e-93ac-9a1f9846a7d4",
  "Version": 1,
  "WorkflowTypeName": "GetNewCustomerAccountNoFromAdventureWorksWorkflow",
  "CreatedBy": "admin",
  "Id": "get-new-customer-account-no-from-adventure-works",
  "CreatedDate": "2016-09-25T08:57:10.0243214+08:00",
  "ChangedBy": "admin",
  "ChangedDate": "2016-09-25T12:09:38.2132615+08:00",
  "WebId": "7cd75e70-9b83-4357-baae-26a77d11b73f"
}