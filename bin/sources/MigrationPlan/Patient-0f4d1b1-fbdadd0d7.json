{
  "PreviousCommitId": "0f4d1b1",
  "CurrentCommitId": "fbdadd0d7",
  "DeployedDateTime": "2017-08-14T08:05:00",
  "ChangeCollection": [
    {
      "WebId": "8cd9193-40eb-4555-8110-6f04c7d6209a",
      "Name": "Mrn",
      "Action": null,
      "NewPath": "$.Mrn",
      "OldPath": "$.Mrn",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "16d2daae-ea30-4ea4-b125-a426014d8422",
      "Name": "FullName",
      "Action": null,
      "NewPath": "$.FullName",
      "OldPath": "$.FullName",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "846da964-0c28-440a-926d-e08293392892",
      "Name": "Dob",
      "Action": null,
      "NewPath": "$.Dob",
      "OldPath": "$.Dob",
      "OldType": "DateTime",
      "NewType": "DateTime",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "735865c9-2a2a-47fa-96cc-9ca12eab432d",
      "Name": "Gender",
      "Action": null,
      "NewPath": "$.Gender",
      "OldPath": "$.Gender",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "25e424ca-090e-4572-860d-225fc188448e",
      "Name": "Religion",
      "Action": null,
      "NewPath": "$.Religion",
      "OldPath": "$.Religion",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "7f16952d-f2d3-4553-8f89-d6b8447c510f",
      "Name": "Race",
      "Action": null,
      "NewPath": "$.Race",
      "OldPath": "$.Race",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "a23f7302-b927-45da-8724-c992d20302ea",
      "Name": "RegisteredDate",
      "Action": null,
      "NewPath": "$.RegisteredDate",
      "OldPath": "$.RegisteredDate",
      "OldType": "DateTime",
      "NewType": "DateTime",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "8a54ac46-286e-4e75-bf1a-274666dcffa0",
      "Name": "IdentificationNo",
      "Action": null,
      "NewPath": "$.IdentificationNo",
      "OldPath": "$.IdentificationNo",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "40cad2f8-1345-49a9-b210-01e8ec3c641f",
      "Name": "PassportNo",
      "Action": null,
      "NewPath": "$.PassportNo",
      "OldPath": "$.PassportNo",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "d0581eed-a29e-4723-ba15-85ae6cfe6712",
      "Name": "Nationality",
      "Action": null,
      "NewPath": "$.Nationality",
      "OldPath": "$.Nationality",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "d5f801b0-d07d-4bd3-b0a9-451ea8c50a2f",
      "Name": "ContactPerson.FullName",
      "Action": "ParentChanged",
      "NewPath": "$.ContactPerson.FirstName",
      "OldPath": "$.NextOfKin.FullName",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": "public string GetValue(string source)\r\n{\r\n    var json = Newtonsoft.Json.Linq.JObject.Parse(source);\r\n    var fullName = json.SelectToken(\"$.NextOfKin.FullName\").Value<string>();\r\n    var race = json.SelectToken(\"$.Race\").Value<string>();\r\n    var names = fullName.Split(new []{\" \"}, StringSplitOptions.RemoveEmptyEntries)\r\n    \t\t\t.Where(x => x != \"spouse\")\r\n    \t\t\t.ToArray();\r\n    if(race == \"Chinese\")\r\n    \treturn string.Join(\" \", names.Skip(1).Take(2).ToArray());\r\n    \r\n    return names.FirstOrDefault();    \r\n}",
      "MigrationStrategy": "Script"
    },
    {
      "WebId": "db2f4611-86d3-4aad-9458-c5d30d770f47",
      "Name": "ContactPerson.Relationship",
      "Action": "ParentChanged",
      "NewPath": "$.ContactPerson.Relationship",
      "OldPath": "$.NextOfKin.Relationship",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Direct"
    },
    {
      "WebId": "6a4f773a-261b-41bf-b9e2-329ed5ec064b",
      "Name": "ContactPerson.MobilePhone",
      "Action": "ParentChanged",
      "NewPath": "$.ContactPerson.MobilePhone",
      "OldPath": "$.NextOfKin.MobilePhone",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Direct"
    },
    {
      "WebId": "e815f1c0-cc63-44df-a5ce-fa1a0879da97",
      "Name": "ContactPerson.Email",
      "Action": "ParentChanged",
      "NewPath": "$.ContactPerson.Email",
      "OldPath": "$.NextOfKin.Email",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Direct"
    },
    {
      "WebId": "583f40e6-986b-453c-a84c-88e3f4eeb37d",
      "Name": "ContactPerson.Telephone",
      "Action": "ParentChanged",
      "NewPath": "$.ContactPerson.Telephone",
      "OldPath": "$.NextOfKin.Telephone",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Direct"
    },
    {
      "WebId": "617bfbd2-36ed-4ad6-b75e-9e37f346c5c2",
      "Name": "ContactPerson.LastName",
      "Action": "Added",
      "NewPath": "$.ContactPerson.LastName",
      "OldPath": null,
      "OldType": null,
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": "public string GetValue(string source)\r\n{\r\n    var json = Newtonsoft.Json.Linq.JObject.Parse(source);\r\n    var fullName = json.SelectToken(\"$.NextOfKin.FullName\").Value<string>();\r\n    var race = json.SelectToken(\"$.Race\").Value<string>();\r\n    var names = fullName.Split(new []{\" \"}, StringSplitOptions.RemoveEmptyEntries)\r\n    \t\t\t.Where(x => x != \"spouse\")\r\n    \t\t\t.ToArray();\r\n    if(race == \"Chinese\")\r\n    \treturn names.FirstOrDefault();  \r\n        \r\n    return names.LastOrDefault();\r\n    \r\n}",
      "MigrationStrategy": "Script"
    },
    {
      "WebId": "c1b8c2a6-a5bc-4ce0-bb0f-020261f4d460",
      "Name": "ContactPerson",
      "Action": "NameChanged",
      "NewPath": "$.ContactPerson",
      "OldPath": "$.NextOfKin",
      "OldType": null,
      "NewType": null,
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Direct"
    },
    {
      "WebId": "d6a20639-6a60-4cb7-a3c4-eec37c521bf5",
      "Name": "HomeAddress",
      "Action": null,
      "NewPath": "$.HomeAddress",
      "OldPath": "$.HomeAddress",
      "OldType": null,
      "NewType": null,
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "66a6e80c-dd5e-4505-8731-09069afeeba5",
      "Name": "Occupation",
      "Action": null,
      "NewPath": "$.Occupation",
      "OldPath": "$.Occupation",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "1b1c8004-db3e-461c-bebd-e61eefcf64ac",
      "Name": "Status",
      "Action": null,
      "NewPath": "$.Status",
      "OldPath": "$.Status",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "0d42f390-a2e9-4c11-809d-ab46de6df9c1",
      "Name": "Age",
      "Action": null,
      "NewPath": "$.Age",
      "OldPath": "$.Age",
      "OldType": "int",
      "NewType": "int",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "76c418fa-88c5-4d5f-9f5e-e05984c58818",
      "Name": "Income",
      "Action": null,
      "NewPath": "$.Income",
      "OldPath": "$.Income",
      "OldType": "decimal",
      "NewType": "decimal",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "4d9f6fa6-a355-4900-ae58-1740c9f88cf3",
      "Name": "Empty",
      "Action": null,
      "NewPath": "$.Empty",
      "OldPath": "$.Empty",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "892023c1-b8af-496f-a96d-50991e682d16",
      "Name": "Spouse",
      "Action": null,
      "NewPath": "$.Spouse",
      "OldPath": "$.Spouse",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "8adc580b-efb3-46d8-b40b-f4828b81398d",
      "Name": "MaritalStatus",
      "Action": null,
      "NewPath": "$.MaritalStatus",
      "OldPath": "$.MaritalStatus",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "ea2dda9c-1e1a-476c-a0af-61870b979b4e",
      "Name": "OldIC",
      "Action": null,
      "NewPath": "$.OldIC",
      "OldPath": "$.OldIC",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "690041b2-8a33-4029-a096-ceda4f966c43",
      "Name": "DeathDate",
      "Action": null,
      "NewPath": "$.DeathDate",
      "OldPath": "$.DeathDate",
      "OldType": "DateTime",
      "NewType": "DateTime",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "889b7898-13c2-463c-bde4-f55e46df63ff",
      "Name": "OccupationStatus",
      "Action": null,
      "NewPath": "$.OccupationStatus",
      "OldPath": "$.OccupationStatus",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "a99dac64-47d6-46a0-f048-02f3f0c3a460",
      "Name": "Wife",
      "Action": null,
      "NewPath": "$.Wife",
      "OldPath": "$.Wife",
      "OldType": null,
      "NewType": null,
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    },
    {
      "WebId": "1199b1ae-f418-4083-fa2f-1973a46a5155",
      "Name": "Ward",
      "Action": null,
      "NewPath": "$.Ward",
      "OldPath": "$.Ward",
      "OldType": "string",
      "NewType": "string",
      "IsEmpty": false,
      "MigrationScript": null,
      "MigrationStrategy": "Ignore"
    }
  ]
}